\doxysection{srsran\+::dl\+\_\+harq\+\_\+process Class Reference}
\hypertarget{classsrsran_1_1dl__harq__process}{}\label{classsrsran_1_1dl__harq__process}\index{srsran::dl\_harq\_process@{srsran::dl\_harq\_process}}
Inheritance diagram for srsran\+::dl\+\_\+harq\+\_\+process\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classsrsran_1_1dl__harq__process}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsrsran_1_1dl__harq__process_1_1alloc__params}{alloc\+\_\+params}}
\begin{DoxyCompactList}\small\item\em Parameters relative to the last used PDSCH PDU that get stored in the HARQ process for future reuse. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structsrsran_1_1dl__harq__process_1_1dl__ack__info__result}{dl\+\_\+ack\+\_\+info\+\_\+result}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1dl__harq__process_ac54b21b50c80ee2addc6624668107cb1}\label{classsrsran_1_1dl__harq__process_ac54b21b50c80ee2addc6624668107cb1} 
enum class \mbox{\hyperlink{classsrsran_1_1dl__harq__process_ac54b21b50c80ee2addc6624668107cb1}{status\+\_\+update}} \{ {\bfseries acked}
, {\bfseries nacked}
, {\bfseries no\+\_\+update}
, {\bfseries error}
 \}
\begin{DoxyCompactList}\small\item\em Update to the HARQ process state after a HARQ-\/\+ACK is received. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1dl__harq__process_aff5dfd52e5f8f7eeeeb0c513f6f01a8d}\label{classsrsran_1_1dl__harq__process_aff5dfd52e5f8f7eeeeb0c513f6f01a8d} 
enum class \mbox{\hyperlink{classsrsran_1_1dl__harq__process_aff5dfd52e5f8f7eeeeb0c513f6f01a8d}{tb\+\_\+tx\+\_\+request}} \{ {\bfseries newtx}
, {\bfseries retx}
, {\bfseries disabled}
 \}
\begin{DoxyCompactList}\small\item\em Called on every new TB transmission/retransmission, when 2 TBs are used. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1dl__harq__process_a84adccf19cb19a9a41622c6b6c7761ef}\label{classsrsran_1_1dl__harq__process_a84adccf19cb19a9a41622c6b6c7761ef} 
bool {\bfseries empty} () const
\begin{DoxyCompactList}\small\item\em Checks whether the HARQ process has no TBs currently active. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1dl__harq__process_a7ccc8dee176194af632872aa2732dd07}\label{classsrsran_1_1dl__harq__process_a7ccc8dee176194af632872aa2732dd07} 
bool {\bfseries has\+\_\+pending\+\_\+retx} () const
\begin{DoxyCompactList}\small\item\em Checks whether there is at least one TB with pending new\+\_\+retx. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1dl__harq__process_a7c57e5628a3131cf3896b61696eb908b}\label{classsrsran_1_1dl__harq__process_a7c57e5628a3131cf3896b61696eb908b} 
bool {\bfseries is\+\_\+waiting\+\_\+ack} () const
\begin{DoxyCompactList}\small\item\em Checks whether the UL HARQ process is busy but waiting for an ACK. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1dl__harq__process_ad4d77ca89e13c47dfeb6fca29fbada75}\label{classsrsran_1_1dl__harq__process_ad4d77ca89e13c47dfeb6fca29fbada75} 
const \mbox{\hyperlink{structsrsran_1_1dl__harq__process_1_1alloc__params}{alloc\+\_\+params}} \& {\bfseries last\+\_\+alloc\+\_\+params} () const
\begin{DoxyCompactList}\small\item\em Getter of the PDCCH/\+PDSCH parameters used in the last Tx. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1dl__harq__process_a302fa3ad6546b57c27fd7fe91402d5e8}\label{classsrsran_1_1dl__harq__process_a302fa3ad6546b57c27fd7fe91402d5e8} 
void {\bfseries new\+\_\+tx} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} pdsch\+\_\+slot, unsigned k1, unsigned max\+\_\+harq\+\_\+nof\+\_\+retxs, uint8\+\_\+t harq\+\_\+bit\+\_\+idx, \mbox{\hyperlink{namespacesrsran_adaab0f63f541585966388e78a87120b4}{cqi\+\_\+value}} cqi, unsigned nof\+\_\+layers)
\begin{DoxyCompactList}\small\item\em Called on every new TB transmission, when only one TB is active. It marks this HARQ process as busy and stores respective TB information. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1dl__harq__process_af84b7d7c563830eca885c16530c18c96}\label{classsrsran_1_1dl__harq__process_af84b7d7c563830eca885c16530c18c96} 
void {\bfseries new\+\_\+retx} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} pdsch\+\_\+slot, unsigned k1, uint8\+\_\+t harq\+\_\+bit\+\_\+idx)
\begin{DoxyCompactList}\small\item\em Called on every TB retransmission, when only one TB is active. This function assumes that the HARQ TB is in pending new\+\_\+retx state. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1dl__harq__process_abe6e3c4c4a970459a49396642d1b52e7}\label{classsrsran_1_1dl__harq__process_abe6e3c4c4a970459a49396642d1b52e7} 
void {\bfseries tx\+\_\+2\+\_\+tb} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} pdsch\+\_\+slot, unsigned k1, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ const \mbox{\hyperlink{classsrsran_1_1dl__harq__process_aff5dfd52e5f8f7eeeeb0c513f6f01a8d}{tb\+\_\+tx\+\_\+request}} $>$ tb\+\_\+tx\+\_\+req, unsigned max\+\_\+harq\+\_\+nof\+\_\+retxs, uint8\+\_\+t harq\+\_\+bit\+\_\+idx)
\item 
\mbox{\hyperlink{classsrsran_1_1dl__harq__process_ac54b21b50c80ee2addc6624668107cb1}{status\+\_\+update}} \mbox{\hyperlink{classsrsran_1_1dl__harq__process_acea910a4a29c4e108e0fd97494022b80}{ack\+\_\+info}} (uint32\+\_\+t tb\+\_\+idx, \mbox{\hyperlink{namespacesrsran_ad15571815e2fd31523e75ed1b2b5012a}{mac\+\_\+harq\+\_\+ack\+\_\+report\+\_\+status}} ack, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ float $>$ pucch\+\_\+snr)
\begin{DoxyCompactList}\small\item\em Updates the ACK state of the HARQ process. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1dl__harq__process_ad9c66e3c42b93dac12eaf59f9f6a86b6}\label{classsrsran_1_1dl__harq__process_ad9c66e3c42b93dac12eaf59f9f6a86b6} 
void {\bfseries save\+\_\+alloc\+\_\+params} (\mbox{\hyperlink{namespacesrsran_ac0a93d3e0aa8452e32308d5038bcad49}{dci\+\_\+dl\+\_\+rnti\+\_\+config\+\_\+type}} dci\+\_\+cfg\+\_\+type, const \mbox{\hyperlink{structsrsran_1_1pdsch__information}{pdsch\+\_\+information}} \&pdsch)
\begin{DoxyCompactList}\small\item\em Stores grant parameters that are associated with the HARQ allocation (e.\+g. DCI format, PRBs, MCS) so that they can be later fetched and optionally reused. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1dl__harq__process_a305bbec13917f962d566f49d21097333}\label{classsrsran_1_1dl__harq__process_a305bbec13917f962d566f49d21097333} 
void {\bfseries increment\+\_\+pucch\+\_\+counter} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1detail_1_1harq__process}{srsran\+::detail\+::harq\+\_\+process$<$ true $>$}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1detail_1_1harq__process_a32e89cddebce66f1314ae6ef5d2f86db}{harq\+\_\+process}} (\mbox{\hyperlink{namespacesrsran_a5afde872b5d597c47d3674cc7f86b19b}{harq\+\_\+id\+\_\+t}} h\+\_\+id, \mbox{\hyperlink{classsrsran_1_1harq__logger}{harq\+\_\+logger}} \&logger\+\_\+, \mbox{\hyperlink{classsrsran_1_1ue__harq__timeout__notifier}{ue\+\_\+harq\+\_\+timeout\+\_\+notifier}} timeout\+\_\+notif=\{\}, unsigned max\+\_\+ack\+\_\+wait\+\_\+in\+\_\+slots\+\_\+=DEFAULT\+\_\+\+ACK\+\_\+\+TIMEOUT\+\_\+\+SLOTS)
\begin{DoxyCompactList}\small\item\em HARQ process constructor. \end{DoxyCompactList}\item 
void {\bfseries slot\+\_\+indication} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} slot\+\_\+tx)
\begin{DoxyCompactList}\small\item\em Indicate the beginning of a new slot. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} {\bfseries slot\+\_\+tx} () const
\begin{DoxyCompactList}\small\item\em Last slot when a SCH grant was scheduled for this HARQ process. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} {\bfseries slot\+\_\+ack} () const
\begin{DoxyCompactList}\small\item\em Slot when the last SCH grant of this HARQ process is supposed to be ACKed. \end{DoxyCompactList}\item 
bool {\bfseries empty} (unsigned tb\+\_\+idx) const
\begin{DoxyCompactList}\small\item\em Checks whether a specified TB is empty. \end{DoxyCompactList}\item 
bool {\bfseries has\+\_\+pending\+\_\+retx} (unsigned tb\+\_\+idx) const
\begin{DoxyCompactList}\small\item\em Checks whether specified TB has pending new\+\_\+retx. \end{DoxyCompactList}\item 
bool {\bfseries is\+\_\+waiting\+\_\+ack} (unsigned tb\+\_\+idx) const
\begin{DoxyCompactList}\small\item\em Checks whether specified TB is expecting an ACK. \end{DoxyCompactList}\item 
unsigned {\bfseries max\+\_\+nof\+\_\+harq\+\_\+retxs} (unsigned tb\+\_\+idx) const
\item 
const transport\+\_\+block \& {\bfseries tb} (unsigned tb\+\_\+idx) const
\begin{DoxyCompactList}\small\item\em Getter for TB parameters. \end{DoxyCompactList}\item 
void {\bfseries reset} ()
\begin{DoxyCompactList}\small\item\em Resets HARQ process state. \end{DoxyCompactList}\item 
void {\bfseries cancel\+\_\+harq\+\_\+retxs} (unsigned tb\+\_\+idx)
\begin{DoxyCompactList}\small\item\em Cancels the HARQ process by stopping retransmissions of the currently held TB. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} {\bfseries get\+\_\+slot\+\_\+ack\+\_\+timeout} () const
\begin{DoxyCompactList}\small\item\em Getter of the slot when the HARQ process will assume that the ACK/\+CRC went missing. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Public Attributes inherited from \mbox{\hyperlink{classsrsran_1_1detail_1_1harq__process}{srsran\+::detail\+::harq\+\_\+process$<$ true $>$}}}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{namespacesrsran_a5afde872b5d597c47d3674cc7f86b19b}{harq\+\_\+id\+\_\+t}} {\bfseries id}
\begin{DoxyCompactList}\small\item\em HARQ process id. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes inherited from \mbox{\hyperlink{classsrsran_1_1detail_1_1harq__process}{srsran\+::detail\+::harq\+\_\+process$<$ true $>$}}}
\begin{DoxyCompactItemize}
\item 
static constexpr unsigned {\bfseries DEFAULT\+\_\+\+ACK\+\_\+\+TIMEOUT\+\_\+\+SLOTS}
\begin{DoxyCompactList}\small\item\em Default timeout in slots after which the HARQ process assumes that the CRC/\+ACK went missing (implementation-\/defined). \end{DoxyCompactList}\item 
static constexpr unsigned {\bfseries SHORT\+\_\+\+ACK\+\_\+\+TIMEOUT\+\_\+\+DTX}
\item 
static constexpr size\+\_\+t {\bfseries MAX\+\_\+\+NOF\+\_\+\+TBS}
\begin{DoxyCompactList}\small\item\em Maximum number of Transport Blocks as per TS38.\+321, 5.\+3.\+2.\+1 and 5.\+4.\+2.\+1. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1detail_1_1harq__process}{srsran\+::detail\+::harq\+\_\+process$<$ true $>$}}}
\begin{DoxyCompactItemize}
\item 
void {\bfseries tx\+\_\+common} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} slot\+\_\+tx, \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} slot\+\_\+ack)
\item 
void {\bfseries new\+\_\+tx\+\_\+tb\+\_\+common} (unsigned tb\+\_\+idx, unsigned max\+\_\+nof\+\_\+harq\+\_\+retxs, uint8\+\_\+t harq\+\_\+bit\+\_\+idx)
\item 
void {\bfseries new\+\_\+retx\+\_\+tb\+\_\+common} (unsigned tb\+\_\+idx, uint8\+\_\+t harq\+\_\+bit\+\_\+idx)
\item 
bool {\bfseries ack\+\_\+info\+\_\+common} (uint32\+\_\+t tb\+\_\+idx, bool ack)
\begin{DoxyCompactList}\small\item\em Updates the ACK state of the TB of the HARQ process. \end{DoxyCompactList}\item 
void {\bfseries reset\+\_\+tb} (unsigned tb\+\_\+idx)
\begin{DoxyCompactList}\small\item\em Clear the contents of a specific TB of this HARQ process and resets it back to empty state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classsrsran_1_1detail_1_1harq__process}{srsran\+::detail\+::harq\+\_\+process$<$ true $>$}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1harq__logger}{harq\+\_\+logger}} \& {\bfseries logger}
\begin{DoxyCompactList}\small\item\em HARQ entity logger used by this HARQ process. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1ue__harq__timeout__notifier}{ue\+\_\+harq\+\_\+timeout\+\_\+notifier}} {\bfseries timeout\+\_\+notifier}
\begin{DoxyCompactList}\small\item\em Notifier used by this HARQ process when there is a timeout. \end{DoxyCompactList}\item 
const unsigned {\bfseries max\+\_\+ack\+\_\+wait\+\_\+in\+\_\+slots}
\begin{DoxyCompactList}\small\item\em Maximum value of time interval, in slots, before the HARQ process assumes that the ACK/\+CRC went missing. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} {\bfseries last\+\_\+slot\+\_\+ind}
\begin{DoxyCompactList}\small\item\em Last slot indication. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{classsrsran_1_1detail_1_1harq__process_a07dfe837dcacf644ac6f88837defc04f}{last\+\_\+slot\+\_\+tx}}
\item 
\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{classsrsran_1_1detail_1_1harq__process_afa6c1b681769339446023fd322ecbde8}{last\+\_\+slot\+\_\+ack}}
\item 
\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} {\bfseries slot\+\_\+ack\+\_\+timeout}
\begin{DoxyCompactList}\small\item\em Slot when the HARQ process will assume that the ACK/\+CRC went missing. \end{DoxyCompactList}\item 
std\+::array$<$ transport\+\_\+block, MAX\+\_\+\+NOF\+\_\+\+TBS $>$ {\bfseries tb\+\_\+array}
\end{DoxyCompactItemize}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1dl__harq__process_acea910a4a29c4e108e0fd97494022b80}\label{classsrsran_1_1dl__harq__process_acea910a4a29c4e108e0fd97494022b80} 
\index{srsran::dl\_harq\_process@{srsran::dl\_harq\_process}!ack\_info@{ack\_info}}
\index{ack\_info@{ack\_info}!srsran::dl\_harq\_process@{srsran::dl\_harq\_process}}
\doxysubsubsection{\texorpdfstring{ack\_info()}{ack\_info()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1dl__harq__process_ac54b21b50c80ee2addc6624668107cb1}{dl\+\_\+harq\+\_\+process\+::status\+\_\+update}} dl\+\_\+harq\+\_\+process\+::ack\+\_\+info (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{tb\+\_\+idx,  }\item[{\mbox{\hyperlink{namespacesrsran_ad15571815e2fd31523e75ed1b2b5012a}{mac\+\_\+harq\+\_\+ack\+\_\+report\+\_\+status}}}]{ack,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ float $>$}]{pucch\+\_\+snr }\end{DoxyParamCaption})}



Updates the ACK state of the HARQ process. 

\begin{DoxyReturn}{Returns}
The result of a HARQ receiving an HARQ-\/\+ACK bit. 
\end{DoxyReturn}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/ue\+\_\+scheduling/harq\+\_\+process.\+h\item 
lib/scheduler/ue\+\_\+scheduling/harq\+\_\+process.\+cpp\end{DoxyCompactItemize}
