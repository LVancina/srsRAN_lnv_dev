\doxysection{srslog\+::file\+\_\+sink Class Reference}
\hypertarget{classsrslog_1_1file__sink}{}\label{classsrslog_1_1file__sink}\index{srslog::file\_sink@{srslog::file\_sink}}


{\ttfamily \#include $<$file\+\_\+sink.\+h$>$}



Inheritance diagram for srslog\+::file\+\_\+sink\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=177pt]{df/da3/classsrslog_1_1file__sink__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srslog\+::file\+\_\+sink\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=177pt]{df/df0/classsrslog_1_1file__sink__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrslog_1_1file__sink_a8ebcba2afea7e653c0fb02431345a249}{file\+\_\+sink}} (std\+::string name, size\+\_\+t max\+\_\+size\+\_\+, \mbox{\hyperlink{classbool}{bool}} force\+\_\+flush\+\_\+, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrslog_1_1log__formatter}{log\+\_\+formatter}} $>$ f)
\item 
\Hypertarget{classsrslog_1_1file__sink_aebcfa6971a508303a428d1142fa00c31}\label{classsrslog_1_1file__sink_aebcfa6971a508303a428d1142fa00c31} 
{\bfseries file\+\_\+sink} (const \mbox{\hyperlink{classsrslog_1_1file__sink}{file\+\_\+sink}} \&other)=delete
\item 
\Hypertarget{classsrslog_1_1file__sink_ab7c64a2f64e006006c6dc6325f7563ab}\label{classsrslog_1_1file__sink_ab7c64a2f64e006006c6dc6325f7563ab} 
\mbox{\hyperlink{classsrslog_1_1file__sink}{file\+\_\+sink}} \& {\bfseries operator=} (const \mbox{\hyperlink{classsrslog_1_1file__sink}{file\+\_\+sink}} \&other)=delete
\item 
\mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{detail\+::error\+\_\+string}} \mbox{\hyperlink{classsrslog_1_1file__sink_aeef71c2286f25955ced7a64c3afa5ba1}{write}} (\mbox{\hyperlink{classsrslog_1_1detail_1_1memory__buffer}{detail\+::memory\+\_\+buffer}} buffer) override
\begin{DoxyCompactList}\small\item\em Writes the provided memory buffer into the sink. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{detail\+::error\+\_\+string}} \mbox{\hyperlink{classsrslog_1_1file__sink_a3393b7ae20a7557517ce70884f8fef07}{write\+\_\+error}} (\mbox{\hyperlink{classsrslog_1_1detail_1_1memory__buffer}{detail\+::memory\+\_\+buffer}} input\+\_\+buffer) override
\begin{DoxyCompactList}\small\item\em Writes as an error the provided memory buffer into the sink. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{detail\+::error\+\_\+string}} \mbox{\hyperlink{classsrslog_1_1file__sink_aa22d9ba36bca69a2d6090cd22969fdb0}{flush}} () override
\begin{DoxyCompactList}\small\item\em Flushes any buffered contents to the backing store. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrslog_1_1sink}{srslog\+::sink}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrslog_1_1sink_a67b8e754a3c8f4e1668b7d9305fdbb58}{sink}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrslog_1_1log__formatter}{log\+\_\+formatter}} $>$ f)
\item 
\mbox{\hyperlink{classsrslog_1_1log__formatter}{log\+\_\+formatter}} \& \mbox{\hyperlink{classsrslog_1_1sink_ace34bef8911e2766143a6e79e36e687b}{get\+\_\+formatter}} ()
\begin{DoxyCompactList}\small\item\em Returns the formatter used by this sink. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{classsrslog_1_1log__formatter}{log\+\_\+formatter}} \& \mbox{\hyperlink{classsrslog_1_1sink_aae43c1cb1aa24e9ae952b7ea18584fd3}{get\+\_\+formatter}} () const
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} \mbox{\hyperlink{classsrslog_1_1file__sink_a6443858b024ce99d36b7b31eb3783682}{get\+\_\+file\+\_\+index}} () const
\begin{DoxyCompactList}\small\item\em Returns the current file index. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This sink implementation writes to files. Includes the optional feature of file rotation\+: a new file is created when file size exceeds an established threshold. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrslog_1_1file__sink_a8ebcba2afea7e653c0fb02431345a249}\label{classsrslog_1_1file__sink_a8ebcba2afea7e653c0fb02431345a249} 
\index{srslog::file\_sink@{srslog::file\_sink}!file\_sink@{file\_sink}}
\index{file\_sink@{file\_sink}!srslog::file\_sink@{srslog::file\_sink}}
\doxysubsubsection{\texorpdfstring{file\_sink()}{file\_sink()}}
{\footnotesize\ttfamily srslog\+::file\+\_\+sink\+::file\+\_\+sink (\begin{DoxyParamCaption}\item[{std\+::string}]{name,  }\item[{size\+\_\+t}]{max\+\_\+size\+\_\+,  }\item[{\mbox{\hyperlink{classbool}{bool}}}]{force\+\_\+flush\+\_\+,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrslog_1_1log__formatter}{log\+\_\+formatter}} $>$}]{f }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00037\ \ \ \ \ sink(std::move(f)),}
\DoxyCodeLine{00038\ \ \ \ \ max\_size((max\_size\_\ ==\ 0)\ ?\ 0\ :\ std::\mbox{\hyperlink{namespacesrsran_a2918c0347dde854fce1aaebb70a16c33}{max}}<size\_t>(max\_size\_,\ 4\ *\ 1024)),}
\DoxyCodeLine{00039\ \ \ \ \ force\_flush(force\_flush\_),}
\DoxyCodeLine{00040\ \ \ \ \ base\_filename(std::move(name))}
\DoxyCodeLine{00041\ \ \ \{}
\DoxyCodeLine{00042\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrslog_1_1file__sink_aa22d9ba36bca69a2d6090cd22969fdb0}\label{classsrslog_1_1file__sink_aa22d9ba36bca69a2d6090cd22969fdb0} 
\index{srslog::file\_sink@{srslog::file\_sink}!flush@{flush}}
\index{flush@{flush}!srslog::file\_sink@{srslog::file\_sink}}
\doxysubsubsection{\texorpdfstring{flush()}{flush()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{detail\+::error\+\_\+string}} srslog\+::file\+\_\+sink\+::flush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Flushes any buffered contents to the backing store. 



Implements \mbox{\hyperlink{classsrslog_1_1sink_a6f32149349a60fcf5c6ee68174ac5aa5}{srslog\+::sink}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00076\ \{\ \textcolor{keywordflow}{return}\ handler.\mbox{\hyperlink{classsrslog_1_1file__utils_1_1file_a7cde6bc69c56d58f1015345451ba415e}{flush}}();\ \}}

\end{DoxyCode}
\Hypertarget{classsrslog_1_1file__sink_a6443858b024ce99d36b7b31eb3783682}\label{classsrslog_1_1file__sink_a6443858b024ce99d36b7b31eb3783682} 
\index{srslog::file\_sink@{srslog::file\_sink}!get\_file\_index@{get\_file\_index}}
\index{get\_file\_index@{get\_file\_index}!srslog::file\_sink@{srslog::file\_sink}}
\doxysubsubsection{\texorpdfstring{get\_file\_index()}{get\_file\_index()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} srslog\+::file\+\_\+sink\+::get\+\_\+file\+\_\+index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}



Returns the current file index. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00080\ \{\ \textcolor{keywordflow}{return}\ file\_index;\ \}}

\end{DoxyCode}
\Hypertarget{classsrslog_1_1file__sink_aeef71c2286f25955ced7a64c3afa5ba1}\label{classsrslog_1_1file__sink_aeef71c2286f25955ced7a64c3afa5ba1} 
\index{srslog::file\_sink@{srslog::file\_sink}!write@{write}}
\index{write@{write}!srslog::file\_sink@{srslog::file\_sink}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{detail\+::error\+\_\+string}} srslog\+::file\+\_\+sink\+::write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1memory__buffer}{detail\+::memory\+\_\+buffer}}}]{buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Writes the provided memory buffer into the sink. 



Implements \mbox{\hyperlink{classsrslog_1_1sink_ad88268d4cca4ef27ec7c4a95cda288b1}{srslog\+::sink}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00048\ \ \ \{}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{comment}{//\ Create\ a\ new\ file\ the\ first\ time\ we\ hit\ this\ method.}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_first\_write())\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ assert(!handler\ \&\&\ \textcolor{stringliteral}{"{}No\ handler\ should\ be\ created\ yet"{}});}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ err\_str\ =\ create\_file())\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ err\_str;}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00055\ \ \ \ \ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ Do\ not\ bother\ doing\ any\ work\ when\ the\ file\ was\ closed\ on\ a\ previous}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{comment}{//\ error.}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordflow}{if}\ (!handler)\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ err\_str\ =\ handle\_rotation(buffer.size()))\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ err\_str;}
\DoxyCodeLine{00065\ \ \ \ \ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{if}\ (force\_flush)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \mbox{\hyperlink{classsrslog_1_1file__sink_aa22d9ba36bca69a2d6090cd22969fdb0}{flush}}();}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{return}\ handler.\mbox{\hyperlink{classsrslog_1_1file__utils_1_1file_ad07253657cab84fb7e9daf133eca55ad}{write}}(buffer);}
\DoxyCodeLine{00072\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrslog_1_1file__sink_a3393b7ae20a7557517ce70884f8fef07}\label{classsrslog_1_1file__sink_a3393b7ae20a7557517ce70884f8fef07} 
\index{srslog::file\_sink@{srslog::file\_sink}!write\_error@{write\_error}}
\index{write\_error@{write\_error}!srslog::file\_sink@{srslog::file\_sink}}
\doxysubsubsection{\texorpdfstring{write\_error()}{write\_error()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{detail\+::error\+\_\+string}} srslog\+::file\+\_\+sink\+::write\+\_\+error (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1memory__buffer}{detail\+::memory\+\_\+buffer}}}]{buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Writes as an error the provided memory buffer into the sink. 



Reimplemented from \mbox{\hyperlink{classsrslog_1_1sink_acf4afffd3a90345c40b68ccae3c6b00d}{srslog\+::sink}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00074\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsrslog_1_1file__sink_aeef71c2286f25955ced7a64c3afa5ba1}{write}}(input\_buffer);\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/srslog/sinks/file\+\_\+sink.\+h\end{DoxyCompactItemize}
