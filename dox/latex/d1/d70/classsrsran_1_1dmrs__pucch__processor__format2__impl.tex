\doxysection{srsran\+::dmrs\+\_\+pucch\+\_\+processor\+\_\+format2\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1dmrs__pucch__processor__format2__impl}{}\label{classsrsran_1_1dmrs__pucch__processor__format2__impl}\index{srsran::dmrs\_pucch\_processor\_format2\_impl@{srsran::dmrs\_pucch\_processor\_format2\_impl}}


Generic implementation of a DM-\/\+RS channel estimator for PUCCH Format 2.  




{\ttfamily \#include $<$dmrs\+\_\+pucch\+\_\+processor\+\_\+format2\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::dmrs\+\_\+pucch\+\_\+processor\+\_\+format2\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d3/dca/classsrsran_1_1dmrs__pucch__processor__format2__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::dmrs\+\_\+pucch\+\_\+processor\+\_\+format2\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d0/d99/classsrsran_1_1dmrs__pucch__processor__format2__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1dmrs__pucch__processor__format2__impl_a538ca3ce2b7d0e961f743dc971b9be7c}\label{classsrsran_1_1dmrs__pucch__processor__format2__impl_a538ca3ce2b7d0e961f743dc971b9be7c} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{using}} {\bfseries layer\+\_\+dmrs\+\_\+pattern} = \mbox{\hyperlink{structsrsran_1_1port__channel__estimator_1_1layer__dmrs__pattern}{port\+\_\+channel\+\_\+estimator\+::layer\+\_\+dmrs\+\_\+pattern}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1dmrs__pucch__processor__format2__impl_add135e452c23deff9ec38b1f1e9cca89}{dmrs\+\_\+pucch\+\_\+processor\+\_\+format2\+\_\+impl}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pseudo__random__generator}{pseudo\+\_\+random\+\_\+generator}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prg\+\_\+}}, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1port__channel__estimator}{port\+\_\+channel\+\_\+estimator}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ch\+\_\+est\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1dmrs__pucch__processor__format2__impl_a72804a4798a6b7fb5579e779921e1d3c}{estimate}} (\mbox{\hyperlink{classsrsran_1_1channel__estimate}{channel\+\_\+estimate}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ce\+\_\+}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1resource__grid__reader}{resource\+\_\+grid\+\_\+reader}} \&grid, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1dmrs__pucch__processor_1_1config__t}{config\+\_\+t}} \&config) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Estimates the PUCCH propagation channel. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1dmrs__pucch__processor}{srsran\+::dmrs\+\_\+pucch\+\_\+processor}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}dmrs\+\_\+pucch\+\_\+processor} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Generic implementation of a DM-\/\+RS channel estimator for PUCCH Format 2. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1dmrs__pucch__processor__format2__impl_add135e452c23deff9ec38b1f1e9cca89}\label{classsrsran_1_1dmrs__pucch__processor__format2__impl_add135e452c23deff9ec38b1f1e9cca89} 
\index{srsran::dmrs\_pucch\_processor\_format2\_impl@{srsran::dmrs\_pucch\_processor\_format2\_impl}!dmrs\_pucch\_processor\_format2\_impl@{dmrs\_pucch\_processor\_format2\_impl}}
\index{dmrs\_pucch\_processor\_format2\_impl@{dmrs\_pucch\_processor\_format2\_impl}!srsran::dmrs\_pucch\_processor\_format2\_impl@{srsran::dmrs\_pucch\_processor\_format2\_impl}}
\doxysubsubsection{\texorpdfstring{dmrs\_pucch\_processor\_format2\_impl()}{dmrs\_pucch\_processor\_format2\_impl()}}
{\footnotesize\ttfamily srsran\+::dmrs\+\_\+pucch\+\_\+processor\+\_\+format2\+\_\+impl\+::dmrs\+\_\+pucch\+\_\+processor\+\_\+format2\+\_\+impl (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pseudo__random__generator}{pseudo\+\_\+random\+\_\+generator}} $>$}]{prg\+\_\+,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1port__channel__estimator}{port\+\_\+channel\+\_\+estimator}} $>$}]{ch\+\_\+est\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00040\ \ \ \ \ prg(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prg\_}})),\ ch\_estimator(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ch\_est\_}}))}
\DoxyCodeLine{00041\ \ \ \{}
\DoxyCodeLine{00042\ \ \ \ \ srsran\_assert(prg,\ \textcolor{stringliteral}{"{}Invalid\ pseudo\ random\ generator."{}});}
\DoxyCodeLine{00043\ \ \ \ \ srsran\_assert(ch\_estimator,\ \textcolor{stringliteral}{"{}Invalid\ port\ channel\ estimator."{}});}
\DoxyCodeLine{00044\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1dmrs__pucch__processor__format2__impl_a72804a4798a6b7fb5579e779921e1d3c}\label{classsrsran_1_1dmrs__pucch__processor__format2__impl_a72804a4798a6b7fb5579e779921e1d3c} 
\index{srsran::dmrs\_pucch\_processor\_format2\_impl@{srsran::dmrs\_pucch\_processor\_format2\_impl}!estimate@{estimate}}
\index{estimate@{estimate}!srsran::dmrs\_pucch\_processor\_format2\_impl@{srsran::dmrs\_pucch\_processor\_format2\_impl}}
\doxysubsubsection{\texorpdfstring{estimate()}{estimate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} dmrs\+\_\+pucch\+\_\+processor\+\_\+format2\+\_\+impl\+::estimate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1channel__estimate}{channel\+\_\+estimate}} \&}]{estimate,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1resource__grid__reader}{resource\+\_\+grid\+\_\+reader}} \&}]{grid,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1dmrs__pucch__processor_1_1config__t}{config\+\_\+t}} \&}]{config }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Estimates the PUCCH propagation channel. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em estimate} & Channel estimation results. \\
\hline
\mbox{\texttt{ in}}  & {\em grid} & Received resource grid. \\
\hline
\mbox{\texttt{ in}}  & {\em config} & PUCCH configuration parameters required for channel estimation. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
The {\ttfamily estimate} dimensions must be consistent with the \textbackslash{}grid dimensions. 
\end{DoxyNote}


Implements \mbox{\hyperlink{classsrsran_1_1dmrs__pucch__processor_a5281637aac2423cb8b6482d6c4da2acc}{srsran\+::dmrs\+\_\+pucch\+\_\+processor}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00089\ \{}
\DoxyCodeLine{00090\ \ \ srsran\_assert((!config.intra\_slot\_hopping\ ||\ (config.nof\_symbols\ >\ pucch\_constants::FORMAT2\_MIN\_NSYMB)),}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Frequency\ hopping\ requires\ \{\}\ OFDM\ symbols."{}},}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pucch\_constants::FORMAT2\_MAX\_NSYMB);}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \textcolor{keywordtype}{unsigned}\ nof\_rx\_ports\ =\ config.ports.size();}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \textcolor{comment}{//\ Prepare\ DM-\/RS\ symbol\ buffer\ dimensions.}}
\DoxyCodeLine{00097\ \ \ \mbox{\hyperlink{structsrsran_1_1re__measurement__dimensions}{re\_measurement\_dimensions}}\ dims;}
\DoxyCodeLine{00098\ \ \ dims.\mbox{\hyperlink{structsrsran_1_1re__measurement__dimensions_a31143253af3ece6dda12baf2215fb0a4}{nof\_subc}}\ \ \ \ =\ config.nof\_prb\ *\ NOF\_DMRS\_PER\_RB;}
\DoxyCodeLine{00099\ \ \ dims.\mbox{\hyperlink{structsrsran_1_1re__measurement__dimensions_a9a4cf9873dd84bff063a1d3be93a6fa8}{nof\_symbols}}\ =\ config.nof\_symbols;}
\DoxyCodeLine{00100\ \ \ dims.\mbox{\hyperlink{structsrsran_1_1re__measurement__dimensions_a05896c694fb9761035c09466a63ec7a6}{nof\_slices}}\ \ =\ pucch\_constants::MAX\_LAYERS;}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \textcolor{comment}{//\ Resize\ DM-\/RS\ symbol\ buffer.}}
\DoxyCodeLine{00103\ \ \ temp\_symbols.\mbox{\hyperlink{classsrsran_1_1detail_1_1re__measurement__tensor__base_a6a2bd1f886defc065f4d78a537005f42}{resize}}(dims);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symb\_start}}\ =\ config.start\_symbol\_index;}
\DoxyCodeLine{00106\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symb\_end}}\ \ \ =\ config.start\_symbol\_index\ +\ dims.\mbox{\hyperlink{structsrsran_1_1re__measurement__dimensions_a9a4cf9873dd84bff063a1d3be93a6fa8}{nof\_symbols}};}
\DoxyCodeLine{00107\ \ \ \textcolor{comment}{//\ For\ each\ symbol\ carrying\ DM-\/RS\ (up\ to\ 2\ symbols\ maximum).}}
\DoxyCodeLine{00108\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symb}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symb\_start}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_dmrs\_symb}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symb}}\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symb\_end}};\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symb}},\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_dmrs\_symb}})\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{comment}{//\ Generate\ sequence.}}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ prb\_start\ =}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ ((\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symb}}\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symb\_start}})\ \&\&\ (config.intra\_slot\_hopping))\ ?\ config.second\_hop\_prb\ :\ config.starting\_prb;}
\DoxyCodeLine{00112\ \ \ \ \ generate\_sequence(temp\_symbols.\mbox{\hyperlink{classsrsran_1_1detail_1_1re__measurement__tensor__base_aa71a0bbdafc4283604690428232619ea}{get\_symbol}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_dmrs\_symb}},\ 0),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symb}},\ prb\_start,\ config);}
\DoxyCodeLine{00113\ \ \ \}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \textcolor{comment}{//\ Prepare\ channel\ estimator\ configuration.}}
\DoxyCodeLine{00116\ \ \ \mbox{\hyperlink{structsrsran_1_1port__channel__estimator_1_1configuration}{port\_channel\_estimator::configuration}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{est\_cfg}};}
\DoxyCodeLine{00117\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{est\_cfg}}.\mbox{\hyperlink{structsrsran_1_1port__channel__estimator_1_1configuration_a216bdf143e0d8bd400972fcbf8888e56}{scs}}\ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a2e4c9b3ea403617006756dfa03632b0f}{to\_subcarrier\_spacing}}(config.slot.numerology());}
\DoxyCodeLine{00118\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{est\_cfg}}.cp\ \ \ \ \ \ \ \ \ \ \ =\ config.cp;}
\DoxyCodeLine{00119\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{est\_cfg}}.first\_symbol\ =\ config.start\_symbol\_index;}
\DoxyCodeLine{00120\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{est\_cfg}}.nof\_symbols\ \ =\ config.nof\_symbols;}
\DoxyCodeLine{00121\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{est\_cfg}}.dmrs\_pattern\ =\ \{generate\_dmrs\_pattern(config)\};}
\DoxyCodeLine{00122\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{est\_cfg}}.rx\_ports\ \ \ \ \ =\ config.ports;}
\DoxyCodeLine{00123\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{est\_cfg}}.scaling\ \ \ \ \ \ =\ 1.0F;}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \textcolor{comment}{//\ Perform\ estimation\ for\ each\ receive\ port.}}
\DoxyCodeLine{00126\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port}}\ !=\ nof\_rx\_ports;\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port}})\ \{}
\DoxyCodeLine{00127\ \ \ \ \ ch\_estimator-\/>compute(\mbox{\hyperlink{classsrsran_1_1dmrs__pucch__processor__format2__impl_a72804a4798a6b7fb5579e779921e1d3c}{estimate}},\ grid,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port}},\ temp\_symbols,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{est\_cfg}});}
\DoxyCodeLine{00128\ \ \ \}}
\DoxyCodeLine{00129\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/signal\+\_\+processors/pucch/dmrs\+\_\+pucch\+\_\+processor\+\_\+format2\+\_\+impl.\+h\item 
lib/phy/upper/signal\+\_\+processors/pucch/dmrs\+\_\+pucch\+\_\+processor\+\_\+format2\+\_\+impl.\+cpp\end{DoxyCompactItemize}
