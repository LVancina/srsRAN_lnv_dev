\doxysection{srsran\+::ether\+::eth\+\_\+frame\+\_\+pool Class Reference}
\hypertarget{classsrsran_1_1ether_1_1eth__frame__pool}{}\label{classsrsran_1_1ether_1_1eth__frame__pool}\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}


Pool of Ethernet frames pre-\/allocated for each slot symbol.  




{\ttfamily \#include $<$ethernet\+\_\+frame\+\_\+pool.\+h$>$}



Collaboration diagram for srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=233pt]{d7/d72/classsrsran_1_1ether_1_1eth__frame__pool__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ether_1_1eth__frame__pool_aa6658d6a70c1f67437d020f48174c6e9}{eth\+\_\+frame\+\_\+pool}} (\mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units\+::bytes}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mtu}}, \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{num\+\_\+of\+\_\+frames}})
\begin{DoxyCompactList}\small\item\em Constructor;. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} $>$ \mbox{\hyperlink{classsrsran_1_1ether_1_1eth__frame__pool_ad3461819f6a9d5ae4e864e90796fa3ac}{get\+\_\+frame\+\_\+buffers}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__context}{frame\+\_\+pool\+\_\+context}} \&context)
\begin{DoxyCompactList}\small\item\em Returns data buffer from the pool for the given slot and symbol. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ether_1_1eth__frame__pool_af8a13e4fba87eb66c22795b5f6033a3f}{push\+\_\+frame\+\_\+buffers}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__context}{frame\+\_\+pool\+\_\+context}} \&context, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prepared\+\_\+buffers}})
\begin{DoxyCompactList}\small\item\em Increments number of prepared Ethernet frames in the given slot symbol. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classsrsran_1_1ether_1_1eth__frame__pool_a98362db0dec39f1c9ed054e3c9dd7e63}{read\+\_\+frame\+\_\+buffers}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__context}{frame\+\_\+pool\+\_\+context}} \&context)
\begin{DoxyCompactList}\small\item\em Returns data buffers from the pool to a reader thread given a specific symbol context. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classsrsran_1_1ether_1_1eth__frame__pool_ade98bca8c788d0383c9d79443203f7ef}{read\+\_\+frame\+\_\+buffers}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__interval}{frame\+\_\+pool\+\_\+interval}} \&\mbox{\hyperlink{classsrsran_1_1interval}{interval}})
\begin{DoxyCompactList}\small\item\em Returns data buffers from the pool to a reader thread for an interval of symbols. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ether_1_1eth__frame__pool_a3827f6c93079bb14b582d05e96efd6f6}{clear\+\_\+sent\+\_\+frame\+\_\+buffers}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__context}{frame\+\_\+pool\+\_\+context}} \&context)
\begin{DoxyCompactList}\small\item\em Clears prepared Ethernet frame buffers for the given symbol context. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ether_1_1eth__frame__pool_a95050244b6508ab3dd4fad4200b051fa}{clear\+\_\+sent\+\_\+frame\+\_\+buffers}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__interval}{frame\+\_\+pool\+\_\+interval}} \&\mbox{\hyperlink{classsrsran_1_1interval}{interval}})
\begin{DoxyCompactList}\small\item\em Clears prepared Ethernet frame buffers for an interval of symbols. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ether_1_1eth__frame__pool_abd74166868322920277b4f713c807e1b}{clear\+\_\+downlink\+\_\+slot}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}, \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&logger)
\begin{DoxyCompactList}\small\item\em Clears stored buffers associated with the given slot and logs the messages that could not be sent. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ether_1_1eth__frame__pool_a9b2a69ccee89c621193c915f23ed11f2}{clear\+\_\+uplink\+\_\+slot}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}, \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&logger)
\begin{DoxyCompactList}\small\item\em Clears stored uplink C-\/\+Plane buffers associated with the given slot and logs the messages that could not be sent. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classsrsran_1_1ether_1_1eth__frame__pool_a09d4d3216b87479cead3b68455e2769b}{pool\+\_\+size\+\_\+in\+\_\+slots}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Returns number of slots the pool can accommodate. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Pool of Ethernet frames pre-\/allocated for each slot symbol. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ether_1_1eth__frame__pool_aa6658d6a70c1f67437d020f48174c6e9}\label{classsrsran_1_1ether_1_1eth__frame__pool_aa6658d6a70c1f67437d020f48174c6e9} 
\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}!eth\_frame\_pool@{eth\_frame\_pool}}
\index{eth\_frame\_pool@{eth\_frame\_pool}!srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}
\doxysubsubsection{\texorpdfstring{eth\_frame\_pool()}{eth\_frame\_pool()}}
{\footnotesize\ttfamily srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+::eth\+\_\+frame\+\_\+pool (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units\+::bytes}}}]{mtu,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{num\+\_\+of\+\_\+frames }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructor;. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ pool(NUM\_ENTRIES,\ \{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mtu}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{num\_of\_frames}}\})}
\DoxyCodeLine{00332\ \ \ \{}
\DoxyCodeLine{00333\ \ \ \ \ aux\_array.reserve(ofh::MAX\_NOF\_SUPPORTED\_EAXC\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{num\_of\_frames}}\ *\ NUM\_INTERVAL\_SYMBOL);}
\DoxyCodeLine{00334\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ether_1_1eth__frame__pool_abd74166868322920277b4f713c807e1b}\label{classsrsran_1_1ether_1_1eth__frame__pool_abd74166868322920277b4f713c807e1b} 
\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}!clear\_downlink\_slot@{clear\_downlink\_slot}}
\index{clear\_downlink\_slot@{clear\_downlink\_slot}!srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}
\doxysubsubsection{\texorpdfstring{clear\_downlink\_slot()}{clear\_downlink\_slot()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+::clear\+\_\+downlink\+\_\+slot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{slot\+\_\+point,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Clears stored buffers associated with the given slot and logs the messages that could not be sent. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00418\ \ \ \{}
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{comment}{//\ Lock\ before\ changing\ the\ pool\ entries.}}
\DoxyCodeLine{00420\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \ \ \ \ pool\_entry\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cp\_entry}}\ =\ get\_pool\_entry(slot\_point,\ 0);}
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{comment}{//\ Clear\ buffers\ with\ DL\ Control-\/Plane\ messages.}}
\DoxyCodeLine{00424\ \ \ \ \ ofh\_pool\_message\_type\ msg\_type\{ofh::message\_type::control\_plane,\ ofh::data\_direction::downlink\};}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_cp\_buffers}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cp\_entry}}.get\_prepared\_buffers(msg\_type);}
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_cp\_buffers}})\ \{}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}.timestamp.get\_slot()\ ==\ slot\_point)\ \{}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00431\ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}Detected\ '\{\}'\ late\ downlink\ C-\/Plane\ messages\ in\ the\ transmitter\ queue\ for\ slot\ '\{\}'"{}},}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_cp\_buffers}}.size(),}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}.timestamp.get\_slot());}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cp\_entry}}.reset\_buffers(msg\_type);}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00436\ \ \ \ \ \}}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \textcolor{comment}{//\ Clear\ buffers\ with\ User-\/Plane\ messages.}}
\DoxyCodeLine{00439\ \ \ \ \ msg\_type.type\ \ \ \ \ \ =\ ofh::message\_type::user\_plane;}
\DoxyCodeLine{00440\ \ \ \ \ msg\_type.direction\ =\ ofh::data\_direction::downlink;}
\DoxyCodeLine{00441\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ symbol\ =\ 0;\ symbol\ !=\ \mbox{\hyperlink{namespacesrsran_a2ec632168c0292dc5fd78c9bd35f159b}{NOF\_OFDM\_SYM\_PER\_SLOT\_NORMAL\_CP}};\ ++symbol)\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \ \ pool\_entry\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{up\_entry}}\ =\ get\_pool\_entry(slot\_point,\ symbol);}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_up\_buffers}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{up\_entry}}.get\_prepared\_buffers(msg\_type);}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_up\_buffers}})\ \{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}.timestamp.get\_slot()\ ==\ slot\_point)\ \{}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ logger.warning(}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Detected\ '\{\}'\ late\ downlink\ U-\/Plane\ messages\ in\ the\ transmitter\ queue\ for\ slot\ '\{\}',\ symbol\ '\{\}'"{}},}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_up\_buffers}}.size(),}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}.timestamp.get\_slot(),}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}.timestamp.get\_symbol\_index());}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{up\_entry}}.reset\_buffers(msg\_type);}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00457\ \ \ \ \ \}}
\DoxyCodeLine{00458\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1eth__frame__pool_a3827f6c93079bb14b582d05e96efd6f6}\label{classsrsran_1_1ether_1_1eth__frame__pool_a3827f6c93079bb14b582d05e96efd6f6} 
\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}!clear\_sent\_frame\_buffers@{clear\_sent\_frame\_buffers}}
\index{clear\_sent\_frame\_buffers@{clear\_sent\_frame\_buffers}!srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}
\doxysubsubsection{\texorpdfstring{clear\_sent\_frame\_buffers()}{clear\_sent\_frame\_buffers()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+::clear\+\_\+sent\+\_\+frame\+\_\+buffers (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__context}{frame\+\_\+pool\+\_\+context}} \&}]{context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Clears prepared Ethernet frame buffers for the given symbol context. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00390\ \ \ \{}
\DoxyCodeLine{00391\ \ \ \ \ pool\_entry\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}\ =\ get\_pool\_entry(context.symbol\_point.get\_slot(),\ context.symbol\_point.get\_symbol\_index());}
\DoxyCodeLine{00392\ \ \ \ \ \textcolor{comment}{//\ Acquire\ lock\ before\ accessing\ pool\ entry.}}
\DoxyCodeLine{00393\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00394\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}.clear\_buffers(context.type);}
\DoxyCodeLine{00395\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1eth__frame__pool_a95050244b6508ab3dd4fad4200b051fa}\label{classsrsran_1_1ether_1_1eth__frame__pool_a95050244b6508ab3dd4fad4200b051fa} 
\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}!clear\_sent\_frame\_buffers@{clear\_sent\_frame\_buffers}}
\index{clear\_sent\_frame\_buffers@{clear\_sent\_frame\_buffers}!srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}
\doxysubsubsection{\texorpdfstring{clear\_sent\_frame\_buffers()}{clear\_sent\_frame\_buffers()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+::clear\+\_\+sent\+\_\+frame\+\_\+buffers (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__interval}{frame\+\_\+pool\+\_\+interval}} \&}]{interval }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Clears prepared Ethernet frame buffers for an interval of symbols. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00399\ \ \ \{}
\DoxyCodeLine{00400\ \ \ \ \ \textcolor{keywordflow}{if}\ (interval.start\ >\ interval.end)\ \{}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00402\ \ \ \ \ \}}
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{comment}{//\ Acquire\ lock\ before\ accessing\ pool\ entries.}}
\DoxyCodeLine{00404\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \ \ \ \ \textcolor{comment}{//\ Extra\ 1\ is\ added\ to\ include\ the\ end\ symbol\ of\ the\ interval.}}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ distance\ =\ (interval.end\ -\/\ interval.start)\ +\ 1;}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ !=\ distance;\ ++i)\ \{}
\DoxyCodeLine{00409\ \ \ \ \ \ \ ofh::slot\_symbol\_point\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp\_symbol}}\ =\ interval.start\ +\ i;}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ \ \ pool\_entry\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}\ =\ get\_pool\_entry(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp\_symbol}}.get\_slot(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp\_symbol}}.get\_symbol\_index());}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}.clear\_buffers(interval.type);}
\DoxyCodeLine{00413\ \ \ \ \ \}}
\DoxyCodeLine{00414\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1eth__frame__pool_a9b2a69ccee89c621193c915f23ed11f2}\label{classsrsran_1_1ether_1_1eth__frame__pool_a9b2a69ccee89c621193c915f23ed11f2} 
\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}!clear\_uplink\_slot@{clear\_uplink\_slot}}
\index{clear\_uplink\_slot@{clear\_uplink\_slot}!srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}
\doxysubsubsection{\texorpdfstring{clear\_uplink\_slot()}{clear\_uplink\_slot()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+::clear\+\_\+uplink\+\_\+slot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{slot\+\_\+point,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Clears stored uplink C-\/\+Plane buffers associated with the given slot and logs the messages that could not be sent. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00462\ \ \ \{}
\DoxyCodeLine{00463\ \ \ \ \ \textcolor{comment}{//\ Lock\ before\ changing\ the\ pool\ entries.}}
\DoxyCodeLine{00464\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \ \ pool\_entry\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cp\_entry}}\ =\ get\_pool\_entry(slot\_point,\ 0);}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{comment}{//\ Clear\ buffers\ with\ UL\ Control-\/Plane\ messages.}}
\DoxyCodeLine{00468\ \ \ \ \ ofh\_pool\_message\_type\ msg\_type\{ofh::message\_type::control\_plane,\ ofh::data\_direction::uplink\};}
\DoxyCodeLine{00469\ }
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_cp\_buffers}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cp\_entry}}.get\_prepared\_buffers(msg\_type);}
\DoxyCodeLine{00471\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_cp\_buffers}})\ \{}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}.timestamp.get\_slot()\ ==\ slot\_point)\ \{}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00475\ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}Detected\ '\{\}'\ late\ uplink\ C-\/Plane\ messages\ in\ the\ transmitter\ queue\ for\ slot\ '\{\}'"{}},}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_cp\_buffers}}.size(),}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}.timestamp.get\_slot());}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cp\_entry}}.reset\_buffers(msg\_type);}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00480\ \ \ \ \ \}}
\DoxyCodeLine{00481\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1eth__frame__pool_ad3461819f6a9d5ae4e864e90796fa3ac}\label{classsrsran_1_1ether_1_1eth__frame__pool_ad3461819f6a9d5ae4e864e90796fa3ac} 
\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}!get\_frame\_buffers@{get\_frame\_buffers}}
\index{get\_frame\_buffers@{get\_frame\_buffers}!srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}
\doxysubsubsection{\texorpdfstring{get\_frame\_buffers()}{get\_frame\_buffers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} $>$ srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+::get\+\_\+frame\+\_\+buffers (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__context}{frame\+\_\+pool\+\_\+context}} \&}]{context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Returns data buffer from the pool for the given slot and symbol. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00338\ \ \ \{}
\DoxyCodeLine{00339\ \ \ \ \ pool\_entry\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}\ =\ get\_pool\_entry(context.symbol\_point.get\_slot(),\ context.symbol\_point.get\_symbol\_index());}
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{comment}{//\ Acquire\ lock\ before\ accessing\ pool\ entry.}}
\DoxyCodeLine{00341\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}.reserve\_buffers(context.type);}
\DoxyCodeLine{00343\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1eth__frame__pool_a09d4d3216b87479cead3b68455e2769b}\label{classsrsran_1_1ether_1_1eth__frame__pool_a09d4d3216b87479cead3b68455e2769b} 
\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}!pool\_size\_in\_slots@{pool\_size\_in\_slots}}
\index{pool\_size\_in\_slots@{pool\_size\_in\_slots}!srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}
\doxysubsubsection{\texorpdfstring{pool\_size\_in\_slots()}{pool\_size\_in\_slots()}}
{\footnotesize\ttfamily size\+\_\+t srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+::pool\+\_\+size\+\_\+in\+\_\+slots (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns number of slots the pool can accommodate. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00484\ \{\ \textcolor{keywordflow}{return}\ NUM\_SLOTS;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1eth__frame__pool_af8a13e4fba87eb66c22795b5f6033a3f}\label{classsrsran_1_1ether_1_1eth__frame__pool_af8a13e4fba87eb66c22795b5f6033a3f} 
\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}!push\_frame\_buffers@{push\_frame\_buffers}}
\index{push\_frame\_buffers@{push\_frame\_buffers}!srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}
\doxysubsubsection{\texorpdfstring{push\_frame\_buffers()}{push\_frame\_buffers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+::push\+\_\+frame\+\_\+buffers (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__context}{frame\+\_\+pool\+\_\+context}} \&}]{context,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} $>$}]{prepared\+\_\+buffers }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Increments number of prepared Ethernet frames in the given slot symbol. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00347\ \ \ \{}
\DoxyCodeLine{00348\ \ \ \ \ pool\_entry\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}\ =\ get\_pool\_entry(context.symbol\_point.get\_slot(),\ context.symbol\_point.get\_symbol\_index());}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{comment}{//\ Lock\ and\ update\ the\ pool\ entry.}}
\DoxyCodeLine{00350\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00351\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}.push\_buffers(context,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prepared\_buffers}});}
\DoxyCodeLine{00352\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1eth__frame__pool_a98362db0dec39f1c9ed054e3c9dd7e63}\label{classsrsran_1_1ether_1_1eth__frame__pool_a98362db0dec39f1c9ed054e3c9dd7e63} 
\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}!read\_frame\_buffers@{read\_frame\_buffers}}
\index{read\_frame\_buffers@{read\_frame\_buffers}!srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}
\doxysubsubsection{\texorpdfstring{read\_frame\_buffers()}{read\_frame\_buffers()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} \texorpdfstring{$\ast$}{*} $>$ srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+::read\+\_\+frame\+\_\+buffers (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__context}{frame\+\_\+pool\+\_\+context}} \&}]{context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Returns data buffers from the pool to a reader thread given a specific symbol context. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00356\ \ \ \{}
\DoxyCodeLine{00357\ \ \ \ \ pool\_entry\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}\ =\ get\_pool\_entry(context.symbol\_point.get\_slot(),\ context.symbol\_point.get\_symbol\_index());}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{comment}{//\ Acquire\ lock\ before\ accessing\ pool\ entry.}}
\DoxyCodeLine{00359\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}.read\_buffers(context.type);}
\DoxyCodeLine{00361\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1eth__frame__pool_ade98bca8c788d0383c9d79443203f7ef}\label{classsrsran_1_1ether_1_1eth__frame__pool_ade98bca8c788d0383c9d79443203f7ef} 
\index{srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}!read\_frame\_buffers@{read\_frame\_buffers}}
\index{read\_frame\_buffers@{read\_frame\_buffers}!srsran::ether::eth\_frame\_pool@{srsran::ether::eth\_frame\_pool}}
\doxysubsubsection{\texorpdfstring{read\_frame\_buffers()}{read\_frame\_buffers()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} \texorpdfstring{$\ast$}{*} $>$ srsran\+::ether\+::eth\+\_\+frame\+\_\+pool\+::read\+\_\+frame\+\_\+buffers (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__pool__interval}{frame\+\_\+pool\+\_\+interval}} \&}]{interval }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Returns data buffers from the pool to a reader thread for an interval of symbols. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00365\ \ \ \{}
\DoxyCodeLine{00366\ \ \ \ \ \textcolor{keywordflow}{if}\ (interval.start\ >\ interval.end)\ \{}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00368\ \ \ \ \ \}}
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{comment}{//\ Acquire\ lock\ before\ accessing\ pool\ entries.}}
\DoxyCodeLine{00370\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ \ \ \ \ aux\_array.clear();}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \ \ \textcolor{comment}{//\ Extra\ 1\ is\ added\ to\ include\ the\ end\ symbol\ of\ the\ interval.}}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ distance\ =\ (interval.end\ -\/\ interval.start)\ +\ 1;}
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ !=\ distance;\ ++i)\ \{}
\DoxyCodeLine{00377\ \ \ \ \ \ \ ofh::slot\_symbol\_point\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp\_symbol}}\ =\ interval.start\ +\ i;}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \ \ \ \ \ \ pool\_entry\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}\ \ \ \ \ \ \ \ =\ get\_pool\_entry(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp\_symbol}}.get\_slot(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp\_symbol}}.get\_symbol\_index());}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbol\_buffers}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{p\_entry}}.read\_buffers(interval.type);}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ buffer\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbol\_buffers}})\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ aux\_array.push\_back(buffer);}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00384\ \ \ \ \ \}}
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{keywordflow}{return}\ aux\_array;}
\DoxyCodeLine{00386\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/srsran/ofh/ethernet/ethernet\+\_\+frame\+\_\+pool.\+h\end{DoxyCompactItemize}
