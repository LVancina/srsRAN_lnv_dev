\doxysection{srsran\+::srs\+\_\+du\+::f1ap\+\_\+du\+\_\+ue\+\_\+context\+\_\+release\+\_\+procedure Class Reference}
\hypertarget{classsrsran_1_1srs__du_1_1f1ap__du__ue__context__release__procedure}{}\label{classsrsran_1_1srs__du_1_1f1ap__du__ue__context__release__procedure}\index{srsran::srs\_du::f1ap\_du\_ue\_context\_release\_procedure@{srsran::srs\_du::f1ap\_du\_ue\_context\_release\_procedure}}


Collaboration diagram for srsran\+::srs\+\_\+du\+::f1ap\+\_\+du\+\_\+ue\+\_\+context\+\_\+release\+\_\+procedure\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=208pt]{d2/d47/classsrsran_1_1srs__du_1_1f1ap__du__ue__context__release__procedure__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1srs__du_1_1f1ap__du__ue__context__release__procedure_a57db2b45da4a6a9a63daca79f1605b4c}{f1ap\+\_\+du\+\_\+ue\+\_\+context\+\_\+release\+\_\+procedure}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} asn1\+::f1ap\+::ue\+\_\+context\+\_\+release\+\_\+cmd\+\_\+s \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1srs__du_1_1f1ap__du__ue__manager}{f1ap\+\_\+du\+\_\+ue\+\_\+manager}} \&ues)
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1srs__du_1_1f1ap__du__ue__context__release__procedure_a3a6974346c923e4e193713c07ef695c1}{operator()}} (\mbox{\hyperlink{namespacesrsran_aadfca39572d46ed2a532ab91af40292e}{coro\+\_\+context}}$<$ \mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} $>$ $>$ \&ctx)
\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1srs__du_1_1f1ap__du__ue__context__release__procedure_a57db2b45da4a6a9a63daca79f1605b4c}\label{classsrsran_1_1srs__du_1_1f1ap__du__ue__context__release__procedure_a57db2b45da4a6a9a63daca79f1605b4c} 
\index{srsran::srs\_du::f1ap\_du\_ue\_context\_release\_procedure@{srsran::srs\_du::f1ap\_du\_ue\_context\_release\_procedure}!f1ap\_du\_ue\_context\_release\_procedure@{f1ap\_du\_ue\_context\_release\_procedure}}
\index{f1ap\_du\_ue\_context\_release\_procedure@{f1ap\_du\_ue\_context\_release\_procedure}!srsran::srs\_du::f1ap\_du\_ue\_context\_release\_procedure@{srsran::srs\_du::f1ap\_du\_ue\_context\_release\_procedure}}
\doxysubsubsection{\texorpdfstring{f1ap\_du\_ue\_context\_release\_procedure()}{f1ap\_du\_ue\_context\_release\_procedure()}}
{\footnotesize\ttfamily f1ap\+\_\+du\+\_\+ue\+\_\+context\+\_\+release\+\_\+procedure\+::f1ap\+\_\+du\+\_\+ue\+\_\+context\+\_\+release\+\_\+procedure (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} asn1\+::f1ap\+::ue\+\_\+context\+\_\+release\+\_\+cmd\+\_\+s \&}]{msg\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__du_1_1f1ap__du__ue__manager}{f1ap\+\_\+du\+\_\+ue\+\_\+manager}} \&}]{ues }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00034\ \ \ msg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\_}}),}
\DoxyCodeLine{00035\ \ \ \mbox{\hyperlink{classsrsran_1_1ue}{ue}}(*ues.find(\mbox{\hyperlink{namespacesrsran_a45a44b24193e6aa0f6d09fb85f8f192f}{int\_to\_gnb\_du\_ue\_f1ap\_id}}(msg-\/>gnb\_du\_ue\_f1ap\_id))),}
\DoxyCodeLine{00036\ \ \ cu\_msg\_notifier(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.f1ap\_msg\_notifier),}
\DoxyCodeLine{00037\ \ \ release\_wait\_timer(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.du\_handler.get\_timer\_factory().create\_timer())}
\DoxyCodeLine{00038\ \{}
\DoxyCodeLine{00039\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1srs__du_1_1f1ap__du__ue__context__release__procedure_a3a6974346c923e4e193713c07ef695c1}\label{classsrsran_1_1srs__du_1_1f1ap__du__ue__context__release__procedure_a3a6974346c923e4e193713c07ef695c1} 
\index{srsran::srs\_du::f1ap\_du\_ue\_context\_release\_procedure@{srsran::srs\_du::f1ap\_du\_ue\_context\_release\_procedure}!operator()@{operator()}}
\index{operator()@{operator()}!srsran::srs\_du::f1ap\_du\_ue\_context\_release\_procedure@{srsran::srs\_du::f1ap\_du\_ue\_context\_release\_procedure}}
\doxysubsubsection{\texorpdfstring{operator()()}{operator()()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} f1ap\+\_\+du\+\_\+ue\+\_\+context\+\_\+release\+\_\+procedure\+::operator() (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_aadfca39572d46ed2a532ab91af40292e}{coro\+\_\+context}}$<$ \mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} $>$ $>$ \&}]{ctx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00042\ \{}
\DoxyCodeLine{00043\ \ \ \textcolor{comment}{//\ Wait\ period\ before\ the\ UE\ context\ is\ deleted\ from\ the\ DU.\ This\ value\ should\ be\ large\ enough\ to\ ensure\ any}}
\DoxyCodeLine{00044\ \ \ \textcolor{comment}{//\ pending\ RRC\ message\ (e.g.\ RRC\ Release)\ is\ sent\ to\ the\ UE.}}
\DoxyCodeLine{00045\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::chrono::milliseconds\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_release\_timeout}}\{120\};}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ CORO\_BEGIN(ctx);}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ logger.debug(\textcolor{stringliteral}{"{}ue=\{\},\ proc=\(\backslash\)"{}UE\ Context\ Release\(\backslash\)"{}:\ Started."{}},\ \mbox{\hyperlink{classsrsran_1_1ue}{ue}}.context.ue\_index);}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \textcolor{comment}{//\ Mark\ UE\ context\ for\ release,\ so\ that\ any\ UE\ Context\ Release\ Request\ coming\ from\ lower\ layers\ due\ to\ RLF\ is\ ignored.}}
\DoxyCodeLine{00052\ \ \ \mbox{\hyperlink{classsrsran_1_1ue}{ue}}.context.marked\_for\_release\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \textcolor{keywordflow}{if}\ (msg-\/>rrc\_container\_present)\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ If\ the\ UE\ CONTEXT\ RELEASE\ COMMAND\ message\ contains\ the\ RRC-\/Container\ IE,\ the\ gNB-\/DU\ shall\ send\ the\ RRC}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{//\ container\ to\ the\ UE\ via\ the\ SRB\ indicated\ by\ the\ SRB\ ID\ IE.}}
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__du_1_1f1c__bearer}{f1c\_bearer}}*\ srb\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{if}\ (msg-\/>srb\_id\_present)\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ srb\_id\_t\ srb\_id\ =\ int\_to\_srb\_id(msg-\/>srb\_id);}
\DoxyCodeLine{00060\ \ \ \ \ \ \ srb\ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{classsrsran_1_1ue}{ue}}.bearers.find\_srb(srb\_id);}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordflow}{if}\ (srb\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ pdu\{msg-\/>rrc\_container\};}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \textcolor{comment}{//\ Forward\ F1AP\ PDU\ to\ lower\ layers\ to\ be\ transmitted\ over-\/the-\/air.}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ srb-\/>handle\_pdu(std::move(pdu));}
\DoxyCodeLine{00068\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}SRB-\/ID\ not\ defined"{}});}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \textcolor{comment}{//\ Handle\ Error.}}
\DoxyCodeLine{00071\ \ \ \ \ \}}
\DoxyCodeLine{00072\ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \textcolor{comment}{//\ Wait\ for\ pending\ RRC\ messages\ to\ be\ flushed.}}
\DoxyCodeLine{00075\ \ \ logger.debug(\textcolor{stringliteral}{"{}ue=\{\},\ proc=\(\backslash\)"{}UE\ Context\ Release\(\backslash\)"{}:\ Waiting\ for\ \{\}\ milliseconds\ to\ flush\ pending\ RRC\ messages."{}},}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1ue}{ue}}.context.ue\_index,}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_release\_timeout}}.count());}
\DoxyCodeLine{00078\ \ \ CORO\_AWAIT(\mbox{\hyperlink{namespacesrsran_a498a04b804e0eaa84f9df5bfdb108ffa}{async\_wait\_for}}(release\_wait\_timer,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_release\_timeout}}));}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \textcolor{comment}{//\ Remove\ UE\ from\ DU\ manager.}}
\DoxyCodeLine{00081\ \ \ logger.debug(\textcolor{stringliteral}{"{}ue=\{\},\ proc=\(\backslash\)"{}UE\ Context\ Release\(\backslash\)"{}:\ Initiate\ UE\ release\ in\ lower\ layers."{}},\ \mbox{\hyperlink{classsrsran_1_1ue}{ue}}.context.ue\_index);}
\DoxyCodeLine{00082\ \ \ CORO\_AWAIT(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.du\_handler.request\_ue\_removal(\mbox{\hyperlink{structsrsran_1_1srs__du_1_1f1ap__ue__delete__request}{f1ap\_ue\_delete\_request}}\{ue.context.ue\_index\}));}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{comment}{//\ Note:\ UE\ F1AP\ context\ deleted\ at\ this\ point.}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \textcolor{comment}{//\ Send\ UE\ CONTEXT\ RELEASE\ COMPLETE\ to\ CU.}}
\DoxyCodeLine{00087\ \ \ send\_ue\_context\_release\_complete();}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ CORO\_RETURN();}
\DoxyCodeLine{00090\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/f1ap/du/procedures/f1ap\+\_\+du\+\_\+ue\+\_\+context\+\_\+release\+\_\+procedure.\+h\item 
lib/f1ap/du/procedures/f1ap\+\_\+du\+\_\+ue\+\_\+context\+\_\+release\+\_\+procedure.\+cpp\end{DoxyCompactItemize}
