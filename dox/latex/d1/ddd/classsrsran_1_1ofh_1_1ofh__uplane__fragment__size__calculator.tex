\doxysection{srsran\+::ofh\+::ofh\+\_\+uplane\+\_\+fragment\+\_\+size\+\_\+calculator Class Reference}
\hypertarget{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator}{}\label{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator}\index{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator@{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator}}


Open Fronthaul fragment size calculator.  




{\ttfamily \#include $<$ofh\+\_\+uplane\+\_\+fragment\+\_\+size\+\_\+calculator.\+h$>$}



Collaboration diagram for srsran\+::ofh\+::ofh\+\_\+uplane\+\_\+fragment\+\_\+size\+\_\+calculator\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{dd/d08/classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator_a6b8d9a3692680c7fe29ab3828fca5347}{ofh\+\_\+uplane\+\_\+fragment\+\_\+size\+\_\+calculator}} (\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{start\+\_\+prb\+\_\+}}, \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\+\_\+prbs\+\_\+}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ofh_1_1ru__compression__params}{ru\+\_\+compression\+\_\+params}} \&comp\+\_\+params)
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator_a12ad8485386a7a727f9e8a45db49a3ab}{calculate\+\_\+fragment\+\_\+size}} (\mbox{\hyperlink{classunsigned}{unsigned}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fragment\+\_\+start\+\_\+prb}}, \mbox{\hyperlink{classunsigned}{unsigned}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fragment\+\_\+nof\+\_\+prbs}}, \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{frame\+\_\+size}})
\begin{DoxyCompactList}\small\item\em Calculates the fragment size of the configured PRBs that will fit in the given frame size. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator_abf8f1bfc35323a6f0ee2289faa6d11cf}{calculate\+\_\+nof\+\_\+segments}} (\mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units\+::bytes}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{frame\+\_\+size}}, \mbox{\hyperlink{classunsigned}{unsigned}} nof\+\_\+prbs, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ofh_1_1ru__compression__params}{ru\+\_\+compression\+\_\+params}} \&comp\+\_\+params, \mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units\+::bytes}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{headers\+\_\+size}})
\begin{DoxyCompactList}\small\item\em Calculates number of segments required to codify one resource grid symbol given the frame size. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Open Fronthaul fragment size calculator. 

This class calculates the fragments of a configured PRB range, based on the given frame size and compression parameters. This class assumes one section per fragment. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator_a6b8d9a3692680c7fe29ab3828fca5347}\label{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator_a6b8d9a3692680c7fe29ab3828fca5347} 
\index{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator@{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator}!ofh\_uplane\_fragment\_size\_calculator@{ofh\_uplane\_fragment\_size\_calculator}}
\index{ofh\_uplane\_fragment\_size\_calculator@{ofh\_uplane\_fragment\_size\_calculator}!srsran::ofh::ofh\_uplane\_fragment\_size\_calculator@{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator}}
\doxysubsubsection{\texorpdfstring{ofh\_uplane\_fragment\_size\_calculator()}{ofh\_uplane\_fragment\_size\_calculator()}}
{\footnotesize\ttfamily ofh\+\_\+uplane\+\_\+fragment\+\_\+size\+\_\+calculator\+::ofh\+\_\+uplane\+\_\+fragment\+\_\+size\+\_\+calculator (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{start\+\_\+prb\+\_\+,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{nof\+\_\+prbs\+\_\+,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ofh_1_1ru__compression__params}{ru\+\_\+compression\+\_\+params}} \&}]{comp\+\_\+params }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00066\ \ \ start\_prb(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{start\_prb\_}}),}
\DoxyCodeLine{00067\ \ \ nof\_prbs(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_}}),}
\DoxyCodeLine{00068\ \ \ prb\_size(get\_prb\_data\_size(comp\_params)),}
\DoxyCodeLine{00069\ \ \ next\_fragment\_start\_prb\_index(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{start\_prb\_}})}
\DoxyCodeLine{00070\ \{}
\DoxyCodeLine{00071\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator_a12ad8485386a7a727f9e8a45db49a3ab}\label{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator_a12ad8485386a7a727f9e8a45db49a3ab} 
\index{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator@{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator}!calculate\_fragment\_size@{calculate\_fragment\_size}}
\index{calculate\_fragment\_size@{calculate\_fragment\_size}!srsran::ofh::ofh\_uplane\_fragment\_size\_calculator@{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator}}
\doxysubsubsection{\texorpdfstring{calculate\_fragment\_size()}{calculate\_fragment\_size()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} ofh\+\_\+uplane\+\_\+fragment\+\_\+size\+\_\+calculator\+::calculate\+\_\+fragment\+\_\+size (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}} \&}]{fragment\+\_\+start\+\_\+prb,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}} \&}]{fragment\+\_\+nof\+\_\+prbs,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{frame\+\_\+size }\end{DoxyParamCaption})}



Calculates the fragment size of the configured PRBs that will fit in the given frame size. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em fragment\+\_\+start\+\_\+prb} & Start PRB for frame. \\
\hline
\mbox{\texttt{ out}}  & {\em fragment\+\_\+nof\+\_\+prbs} & Number of PRBs that fit in the frame. \\
\hline
\mbox{\texttt{ in}}  & {\em frame\+\_\+size} & Frame size. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if it is the last fragment, otherwise false. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00076\ \{}
\DoxyCodeLine{00077\ \ \ \mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units::bytes}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{frame\_sz}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{frame\_size}});}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{frame\_sz}}.value()\ <\ prb\_size.\mbox{\hyperlink{classsrsran_1_1strong__type_a1a71ac48ba41b4a070b32e296c177db0}{value}}())\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fragment\_start\_prb}}\ =\ next\_fragment\_start\_prb\_index;}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fragment\_nof\_prbs}}\ \ =\ 0;}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00084\ \ \ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_fit\_in\_frame}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{frame\_sz}}.value()\ /\ prb\_size.\mbox{\hyperlink{classsrsran_1_1strong__type_a1a71ac48ba41b4a070b32e296c177db0}{value}}();}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fragment\_start\_prb}}\ \ \ \ \ \ =\ next\_fragment\_start\_prb\_index;}
\DoxyCodeLine{00089\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{remaining\_prbs}}\ =\ nof\_prbs\ -\/\ (next\_fragment\_start\_prb\_index\ -\/\ start\_prb);}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{//\ Last\ fragment.}}
\DoxyCodeLine{00092\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_fit\_in\_frame}}\ >=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{remaining\_prbs}})\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fragment\_nof\_prbs}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{remaining\_prbs}};}
\DoxyCodeLine{00094\ \ \ \ \ next\_fragment\_start\_prb\_index\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{remaining\_prbs}};}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00097\ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fragment\_nof\_prbs}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_fit\_in\_frame}};}
\DoxyCodeLine{00100\ \ \ next\_fragment\_start\_prb\_index\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_fit\_in\_frame}};}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00103\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator_abf8f1bfc35323a6f0ee2289faa6d11cf}\label{classsrsran_1_1ofh_1_1ofh__uplane__fragment__size__calculator_abf8f1bfc35323a6f0ee2289faa6d11cf} 
\index{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator@{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator}!calculate\_nof\_segments@{calculate\_nof\_segments}}
\index{calculate\_nof\_segments@{calculate\_nof\_segments}!srsran::ofh::ofh\_uplane\_fragment\_size\_calculator@{srsran::ofh::ofh\_uplane\_fragment\_size\_calculator}}
\doxysubsubsection{\texorpdfstring{calculate\_nof\_segments()}{calculate\_nof\_segments()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} ofh\+\_\+uplane\+\_\+fragment\+\_\+size\+\_\+calculator\+::calculate\+\_\+nof\+\_\+segments (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units\+::bytes}}}]{frame\+\_\+size,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{nof\+\_\+prbs,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ofh_1_1ru__compression__params}{ru\+\_\+compression\+\_\+params}} \&}]{comp\+\_\+params,  }\item[{\mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units\+::bytes}}}]{headers\+\_\+size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Calculates number of segments required to codify one resource grid symbol given the frame size. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em frame\+\_\+size} & Frame size. \\
\hline
\mbox{\texttt{ in}}  & {\em nof\+\_\+prbs} & Number of PRBs in a resource grid. \\
\hline
\mbox{\texttt{ in}}  & {\em comp\+\_\+params} & Compression parameters for the I and Q samples. \\
\hline
\mbox{\texttt{ in}}  & {\em headers\+\_\+size} & Size of the headers stored in a frame alongside the I and Q samples. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of segments. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00110\ \{}
\DoxyCodeLine{00111\ \ \ \mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units::bytes}}\ prb\_size\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ get\_prb\_data\_size(comp\_params);}
\DoxyCodeLine{00112\ \ \ \mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units::bytes}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{frame\_size\_data}}\ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{frame\_size}}\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{headers\_size}};}
\DoxyCodeLine{00113\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_fit\_in\_frame}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{frame\_size\_data}}.\mbox{\hyperlink{classsrsran_1_1strong__type_a1a71ac48ba41b4a070b32e296c177db0}{value}}()\ /\ prb\_size.\mbox{\hyperlink{classsrsran_1_1strong__type_a1a71ac48ba41b4a070b32e296c177db0}{value}}();}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \textcolor{keywordflow}{return}\ std::ceil(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(nof\_prbs)\ /\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_fit\_in\_frame}});}
\DoxyCodeLine{00116\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/ofh/transmitter/ofh\+\_\+uplane\+\_\+fragment\+\_\+size\+\_\+calculator.\+h\item 
lib/ofh/transmitter/ofh\+\_\+uplane\+\_\+fragment\+\_\+size\+\_\+calculator.\+cpp\end{DoxyCompactItemize}
