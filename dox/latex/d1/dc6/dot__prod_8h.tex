\doxysection{include/srsran/srsvec/dot\+\_\+prod.h File Reference}
\hypertarget{dot__prod_8h}{}\label{dot__prod_8h}\index{include/srsran/srsvec/dot\_prod.h@{include/srsran/srsvec/dot\_prod.h}}


Dot product declarations.  


{\ttfamily \#include "{}srsran/adt/span.\+h"{}}\newline
{\ttfamily \#include "{}srsran/srsvec/detail/traits.\+h"{}}\newline
{\ttfamily \#include "{}srsran/srsvec/types.\+h"{}}\newline
{\ttfamily \#include "{}srsran/support/srsran\+\_\+assert.\+h"{}}\newline
{\ttfamily \#include $<$numeric$>$}\newline
Include dependency graph for dot\+\_\+prod.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d6/d48/dot__prod_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d67/dot__prod_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespacesrsran}{srsran}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} T , \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} U , \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{V}} $>$ }\\\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{V}} \mbox{\hyperlink{dot__prod_8h_a717859f9c7beff12d89fd79652d7ec4b}{srsran\+::srsvec\+::dot\+\_\+prod}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} T \&x, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} U \&y, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{V}} init)
\begin{DoxyCompactList}\small\item\em Dot product of two spans. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} \mbox{\hyperlink{dot__prod_8h_a33231f29e49ef5711424acf2e4a465dd}{srsran\+::srsvec\+::dot\+\_\+prod}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$ x, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$ y)
\begin{DoxyCompactList}\small\item\em Dot product of two complex spans. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classfloat}{float}} \mbox{\hyperlink{dot__prod_8h_a6f4eb6244edff595a06fe2d5e5ebb650}{srsran\+::srsvec\+::average\+\_\+power}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$ x)
\begin{DoxyCompactList}\small\item\em Estimates the average power of a complex span -\/ linear scale. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Dot product declarations. 



\doxysubsection{Function Documentation}
\Hypertarget{dot__prod_8h_a6f4eb6244edff595a06fe2d5e5ebb650}\label{dot__prod_8h_a6f4eb6244edff595a06fe2d5e5ebb650} 
\index{dot\_prod.h@{dot\_prod.h}!average\_power@{average\_power}}
\index{average\_power@{average\_power}!dot\_prod.h@{dot\_prod.h}}
\doxysubsubsection{\texorpdfstring{average\_power()}{average\_power()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classfloat}{float}} srsran\+::srsvec\+::average\+\_\+power (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$}]{x }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Estimates the average power of a complex span -\/ linear scale. 

The average power of a span is defined as its squared Euclidean norm divided by the number of its elements, i.\+e. {\ttfamily dot\+\_\+prod(x, x) / x.\+size()}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00086\ \{}
\DoxyCodeLine{00087\ \ \ \textcolor{keywordflow}{if}\ (x.empty())\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{return}\ 0.0F;}
\DoxyCodeLine{00089\ \ \ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{keywordflow}{return}\ std::real(srsvec::dot\_prod(x,\ x))\ /\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(x.size());}
\DoxyCodeLine{00092\ \}}

\end{DoxyCode}
\Hypertarget{dot__prod_8h_a717859f9c7beff12d89fd79652d7ec4b}\label{dot__prod_8h_a717859f9c7beff12d89fd79652d7ec4b} 
\index{dot\_prod.h@{dot\_prod.h}!dot\_prod@{dot\_prod}}
\index{dot\_prod@{dot\_prod}!dot\_prod.h@{dot\_prod.h}}
\doxysubsubsection{\texorpdfstring{dot\_prod()}{dot\_prod()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename T , typename U , typename V $>$ \\
V srsran\+::srsvec\+::dot\+\_\+prod (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} T \&}]{x,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} U \&}]{y,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{V}}}]{init }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Dot product of two spans. 

Computes the dot product (a.\+k.\+a. inner product or scalar product) of the two sequences represented by the input spans, adding an initial offset. 
\begin{DoxyTemplParams}{Template Parameters}
{\em T} & A span of an arithmetic type. \\
\hline
{\em U} & A span of an arithmetic type. \\
\hline
{\em V} & Output type (must be compatible with the product of object of type {\ttfamily T} and {\ttfamily U}). \\
\hline
\end{DoxyTemplParams}

\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em x} & First span. \\
\hline
\mbox{\texttt{ in}}  & {\em y} & Second span. \\
\hline
\mbox{\texttt{ in}}  & {\em init} & Initialization value. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The dot product between the two spans plus {\ttfamily init}, i.\+e. $ x \cdot y + \textup{init} = \sum_i x_i y_i +
\textup{init}$. 
\end{DoxyReturn}
\begin{DoxyRemark}{Remarks}
The two input spans must have the same length. 
\end{DoxyRemark}

\begin{DoxyCode}{0}
\DoxyCodeLine{00053\ \{}
\DoxyCodeLine{00054\ \ \ \textcolor{keyword}{static\_assert}(detail::is\_arithmetic\_span\_compatible<T>::value,}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Template\ type\ is\ not\ compatible\ with\ a\ span\ of\ arithmetics"{}});}
\DoxyCodeLine{00056\ \ \ \textcolor{keyword}{static\_assert}(detail::is\_arithmetic\_span\_compatible<U>::value,}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Template\ type\ is\ not\ compatible\ with\ a\ span\ of\ arithmetics"{}});}
\DoxyCodeLine{00058\ \ \ srsran\_srsvec\_assert\_size(x,\ y);}
\DoxyCodeLine{00059\ \ \ \textcolor{keywordflow}{return}\ std::inner\_product(x.begin(),\ x.end(),\ y.begin(),\ init);}
\DoxyCodeLine{00060\ \}}

\end{DoxyCode}
\Hypertarget{dot__prod_8h_a33231f29e49ef5711424acf2e4a465dd}\label{dot__prod_8h_a33231f29e49ef5711424acf2e4a465dd} 
\index{dot\_prod.h@{dot\_prod.h}!dot\_prod@{dot\_prod}}
\index{dot\_prod@{dot\_prod}!dot\_prod.h@{dot\_prod.h}}
\doxysubsubsection{\texorpdfstring{dot\_prod()}{dot\_prod()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} srsran\+::srsvec\+::dot\+\_\+prod (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$}]{x,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$}]{y }\end{DoxyParamCaption})}



Dot product of two complex spans. 

Computes the dot product (a.\+k.\+a. inner product or scalar product) of the two complex sequences. The sequences are represented by the input spans {\ttfamily x} and {\ttfamily y}, the second sequence {\ttfamily y} is conjugated.

The implementation is equivalent to\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{cf\_t\ \mbox{\hyperlink{dot__prod_8h_a717859f9c7beff12d89fd79652d7ec4b}{dot\_prod}}(span<const\ cf\_t>\ x,\ span<const\ cf\_t>\ y)\ \{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ std::inner\_product(x.begin(),\ x.end(),\ y.begin(),\ cf\_t(0.0F),\ std::plus<>(),\ [](cf\_t\ a,\ cf\_t\ b)\ \{\ \textcolor{keywordflow}{return}\ a}
\DoxyCodeLine{\ \ *\ std::conj(b);\ \});}
\DoxyCodeLine{\}}

\end{DoxyCode}



\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em x} & First span. \\
\hline
\mbox{\texttt{ in}}  & {\em y} & Second span. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The dot product between the two spans, i.\+e. $ x \cdot \conj{y}= \sum_i x_i \conj{y}_i $. 
\end{DoxyReturn}
\begin{DoxyRemark}{Remarks}
The two input spans must have the same length. 
\end{DoxyRemark}

\begin{DoxyCode}{0}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \ \ \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\_t}}\ result\ =\ 0;}
\DoxyCodeLine{00032\ \ \ srsran\_srsvec\_assert\_size(x,\ y);}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \textcolor{keywordtype}{unsigned}\ i\ =\ 0,\ len\ =\ x.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}();}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#if\ SRSRAN\_SIMD\_CF\_SIZE}}
\DoxyCodeLine{00036\ \ \ \textcolor{keywordflow}{if}\ (len\ >=\ SRSRAN\_SIMD\_CF\_SIZE)\ \{}
\DoxyCodeLine{00037\ \ \ \ \ simd\_cf\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_result}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{srsran\_simd\_cf\_zero}}();}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_end}}\ =\ SRSRAN\_SIMD\_CF\_SIZE\ *\ (len\ /\ SRSRAN\_SIMD\_CF\_SIZE);\ i\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_end}};}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ i\ +=\ SRSRAN\_SIMD\_CF\_SIZE)\ \{}
\DoxyCodeLine{00040\ \ \ \ \ \ \ simd\_cf\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_x}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{srsran\_simd\_cfi\_loadu}}(\&x[i]);}
\DoxyCodeLine{00041\ \ \ \ \ \ \ simd\_cf\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_y}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{srsran\_simd\_cfi\_loadu}}(\&y[i]);}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_result}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{srsran\_simd\_cf\_add}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{srsran\_simd\_cf\_conjprod}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_x}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_y}}),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_result}});}
\DoxyCodeLine{00044\ \ \ \ \ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{alignas}(SIMD\_BYTE\_ALIGN)\ std::array<cf\_t,\ SRSRAN\_SIMD\_CF\_SIZE>\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_vector\_sum}};}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{srsran\_simd\_cfi\_store}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_vector\_sum}}.data(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_result}});}
\DoxyCodeLine{00048\ \ \ \ \ result\ =\ std::accumulate(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_vector\_sum}}.begin(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{simd\_vector\_sum}}.end(),\ \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\_t}}());}
\DoxyCodeLine{00049\ \ \ \}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ SRSRAN\_SIMD\_CF\_SIZE}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{keywordflow}{for}\ (;\ i\ !=\ len;\ ++i)\ \{}
\DoxyCodeLine{00053\ \ \ \ \ result\ +=\ x[i]\ *\ std::conj(y[i]);}
\DoxyCodeLine{00054\ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00057\ \}}

\end{DoxyCode}
