\doxysection{rigtorp\+::SPSCQueue\texorpdfstring{$<$}{<} T, Allocator \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{classrigtorp_1_1SPSCQueue}{}\label{classrigtorp_1_1SPSCQueue}\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}


Collaboration diagram for rigtorp\+::SPSCQueue\texorpdfstring{$<$}{<} T, Allocator \texorpdfstring{$>$}{>}\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=185pt]{d8/d63/classrigtorp_1_1SPSCQueue__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classrigtorp_1_1SPSCQueue_a8f396d6106a64c61d2b1418bd83ec1ae}{SPSCQueue}} (const size\+\_\+t capacity, const Allocator \&allocator=Allocator())
\item 
\Hypertarget{classrigtorp_1_1SPSCQueue_a1f070bf1b39b4c16ee67b1b06aa09eb7}\label{classrigtorp_1_1SPSCQueue_a1f070bf1b39b4c16ee67b1b06aa09eb7} 
{\bfseries SPSCQueue} (const \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{SPSCQueue}} \&)=delete
\item 
\Hypertarget{classrigtorp_1_1SPSCQueue_a2de96eea89787f80cf716e21d62ec4ae}\label{classrigtorp_1_1SPSCQueue_a2de96eea89787f80cf716e21d62ec4ae} 
\mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{SPSCQueue}} \& {\bfseries operator=} (const \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{SPSCQueue}} \&)=delete
\item 
{\footnotesize template$<$typename... Args$>$ }\\void \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_a4181359d6b61db8e81d64b6f023aef5e}{emplace}} (Args \&\&...args) noexcept(std\+::is\+\_\+nothrow\+\_\+constructible$<$ T, Args \&\&... $>$\+::value)
\item 
{\footnotesize template$<$typename... Args$>$ }\\RIGTORP\+\_\+\+NODISCARD \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_a80b3333d1896fa7b39a0fd4f39a16502}{try\+\_\+emplace}} (Args \&\&...args) noexcept(std\+::is\+\_\+nothrow\+\_\+constructible$<$ T, Args \&\&... $>$\+::value)
\item 
void \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_a8f33fc60939abe07b41a047b31b151b1}{push}} (const T \&v) noexcept(std\+::is\+\_\+nothrow\+\_\+copy\+\_\+constructible$<$ T $>$\+::value)
\item 
{\footnotesize template$<$typename P , typename  = typename std\+::enable\+\_\+if$<$                            std\+::is\+\_\+constructible$<$\+T, P \&\&$>$\+::value$>$\+::type$>$ }\\void \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_a41b51e28235fe9e545fd669e28542dda}{push}} (P \&\&v) noexcept(std\+::is\+\_\+nothrow\+\_\+constructible$<$ T, P \&\& $>$\+::value)
\item 
RIGTORP\+\_\+\+NODISCARD \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_aef53733b4e551a957d299f5b8ccfcde6}{try\+\_\+push}} (const T \&v) noexcept(std\+::is\+\_\+nothrow\+\_\+copy\+\_\+constructible$<$ T $>$\+::value)
\item 
{\footnotesize template$<$typename P , typename  = typename std\+::enable\+\_\+if$<$                            std\+::is\+\_\+constructible$<$\+T, P \&\&$>$\+::value$>$\+::type$>$ }\\RIGTORP\+\_\+\+NODISCARD \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_a4476184b42c793fd5ed0b17194528684}{try\+\_\+push}} (P \&\&v) noexcept(std\+::is\+\_\+nothrow\+\_\+constructible$<$ T, P \&\& $>$\+::value)
\item 
RIGTORP\+\_\+\+NODISCARD T \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_a105f8b1f08a98c584d76ddc189f2c6db}{front}} () noexcept
\item 
void \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_ad2d2ea247248cce7cd953a5ef80a5313}{pop}} () noexcept
\item 
RIGTORP\+\_\+\+NODISCARD size\+\_\+t \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_a8654f86b715aa4d960357a1252580a86}{size}} () const noexcept
\item 
RIGTORP\+\_\+\+NODISCARD \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_a43d1cb15ff3996aff7323f234a2e76c9}{empty}} () const noexcept
\item 
RIGTORP\+\_\+\+NODISCARD size\+\_\+t \mbox{\hyperlink{classrigtorp_1_1SPSCQueue_a840bd65a63f777fca48b694dc2caba06}{capacity}} () const noexcept
\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classrigtorp_1_1SPSCQueue_a8f396d6106a64c61d2b1418bd83ec1ae}\label{classrigtorp_1_1SPSCQueue_a8f396d6106a64c61d2b1418bd83ec1ae} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!SPSCQueue@{SPSCQueue}}
\index{SPSCQueue@{SPSCQueue}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{SPSCQueue()}{SPSCQueue()}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
\mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::\+SPSCQueue (\begin{DoxyParamCaption}\item[{const size\+\_\+t}]{capacity,  }\item[{const Allocator \&}]{allocator = {\ttfamily Allocator()} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060\ \ \ \ \ \ \ :\ capacity\_(capacity),\ allocator\_(allocator)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ The\ queue\ needs\ at\ least\ one\ element}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{if}\ (capacity\_\ <\ 1)\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ capacity\_\ =\ 1;}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ \ \ \ \ capacity\_++;\ \textcolor{comment}{//\ Needs\ one\ slack\ element}}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{//\ Prevent\ overflowing\ size\_t}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{if}\ (capacity\_\ >\ SIZE\_MAX\ -\/\ 2\ *\ kPadding)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ capacity\_\ =\ SIZE\_MAX\ -\/\ 2\ *\ kPadding;}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\#if\ defined(\_\_cpp\_if\_constexpr)\ \&\&\ defined(\_\_cpp\_lib\_void\_t)}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (has\_allocate\_at\_least<Allocator>::value)\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ res\ =\ allocator\_.allocate\_at\_least(capacity\_\ +\ 2\ *\ kPadding);}
\DoxyCodeLine{00074\ \ \ \ \ \ \ slots\_\ =\ res.ptr;}
\DoxyCodeLine{00075\ \ \ \ \ \ \ capacity\_\ =\ res.count\ -\/\ 2\ *\ kPadding;}
\DoxyCodeLine{00076\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ slots\_\ =\ std::allocator\_traits<Allocator>::allocate(}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ allocator\_,\ capacity\_\ +\ 2\ *\ kPadding);}
\DoxyCodeLine{00079\ \ \ \ \ \}}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00081\ \ \ \ \ slots\_\ =\ std::allocator\_traits<Allocator>::allocate(}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ allocator\_,\ capacity\_\ +\ 2\ *\ kPadding);}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{alignof}(SPSCQueue<T>)\ ==\ kCacheLineSize,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(SPSCQueue<T>)\ >=\ 3\ *\ kCacheLineSize,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00087\ \ \ \ \ assert(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}\ *\textcolor{keyword}{>}(\&readIdx\_)\ -\/}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}\ *\textcolor{keyword}{>}(\&writeIdx\_)\ >=}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}std::ptrdiff\_t\textcolor{keyword}{>}(kCacheLineSize));}
\DoxyCodeLine{00090\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_ae27620625b29b245e07f3907b595a0a1}\label{classrigtorp_1_1SPSCQueue_ae27620625b29b245e07f3907b595a0a1} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!````~SPSCQueue@{\texorpdfstring{$\sim$}{\string~}SPSCQueue}}
\index{````~SPSCQueue@{\texorpdfstring{$\sim$}{\string~}SPSCQueue}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}SPSCQueue()}{\string~SPSCQueue()}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
\mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::\texorpdfstring{$\sim$}{\string~}\mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{SPSCQueue}} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordflow}{while}\ (front())\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ pop();}
\DoxyCodeLine{00095\ \ \ \ \ \}}
\DoxyCodeLine{00096\ \ \ \ \ std::allocator\_traits<Allocator>::deallocate(allocator\_,\ slots\_,}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ capacity\_\ +\ 2\ *\ kPadding);}
\DoxyCodeLine{00098\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classrigtorp_1_1SPSCQueue_a840bd65a63f777fca48b694dc2caba06}\label{classrigtorp_1_1SPSCQueue_a840bd65a63f777fca48b694dc2caba06} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!capacity@{capacity}}
\index{capacity@{capacity}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{capacity()}{capacity()}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
RIGTORP\+\_\+\+NODISCARD size\+\_\+t \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::capacity (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00206\ \{\ \textcolor{keywordflow}{return}\ capacity\_\ -\/\ 1;\ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_a4181359d6b61db8e81d64b6f023aef5e}\label{classrigtorp_1_1SPSCQueue_a4181359d6b61db8e81d64b6f023aef5e} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!emplace@{emplace}}
\index{emplace@{emplace}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{emplace()}{emplace()}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
template$<$typename... Args$>$ \\
void \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::emplace (\begin{DoxyParamCaption}\item[{Args \&\&...}]{args }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_constructible<T,\ Args\ \&\&...>::value,}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}T\ must\ be\ constructible\ with\ Args\&\&..."{}});}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ writeIdx\ =\ writeIdx\_.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keyword}{auto}\ nextWriteIdx\ =\ writeIdx\ +\ 1;}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordflow}{if}\ (nextWriteIdx\ ==\ capacity\_)\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ nextWriteIdx\ =\ 0;}
\DoxyCodeLine{00113\ \ \ \ \ \}}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{while}\ (nextWriteIdx\ ==\ readIdxCache\_)\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ readIdxCache\_\ =\ readIdx\_.load(std::memory\_order\_acquire);}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keyword}{new}\ (\&slots\_[writeIdx\ +\ kPadding])\ T(std::forward<Args>(args)...);}
\DoxyCodeLine{00118\ \ \ \ \ writeIdx\_.store(nextWriteIdx,\ std::memory\_order\_release);}
\DoxyCodeLine{00119\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_a43d1cb15ff3996aff7323f234a2e76c9}\label{classrigtorp_1_1SPSCQueue_a43d1cb15ff3996aff7323f234a2e76c9} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!empty@{empty}}
\index{empty@{empty}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{empty()}{empty()}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
RIGTORP\+\_\+\+NODISCARD \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::empty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordflow}{return}\ writeIdx\_.load(std::memory\_order\_acquire)\ ==}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ readIdx\_.load(std::memory\_order\_acquire);}
\DoxyCodeLine{00204\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_a105f8b1f08a98c584d76ddc189f2c6db}\label{classrigtorp_1_1SPSCQueue_a105f8b1f08a98c584d76ddc189f2c6db} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!front@{front}}
\index{front@{front}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{front()}{front()}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
RIGTORP\+\_\+\+NODISCARD T \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::front (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ readIdx\ =\ readIdx\_.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keywordflow}{if}\ (readIdx\ ==\ writeIdxCache\_)\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ writeIdxCache\_\ =\ writeIdx\_.load(std::memory\_order\_acquire);}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (writeIdxCache\_\ ==\ readIdx)\ \{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00175\ \ \ \ \ \}}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordflow}{return}\ \&slots\_[readIdx\ +\ kPadding];}
\DoxyCodeLine{00177\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_ad2d2ea247248cce7cd953a5ef80a5313}\label{classrigtorp_1_1SPSCQueue_ad2d2ea247248cce7cd953a5ef80a5313} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!pop@{pop}}
\index{pop@{pop}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{pop()}{pop()}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
void \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::pop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_nothrow\_destructible<T>::value,}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}T\ must\ be\ nothrow\ destructible"{}});}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ readIdx\ =\ readIdx\_.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00183\ \ \ \ \ assert(writeIdx\_.load(std::memory\_order\_acquire)\ !=\ readIdx);}
\DoxyCodeLine{00184\ \ \ \ \ slots\_[readIdx\ +\ kPadding].\string~T();}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keyword}{auto}\ nextReadIdx\ =\ readIdx\ +\ 1;}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordflow}{if}\ (nextReadIdx\ ==\ capacity\_)\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ nextReadIdx\ =\ 0;}
\DoxyCodeLine{00188\ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ readIdx\_.store(nextReadIdx,\ std::memory\_order\_release);}
\DoxyCodeLine{00190\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_a8f33fc60939abe07b41a047b31b151b1}\label{classrigtorp_1_1SPSCQueue_a8f33fc60939abe07b41a047b31b151b1} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!push@{push}}
\index{push@{push}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{push()}{push()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
void \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::push (\begin{DoxyParamCaption}\item[{const T \&}]{v }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_copy\_constructible<T>::value,}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}T\ must\ be\ copy\ constructible"{}});}
\DoxyCodeLine{00145\ \ \ \ \ emplace(v);}
\DoxyCodeLine{00146\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_a41b51e28235fe9e545fd669e28542dda}\label{classrigtorp_1_1SPSCQueue_a41b51e28235fe9e545fd669e28542dda} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!push@{push}}
\index{push@{push}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{push()}{push()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
template$<$typename P , typename  = typename std\+::enable\+\_\+if$<$                            std\+::is\+\_\+constructible$<$\+T, P \&\&$>$\+::value$>$\+::type$>$ \\
void \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::push (\begin{DoxyParamCaption}\item[{P \&\&}]{v }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00151\ \ \ \ \ emplace(std::forward<P>(v));}
\DoxyCodeLine{00152\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_a8654f86b715aa4d960357a1252580a86}\label{classrigtorp_1_1SPSCQueue_a8654f86b715aa4d960357a1252580a86} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!size@{size}}
\index{size@{size}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{size()}{size()}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
RIGTORP\+\_\+\+NODISCARD size\+\_\+t \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00193\ \ \ \ \ std::ptrdiff\_t\ diff\ =\ writeIdx\_.load(std::memory\_order\_acquire)\ -\/}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ readIdx\_.load(std::memory\_order\_acquire);}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{if}\ (diff\ <\ 0)\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ diff\ +=\ capacity\_;}
\DoxyCodeLine{00197\ \ \ \ \ \}}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(diff);}
\DoxyCodeLine{00199\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_a80b3333d1896fa7b39a0fd4f39a16502}\label{classrigtorp_1_1SPSCQueue_a80b3333d1896fa7b39a0fd4f39a16502} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!try\_emplace@{try\_emplace}}
\index{try\_emplace@{try\_emplace}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{try\_emplace()}{try\_emplace()}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
template$<$typename... Args$>$ \\
RIGTORP\+\_\+\+NODISCARD \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::try\+\_\+emplace (\begin{DoxyParamCaption}\item[{Args \&\&...}]{args }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_constructible<T,\ Args\ \&\&...>::value,}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}T\ must\ be\ constructible\ with\ Args\&\&..."{}});}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ writeIdx\ =\ writeIdx\_.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keyword}{auto}\ nextWriteIdx\ =\ writeIdx\ +\ 1;}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{if}\ (nextWriteIdx\ ==\ capacity\_)\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ nextWriteIdx\ =\ 0;}
\DoxyCodeLine{00130\ \ \ \ \ \}}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{if}\ (nextWriteIdx\ ==\ readIdxCache\_)\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ readIdxCache\_\ =\ readIdx\_.load(std::memory\_order\_acquire);}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nextWriteIdx\ ==\ readIdxCache\_)\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ \}}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keyword}{new}\ (\&slots\_[writeIdx\ +\ kPadding])\ T(std::forward<Args>(args)...);}
\DoxyCodeLine{00138\ \ \ \ \ writeIdx\_.store(nextWriteIdx,\ std::memory\_order\_release);}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00140\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_aef53733b4e551a957d299f5b8ccfcde6}\label{classrigtorp_1_1SPSCQueue_aef53733b4e551a957d299f5b8ccfcde6} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!try\_push@{try\_push}}
\index{try\_push@{try\_push}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{try\_push()}{try\_push()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
RIGTORP\+\_\+\+NODISCARD \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::try\+\_\+push (\begin{DoxyParamCaption}\item[{const T \&}]{v }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_copy\_constructible<T>::value,}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}T\ must\ be\ copy\ constructible"{}});}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keywordflow}{return}\ try\_emplace(v);}
\DoxyCodeLine{00159\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classrigtorp_1_1SPSCQueue_a4476184b42c793fd5ed0b17194528684}\label{classrigtorp_1_1SPSCQueue_a4476184b42c793fd5ed0b17194528684} 
\index{rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}!try\_push@{try\_push}}
\index{try\_push@{try\_push}!rigtorp::SPSCQueue$<$ T, Allocator $>$@{rigtorp::SPSCQueue$<$ T, Allocator $>$}}
\doxysubsubsection{\texorpdfstring{try\_push()}{try\_push()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename T , typename Allocator  = std\+::allocator$<$\+T$>$$>$ \\
template$<$typename P , typename  = typename std\+::enable\+\_\+if$<$                            std\+::is\+\_\+constructible$<$\+T, P \&\&$>$\+::value$>$\+::type$>$ \\
RIGTORP\+\_\+\+NODISCARD \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrigtorp_1_1SPSCQueue}{rigtorp\+::\+SPSCQueue}}$<$ T, Allocator $>$\+::try\+\_\+push (\begin{DoxyParamCaption}\item[{P \&\&}]{v }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{return}\ try\_emplace(std::forward<P>(v));}
\DoxyCodeLine{00166\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
external/rigtorp/SPSCQueue.\+h\end{DoxyCompactItemize}
