\doxysection{f1ap\+\_\+adapters.\+h}
\hypertarget{cu__cp_2adapters_2f1ap__adapters_8h_source}{}\label{cu__cp_2adapters_2f1ap__adapters_8h_source}\index{lib/cu\_cp/adapters/f1ap\_adapters.h@{lib/cu\_cp/adapters/f1ap\_adapters.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ 2021-\/2024\ Software\ Radio\ Systems\ Limited}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ srsRAN.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ srsRAN\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ it\ under\ the\ terms\ of\ the\ GNU\ Affero\ General\ Public\ License\ as}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ published\ by\ the\ Free\ Software\ Foundation,\ either\ version\ 3\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ the\ License,\ or\ (at\ your\ option)\ any\ later\ version.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ srsRAN\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ GNU\ Affero\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ A\ copy\ of\ the\ GNU\ Affero\ General\ Public\ License\ can\ be\ found\ in}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ the\ LICENSE\ file\ in\ the\ top-\/level\ directory\ of\ this\ distribution}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ and\ at\ http://www.gnu.org/licenses/.}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}../../f1ap/common/asn1\_helpers.h"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}../cu\_cp\_impl\_interface.h"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}../du\_processor/du\_processor\_impl\_interface.h"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}../du\_processor/du\_setup\_handler.h"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}srsran/cu\_cp/cu\_cp.h"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}srsran/f1ap/cu\_cp/f1ap\_cu.h"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}srsran/pdcp/pdcp\_rx.h"{}}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesrsran}{srsran}}\ \{}
\DoxyCodeLine{00034\ \textcolor{keyword}{namespace\ }srs\_cu\_cp\ \{}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__cu__cp__adapter}{f1ap\_cu\_cp\_adapter}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__ue__removal__notifier}{f1ap\_ue\_removal\_notifier}}}
\DoxyCodeLine{00038\ \{}
\DoxyCodeLine{00039\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00040\ \ \ \textcolor{keywordtype}{void}\ connect\_cu\_cp(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue__removal__handler}{cu\_cp\_ue\_removal\_handler}}\&\ ue\_removal\_handler\_)\ \{\ ue\_removal\_handler\ =\ \&ue\_removal\_handler\_;\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__cu__cp__adapter_aa8cc97fabab09ce63cf6c7d8f6191dea}{on\_ue\_removal\_required}}(ue\_index\_t\ ue\_index)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00043\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00044\ \ \ \ \ srsran\_assert(ue\_removal\_handler\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}CU-\/CP\ UE\ removal\ handler\ must\ not\ be\ nullptr"{}});}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordflow}{return}\ ue\_removal\_handler-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue__removal__handler_a754f6f93de44d08236ce073e2730147a}{handle\_ue\_removal\_request}}(ue\_index);}
\DoxyCodeLine{00046\ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue__removal__handler}{cu\_cp\_ue\_removal\_handler}}*\ ue\_removal\_handler\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00050\ \};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__repository__adapter}{f1ap\_du\_repository\_adapter}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__management__notifier}{f1ap\_du\_management\_notifier}}}
\DoxyCodeLine{00054\ \{}
\DoxyCodeLine{00055\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00056\ \ \ \textcolor{keywordtype}{void}\ connect\_du\_repository(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__f1c__handler}{cu\_cp\_f1c\_handler}}\&\ du\_handler\_)\ \{\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__handler}{du\_handler}}\ =\ \&du\_handler\_;\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__repository__adapter_aecfa24123b78e2eb6596280f65f6e574}{on\_du\_remove\_request\_received}}(du\_index\_t\ du\_index)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00059\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00060\ \ \ \ \ srsran\_assert(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__handler}{du\_handler}}\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}DU\ handler\ must\ not\ be\ nullptr"{}});}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__handler}{du\_handler}}-\/>handle\_du\_remove\_request(du\_index);}
\DoxyCodeLine{00062\ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00065\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__f1c__handler}{cu\_cp\_f1c\_handler}}*\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__handler}{du\_handler}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00066\ \};}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__processor__adapter}{f1ap\_du\_processor\_adapter}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__processor__notifier}{f1ap\_du\_processor\_notifier}}}
\DoxyCodeLine{00070\ \{}
\DoxyCodeLine{00071\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00072\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__processor__adapter}{f1ap\_du\_processor\_adapter}}(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__setup__handler}{du\_setup\_handler}}\&\ du\_setup\_hdlr\_)\ :\ du\_setup\_hdlr(\&du\_setup\_hdlr\_)\ \{\}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \textcolor{keywordtype}{void}\ connect\_du\_processor(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__f1ap__interface}{du\_processor\_f1ap\_interface}}\&\ du\_processor\_f1ap\_)\ \{\ du\_f1ap\_handler\ =\ \&du\_processor\_f1ap\_;\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1du__setup__result}{du\_setup\_result}}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__processor__adapter_af16706476f6365da4ded43a4edd43281}{on\_new\_du\_setup\_request}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1du__setup__request}{du\_setup\_request}}\&\ msg)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00077\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00078\ \ \ \ \ srsran\_assert(du\_setup\_hdlr\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}F1AP\ handler\ must\ not\ be\ nullptr"{}});}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{return}\ du\_setup\_hdlr-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__setup__handler_a1026a82e4af06f0583c092eac355c325}{handle\_du\_setup\_request}}(msg);}
\DoxyCodeLine{00080\ \ \ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ du\_index\_t\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__processor__adapter_a8af9204358bf569d5e5e8f66bcb7e9f9}{get\_du\_index}}()\textcolor{keyword}{\ override\ }\{\ \textcolor{keywordflow}{return}\ du\_f1ap\_handler-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__f1ap__interface_a9c3721f74673fd1d25baa9e9c9907a2d}{get\_du\_index}}();\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ ue\_index\_t\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__processor__adapter_ad14c763e71c45f74906af83ce8bf2625}{on\_new\_cu\_cp\_ue\_required}}()\textcolor{keyword}{\ override}}
\DoxyCodeLine{00085\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00086\ \ \ \ \ srsran\_assert(du\_f1ap\_handler\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}F1AP\ handler\ must\ not\ be\ nullptr"{}});}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{return}\ du\_f1ap\_handler-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__f1ap__interface_a71a06aa73dc0d9c2f6cf3e58813a0d26}{allocate\_new\_ue\_index}}();}
\DoxyCodeLine{00088\ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ue__rrc__context__creation__response}{ue\_rrc\_context\_creation\_response}}}
\DoxyCodeLine{00091\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__processor__adapter_a8c672b4481839173bec9e7c51ee63260}{on\_ue\_rrc\_context\_creation\_request}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ue__rrc__context__creation__request}{ue\_rrc\_context\_creation\_request}}\&\ req)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00092\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00093\ \ \ \ \ srsran\_assert(du\_f1ap\_handler\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}F1AP\ handler\ must\ not\ be\ nullptr"{}});}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return}\ du\_f1ap\_handler-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__f1ap__interface_a5a93b48e34af752809af1f9b103cb003}{handle\_ue\_rrc\_context\_creation\_request}}(req);}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__du__processor__adapter_ab59010b95814beeaa2c4b1d1ba062bb6}{on\_du\_initiated\_ue\_context\_release\_request}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1f1ap__ue__context__release__request}{f1ap\_ue\_context\_release\_request}}\&\ req)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00098\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00099\ \ \ \ \ srsran\_assert(du\_f1ap\_handler\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}F1AP\ handler\ must\ not\ be\ nullptr"{}});}
\DoxyCodeLine{00100\ \ \ \ \ du\_f1ap\_handler-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__f1ap__interface_a1323a04b3984f7690e335d5e9353831c}{handle\_du\_initiated\_ue\_context\_release\_request}}(req);}
\DoxyCodeLine{00101\ \ \ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00104\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__setup__handler}{du\_setup\_handler}}*\ \ \ \ \ \ \ \ \ \ \ \ du\_setup\_hdlr\ \ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00105\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__f1ap__interface}{du\_processor\_f1ap\_interface}}*\ du\_f1ap\_handler\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00106\ \};}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00109\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__rrc__ue__adapter}{f1ap\_rrc\_ue\_adapter}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__rrc__message__notifier}{f1ap\_rrc\_message\_notifier}}}
\DoxyCodeLine{00110\ \{}
\DoxyCodeLine{00111\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordtype}{void}\ connect\_rrc\_ue(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ul__ccch__pdu__handler}{rrc\_ul\_ccch\_pdu\_handler}}\&\ rrc\_ul\_ccch\_handler\_,\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ul__dcch__pdu__handler}{rrc\_ul\_dcch\_pdu\_handler}}\&\ rrc\_ul\_dcch\_handler\_)}
\DoxyCodeLine{00113\ \ \ \{}
\DoxyCodeLine{00114\ \ \ \ \ rrc\_ul\_ccch\_handler\ =\ \&rrc\_ul\_ccch\_handler\_;}
\DoxyCodeLine{00115\ \ \ \ \ rrc\_ul\_dcch\_handler\ =\ \&rrc\_ul\_dcch\_handler\_;}
\DoxyCodeLine{00116\ \ \ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__rrc__ue__adapter_aac9f60ca906875311a0af316c2caae3b}{on\_ul\_ccch\_pdu}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ pdu)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00119\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00120\ \ \ \ \ srsran\_assert(rrc\_ul\_ccch\_handler\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}RRC\ UL\ CCCH\ handler\ must\ not\ be\ nullptr"{}});}
\DoxyCodeLine{00121\ \ \ \ \ rrc\_ul\_ccch\_handler-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ul__ccch__pdu__handler_a1d29b7fe11ff90360eb563775031d205}{handle\_ul\_ccch\_pdu}}(std::move(pdu));}
\DoxyCodeLine{00122\ \ \ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1f1ap__rrc__ue__adapter_a14ef75a9c86109a1aeb43045ca4b265f}{on\_ul\_dcch\_pdu}}(\textcolor{keyword}{const}\ srb\_id\_t\ srb\_id,\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ pdu)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00125\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00126\ \ \ \ \ srsran\_assert(rrc\_ul\_dcch\_handler\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}RRC\ UL\ DCCH\ handler\ must\ not\ be\ nullptr"{}});}
\DoxyCodeLine{00127\ \ \ \ \ rrc\_ul\_dcch\_handler-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ul__dcch__pdu__handler_ab6cf3dea900c302d05c083f3e84f43f1}{handle\_ul\_dcch\_pdu}}(srb\_id,\ std::move(pdu));}
\DoxyCodeLine{00128\ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00131\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ul__ccch__pdu__handler}{rrc\_ul\_ccch\_pdu\_handler}}*\ rrc\_ul\_ccch\_handler\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00132\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ul__dcch__pdu__handler}{rrc\_ul\_dcch\_pdu\_handler}}*\ rrc\_ul\_dcch\_handler\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00133\ \};}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \}\ \textcolor{comment}{//\ namespace\ srs\_cu\_cp}}
\DoxyCodeLine{00136\ \}\ \textcolor{comment}{//\ namespace\ srsran}}

\end{DoxyCode}
