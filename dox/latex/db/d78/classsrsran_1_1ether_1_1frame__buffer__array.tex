\doxysection{srsran\+::ether\+::frame\+\_\+buffer\+\_\+array Class Reference}
\hypertarget{classsrsran_1_1ether_1_1frame__buffer__array}{}\label{classsrsran_1_1ether_1_1frame__buffer__array}\index{srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}}


{\ttfamily \#include $<$ethernet\+\_\+frame\+\_\+pool.\+h$>$}



Collaboration diagram for srsran\+::ether\+::frame\+\_\+buffer\+\_\+array\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=213pt]{d3/d88/classsrsran_1_1ether_1_1frame__buffer__array__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__buffer__array_1_1used__buffer}{used\+\_\+buffer}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer__array_a2e2a75a007138d1f9fdd683ec5eb7917}{frame\+\_\+buffer\+\_\+array}} (\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\+\_\+buffers\+\_\+to\+\_\+return}}, \mbox{\hyperlink{classunsigned}{unsigned}} buffer\+\_\+size, \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\+\_\+antennas}})
\item 
\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} $>$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer__array_a385b6654cba7b954815d2d194bc5b6cb}{reserve\+\_\+buffers}} ()
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer__array_a17e666b465185c4df73340bf2fe7f667}{push\+\_\+buffers}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prepared\+\_\+buffers}}, \mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point}{ofh\+::slot\+\_\+symbol\+\_\+point}} symbol\+\_\+point)
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer__array_af5ba4d9614211bd8115d73ad1850c71e}{clear\+\_\+buffers}} ()
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer__array_aac1e44547f0dce79cafe4612f94b78ed}{reset\+\_\+buffers}} ()
\item 
\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer__array_a9576fc471aa7e8d0ee54b52055e441de}{find\+\_\+buffers\+\_\+ready\+\_\+for\+\_\+sending}} ()
\item 
\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__buffer__array_1_1used__buffer}{used\+\_\+buffer}} $>$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer__array_af0ac8062b739fb0ac5c0ae91ad2dc367}{get\+\_\+prepared\+\_\+buffers}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class encapsulating {\ttfamily \doxylink{classsrsran_1_1ether_1_1frame__buffer}{ether\+::frame\+\_\+buffer}} buffers used in a circular manner. It is used by {\ttfamily \doxylink{classsrsran_1_1ether_1_1eth__frame__pool}{eth\+\_\+frame\+\_\+pool}} class to manage Ethernet frame buffers for each OFH type in a slot symbol. Internally it keeps track of current write and read positions. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ether_1_1frame__buffer__array_a2e2a75a007138d1f9fdd683ec5eb7917}\label{classsrsran_1_1ether_1_1frame__buffer__array_a2e2a75a007138d1f9fdd683ec5eb7917} 
\index{srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}!frame\_buffer\_array@{frame\_buffer\_array}}
\index{frame\_buffer\_array@{frame\_buffer\_array}!srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}}
\doxysubsubsection{\texorpdfstring{frame\_buffer\_array()}{frame\_buffer\_array()}}
{\footnotesize\ttfamily srsran\+::ether\+::frame\+\_\+buffer\+\_\+array\+::frame\+\_\+buffer\+\_\+array (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{nof\+\_\+buffers\+\_\+to\+\_\+return,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{buffer\+\_\+size,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{nof\+\_\+antennas }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00130\ \ \ \ \ increment\_quant(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_buffers\_to\_return}}),}
\DoxyCodeLine{00131\ \ \ \ \ storage\_nof\_buffers(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_buffers\_to\_return}}\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_antennas}}\ *\ NUM\_OF\_ENTRIES),}
\DoxyCodeLine{00132\ \ \ \ \ buffers\_array(storage\_nof\_buffers,\ frame\_buffer\{buffer\_size\}),}
\DoxyCodeLine{00133\ \ \ \ \ write\_position(storage\_nof\_buffers)}
\DoxyCodeLine{00134\ \ \ \{}
\DoxyCodeLine{00135\ \ \ \ \ aux\_array.reserve(storage\_nof\_buffers);}
\DoxyCodeLine{00136\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ether_1_1frame__buffer__array_af5ba4d9614211bd8115d73ad1850c71e}\label{classsrsran_1_1ether_1_1frame__buffer__array_af5ba4d9614211bd8115d73ad1850c71e} 
\index{srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}!clear\_buffers@{clear\_buffers}}
\index{clear\_buffers@{clear\_buffers}!srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}}
\doxysubsubsection{\texorpdfstring{clear\_buffers()}{clear\_buffers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ether\+::frame\+\_\+buffer\+\_\+array\+::clear\+\_\+buffers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00174\ \ \ \{}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ buffer\ :\ buffers\_array)\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buffer.status\ ==\ frame\_buffer::frame\_buffer\_status::marked\_to\_send)\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ buffer.status\ =\ frame\_buffer::frame\_buffer\_status::free;}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ \ \ \ \ \}}
\DoxyCodeLine{00180\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1frame__buffer__array_a9576fc471aa7e8d0ee54b52055e441de}\label{classsrsran_1_1ether_1_1frame__buffer__array_a9576fc471aa7e8d0ee54b52055e441de} 
\index{srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}!find\_buffers\_ready\_for\_sending@{find\_buffers\_ready\_for\_sending}}
\index{find\_buffers\_ready\_for\_sending@{find\_buffers\_ready\_for\_sending}!srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}}
\doxysubsubsection{\texorpdfstring{find\_buffers\_ready\_for\_sending()}{find\_buffers\_ready\_for\_sending()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} \texorpdfstring{$\ast$}{*} $>$ srsran\+::ether\+::frame\+\_\+buffer\+\_\+array\+::find\+\_\+buffers\+\_\+ready\+\_\+for\+\_\+sending (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00194\ \ \ \{}
\DoxyCodeLine{00195\ \ \ \ \ aux\_array.clear();}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}\ :\ used\_buffers)\ \{}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}.buffer-\/>status\ =\ frame\_buffer::frame\_buffer\_status::marked\_to\_send;}
\DoxyCodeLine{00198\ \ \ \ \ \ \ aux\_array.push\_back(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_buf}}.buffer);}
\DoxyCodeLine{00199\ \ \ \ \ \}}
\DoxyCodeLine{00200\ \ \ \ \ used\_buffers.clear();}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{return}\ aux\_array;}
\DoxyCodeLine{00202\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1frame__buffer__array_af0ac8062b739fb0ac5c0ae91ad2dc367}\label{classsrsran_1_1ether_1_1frame__buffer__array_af0ac8062b739fb0ac5c0ae91ad2dc367} 
\index{srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}!get\_prepared\_buffers@{get\_prepared\_buffers}}
\index{get\_prepared\_buffers@{get\_prepared\_buffers}!srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}}
\doxysubsubsection{\texorpdfstring{get\_prepared\_buffers()}{get\_prepared\_buffers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ether_1_1frame__buffer__array_1_1used__buffer}{used\+\_\+buffer}} $>$ srsran\+::ether\+::frame\+\_\+buffer\+\_\+array\+::get\+\_\+prepared\+\_\+buffers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00204\ \{\ \textcolor{keywordflow}{return}\ used\_buffers;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1frame__buffer__array_a17e666b465185c4df73340bf2fe7f667}\label{classsrsran_1_1ether_1_1frame__buffer__array_a17e666b465185c4df73340bf2fe7f667} 
\index{srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}!push\_buffers@{push\_buffers}}
\index{push\_buffers@{push\_buffers}!srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}}
\doxysubsubsection{\texorpdfstring{push\_buffers()}{push\_buffers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ether\+::frame\+\_\+buffer\+\_\+array\+::push\+\_\+buffers (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} $>$}]{prepared\+\_\+buffers,  }\item[{\mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point}{ofh\+::slot\+\_\+symbol\+\_\+point}}}]{symbol\+\_\+point }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00161\ \ \ \{}
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ buffer\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prepared\_buffers}})\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buffer.empty())\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ buffer.status\ =\ frame\_buffer::frame\_buffer\_status::free;}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ buffer.status\ =\ frame\_buffer::frame\_buffer\_status::used;}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ used\_buffers.push\_back(\{\&buffer,\ symbol\_point\});}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1frame__buffer__array_a385b6654cba7b954815d2d194bc5b6cb}\label{classsrsran_1_1ether_1_1frame__buffer__array_a385b6654cba7b954815d2d194bc5b6cb} 
\index{srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}!reserve\_buffers@{reserve\_buffers}}
\index{reserve\_buffers@{reserve\_buffers}!srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}}
\doxysubsubsection{\texorpdfstring{reserve\_buffers()}{reserve\_buffers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__buffer}{frame\+\_\+buffer}} $>$ srsran\+::ether\+::frame\+\_\+buffer\+\_\+array\+::reserve\+\_\+buffers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00141\ \ \ \{}
\DoxyCodeLine{00142\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{span<frame\_buffer>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{wr\_buffers}}(\&buffers\_array[write\_position.value()],\ increment\_quant);}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordtype}{bool}\ free\ =\ std::all\_of(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{wr\_buffers}}.begin(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{wr\_buffers}}.end(),\ [](\textcolor{keyword}{const}\ frame\_buffer\&\ buffer)\ \{}
\DoxyCodeLine{00145\ \ \ \ \ \ \ return\ buffer.status\ ==\ frame\_buffer::frame\_buffer\_status::free;}
\DoxyCodeLine{00146\ \ \ \ \ \});}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{if}\ (!free)\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00149\ \ \ \ \ \}}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{comment}{//\ Mark\ buffers\ as\ reserved.}}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ buffer\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{wr\_buffers}})\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ buffer.status\ =\ frame\_buffer::frame\_buffer\_status::reserved;}
\DoxyCodeLine{00153\ \ \ \ \ \}}
\DoxyCodeLine{00154\ \ \ \ \ write\_position.increment(increment\_quant);}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{wr\_buffers}};}
\DoxyCodeLine{00156\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1frame__buffer__array_aac1e44547f0dce79cafe4612f94b78ed}\label{classsrsran_1_1ether_1_1frame__buffer__array_aac1e44547f0dce79cafe4612f94b78ed} 
\index{srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}!reset\_buffers@{reset\_buffers}}
\index{reset\_buffers@{reset\_buffers}!srsran::ether::frame\_buffer\_array@{srsran::ether::frame\_buffer\_array}}
\doxysubsubsection{\texorpdfstring{reset\_buffers()}{reset\_buffers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ether\+::frame\+\_\+buffer\+\_\+array\+::reset\+\_\+buffers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00184\ \ \ \{}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ buffer\ :\ buffers\_array)\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buffer.status\ !=\ frame\_buffer::frame\_buffer\_status::marked\_to\_send)\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ buffer.status\ =\ frame\_buffer::frame\_buffer\_status::free;}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ \}}
\DoxyCodeLine{00190\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/srsran/ofh/ethernet/ethernet\+\_\+frame\+\_\+pool.\+h\end{DoxyCompactItemize}
