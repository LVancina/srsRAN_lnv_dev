\doxysection{srsran\+::pusch\+\_\+decoder\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1pusch__decoder__impl}{}\label{classsrsran_1_1pusch__decoder__impl}\index{srsran::pusch\_decoder\_impl@{srsran::pusch\_decoder\_impl}}


Implementation of the PUSCH decoder.  




{\ttfamily \#include $<$pusch\+\_\+decoder\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::pusch\+\_\+decoder\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d42/classsrsran_1_1pusch__decoder__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::pusch\+\_\+decoder\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/dbf/classsrsran_1_1pusch__decoder__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsrsran_1_1pusch__decoder__impl_1_1sch__crc}{sch\+\_\+crc}}
\begin{DoxyCompactList}\small\item\em CRC calculators used in shared channels. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1pusch__decoder__impl_a49964c823505bba10a52a0f082e35b07}\label{classsrsran_1_1pusch__decoder__impl_a49964c823505bba10a52a0f082e35b07} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{using}} {\bfseries codeblock\+\_\+decoder\+\_\+pool} = \mbox{\hyperlink{classsrsran_1_1concurrent__thread__local__object__pool}{concurrent\+\_\+thread\+\_\+local\+\_\+object\+\_\+pool}}$<$\mbox{\hyperlink{classsrsran_1_1pusch__codeblock__decoder}{pusch\+\_\+codeblock\+\_\+decoder}}$>$
\begin{DoxyCompactList}\small\item\em Code block decoder pool type. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1pusch__decoder__impl_a2ad2e17a9690223032353c6c9d1676c4}{pusch\+\_\+decoder\+\_\+impl}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1ldpc__segmenter__rx}{ldpc\+\_\+segmenter\+\_\+rx}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{segmenter\+\_\+}}, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pusch__decoder__impl_a49964c823505bba10a52a0f082e35b07}{codeblock\+\_\+decoder\+\_\+pool}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{decoder\+\_\+pool\+\_\+}}, \mbox{\hyperlink{structsrsran_1_1pusch__decoder__impl_1_1sch__crc}{sch\+\_\+crc}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crc\+\_\+set\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{executor\+\_\+}}, \mbox{\hyperlink{classunsigned}{unsigned}} nof\+\_\+prb, \mbox{\hyperlink{classunsigned}{unsigned}} nof\+\_\+layers)
\begin{DoxyCompactList}\small\item\em PUSCH decoder constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1pusch__decoder__buffer}{pusch\+\_\+decoder\+\_\+buffer}} \& \mbox{\hyperlink{classsrsran_1_1pusch__decoder__impl_a48af33ffe61ad0b9e6226e8914ce0b2a}{new\+\_\+data}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ transport\+\_\+block, \mbox{\hyperlink{classsrsran_1_1unique__rx__buffer}{unique\+\_\+rx\+\_\+buffer}} rm\+\_\+buffer, \mbox{\hyperlink{classsrsran_1_1pusch__decoder__notifier}{pusch\+\_\+decoder\+\_\+notifier}} \&notifier, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration}{configuration}} \&cfg) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Decodes a PUSCH codeword. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1pusch__decoder__impl_aa6329d2e71e4e9354f3862c6eb5655fd}{set\+\_\+nof\+\_\+softbits}} (\mbox{\hyperlink{classsrsran_1_1units_1_1bits}{units\+::bits}} nof\+\_\+softbits) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Sets the number of UL-\/\+SCH codeword softbits expected by the PUSCH decoder. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1pusch__decoder}{srsran\+::pusch\+\_\+decoder}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}pusch\+\_\+decoder} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementation of the PUSCH decoder. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1pusch__decoder__impl_a2ad2e17a9690223032353c6c9d1676c4}\label{classsrsran_1_1pusch__decoder__impl_a2ad2e17a9690223032353c6c9d1676c4} 
\index{srsran::pusch\_decoder\_impl@{srsran::pusch\_decoder\_impl}!pusch\_decoder\_impl@{pusch\_decoder\_impl}}
\index{pusch\_decoder\_impl@{pusch\_decoder\_impl}!srsran::pusch\_decoder\_impl@{srsran::pusch\_decoder\_impl}}
\doxysubsubsection{\texorpdfstring{pusch\_decoder\_impl()}{pusch\_decoder\_impl()}}
{\footnotesize\ttfamily srsran\+::pusch\+\_\+decoder\+\_\+impl\+::pusch\+\_\+decoder\+\_\+impl (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1ldpc__segmenter__rx}{ldpc\+\_\+segmenter\+\_\+rx}} $>$}]{segmenter\+\_\+,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pusch__decoder__impl_a49964c823505bba10a52a0f082e35b07}{codeblock\+\_\+decoder\+\_\+pool}} $>$}]{decoder\+\_\+pool\+\_\+,  }\item[{\mbox{\hyperlink{structsrsran_1_1pusch__decoder__impl_1_1sch__crc}{sch\+\_\+crc}}}]{crc\+\_\+set\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \texorpdfstring{$\ast$}{*}}]{executor\+\_\+,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{nof\+\_\+prb,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{nof\+\_\+layers }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



PUSCH decoder constructor. 

Sets up the internal components, namely LDPC segmenter, LDPC rate dematcher, LDPC decoder and all the CRC calculators.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em segmenter\+\_\+} & LDPC segmenter. \\
\hline
\mbox{\texttt{ in}}  & {\em decoder\+\_\+pool\+\_\+} & Codeblock decoder. \\
\hline
\mbox{\texttt{ in}}  & {\em crc\+\_\+set\+\_\+} & Structure with pointers to three CRC calculator objects, with generator polynomials of type {\ttfamily CRC16}, {\ttfamily CRC24A} and {\ttfamily CRC24B}. \\
\hline
\mbox{\texttt{ in}}  & {\em executor\+\_\+} & Task executor for asynchronous PUSCH code block decoding. \\
\hline
\mbox{\texttt{ in}}  & {\em nof\+\_\+prb} & Number of PRBs. \\
\hline
\mbox{\texttt{ in}}  & {\em nof\+\_\+layers} & Number of layers. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ segmenter(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{segmenter\_}})),}
\DoxyCodeLine{00080\ \ \ \ \ decoder\_pool(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{decoder\_pool\_}})),}
\DoxyCodeLine{00081\ \ \ \ \ crc\_set(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crc\_set\_}})),}
\DoxyCodeLine{00082\ \ \ \ \ executor(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{executor\_}}),}
\DoxyCodeLine{00083\ \ \ \ \ softbits\_buffer(pusch\_constants::get\_max\_codeword\_size(nof\_prb,\ nof\_layers).value()),}
\DoxyCodeLine{00084\ \ \ \ \ cb\_stats(MAX\_NOF\_SEGMENTS)}
\DoxyCodeLine{00085\ \ \ \{}
\DoxyCodeLine{00086\ \ \ \ \ srsran\_assert(segmenter,\ \textcolor{stringliteral}{"{}Invalid\ segmenter."{}});}
\DoxyCodeLine{00087\ \ \ \ \ srsran\_assert(decoder\_pool,\ \textcolor{stringliteral}{"{}Invalid\ codeblock\ decoder\ pool."{}});}
\DoxyCodeLine{00088\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__impl_1_1sch__crc_a531e4c55746ccd4de6edbe5c83c0e2ed}{crc16}},\ \textcolor{stringliteral}{"{}Invalid\ CRC16\ calculator."{}});}
\DoxyCodeLine{00089\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__impl_1_1sch__crc_a0e8b886185f418f5340f4bf6c3317ed4}{crc24A}},\ \textcolor{stringliteral}{"{}Invalid\ CRC24A\ calculator."{}});}
\DoxyCodeLine{00090\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__impl_1_1sch__crc_ad00bcd2c2c6e705725f40b628901b512}{crc24B}},\ \textcolor{stringliteral}{"{}Invalid\ CRC24B\ calculator."{}});}
\DoxyCodeLine{00091\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__impl_1_1sch__crc_a531e4c55746ccd4de6edbe5c83c0e2ed}{crc16}}-\/>get\_generator\_poly()\ ==\ crc\_generator\_poly::CRC16,\ \textcolor{stringliteral}{"{}Wrong\ TB\ CRC\ calculator."{}});}
\DoxyCodeLine{00092\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__impl_1_1sch__crc_a0e8b886185f418f5340f4bf6c3317ed4}{crc24A}}-\/>get\_generator\_poly()\ ==\ crc\_generator\_poly::CRC24A,\ \textcolor{stringliteral}{"{}Wrong\ TB\ CRC\ calculator."{}});}
\DoxyCodeLine{00093\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__impl_1_1sch__crc_ad00bcd2c2c6e705725f40b628901b512}{crc24B}}-\/>get\_generator\_poly()\ ==\ crc\_generator\_poly::CRC24B,\ \textcolor{stringliteral}{"{}Wrong\ TB\ CRC\ calculator."{}});}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{if}\ (executor\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ srsran\_assert(decoder\_pool-\/>capacity()\ >\ 1,}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ number\ of\ PUSCH\ code\ block\ decoder\ in\ the\ pool\ (i.e.,\ \{\})\ must\ be\ greater\ than\ one."{}},}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decoder\_pool-\/>capacity());}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ \ \ \};}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1pusch__decoder__impl_a48af33ffe61ad0b9e6226e8914ce0b2a}\label{classsrsran_1_1pusch__decoder__impl_a48af33ffe61ad0b9e6226e8914ce0b2a} 
\index{srsran::pusch\_decoder\_impl@{srsran::pusch\_decoder\_impl}!new\_data@{new\_data}}
\index{new\_data@{new\_data}!srsran::pusch\_decoder\_impl@{srsran::pusch\_decoder\_impl}}
\doxysubsubsection{\texorpdfstring{new\_data()}{new\_data()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1pusch__decoder__buffer}{pusch\+\_\+decoder\+\_\+buffer}} \& pusch\+\_\+decoder\+\_\+impl\+::new\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{transport\+\_\+block,  }\item[{\mbox{\hyperlink{classsrsran_1_1unique__rx__buffer}{unique\+\_\+rx\+\_\+buffer}}}]{rm\+\_\+buffer,  }\item[{\mbox{\hyperlink{classsrsran_1_1pusch__decoder__notifier}{pusch\+\_\+decoder\+\_\+notifier}} \&}]{notifier,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration}{configuration}} \&}]{cfg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Decodes a PUSCH codeword. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em transport\+\_\+block} & The decoded transport block, with packed (8 bits per entry) representation. \\
\hline
\mbox{\texttt{ in,out}}  & {\em rm\+\_\+buffer} & A buffer for combining log-\/likelihood ratios from different retransmissions. \\
\hline
\mbox{\texttt{ in}}  & {\em notifier} & Interface for notifying the completion of the TB processing. \\
\hline
\mbox{\texttt{ in}}  & {\em cfg} & Decoder configuration parameters. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A \doxylink{classsrsran_1_1pusch__decoder__buffer}{pusch\+\_\+decoder\+\_\+buffer}, used to write softbits into the decoder. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classsrsran_1_1pusch__decoder_abfc3c42e784ff24d28827bb5973782c3}{srsran\+::pusch\+\_\+decoder}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00093\ \{}
\DoxyCodeLine{00094\ \ \ transport\_block\ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{transport\_block\_}};}
\DoxyCodeLine{00095\ \ \ unique\_rm\_buffer\ =\ std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{unique\_rm\_buffer\_}});}
\DoxyCodeLine{00096\ \ \ result\_notifier\ \ =\ \&notifier;}
\DoxyCodeLine{00097\ \ \ current\_config\ \ \ =\ cfg;}
\DoxyCodeLine{00098\ \ \ softbits\_count\ \ \ =\ 0;}
\DoxyCodeLine{00099\ \ \ codeblock\_llrs.clear();}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{//\ Unset\ the\ expected\ number\ of\ UL-\/SCH\ softbits.}}
\DoxyCodeLine{00102\ \ \ nof\_ulsch\_softbits.reset();}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{comment}{//\ Compute\ segmentation\ configuration.}}
\DoxyCodeLine{00105\ \ \ segmentation\_config.\mbox{\hyperlink{structsrsran_1_1segmenter__config_a07cb0f854c348847ba94e20f2a55063e}{base\_graph}}\ =\ current\_config.\mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration_a18a774c3f10110a7d2cf89b8bcb008b8}{base\_graph}};}
\DoxyCodeLine{00106\ \ \ segmentation\_config.\mbox{\hyperlink{structsrsran_1_1segmenter__config_adbd7166842b20a68684d78ab05f4750d}{rv}}\ \ \ \ \ \ \ \ \ =\ current\_config.\mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration_a271f2978f990a6ad33ac89406d411490}{rv}};}
\DoxyCodeLine{00107\ \ \ segmentation\_config.\mbox{\hyperlink{structsrsran_1_1segmenter__config_a368bfda32bf9a15edfbfb1445c13bcdf}{mod}}\ \ \ \ \ \ \ \ =\ current\_config.\mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration_a32f27180cf4f71f158766e17617923c8}{mod}};}
\DoxyCodeLine{00108\ \ \ segmentation\_config.\mbox{\hyperlink{structsrsran_1_1segmenter__config_aa9e1f2dd515806ba4400666a66081e2d}{Nref}}\ \ \ \ \ \ \ =\ current\_config.\mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration_a5ca6455d1610b04412d1ca70b3005006}{Nref}};}
\DoxyCodeLine{00109\ \ \ segmentation\_config.\mbox{\hyperlink{structsrsran_1_1segmenter__config_abee99babfc1bda958ddfd12ae646cb03}{nof\_layers}}\ =\ current\_config.\mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration_a441fa8661be8c41b5e44335a62a59fd1}{nof\_layers}};}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{comment}{//\ Set\ the\ CB\ counters.}}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordtype}{unsigned}\ tb\_size\ \ \ \ \ =\ transport\_block.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}()\ *\ BITS\_PER\_BYTE;}
\DoxyCodeLine{00113\ \ \ nof\_codeblocks\ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_1_1ldpc_a23acad74746ca49586fe02e3033bd392}{ldpc::compute\_nof\_codeblocks}}(\mbox{\hyperlink{classsrsran_1_1units_1_1bits}{units::bits}}(tb\_size),\ segmentation\_config.\mbox{\hyperlink{structsrsran_1_1segmenter__config_a07cb0f854c348847ba94e20f2a55063e}{base\_graph}});}
\DoxyCodeLine{00114\ \ \ cb\_task\_counter\ \ \ \ \ \ =\ nof\_codeblocks;}
\DoxyCodeLine{00115\ \ \ available\_cb\_counter\ =\ 0;}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ srsran\_assert(nof\_codeblocks\ ==\ unique\_rm\_buffer-\/>\mbox{\hyperlink{classsrsran_1_1rx__buffer_a7f1402c4786078edc9172fb7a7d654eb}{get\_nof\_codeblocks}}(),}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Wrong\ number\ of\ codeblocks\ \{\}\ (expected\ \{\})."{}},}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unique\_rm\_buffer-\/>\mbox{\hyperlink{classsrsran_1_1rx__buffer_a7f1402c4786078edc9172fb7a7d654eb}{get\_nof\_codeblocks}}(),}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nof\_codeblocks);}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \textcolor{comment}{//\ Select\ CRC\ calculator\ for\ inner\ codeblock\ checks.}}
\DoxyCodeLine{00123\ \ \ block\_crc\ =\ select\_crc(crc\_set,\ tb\_size,\ nof\_codeblocks);}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \textcolor{comment}{//\ Reset\ CRCs\ if\ new\ data\ is\ flagged.}}
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<bool>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_crcs}}\ =\ unique\_rm\_buffer-\/>\mbox{\hyperlink{classsrsran_1_1rx__buffer_afb0db9dc38222f4b50ea7f24d8baaa8f}{get\_codeblocks\_crc}}();}
\DoxyCodeLine{00127\ \ \ \textcolor{keywordflow}{if}\ (current\_config.\mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration_a14ac9b624cde5e22b3fb5f1b4226f540}{new\_data}})\ \{}
\DoxyCodeLine{00128\ \ \ \ \ srsvec::zero(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_crcs}});}
\DoxyCodeLine{00129\ \ \ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00132\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1pusch__decoder__impl_aa6329d2e71e4e9354f3862c6eb5655fd}\label{classsrsran_1_1pusch__decoder__impl_aa6329d2e71e4e9354f3862c6eb5655fd} 
\index{srsran::pusch\_decoder\_impl@{srsran::pusch\_decoder\_impl}!set\_nof\_softbits@{set\_nof\_softbits}}
\index{set\_nof\_softbits@{set\_nof\_softbits}!srsran::pusch\_decoder\_impl@{srsran::pusch\_decoder\_impl}}
\doxysubsubsection{\texorpdfstring{set\_nof\_softbits()}{set\_nof\_softbits()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} pusch\+\_\+decoder\+\_\+impl\+::set\+\_\+nof\+\_\+softbits (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1units_1_1bits}{units\+::bits}}}]{nof\+\_\+softbits }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Sets the number of UL-\/\+SCH codeword softbits expected by the PUSCH decoder. 

It allows the decoder to start decoding codeblocks before receiving the entire codeword. If it is called before \doxylink{classsrsran_1_1pusch__decoder__impl_a48af33ffe61ad0b9e6226e8914ce0b2a}{new\+\_\+data} or after decoding has started, it has no effect.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em nof\+\_\+softbits} & Number of codeword softbits, parameter $G^\textup{UL-SCH}$ in TS38.\+212 Section 6.\+2.\+7. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1pusch__decoder_a06627763d4c15a248b389602dc818a45}{srsran\+::pusch\+\_\+decoder}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00148\ \{}
\DoxyCodeLine{00149\ \ \ nof\_ulsch\_softbits.emplace(nof\_softbits);}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \textcolor{keywordtype}{unsigned}\ modulation\_order\ =\ \mbox{\hyperlink{namespacesrsran_af78ee928d6d8a3d8ff6bbc753f50c44e}{get\_bits\_per\_symbol}}(current\_config.\mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration_a32f27180cf4f71f158766e17617923c8}{mod}});}
\DoxyCodeLine{00152\ \ \ srsran\_assert(nof\_ulsch\_softbits-\/>value()\ \%\ modulation\_order\ ==\ 0,}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ number\ of\ soft\ bits\ (i.e.,\ \{\})\ must\ be\ multiple\ of\ the\ modulation\ order\ (i.e.,\ \{\})."{}},}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nof\_ulsch\_softbits-\/>value(),}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ modulation\_order);}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \textcolor{comment}{//\ Set\ derived\ parameters.}}
\DoxyCodeLine{00158\ \ \ segmentation\_config.\mbox{\hyperlink{structsrsran_1_1segmenter__config_a8c5b77d22a4b2d17e2977ffad868b20b}{nof\_ch\_symbols}}\ =\ nof\_ulsch\_softbits-\/>value()\ /\ modulation\_order;}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \textcolor{comment}{//\ Select\ view\ of\ LLRs.}}
\DoxyCodeLine{00161\ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ log\_likelihood\_ratio>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{llrs}}\ =}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{span<const\ log\_likelihood\_ratio>}}(softbits\_buffer).\mbox{\hyperlink{classsrsran_1_1span_aa4238c2e04ac8c60726db8cc0b687582}{first}}(nof\_ulsch\_softbits-\/>value());}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \textcolor{comment}{//\ Recall\ that\ the\ TB\ is\ in\ packed\ format.}}
\DoxyCodeLine{00165\ \ \ \textcolor{keywordtype}{unsigned}\ tb\_size\ =\ transport\_block.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}()\ *\ BITS\_PER\_BYTE;}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \textcolor{comment}{//\ Generate\ segmentation\ information\ and\ CB\ views.}}
\DoxyCodeLine{00168\ \ \ segmenter-\/>segment(codeblock\_llrs,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{llrs}},\ tb\_size,\ segmentation\_config);}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \textcolor{comment}{//\ All\ information\ about\ the\ CW\ segments\ should\ be\ available.}}
\DoxyCodeLine{00171\ \ \ srsran\_assert(}
\DoxyCodeLine{00172\ \ \ \ \ \ \ nof\_codeblocks\ ==\ codeblock\_llrs.size(),}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ number\ of\ described\ CW\ segments,\ i.e.,\ \{\},\ does\ not\ match\ the\ expected\ number\ of\ codeblocks,\ i.e.,\ \{\}."{}},}
\DoxyCodeLine{00174\ \ \ \ \ \ \ codeblock\_llrs.size(),}
\DoxyCodeLine{00175\ \ \ \ \ \ \ nof\_codeblocks);}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \textcolor{comment}{//\ Compute\ the\ number\ of\ currently\ available\ codeblocks.}}
\DoxyCodeLine{00178\ \ \ available\_cb\_counter\ =\ get\_nof\_available\_codeblocks(codeblock\_llrs,\ softbits\_count);}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \textcolor{comment}{//\ If\ there\ are\ available\ codeblocks,\ start\ as\ many\ decoding\ tasks\ as\ possible.}}
\DoxyCodeLine{00181\ \ \ \textcolor{keywordflow}{if}\ (available\_cb\_counter\ >\ 0)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{comment}{//\ Fork\ tasks\ for\ new\ codeblocks.}}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cb}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cb}}\ !=\ available\_cb\_counter;\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cb}})\ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ fork\_codeblock\_task(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cb}});}
\DoxyCodeLine{00185\ \ \ \ \ \}}
\DoxyCodeLine{00186\ \ \ \}}
\DoxyCodeLine{00187\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/channel\+\_\+processors/pusch/pusch\+\_\+decoder\+\_\+impl.\+h\item 
lib/phy/upper/channel\+\_\+processors/pusch/pusch\+\_\+decoder\+\_\+impl.\+cpp\end{DoxyCompactItemize}
