\doxysection{srsran\+::carrier\+\_\+subslot\+\_\+resource\+\_\+grid Class Reference}
\hypertarget{classsrsran_1_1carrier__subslot__resource__grid}{}\label{classsrsran_1_1carrier__subslot__resource__grid}\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}


Represents the Symbol x CRB resource grid of a DL/\+UL Carrier. The number of CRBs of the grid will depend on the carrier bandwidth and numerology used.  




{\ttfamily \#include $<$resource\+\_\+grid.\+h$>$}



Collaboration diagram for srsran\+::carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=221pt]{dd/d11/classsrsran_1_1carrier__subslot__resource__grid__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a3552e08c6e4575626531bb524433f015}{carrier\+\_\+subslot\+\_\+resource\+\_\+grid}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1scs__specific__carrier}{scs\+\_\+specific\+\_\+carrier}} \&carrier\+\_\+cfg)
\item 
\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\+\_\+spacing}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a1eee649a3a9d800ae434e75fdcdb1e56}{scs}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_ad9492bc4858fa20233733127e835d064}{nof\+\_\+rbs}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_abbdd97c088590791aae653fc2ab9e107}{offset}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\+\_\+interval}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a3b6249ba53a4f40d125e5303b488c87c}{rb\+\_\+dims}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a11e0edbed29b3a1f9fdd4791596023db}{clear}} ()
\begin{DoxyCompactList}\small\item\em Clearer Carrier Resource Grid. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a27ccc216d3099e49700aa3a0f1362ed9}{fill}} (\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}} symbols, \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\+\_\+interval}} crbs)
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a47a73327e942879a4d74a70095eb8bd1}{fill}} (\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}} symbols, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} uint16\+\_\+t $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb\+\_\+list}})
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a9240696310f6958a03f53bd94b1fa412}{collides}} (\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}} symbols, \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\+\_\+interval}} crbs) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a5abc4f08dd665e198b7a266352c8f1ca}{collides}} (\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}} symbols, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} uint16\+\_\+t $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb\+\_\+list}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{namespacesrsran_a819fec1d2b695c433077ea924e7ebcd8}{crb\+\_\+bitmap}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a7c600702eaac7a1f49c0082dfe0f96df}{used\+\_\+crbs}} (\mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\+\_\+interval}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bwp\+\_\+crb\+\_\+lims}}, \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}} symbols) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Calculates a bitmap where each bit set one represents a CRB that is occupied or unavailable. A CRB is considered occupied if it is outside of the provided BWP CRB boundaries or if it is already allocated in at least one OFDM symbol of the provided OFDM symbol range. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_aed60a3357ae8744b9fb69c6629a1fd95}{all\+\_\+set}} (\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}} symbols, \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\+\_\+interval}} crbs) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Represents the Symbol x CRB resource grid of a DL/\+UL Carrier. The number of CRBs of the grid will depend on the carrier bandwidth and numerology used. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_a3552e08c6e4575626531bb524433f015}\label{classsrsran_1_1carrier__subslot__resource__grid_a3552e08c6e4575626531bb524433f015} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!carrier\_subslot\_resource\_grid@{carrier\_subslot\_resource\_grid}}
\index{carrier\_subslot\_resource\_grid@{carrier\_subslot\_resource\_grid}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{carrier\_subslot\_resource\_grid()}{carrier\_subslot\_resource\_grid()}}
{\footnotesize\ttfamily carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::carrier\+\_\+subslot\+\_\+resource\+\_\+grid (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1scs__specific__carrier}{scs\+\_\+specific\+\_\+carrier}} \&}]{carrier\+\_\+cfg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00037\ \ \ carrier\_cfg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{carrier\_cfg\_}}),\ slot\_rbs(\mbox{\hyperlink{namespacesrsran_a2ec632168c0292dc5fd78c9bd35f159b}{NOF\_OFDM\_SYM\_PER\_SLOT\_NORMAL\_CP}}\ *\ carrier\_cfg.\mbox{\hyperlink{structsrsran_1_1scs__specific__carrier_a916a5653e7f9213b2d41912da4143bda}{carrier\_bandwidth}})}
\DoxyCodeLine{00038\ \{}
\DoxyCodeLine{00039\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_aed60a3357ae8744b9fb69c6629a1fd95}\label{classsrsran_1_1carrier__subslot__resource__grid_aed60a3357ae8744b9fb69c6629a1fd95} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!all\_set@{all\_set}}
\index{all\_set@{all\_set}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{all\_set()}{all\_set()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::all\+\_\+set (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}}}]{symbols,  }\item[{\mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\+\_\+interval}}}]{crbs }\end{DoxyParamCaption}) const}

Checks whether the provided symbol x CRB range in the carrier resource grid is set. 
\begin{DoxyParams}{Parameters}
{\em symbols} & OFDM symbol interval of the allocation. Interval must fall within \mbox{[}0, 14). \\
\hline
{\em crbs} & CRB interval, where CRB=0 corresponds to the CRB closest to pointA. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if all symbols and CRBs of the provided range are set. False otherwise. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00116\ \{}
\DoxyCodeLine{00117\ \ \ srsran\_sanity\_check(rb\_dims().contains(crbs),\ \textcolor{stringliteral}{"{}CRB\ interval\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00118\ \ \ srsran\_sanity\_check(symbols.stop()\ <=\ \mbox{\hyperlink{namespacesrsran_a2ec632168c0292dc5fd78c9bd35f159b}{NOF\_OFDM\_SYM\_PER\_SLOT\_NORMAL\_CP}},\ \textcolor{stringliteral}{"{}OFDM\ symbols\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \textcolor{comment}{//\ carrier\ bitmap\ RB\ bit=0\ corresponds\ to\ CRB=carrier\ offset.\ Thus,\ we\ need\ to\ shift\ the\ CRB\ interval.}}
\DoxyCodeLine{00121\ \ \ crbs.\mbox{\hyperlink{classsrsran_1_1interval_ac796ee20177cc9233ed5e8a9120ae3d5}{displace\_by}}(-\/(\textcolor{keywordtype}{int})offset());}
\DoxyCodeLine{00122\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ symbols.start();\ i\ <\ symbols.stop();\ ++i)\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordflow}{if}\ (!slot\_rbs.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_add527d4585ee7b24ed669c9661a03056}{all}}(crbs.start()\ +\ i\ *\ nof\_rbs(),\ crbs.stop()\ +\ i\ *\ nof\_rbs()))\ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00125\ \ \ \ \ \}}
\DoxyCodeLine{00126\ \ \ \}}
\DoxyCodeLine{00127\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00128\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_a11e0edbed29b3a1f9fdd4791596023db}\label{classsrsran_1_1carrier__subslot__resource__grid_a11e0edbed29b3a1f9fdd4791596023db} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!clear@{clear}}
\index{clear@{clear}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Clearer Carrier Resource Grid. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00042\ \{}
\DoxyCodeLine{00043\ \ \ slot\_rbs.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a179a14a79e4686cf1d1259031d0976cb}{reset}}();}
\DoxyCodeLine{00044\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_a9240696310f6958a03f53bd94b1fa412}\label{classsrsran_1_1carrier__subslot__resource__grid_a9240696310f6958a03f53bd94b1fa412} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!collides@{collides}}
\index{collides@{collides}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{collides()}{collides()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::collides (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}}}]{symbols,  }\item[{\mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\+\_\+interval}}}]{crbs }\end{DoxyParamCaption}) const}

Checks whether the provided symbol x CRB range collides with any other allocation in the carrier resource grid. 
\begin{DoxyParams}{Parameters}
{\em symbols} & OFDM symbol interval of the allocation. Interval must fall within \mbox{[}0, 14). \\
\hline
{\em crbs} & CRB interval, where CRB=0 corresponds to the CRB closest to pointA. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if a collision was detected. False otherwise. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00073\ \{}
\DoxyCodeLine{00074\ \ \ srsran\_sanity\_check(rb\_dims().contains(crbs),\ \textcolor{stringliteral}{"{}CRB\ interval\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00075\ \ \ srsran\_sanity\_check(symbols.stop()\ <=\ \mbox{\hyperlink{namespacesrsran_a2ec632168c0292dc5fd78c9bd35f159b}{NOF\_OFDM\_SYM\_PER\_SLOT\_NORMAL\_CP}},\ \textcolor{stringliteral}{"{}OFDM\ symbols\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \textcolor{comment}{//\ carrier\ bitmap\ RB\ bit=0\ corresponds\ to\ CRB=carrier\ offset.\ Thus,\ we\ need\ to\ shift\ the\ CRB\ interval.}}
\DoxyCodeLine{00078\ \ \ crbs.\mbox{\hyperlink{classsrsran_1_1interval_ac796ee20177cc9233ed5e8a9120ae3d5}{displace\_by}}(-\/(\textcolor{keywordtype}{int})offset());}
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ symbols.start();\ i\ <\ symbols.stop();\ ++i)\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{if}\ (slot\_rbs.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_ae4011c726db20e6038f6e7918f31c0bd}{any}}(crbs.start()\ +\ i\ *\ nof\_rbs(),\ crbs.stop()\ +\ i\ *\ nof\_rbs()))\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ \ \ \}}
\DoxyCodeLine{00084\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00085\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_a5abc4f08dd665e198b7a266352c8f1ca}\label{classsrsran_1_1carrier__subslot__resource__grid_a5abc4f08dd665e198b7a266352c8f1ca} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!collides@{collides}}
\index{collides@{collides}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{collides()}{collides()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::collides (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}}}]{symbols,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} uint16\+\_\+t $>$}]{crb\+\_\+list }\end{DoxyParamCaption}) const}

Checks whether the provided symbol x CRB list collides with any other allocation in the carrier resource grid. 
\begin{DoxyParams}{Parameters}
{\em symbols} & OFDM symbol interval of the allocation. Interval must fall within \mbox{[}0, 14). \\
\hline
{\em crbs} & List of CRBs, where CRB=0 corresponds to the CRB closest to pointA. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if a collision was detected. False otherwise. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00088\ \{}
\DoxyCodeLine{00089\ \ \ srsran\_sanity\_check(symbols.stop()\ <=\ \mbox{\hyperlink{namespacesrsran_a2ec632168c0292dc5fd78c9bd35f159b}{NOF\_OFDM\_SYM\_PER\_SLOT\_NORMAL\_CP}},\ \textcolor{stringliteral}{"{}OFDM\ symbols\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{//\ carrier\ bitmap\ RB\ bit=0\ corresponds\ to\ CRB=carrier\ offset.\ Thus,\ we\ need\ to\ shift\ the\ CRB\ interval.}}
\DoxyCodeLine{00092\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ symbols.start();\ i\ <\ symbols.stop();\ ++i)\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint16\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb}}\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb\_list}})\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ srsran\_sanity\_check(rb\_dims().contains(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb}}),\ \textcolor{stringliteral}{"{}CRB\ interval\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb}}\ -\/=\ offset();}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (slot\_rbs.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a53b1498a7820972edb5b9c8db2fc94db}{test}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb}}\ +\ i\ *\ nof\_rbs()))\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00099\ \ \ \ \ \}}
\DoxyCodeLine{00100\ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00103\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_a27ccc216d3099e49700aa3a0f1362ed9}\label{classsrsran_1_1carrier__subslot__resource__grid_a27ccc216d3099e49700aa3a0f1362ed9} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!fill@{fill}}
\index{fill@{fill}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{fill()}{fill()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::fill (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}}}]{symbols,  }\item[{\mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\+\_\+interval}}}]{crbs }\end{DoxyParamCaption})}

Allocates the symbol x CRB range in the carrier resource grid. 
\begin{DoxyParams}{Parameters}
{\em symbols} & OFDM symbol interval of the allocation. Interval must fall within \mbox{[}0, 14). \\
\hline
{\em crbs} & CRB interval, where CRB=0 corresponds to the CRB closest to pointA. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00047\ \{}
\DoxyCodeLine{00048\ \ \ srsran\_sanity\_check(rb\_dims().contains(crbs),\ \textcolor{stringliteral}{"{}CRB\ interval\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00049\ \ \ srsran\_sanity\_check(symbols.stop()\ <=\ \mbox{\hyperlink{namespacesrsran_a2ec632168c0292dc5fd78c9bd35f159b}{NOF\_OFDM\_SYM\_PER\_SLOT\_NORMAL\_CP}},\ \textcolor{stringliteral}{"{}OFDM\ symbols\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \textcolor{comment}{//\ carrier\ bitmap\ RB\ bit=0\ corresponds\ to\ CRB=carrier\ offset.\ Thus,\ we\ need\ to\ shift\ the\ CRB\ interval.}}
\DoxyCodeLine{00052\ \ \ crbs.\mbox{\hyperlink{classsrsran_1_1interval_ac796ee20177cc9233ed5e8a9120ae3d5}{displace\_by}}(-\/(\textcolor{keywordtype}{int})offset());}
\DoxyCodeLine{00053\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ symbols.start();\ i\ <\ symbols.stop();\ ++i)\ \{}
\DoxyCodeLine{00054\ \ \ \ \ slot\_rbs.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a3807138159ac9d71f10a2514eecbdaab}{fill}}(crbs.start()\ +\ i\ *\ nof\_rbs(),\ crbs.stop()\ +\ i\ *\ nof\_rbs());}
\DoxyCodeLine{00055\ \ \ \}}
\DoxyCodeLine{00056\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_a47a73327e942879a4d74a70095eb8bd1}\label{classsrsran_1_1carrier__subslot__resource__grid_a47a73327e942879a4d74a70095eb8bd1} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!fill@{fill}}
\index{fill@{fill}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{fill()}{fill()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::fill (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}}}]{symbols,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} uint16\+\_\+t $>$}]{crb\+\_\+list }\end{DoxyParamCaption})}

Allocates the symbol x CRB list in the carrier resource grid. 
\begin{DoxyParams}{Parameters}
{\em symbols} & OFDM symbol interval of the allocation. Interval must fall within \mbox{[}0, 14). \\
\hline
{\em crbs} & List of CRBs, where CRB=0 corresponds to the CRB closest to pointA. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00059\ \{}
\DoxyCodeLine{00060\ \ \ srsran\_sanity\_check(symbols.stop()\ <=\ \mbox{\hyperlink{namespacesrsran_a2ec632168c0292dc5fd78c9bd35f159b}{NOF\_OFDM\_SYM\_PER\_SLOT\_NORMAL\_CP}},\ \textcolor{stringliteral}{"{}OFDM\ symbols\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \textcolor{comment}{//\ carrier\ bitmap\ RB\ bit=0\ corresponds\ to\ CRB=carrier\ offset.\ Thus,\ we\ need\ to\ shift\ the\ CRB\ interval.}}
\DoxyCodeLine{00063\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ symbols.start();\ i\ <\ symbols.stop();\ ++i)\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint16\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb}}\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb\_list}})\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ srsran\_sanity\_check(rb\_dims().contains(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb}}),\ \textcolor{stringliteral}{"{}CRB\ interval\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb}}\ -\/=\ offset();}
\DoxyCodeLine{00067\ \ \ \ \ \ \ slot\_rbs.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a52f08763e41a945fea0124ad5fc8457c}{set}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb}}\ +\ i\ *\ nof\_rbs());}
\DoxyCodeLine{00068\ \ \ \ \ \}}
\DoxyCodeLine{00069\ \ \ \}}
\DoxyCodeLine{00070\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_ad9492bc4858fa20233733127e835d064}\label{classsrsran_1_1carrier__subslot__resource__grid_ad9492bc4858fa20233733127e835d064} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!nof\_rbs@{nof\_rbs}}
\index{nof\_rbs@{nof\_rbs}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{nof\_rbs()}{nof\_rbs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::nof\+\_\+rbs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00085\ \{\ \textcolor{keywordflow}{return}\ carrier\_cfg.\mbox{\hyperlink{structsrsran_1_1scs__specific__carrier_a916a5653e7f9213b2d41912da4143bda}{carrier\_bandwidth}};\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_abbdd97c088590791aae653fc2ab9e107}\label{classsrsran_1_1carrier__subslot__resource__grid_abbdd97c088590791aae653fc2ab9e107} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!offset@{offset}}
\index{offset@{offset}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{offset()}{offset()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::offset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00086\ \{\ \textcolor{keywordflow}{return}\ carrier\_cfg.\mbox{\hyperlink{structsrsran_1_1scs__specific__carrier_a42894536e4eb345dc918f712541eab5a}{offset\_to\_carrier}};\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_a3b6249ba53a4f40d125e5303b488c87c}\label{classsrsran_1_1carrier__subslot__resource__grid_a3b6249ba53a4f40d125e5303b488c87c} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!rb\_dims@{rb\_dims}}
\index{rb\_dims@{rb\_dims}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{rb\_dims()}{rb\_dims()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\+\_\+interval}} srsran\+::carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::rb\+\_\+dims (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00087\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a884045428e7f9e31e9363d2aadf2323e}{get\_carrier\_rb\_dims}}(carrier\_cfg);\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_a1eee649a3a9d800ae434e75fdcdb1e56}\label{classsrsran_1_1carrier__subslot__resource__grid_a1eee649a3a9d800ae434e75fdcdb1e56} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!scs@{scs}}
\index{scs@{scs}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{scs()}{scs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\+\_\+spacing}} srsran\+::carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::scs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00084\ \{\ \textcolor{keywordflow}{return}\ carrier\_cfg.scs;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1carrier__subslot__resource__grid_a7c600702eaac7a1f49c0082dfe0f96df}\label{classsrsran_1_1carrier__subslot__resource__grid_a7c600702eaac7a1f49c0082dfe0f96df} 
\index{srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}!used\_crbs@{used\_crbs}}
\index{used\_crbs@{used\_crbs}!srsran::carrier\_subslot\_resource\_grid@{srsran::carrier\_subslot\_resource\_grid}}
\doxysubsubsection{\texorpdfstring{used\_crbs()}{used\_crbs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a819fec1d2b695c433077ea924e7ebcd8}{crb\+\_\+bitmap}} carrier\+\_\+subslot\+\_\+resource\+\_\+grid\+::used\+\_\+crbs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\+\_\+interval}}}]{bwp\+\_\+crb\+\_\+lims,  }\item[{\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\+\_\+symbol\+\_\+range}}}]{symbols }\end{DoxyParamCaption}) const}



Calculates a bitmap where each bit set one represents a CRB that is occupied or unavailable. A CRB is considered occupied if it is outside of the provided BWP CRB boundaries or if it is already allocated in at least one OFDM symbol of the provided OFDM symbol range. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em bwp\+\_\+crb\+\_\+lims} & CRB range where the BWP is located in the frequency domain, and used for the CRB to PRB conversion. \\
\hline
\mbox{\texttt{ in}}  & {\em symbols} & Range of OFDM symbols, where the search for available CRBs is carrier out. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
an CRB bitmap with bits set to one for unavailable CRBs. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00106\ \{}
\DoxyCodeLine{00107\ \ \ srsran\_sanity\_check(symbols.stop()\ <=\ \mbox{\hyperlink{namespacesrsran_a2ec632168c0292dc5fd78c9bd35f159b}{NOF\_OFDM\_SYM\_PER\_SLOT\_NORMAL\_CP}},\ \textcolor{stringliteral}{"{}OFDM\ symbols\ out-\/of-\/bounds"{}});}
\DoxyCodeLine{00108\ \ \ slot\_rb\_bitmap\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_rbs\_selected\_symbols}}\ =\ slot\_rbs.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_afe1a0207f2e64504dfe8df1d6d7c163b}{slice}}(symbols.start()\ *\ nof\_rbs(),\ symbols.stop()\ *\ nof\_rbs());}
\DoxyCodeLine{00109\ \ \ \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{crb\_bitmap}}\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb\_bits}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fold\_and\_accumulate<MAX\_NOF\_PRBS>}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_rbs\_selected\_symbols}},\ nof\_rbs());}
\DoxyCodeLine{00110\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb\_bits}}.fill(0,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bwp\_crb\_lims}}.start());}
\DoxyCodeLine{00111\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb\_bits}}.fill(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bwp\_crb\_lims}}.stop(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb\_bits}}.size());}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crb\_bits}};}
\DoxyCodeLine{00113\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/cell/resource\+\_\+grid.\+h\item 
lib/scheduler/cell/resource\+\_\+grid.\+cpp\end{DoxyCompactItemize}
