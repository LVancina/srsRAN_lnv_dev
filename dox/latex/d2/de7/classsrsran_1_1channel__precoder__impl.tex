\doxysection{srsran\+::channel\+\_\+precoder\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1channel__precoder__impl}{}\label{classsrsran_1_1channel__precoder__impl}\index{srsran::channel\_precoder\_impl@{srsran::channel\_precoder\_impl}}


Channel precoder implementation.  




{\ttfamily \#include $<$channel\+\_\+precoder\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::channel\+\_\+precoder\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/da7/classsrsran_1_1channel__precoder__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::channel\+\_\+precoder\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{d1/dc8/classsrsran_1_1channel__precoder__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1channel__precoder__impl_a7e364fd99a9af9c6b76f922fbaa7effc}\label{classsrsran_1_1channel__precoder__impl_a7e364fd99a9af9c6b76f922fbaa7effc} 
{\bfseries channel\+\_\+precoder\+\_\+impl} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1channel__precoder__impl_a604906b51c656be03e4d1ef028c1e933}{apply\+\_\+precoding}} (\mbox{\hyperlink{classsrsran_1_1re__buffer__writer}{re\+\_\+buffer\+\_\+writer}} \&output, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1re__buffer__reader}{re\+\_\+buffer\+\_\+reader}} \&input, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1precoding__weight__matrix}{precoding\+\_\+weight\+\_\+matrix}} \&precoding) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Applies a set of precoding weights to the input resource elements. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1channel__precoder}{srsran\+::channel\+\_\+precoder}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}channel\+\_\+precoder} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1channel__precoder_a21217fb3b84ab87c2a04682eb04efeea}{apply\+\_\+layer\+\_\+map\+\_\+and\+\_\+precoding}} (\mbox{\hyperlink{classsrsran_1_1re__buffer__writer}{re\+\_\+buffer\+\_\+writer}} \&output, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} ci8\+\_\+t $>$ input, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1precoding__weight__matrix}{precoding\+\_\+weight\+\_\+matrix}} \&precoding) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} =0
\begin{DoxyCompactList}\small\item\em Maps the input symbols into layers and applies a set of precoding weights. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1channel__precoder__impl_accdcaf63c916f96a80ab3dc99a86cc65}{apply\+\_\+precoding\+\_\+port}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\+\_\+re}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1re__buffer__reader}{re\+\_\+buffer\+\_\+reader}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{input\+\_\+re}}, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\+\_\+weights}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} =0
\begin{DoxyCompactList}\small\item\em Applies precoding to the RE belonging to a single antenna port. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Channel precoder implementation. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1channel__precoder__impl_a604906b51c656be03e4d1ef028c1e933}\label{classsrsran_1_1channel__precoder__impl_a604906b51c656be03e4d1ef028c1e933} 
\index{srsran::channel\_precoder\_impl@{srsran::channel\_precoder\_impl}!apply\_precoding@{apply\_precoding}}
\index{apply\_precoding@{apply\_precoding}!srsran::channel\_precoder\_impl@{srsran::channel\_precoder\_impl}}
\doxysubsubsection{\texorpdfstring{apply\_precoding()}{apply\_precoding()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} channel\+\_\+precoder\+\_\+impl\+::apply\+\_\+precoding (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1re__buffer__writer}{re\+\_\+buffer\+\_\+writer}} \&}]{output,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1re__buffer__reader}{re\+\_\+buffer\+\_\+reader}} \&}]{input,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1precoding__weight__matrix}{precoding\+\_\+weight\+\_\+matrix}} \&}]{precoding }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Applies a set of precoding weights to the input resource elements. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em output} & Output symbols, indexed by RE and antenna port. \\
\hline
\mbox{\texttt{ in}}  & {\em input} & Input symbols, indexed by RE and transmit layer. \\
\hline
\mbox{\texttt{ in}}  & {\em precoding} & Precoding coefficients arranged in matrix form, indexed by transmit layer and antenna port. \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
An assertion is triggered if the output buffer does not have the same number of RE per port as the number of RE per layer of the input buffer. 

An assertion is triggered if the precoding matrix dimensions do not match the number of layers of the input buffer and the number of antenna ports of the output buffer. 
\end{DoxyRemark}


Implements \mbox{\hyperlink{classsrsran_1_1channel__precoder_adb45f7aefe53d6809f07c7dedacb1e82}{srsran\+::channel\+\_\+precoder}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \ \ \textcolor{comment}{//\ Number\ of\ RE\ in\ a\ single\ slice,\ i.e.,\ port\ or\ layer.}}
\DoxyCodeLine{00032\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_re\_slice}}\ =\ output.\mbox{\hyperlink{classsrsran_1_1detail_1_1re__buffer__dimensions_a07437ee656d4110db488f06f63ff51dd}{get\_nof\_re}}();}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordtype}{unsigned}\ nof\_tx\_ports\ =\ output.\mbox{\hyperlink{classsrsran_1_1detail_1_1re__buffer__dimensions_af9938dde244e7d21ee3280d29030c6d8}{get\_nof\_slices}}();}
\DoxyCodeLine{00034\ \ \ \textcolor{keywordtype}{unsigned}\ nof\_layers\ \ \ =\ input.\mbox{\hyperlink{classsrsran_1_1detail_1_1re__buffer__dimensions_af9938dde244e7d21ee3280d29030c6d8}{get\_nof\_slices}}();}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ srsran\_assert(}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_re\_slice}}\ ==\ input.\mbox{\hyperlink{classsrsran_1_1detail_1_1re__buffer__dimensions_a07437ee656d4110db488f06f63ff51dd}{get\_nof\_re}}(),}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ number\ of\ output\ RE\ per\ slice,\ i.e.,\ \{\},\ does\ not\ match\ the\ number\ of\ input\ RE\ per\ slice,\ i.e.,\ \{\}."{}},}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_re\_slice}},}
\DoxyCodeLine{00040\ \ \ \ \ \ \ input.\mbox{\hyperlink{classsrsran_1_1detail_1_1re__buffer__dimensions_a07437ee656d4110db488f06f63ff51dd}{get\_nof\_re}}());}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ srsran\_assert(nof\_tx\_ports\ >=\ nof\_layers,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ number\ of\ TX\ ports,\ i.e.,\ \{\},\ must\ be\ equal\ to\ or\ larger\ than\ the\ number\ of\ layers,\ i.e.,\ \{\}."{}},}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nof\_tx\_ports,}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nof\_layers);}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ srsran\_assert(nof\_tx\_ports\ ==\ precoding.\mbox{\hyperlink{classsrsran_1_1precoding__weight__matrix_a15f30d12e89c37da9f37c378f8cd6153}{get\_nof\_ports}}(),}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ number\ on\ TX\ ports\ on\ the\ output\ buffer,\ i.e.,\ \{\},\ does\ not\ match\ the\ number\ of\ ports\ of\ the\ "{}}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}precoding\ matrix,\ i.e.,\ \{\}."{}},}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nof\_tx\_ports,}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ precoding.\mbox{\hyperlink{classsrsran_1_1precoding__weight__matrix_a15f30d12e89c37da9f37c378f8cd6153}{get\_nof\_ports}}());}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ srsran\_assert(nof\_layers\ ==\ precoding.\mbox{\hyperlink{classsrsran_1_1precoding__weight__matrix_a4c6369e404aff43389c5b1259ebeefcc}{get\_nof\_layers}}(),}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ number\ on\ layers\ on\ the\ input\ buffer,\ i.e.,\ \{\},\ does\ not\ match\ the\ number\ of\ layers\ of\ the\ "{}}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}precoding\ matrix,\ i.e.,\ \{\}."{}},}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nof\_layers,}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ precoding.\mbox{\hyperlink{classsrsran_1_1precoding__weight__matrix_a4c6369e404aff43389c5b1259ebeefcc}{get\_nof\_layers}}());}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port}}\ !=\ nof\_tx\_ports;\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port}})\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ View\ of\ the\ output\ RE\ for\ a\ single\ antenna\ port.}}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<cf\_t>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_re\_view}}\ =\ output.\mbox{\hyperlink{classsrsran_1_1re__buffer__writer_a31ee460e6839ee56d9b988248dcce655}{get\_slice}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port}});}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{comment}{//\ View\ of\ the\ precoding\ weights\ applicable\ to\ a\ single\ antenna\ port,\ i.e.,\ the\ coefficients\ applied\ to\ each}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ layer\ for\ the\ antenna\ port.}}
\DoxyCodeLine{00065\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ cf\_t>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_weights\_view}}\ =\ precoding.\mbox{\hyperlink{classsrsran_1_1precoding__weight__matrix_ab78059d72753bb01706ee54c5472166d}{get\_port\_coefficients}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port}});}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{comment}{//\ Apply\ precoding.}}
\DoxyCodeLine{00068\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1channel__precoder__impl_accdcaf63c916f96a80ab3dc99a86cc65}{apply\_precoding\_port}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_re\_view}},\ input,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_weights\_view}});}
\DoxyCodeLine{00069\ \ \ \}}
\DoxyCodeLine{00070\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1channel__precoder__impl_accdcaf63c916f96a80ab3dc99a86cc65}\label{classsrsran_1_1channel__precoder__impl_accdcaf63c916f96a80ab3dc99a86cc65} 
\index{srsran::channel\_precoder\_impl@{srsran::channel\_precoder\_impl}!apply\_precoding\_port@{apply\_precoding\_port}}
\index{apply\_precoding\_port@{apply\_precoding\_port}!srsran::channel\_precoder\_impl@{srsran::channel\_precoder\_impl}}
\doxysubsubsection{\texorpdfstring{apply\_precoding\_port()}{apply\_precoding\_port()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::channel\+\_\+precoder\+\_\+impl\+::apply\+\_\+precoding\+\_\+port (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$}]{port\+\_\+re,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1re__buffer__reader}{re\+\_\+buffer\+\_\+reader}} \&}]{input\+\_\+re,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$}]{port\+\_\+weights }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}



Applies precoding to the RE belonging to a single antenna port. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em port\+\_\+re} & View over the RE of a single antenna port. \\
\hline
\mbox{\texttt{ in}}  & {\em input} & Input symbols, indexed by RE and transmit layer. \\
\hline
\mbox{\texttt{ in}}  & {\em precoding} & Precoding coefficients, indexed by layer. \\
\hline
\end{DoxyParams}


Implemented in \mbox{\hyperlink{classsrsran_1_1channel__precoder__avx2_ad6a239f782d58f1faf0bd145e55046de}{srsran\+::channel\+\_\+precoder\+\_\+avx2}}, and \mbox{\hyperlink{classsrsran_1_1channel__precoder__neon_a1e023c546e4981c0b13a59ab91f45e5f}{srsran\+::channel\+\_\+precoder\+\_\+neon}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/generic\+\_\+functions/precoding/\mbox{\hyperlink{channel__precoder__impl_8h}{channel\+\_\+precoder\+\_\+impl.\+h}}\item 
lib/phy/generic\+\_\+functions/precoding/channel\+\_\+precoder\+\_\+impl.\+cpp\end{DoxyCompactItemize}
