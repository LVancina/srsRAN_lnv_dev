\doxysection{srsran\+::metrics\+\_\+plotter\+\_\+json Class Reference}
\hypertarget{classsrsran_1_1metrics__plotter__json}{}\label{classsrsran_1_1metrics__plotter__json}\index{srsran::metrics\_plotter\_json@{srsran::metrics\_plotter\_json}}


Class used to receive metrics reports from scheduler and format them into a JSON file.  




{\ttfamily \#include $<$metrics\+\_\+plotter\+\_\+json.\+h$>$}



Inheritance diagram for srsran\+::metrics\+\_\+plotter\+\_\+json\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=226pt]{dc/d93/classsrsran_1_1metrics__plotter__json__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::metrics\+\_\+plotter\+\_\+json\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=226pt]{d5/d97/classsrsran_1_1metrics__plotter__json__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1metrics__plotter__json_a989f17626739f68e930e987a1275ae12}{metrics\+\_\+plotter\+\_\+json}} (\mbox{\hyperlink{classsrslog_1_1log__channel}{srslog\+::log\+\_\+channel}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{log\+\_\+chan\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1metrics__plotter__json_ab4da09c0248007fde438dcda2903e966}{report\+\_\+metrics}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1scheduler__ue__metrics}{scheduler\+\_\+ue\+\_\+metrics}} $>$ ue\+\_\+metrics) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Notifier called from the scheduler. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class used to receive metrics reports from scheduler and format them into a JSON file. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1metrics__plotter__json_a989f17626739f68e930e987a1275ae12}\label{classsrsran_1_1metrics__plotter__json_a989f17626739f68e930e987a1275ae12} 
\index{srsran::metrics\_plotter\_json@{srsran::metrics\_plotter\_json}!metrics\_plotter\_json@{metrics\_plotter\_json}}
\index{metrics\_plotter\_json@{metrics\_plotter\_json}!srsran::metrics\_plotter\_json@{srsran::metrics\_plotter\_json}}
\doxysubsubsection{\texorpdfstring{metrics\_plotter\_json()}{metrics\_plotter\_json()}}
{\footnotesize\ttfamily srsran\+::metrics\+\_\+plotter\+\_\+json\+::metrics\+\_\+plotter\+\_\+json (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrslog_1_1log__channel}{srslog\+::log\+\_\+channel}} \&}]{log\+\_\+chan\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00033\ :\ log\_chan(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{log\_chan\_}})\ \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1metrics__plotter__json_ab4da09c0248007fde438dcda2903e966}\label{classsrsran_1_1metrics__plotter__json_ab4da09c0248007fde438dcda2903e966} 
\index{srsran::metrics\_plotter\_json@{srsran::metrics\_plotter\_json}!report\_metrics@{report\_metrics}}
\index{report\_metrics@{report\_metrics}!srsran::metrics\_plotter\_json@{srsran::metrics\_plotter\_json}}
\doxysubsubsection{\texorpdfstring{report\_metrics()}{report\_metrics()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} metrics\+\_\+plotter\+\_\+json\+::report\+\_\+metrics (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1scheduler__ue__metrics}{scheduler\+\_\+ue\+\_\+metrics}} $>$}]{ue\+\_\+metrics }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Notifier called from the scheduler. 



Implements \mbox{\hyperlink{classsrsran_1_1scheduler__ue__metrics__notifier_acdc38fd3381f3f912918d7cf41737417}{srsran\+::scheduler\+\_\+ue\+\_\+metrics\+\_\+notifier}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00081\ \{}
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_context\_t}}\ ctx(\textcolor{stringliteral}{"{}JSON\ Metrics"{}});}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classsrsran_1_1ue}{ue}}\ :\ ue\_metrics)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ ctx.get<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mlist\_ues}}>().emplace\_back();}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keyword}{auto}\&\ output\ =\ ctx.get<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mlist\_ues}}>().back();}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_pci}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.pci);}
\DoxyCodeLine{00089\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_rnti}}>(\mbox{\hyperlink{namespacesrsran_a7c1de1f75dd2aabbf557bc8713f3da98}{to\_value}}(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.rnti));}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.cqi)\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_cqi}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.cqi);}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_ri}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.ri);}
\DoxyCodeLine{00094\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_dl\_mcs}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.dl\_mcs.to\_uint());}
\DoxyCodeLine{00095\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_dl\_brate}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.dl\_brate\_kbps\ *\ 1\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e3}});}
\DoxyCodeLine{00096\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_dl\_nof\_ok}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.dl\_nof\_ok);}
\DoxyCodeLine{00097\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_dl\_nof\_nok}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.dl\_nof\_nok);}
\DoxyCodeLine{00098\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_dl\_bs}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.dl\_bs);}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{if}\ (!std::isnan(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.pusch\_snr\_db)\ \&\&\ !\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iszero}}(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.pusch\_snr\_db))\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_pusch\_snr\_db}}>(\mbox{\hyperlink{namespacesrsran_ac7ddf8c7f52152c621b675bf6b84df05}{clamp}}(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.pusch\_snr\_db,\ -\/99.9f,\ 99.9f));}
\DoxyCodeLine{00101\ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_ul\_mcs}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.ul\_mcs.to\_uint());}
\DoxyCodeLine{00103\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_ul\_brate}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.ul\_brate\_kbps\ *\ 1\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e3}});}
\DoxyCodeLine{00104\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_ul\_nof\_ok}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.ul\_nof\_ok);}
\DoxyCodeLine{00105\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_ul\_nof\_nok}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.ul\_nof\_nok);}
\DoxyCodeLine{00106\ \ \ \ \ output.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_bsr}}>(\mbox{\hyperlink{classsrsran_1_1ue}{ue}}.bsr);}
\DoxyCodeLine{00107\ \ \ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \textcolor{comment}{//\ Log\ the\ context.}}
\DoxyCodeLine{00110\ \ \ ctx.write<\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{metric\_timestamp\_tag}}>(get\_time\_stamp());}
\DoxyCodeLine{00111\ \ \ log\_chan(ctx);}
\DoxyCodeLine{00112\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
apps/gnb/helpers/metrics\+\_\+plotter\+\_\+json.\+h\item 
apps/gnb/helpers/metrics\+\_\+plotter\+\_\+json.\+cpp\end{DoxyCompactItemize}
