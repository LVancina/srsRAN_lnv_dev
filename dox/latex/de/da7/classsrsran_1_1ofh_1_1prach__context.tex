\doxysection{srsran\+::ofh\+::prach\+\_\+context Class Reference}
\hypertarget{classsrsran_1_1ofh_1_1prach__context}{}\label{classsrsran_1_1ofh_1_1prach__context}\index{srsran::ofh::prach\_context@{srsran::ofh::prach\_context}}


PRACH context.  




{\ttfamily \#include $<$prach\+\_\+context\+\_\+repository.\+h$>$}



Collaboration diagram for srsran\+::ofh\+::prach\+\_\+context\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=221pt]{d6/d2d/classsrsran_1_1ofh_1_1prach__context__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information}{prach\+\_\+context\+\_\+information}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1ofh_1_1prach__context_ad67768b0a5ea63d8b33d6e3fe0e89562}\label{classsrsran_1_1ofh_1_1prach__context_ad67768b0a5ea63d8b33d6e3fe0e89562} 
{\bfseries prach\+\_\+context} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_a209f9bb92444daed860e97d93fddece9}{prach\+\_\+context}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1prach__buffer__context}{prach\+\_\+buffer\+\_\+context}} \&context, \mbox{\hyperlink{classsrsran_1_1prach__buffer}{prach\+\_\+buffer}} \&buffer)
\begin{DoxyCompactList}\small\item\em Constructs an uplink PRACH context with the given PRACH buffer and PRACH buffer context. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_a06f26303bee030b5fb6587714c61dae3}{empty}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Returns true if this context is empty, otherwise false. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1prach__buffer__context}{prach\+\_\+buffer\+\_\+context}} \& \mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_a3112d68d3036bd28d9bdc010dc902c86}{get\+\_\+context}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Returns the PRACH buffer context. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_ac941e34993b27db07826bda80d168669}{get\+\_\+prach\+\_\+nof\+\_\+re}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Returns the number of REs of one PRACH repetition or zero if no PRACH buffer is associated with this context. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_a52bac6da9d3e99f0818229a00d17be8b}{get\+\_\+prach\+\_\+offset\+\_\+to\+\_\+first\+\_\+re}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Returns the offset to the first resource element. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_a2cf07870a5f62b9247d122df176b30d6}{get\+\_\+max\+\_\+nof\+\_\+ports}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Gets the maximum number of ports supported in PRACH buffer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{bounded\+\_\+bitset}}$<$ prach\+\_\+constants\+::\+LONG\+\_\+\+SEQUENCE\+\_\+\+LENGTH $>$ $>$ \mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_a9e61fa755ce4c00f0562fb1a5b82514f}{get\+\_\+symbol\+\_\+re\+\_\+written}} (\mbox{\hyperlink{classunsigned}{unsigned}} symbol) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_a783e73ae12bd2e76067074e7fdc8df19}{write\+\_\+iq}} (\mbox{\hyperlink{classunsigned}{unsigned}} port, \mbox{\hyperlink{classunsigned}{unsigned}} symbol, \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{re\+\_\+start}}, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iq\+\_\+buffer}})
\begin{DoxyCompactList}\small\item\em Writes the given IQ buffer corresponding to the given symbol and port. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1expected}{expected}}$<$ \mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information}{prach\+\_\+context\+\_\+information}} $>$ \mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_ac6c53f9d93440abcf498f47a8d5d557f}{try\+\_\+getting\+\_\+complete\+\_\+prach\+\_\+buffer}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
PRACH context. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1prach__context_a209f9bb92444daed860e97d93fddece9}\label{classsrsran_1_1ofh_1_1prach__context_a209f9bb92444daed860e97d93fddece9} 
\index{srsran::ofh::prach\_context@{srsran::ofh::prach\_context}!prach\_context@{prach\_context}}
\index{prach\_context@{prach\_context}!srsran::ofh::prach\_context@{srsran::ofh::prach\_context}}
\doxysubsubsection{\texorpdfstring{prach\_context()}{prach\_context()}}
{\footnotesize\ttfamily srsran\+::ofh\+::prach\+\_\+context\+::prach\+\_\+context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1prach__buffer__context}{prach\+\_\+buffer\+\_\+context}} \&}]{context,  }\item[{\mbox{\hyperlink{classsrsran_1_1prach__buffer}{prach\+\_\+buffer}} \&}]{buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructs an uplink PRACH context with the given PRACH buffer and PRACH buffer context. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00072\ \ \ \ \ context\_info(\{context,\ \&buffer\}),\ nof\_symbols(\mbox{\hyperlink{namespacesrsran_a7c4ecbbc13088764ba440e5bb5f62a35}{get\_preamble\_duration}}(context.format))}
\DoxyCodeLine{00073\ \ \ \{}
\DoxyCodeLine{00074\ \ \ \ \ srsran\_assert(context.nof\_fd\_occasions\ ==\ 1,\ \textcolor{stringliteral}{"{}Only\ supporting\ one\ frequency\ domain\ occasion"{}});}
\DoxyCodeLine{00075\ \ \ \ \ srsran\_assert(context.nof\_td\_occasions\ ==\ 1,\ \textcolor{stringliteral}{"{}Only\ supporting\ one\ time\ domain\ occasion"{}});}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ Get\ preamble\ information.}}
\DoxyCodeLine{00078\ \ \ \ \ preamble\_info\ =}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_aaea6c484cd5f8113a5b11434d68e371b}{is\_long\_preamble}}(context.format)}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ ?\ \mbox{\hyperlink{namespacesrsran_a41d072dc823c78c2627da83a877dcf5a}{get\_prach\_preamble\_long\_info}}(context.format)}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{namespacesrsran_a33cfd882b612da5eceff76a95662d0b3}{get\_prach\_preamble\_short\_info}}(context.format,\ \mbox{\hyperlink{namespacesrsran_a0d5bec5128991413e4e3a59ca6e16426}{to\_ra\_subcarrier\_spacing}}(context.pusch\_scs),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{true}});}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ freq\_mapping\_info\ =\ \mbox{\hyperlink{namespacesrsran_a4ec686128158cd9524f64b7df77762bd}{prach\_frequency\_mapping\_get}}(preamble\_info.\mbox{\hyperlink{structsrsran_1_1prach__preamble__information_a1cf7f9574b0a8249a736a0b6f39b6f1e}{scs}},\ context.pusch\_scs);}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordflow}{if}\ (!nof\_symbols)\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ nof\_symbols\ =\ 1;}
\DoxyCodeLine{00087\ \ \ \ \ \}}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ Initialize\ statistic.}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ !=\ nof\_symbols;\ ++i)\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ buffer\_stats.push\_back(\{buffer.get\_max\_nof\_ports(),\ preamble\_info.\mbox{\hyperlink{structsrsran_1_1prach__preamble__information_a6a616871a84db7e2b294d8d43da76f02}{sequence\_length}}\});}
\DoxyCodeLine{00091\ \ \ \ \ \}}
\DoxyCodeLine{00092\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1prach__context_a06f26303bee030b5fb6587714c61dae3}\label{classsrsran_1_1ofh_1_1prach__context_a06f26303bee030b5fb6587714c61dae3} 
\index{srsran::ofh::prach\_context@{srsran::ofh::prach\_context}!empty@{empty}}
\index{empty@{empty}!srsran::ofh::prach\_context@{srsran::ofh::prach\_context}}
\doxysubsubsection{\texorpdfstring{empty()}{empty()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::ofh\+::prach\+\_\+context\+::empty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns true if this context is empty, otherwise false. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00095\ \{\ \textcolor{keywordflow}{return}\ context\_info.\mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information_a008737bfb9c65f4662aadbcbeefa7cca}{buffer}}\ ==\ \textcolor{keyword}{nullptr};\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1prach__context_a3112d68d3036bd28d9bdc010dc902c86}\label{classsrsran_1_1ofh_1_1prach__context_a3112d68d3036bd28d9bdc010dc902c86} 
\index{srsran::ofh::prach\_context@{srsran::ofh::prach\_context}!get\_context@{get\_context}}
\index{get\_context@{get\_context}!srsran::ofh::prach\_context@{srsran::ofh::prach\_context}}
\doxysubsubsection{\texorpdfstring{get\_context()}{get\_context()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1prach__buffer__context}{prach\+\_\+buffer\+\_\+context}} \& srsran\+::ofh\+::prach\+\_\+context\+::get\+\_\+context (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns the PRACH buffer context. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00098\ \{\ \textcolor{keywordflow}{return}\ context\_info.\mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information_acbc86585d2764fb31ede043603bc67f2}{context}};\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1prach__context_a2cf07870a5f62b9247d122df176b30d6}\label{classsrsran_1_1ofh_1_1prach__context_a2cf07870a5f62b9247d122df176b30d6} 
\index{srsran::ofh::prach\_context@{srsran::ofh::prach\_context}!get\_max\_nof\_ports@{get\_max\_nof\_ports}}
\index{get\_max\_nof\_ports@{get\_max\_nof\_ports}!srsran::ofh::prach\_context@{srsran::ofh::prach\_context}}
\doxysubsubsection{\texorpdfstring{get\_max\_nof\_ports()}{get\_max\_nof\_ports()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::ofh\+::prach\+\_\+context\+::get\+\_\+max\+\_\+nof\+\_\+ports (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Gets the maximum number of ports supported in PRACH buffer. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00107\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_a06f26303bee030b5fb6587714c61dae3}{empty}}()\ ?\ 0U\ :\ context\_info.\mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information_a008737bfb9c65f4662aadbcbeefa7cca}{buffer}}-\/>\mbox{\hyperlink{classsrsran_1_1prach__buffer_a907028ab71829eacba8111ac864ed2da}{get\_max\_nof\_ports}}();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1prach__context_ac941e34993b27db07826bda80d168669}\label{classsrsran_1_1ofh_1_1prach__context_ac941e34993b27db07826bda80d168669} 
\index{srsran::ofh::prach\_context@{srsran::ofh::prach\_context}!get\_prach\_nof\_re@{get\_prach\_nof\_re}}
\index{get\_prach\_nof\_re@{get\_prach\_nof\_re}!srsran::ofh::prach\_context@{srsran::ofh::prach\_context}}
\doxysubsubsection{\texorpdfstring{get\_prach\_nof\_re()}{get\_prach\_nof\_re()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::ofh\+::prach\+\_\+context\+::get\+\_\+prach\+\_\+nof\+\_\+re (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns the number of REs of one PRACH repetition or zero if no PRACH buffer is associated with this context. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00101\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsrsran_1_1ofh_1_1prach__context_a06f26303bee030b5fb6587714c61dae3}{empty}}()\ ?\ 0U\ :\ preamble\_info.\mbox{\hyperlink{structsrsran_1_1prach__preamble__information_a6a616871a84db7e2b294d8d43da76f02}{sequence\_length}};\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1prach__context_a52bac6da9d3e99f0818229a00d17be8b}\label{classsrsran_1_1ofh_1_1prach__context_a52bac6da9d3e99f0818229a00d17be8b} 
\index{srsran::ofh::prach\_context@{srsran::ofh::prach\_context}!get\_prach\_offset\_to\_first\_re@{get\_prach\_offset\_to\_first\_re}}
\index{get\_prach\_offset\_to\_first\_re@{get\_prach\_offset\_to\_first\_re}!srsran::ofh::prach\_context@{srsran::ofh::prach\_context}}
\doxysubsubsection{\texorpdfstring{get\_prach\_offset\_to\_first\_re()}{get\_prach\_offset\_to\_first\_re()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::ofh\+::prach\+\_\+context\+::get\+\_\+prach\+\_\+offset\+\_\+to\+\_\+first\+\_\+re (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns the offset to the first resource element. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00104\ \{\ \textcolor{keywordflow}{return}\ freq\_mapping\_info.\mbox{\hyperlink{structsrsran_1_1prach__frequency__mapping__information_ae6530746f66c58e7963de2d1bc4960b0}{k\_bar}};\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1prach__context_a9e61fa755ce4c00f0562fb1a5b82514f}\label{classsrsran_1_1ofh_1_1prach__context_a9e61fa755ce4c00f0562fb1a5b82514f} 
\index{srsran::ofh::prach\_context@{srsran::ofh::prach\_context}!get\_symbol\_re\_written@{get\_symbol\_re\_written}}
\index{get\_symbol\_re\_written@{get\_symbol\_re\_written}!srsran::ofh::prach\_context@{srsran::ofh::prach\_context}}
\doxysubsubsection{\texorpdfstring{get\_symbol\_re\_written()}{get\_symbol\_re\_written()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{bounded\+\_\+bitset}}$<$ prach\+\_\+constants\+::\+LONG\+\_\+\+SEQUENCE\+\_\+\+LENGTH $>$ $>$ srsran\+::ofh\+::prach\+\_\+context\+::get\+\_\+symbol\+\_\+re\+\_\+written (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{symbol }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Returns a span of bitmaps that indicate the REs that have been written for the given symbol. Each element of the span corresponds to a port. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00112\ \ \ \{}
\DoxyCodeLine{00113\ \ \ \ \ srsran\_assert(symbol\ <\ nof\_symbols,\ \textcolor{stringliteral}{"{}Invalid\ symbol\ index"{}});}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{return}\ buffer\_stats[symbol].re\_written;}
\DoxyCodeLine{00115\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1prach__context_ac6c53f9d93440abcf498f47a8d5d557f}\label{classsrsran_1_1ofh_1_1prach__context_ac6c53f9d93440abcf498f47a8d5d557f} 
\index{srsran::ofh::prach\_context@{srsran::ofh::prach\_context}!try\_getting\_complete\_prach\_buffer@{try\_getting\_complete\_prach\_buffer}}
\index{try\_getting\_complete\_prach\_buffer@{try\_getting\_complete\_prach\_buffer}!srsran::ofh::prach\_context@{srsran::ofh::prach\_context}}
\doxysubsubsection{\texorpdfstring{try\_getting\_complete\_prach\_buffer()}{try\_getting\_complete\_prach\_buffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1expected}{expected}}$<$ \mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information}{prach\+\_\+context\+\_\+information}} $>$ srsran\+::ofh\+::prach\+\_\+context\+::try\+\_\+getting\+\_\+complete\+\_\+prach\+\_\+buffer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Tries to get a complete PRACH buffer. A PRACH buffer is considered completed when all the PRBs for all the ports have been written. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00146\ \ \ \{}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{if}\ (!context\_info.\mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information_a008737bfb9c65f4662aadbcbeefa7cca}{buffer}})\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ default\_error\_t(\{\});}
\DoxyCodeLine{00149\ \ \ \ \ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordflow}{if}\ (!std::all\_of(buffer\_stats.begin(),\ buffer\_stats.end(),\ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ symbol)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ return\ symbol.have\_all\_res\_been\_written();}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \}))\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ default\_error\_t(\{\});}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordflow}{return}\ \{context\_info\};}
\DoxyCodeLine{00158\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1prach__context_a783e73ae12bd2e76067074e7fdc8df19}\label{classsrsran_1_1ofh_1_1prach__context_a783e73ae12bd2e76067074e7fdc8df19} 
\index{srsran::ofh::prach\_context@{srsran::ofh::prach\_context}!write\_iq@{write\_iq}}
\index{write\_iq@{write\_iq}!srsran::ofh::prach\_context@{srsran::ofh::prach\_context}}
\doxysubsubsection{\texorpdfstring{write\_iq()}{write\_iq()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ofh\+::prach\+\_\+context\+::write\+\_\+iq (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{port,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{symbol,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{re\+\_\+start,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$}]{iq\+\_\+buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Writes the given IQ buffer corresponding to the given symbol and port. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00119\ \ \ \{}
\DoxyCodeLine{00120\ \ \ \ \ symbol\ -\/=\ context\_info.\mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information_acbc86585d2764fb31ede043603bc67f2}{context}}.\mbox{\hyperlink{structsrsran_1_1prach__buffer__context_a1530821e8cd26832c55cf63ceecaac38}{start\_symbol}};}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ srsran\_assert(context\_info.\mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information_a008737bfb9c65f4662aadbcbeefa7cca}{buffer}},\ \textcolor{stringliteral}{"{}No\ valid\ PRACH\ buffer\ in\ the\ context"{}});}
\DoxyCodeLine{00123\ \ \ \ \ srsran\_assert(symbol\ <\ nof\_symbols,\ \textcolor{stringliteral}{"{}Invalid\ symbol\ index"{}});}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{comment}{//\ Skip\ writing\ if\ the\ given\ port\ does\ not\ fit\ in\ the\ PRACH\ buffer.}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{if}\ (port\ >=\ context\_info.\mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information_a008737bfb9c65f4662aadbcbeefa7cca}{buffer}}-\/>\mbox{\hyperlink{classsrsran_1_1prach__buffer_a907028ab71829eacba8111ac864ed2da}{get\_max\_nof\_ports}}())\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{comment}{//\ Update\ the\ buffer.}}
\DoxyCodeLine{00131\ \ \ \ \ span<cf\_t>\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prach\_out\_buffer}}\ =\ context\_info.\mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information_a008737bfb9c65f4662aadbcbeefa7cca}{buffer}}-\/>\mbox{\hyperlink{classsrsran_1_1prach__buffer_a9393f0ec690ad95fab986ae6d5d93fa3}{get\_symbol}}(}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ port,\ context\_info.\mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information_acbc86585d2764fb31ede043603bc67f2}{context}}.\mbox{\hyperlink{structsrsran_1_1prach__buffer__context_aa03d6585a9bfd487b5a069e300eab827}{nof\_fd\_occasions}}\ -\/\ 1,\ context\_info.\mbox{\hyperlink{structsrsran_1_1ofh_1_1prach__context_1_1prach__context__information_acbc86585d2764fb31ede043603bc67f2}{context}}.\mbox{\hyperlink{structsrsran_1_1prach__buffer__context_a8d9d2418d876fd2bb2083974fb4b6181}{nof\_td\_occasions}}\ -\/\ 1,\ symbol);}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prach\_out\_buffer}}.last(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prach\_out\_buffer}}.size()\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{re\_start}}).size()\ >=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iq\_buffer}}.size(),}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ IQ\ data\ buffer\ size\ to\ copy\ as\ it\ does\ not\ fit\ into\ the\ PRACH\ buffer"{}});}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ std::copy(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iq\_buffer}}.begin(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iq\_buffer}}.end(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prach\_out\_buffer}}.begin()\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{re\_start}});}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{comment}{//\ Update\ statistics.}}
\DoxyCodeLine{00140\ \ \ \ \ buffer\_stats[symbol].re\_written[port].fill(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{re\_start}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{re\_start}}\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iq\_buffer}}.size());}
\DoxyCodeLine{00141\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/ofh/support/prach\+\_\+context\+\_\+repository.\+h\end{DoxyCompactItemize}
