\doxysection{srsran\+::pucch\+\_\+detector\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1pucch__detector__impl}{}\label{classsrsran_1_1pucch__detector__impl}\index{srsran::pucch\_detector\_impl@{srsran::pucch\_detector\_impl}}


PUCCH detector implementation for Formats 0 and 1.  




{\ttfamily \#include $<$pucch\+\_\+detector\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::pucch\+\_\+detector\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d2/dd8/classsrsran_1_1pucch__detector__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::pucch\+\_\+detector\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d3/d4a/classsrsran_1_1pucch__detector__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1pucch__detector__impl_afab5900016550a4e0ee21bc8d6cbdee9}{pucch\+\_\+detector\+\_\+impl}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1low__papr__sequence__collection}{low\+\_\+papr\+\_\+sequence\+\_\+collection}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{lpsc}}, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pseudo__random__generator}{pseudo\+\_\+random\+\_\+generator}} $>$ prg, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1channel__equalizer}{channel\+\_\+equalizer}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{eqzr}})
\begin{DoxyCompactList}\small\item\em Constructor\+: provides access to a collection of low-\/\+PAPR sequences and a pseudorandom sequence generator. \end{DoxyCompactList}\item 
std\+::pair$<$ \mbox{\hyperlink{classsrsran_1_1pucch__uci__message}{pucch\+\_\+uci\+\_\+message}}, \mbox{\hyperlink{classsrsran_1_1channel__state__information}{channel\+\_\+state\+\_\+information}} $>$ \mbox{\hyperlink{classsrsran_1_1pucch__detector__impl_a5df755ee76979f9917b634aa2c7d35bd}{detect}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1resource__grid__reader}{resource\+\_\+grid\+\_\+reader}} \&, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pucch__detector_1_1format0__configuration}{format0\+\_\+configuration}} \&) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Detects a PUCCH Format 0 transmission. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structsrsran_1_1pucch__detector_1_1pucch__detection__result}{pucch\+\_\+detection\+\_\+result}} \mbox{\hyperlink{classsrsran_1_1pucch__detector__impl_acf8f0e3a6c9750220d51790ca5a1b2f5}{detect}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1resource__grid__reader}{resource\+\_\+grid\+\_\+reader}} \&grid, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1channel__estimate}{channel\+\_\+estimate}} \&estimates, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pucch__detector_1_1format1__configuration}{format1\+\_\+configuration}} \&config) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Detects a PUCCH Format 1 transmission. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1pucch__detector}{srsran\+::pucch\+\_\+detector}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}pucch\+\_\+detector} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{constexpr}} \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1pucch__detector__impl_a165b2499bb95e4fbc5a4a18b4eeb0b9c}{MAX\+\_\+\+ALLOCATED\+\_\+\+RE\+\_\+\+F1}} = NRE \texorpdfstring{$\ast$}{*} MAX\+\_\+\+NSYMB\+\_\+\+PER\+\_\+\+SLOT
\begin{DoxyCompactList}\small\item\em Maximum number of REs allocated to PUCCH Format 1. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1pucch__detector__impl_a4d93b4aa4f2ef19340c1173b3731c31e}\label{classsrsran_1_1pucch__detector__impl_a4d93b4aa4f2ef19340c1173b3731c31e} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{constexpr}} \mbox{\hyperlink{classunsigned}{unsigned}} {\bfseries MAX\+\_\+\+N\+\_\+\+DATA\+\_\+\+SYMBOLS} = 7
\begin{DoxyCompactList}\small\item\em Maximum number of OFDM symbols allocated for PUCCH Format 1 data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
PUCCH detector implementation for Formats 0 and 1. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1pucch__detector__impl_afab5900016550a4e0ee21bc8d6cbdee9}\label{classsrsran_1_1pucch__detector__impl_afab5900016550a4e0ee21bc8d6cbdee9} 
\index{srsran::pucch\_detector\_impl@{srsran::pucch\_detector\_impl}!pucch\_detector\_impl@{pucch\_detector\_impl}}
\index{pucch\_detector\_impl@{pucch\_detector\_impl}!srsran::pucch\_detector\_impl@{srsran::pucch\_detector\_impl}}
\doxysubsubsection{\texorpdfstring{pucch\_detector\_impl()}{pucch\_detector\_impl()}}
{\footnotesize\ttfamily srsran\+::pucch\+\_\+detector\+\_\+impl\+::pucch\+\_\+detector\+\_\+impl (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1low__papr__sequence__collection}{low\+\_\+papr\+\_\+sequence\+\_\+collection}} $>$}]{lpsc,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pseudo__random__generator}{pseudo\+\_\+random\+\_\+generator}} $>$}]{prg,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1channel__equalizer}{channel\+\_\+equalizer}} $>$}]{eqzr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructor\+: provides access to a collection of low-\/\+PAPR sequences and a pseudorandom sequence generator. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lpsc} & Pointer to a collection of low-\/\+PAPR sequences. \\
\hline
\mbox{\texttt{ in}}  & {\em prg} & Pointer to a pseudorandom sequence generator. \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
The low-\/\+PAPR collection should correspond to the cyclic shifts $\{\alpha : \alpha = 2 \pi
\frac{n}{N_{\textup{sc}}^{\textup{RB}}}, \quad n = 0, \dots, N_{\textup{sc}}^{\textup{RB}}-1\}$, where $N_{\textup{sc}}^{\textup{RB}} = 12$ is the number of subcarriers in a resource block. 
\end{DoxyRemark}

\begin{DoxyCode}{0}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00056\ \ \ \ \ low\_papr(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{lpsc}})),\ pseudo\_random(std::move(prg)),\ equalizer(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{eqzr}}))}
\DoxyCodeLine{00057\ \ \ \{}
\DoxyCodeLine{00058\ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=231pt]{de/d21/classsrsran_1_1pucch__detector__impl_afab5900016550a4e0ee21bc8d6cbdee9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=231pt]{de/d21/classsrsran_1_1pucch__detector__impl_afab5900016550a4e0ee21bc8d6cbdee9_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1pucch__detector__impl_a5df755ee76979f9917b634aa2c7d35bd}\label{classsrsran_1_1pucch__detector__impl_a5df755ee76979f9917b634aa2c7d35bd} 
\index{srsran::pucch\_detector\_impl@{srsran::pucch\_detector\_impl}!detect@{detect}}
\index{detect@{detect}!srsran::pucch\_detector\_impl@{srsran::pucch\_detector\_impl}}
\doxysubsubsection{\texorpdfstring{detect()}{detect()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::pair$<$ \mbox{\hyperlink{classsrsran_1_1pucch__uci__message}{pucch\+\_\+uci\+\_\+message}}, \mbox{\hyperlink{classsrsran_1_1channel__state__information}{channel\+\_\+state\+\_\+information}} $>$ srsran\+::pucch\+\_\+detector\+\_\+impl\+::detect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1resource__grid__reader}{resource\+\_\+grid\+\_\+reader}} \&}]{grid,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pucch__detector_1_1format0__configuration}{format0\+\_\+configuration}} \&}]{config }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Detects a PUCCH Format 0 transmission. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em grid} & Input resource grid. \\
\hline
\mbox{\texttt{ in}}  & {\em config} & PUCCH Format 0 configuration parameters. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A pair containing the detected PUCCH message and the channel state information. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classsrsran_1_1pucch__detector_a7ea4cc1333aed56d05da1f82379421da}{srsran\+::pucch\+\_\+detector}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00063\ \ \ \{}
\DoxyCodeLine{00064\ \ \ \ \ srsran\_assert(\textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}PUCCH\ Format\ 0\ not\ implemented\ yet."{}});}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00066\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1pucch__detector__impl_acf8f0e3a6c9750220d51790ca5a1b2f5}\label{classsrsran_1_1pucch__detector__impl_acf8f0e3a6c9750220d51790ca5a1b2f5} 
\index{srsran::pucch\_detector\_impl@{srsran::pucch\_detector\_impl}!detect@{detect}}
\index{detect@{detect}!srsran::pucch\_detector\_impl@{srsran::pucch\_detector\_impl}}
\doxysubsubsection{\texorpdfstring{detect()}{detect()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1pucch__detector_1_1pucch__detection__result}{pucch\+\_\+detector\+::pucch\+\_\+detection\+\_\+result}} pucch\+\_\+detector\+\_\+impl\+::detect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1resource__grid__reader}{resource\+\_\+grid\+\_\+reader}} \&}]{grid,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1channel__estimate}{channel\+\_\+estimate}} \&}]{estimates,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pucch__detector_1_1format1__configuration}{format1\+\_\+configuration}} \&}]{config }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Detects a PUCCH Format 1 transmission. 

Reverts the operations described in TS38.\+211 Section 6.\+3.\+2.\+4. See also TS38.\+213 Section 9.\+2 for more information about the configuration parameters and the format of the output UCI message. In particular, note that no SR bit is transmitted if HARQ-\/\+ACK bits are and that the UE does not transmit anything (DTX) if the UCI message only consists of a 0-\/valued SR bit. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em grid} & Input resource grid. \\
\hline
\mbox{\texttt{ in}}  & {\em estimates} & Estimated channel. \\
\hline
\mbox{\texttt{ in}}  & {\em config} & PUCCH Format 1 configuration parameters. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The detected PUCCH message. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classsrsran_1_1pucch__detector_ab3eafce20ee320c2b5efff83c7799b2f}{srsran\+::pucch\+\_\+detector}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00213\ \{}
\DoxyCodeLine{00214\ \ \ validate\_config(config);}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \textcolor{comment}{//\ Total\ number\ of\ REs\ used\ for\ PUCCH\ data\ (recall\ that\ positive\ integer\ division\ implies\ taking\ the\ floor).}}
\DoxyCodeLine{00217\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_res}}\ =\ (config.nof\_symbols\ /\ 2)\ *\ NRE;}
\DoxyCodeLine{00218\ \ \ time\_spread\_sequence.\mbox{\hyperlink{classsrsran_1_1static__tensor_aef91c69724fa16cb8ddefca0eb9d88d2}{resize}}(\{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_res}},\ 1\});}
\DoxyCodeLine{00219\ \ \ ch\_estimates.\mbox{\hyperlink{classsrsran_1_1static__tensor_aef91c69724fa16cb8ddefca0eb9d88d2}{resize}}(\{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_res}},\ 1,\ 1\});}
\DoxyCodeLine{00220\ \ \ eq\_time\_spread\_sequence.\mbox{\hyperlink{classsrsran_1_1static__tensor_aef91c69724fa16cb8ddefca0eb9d88d2}{resize}}(\{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_res}},\ 1\});}
\DoxyCodeLine{00221\ \ \ eq\_time\_spread\_noise\_var.\mbox{\hyperlink{classsrsran_1_1static__tensor_aef91c69724fa16cb8ddefca0eb9d88d2}{resize}}(\{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_res}},\ 1\});}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \textcolor{comment}{//\ Compute\ the\ number\ of\ data\ symbols\ before\ frequency\ hop.}}
\DoxyCodeLine{00224\ \ \ nof\_data\_symbols\ \ \ \ \ \ \ \ \ =\ config.nof\_symbols\ /\ 2;}
\DoxyCodeLine{00225\ \ \ nof\_data\_symbols\_pre\_hop\ =\ nof\_data\_symbols;}
\DoxyCodeLine{00226\ \ \ \textcolor{keywordflow}{if}\ (config.second\_hop\_prb.has\_value())\ \{}
\DoxyCodeLine{00227\ \ \ \ \ nof\_data\_symbols\_pre\_hop\ =\ config.nof\_symbols\ /\ 4;}
\DoxyCodeLine{00228\ \ \ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ alpha\_indices\ =\ \mbox{\hyperlink{classsrsran_1_1span}{span<unsigned>}}(alpha\_buffer).\mbox{\hyperlink{classsrsran_1_1span_aa4238c2e04ac8c60726db8cc0b687582}{first}}(nof\_data\_symbols);}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ extract\_data\_and\_estimates(}
\DoxyCodeLine{00233\ \ \ \ \ \ \ grid,\ estimates,\ config.start\_symbol\_index,\ config.starting\_prb,\ config.second\_hop\_prb,\ config.port);}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_noise\_var}}\ =\ estimates.get\_noise\_variance(config.port);}
\DoxyCodeLine{00236\ \ \ equalizer-\/>equalize(eq\_time\_spread\_sequence,}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ eq\_time\_spread\_noise\_var,}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ time\_spread\_sequence,}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ch\_estimates,}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<float>}}(\&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_noise\_var}},\ 1),}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.beta\_pucch);}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ marginalize\_w\_and\_r\_out(config);}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \textcolor{comment}{//\ Prepare\ UCI\ message\ output.}}
\DoxyCodeLine{00246\ \ \ \textcolor{comment}{//\ We\ don't\ set\ the\ SR\ bit\ here\ -\/\ this\ task\ is\ delegated\ to\ a\ higher-\/level\ function,\ based\ on\ the\ uci\_status\ returned}}
\DoxyCodeLine{00247\ \ \ \textcolor{comment}{//\ by\ this\ detector\ and\ on\ the\ used\ PUCCH\ resource.}}
\DoxyCodeLine{00248\ \ \ \textcolor{comment}{//\ This\ format\ doesn't\ support\ CSI\ reports.}}
\DoxyCodeLine{00249\ \ \ \mbox{\hyperlink{structsrsran_1_1pucch__uci__message_1_1configuration}{pucch\_uci\_message::configuration}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pucch\_uci\_message\_config}};}
\DoxyCodeLine{00250\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pucch\_uci\_message\_config}}.\mbox{\hyperlink{structsrsran_1_1pucch__uci__message_1_1configuration_ab4c94ec41890456033a05b2efe32814e}{nof\_sr}}\ \ \ \ \ \ \ \ =\ 0;}
\DoxyCodeLine{00251\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pucch\_uci\_message\_config}}.nof\_harq\_ack\ \ =\ config.nof\_harq\_ack;}
\DoxyCodeLine{00252\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pucch\_uci\_message\_config}}.nof\_csi\_part1\ =\ 0;}
\DoxyCodeLine{00253\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pucch\_uci\_message\_config}}.nof\_csi\_part2\ =\ 0;}
\DoxyCodeLine{00254\ \ \ pucch\_detection\_result\ output\ \ \ \ \ \ \ \ \ \ =\ \{\mbox{\hyperlink{classsrsran_1_1pucch__uci__message}{pucch\_uci\_message}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pucch\_uci\_message\_config}}),\ 0\};}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{//\ Select\ view\ of\ the\ payload.}}
\DoxyCodeLine{00257\ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<uint8\_t>}}\ bits\ =\ output.uci\_message.get\_harq\_ack\_bits();}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \textcolor{comment}{//\ Recall\ that,\ when\ nof\_harq\_ack\ ==\ 0,\ we\ still\ need\ to\ look\ for\ the\ positive\ SR\ indicator\ (i.e.,\ a\ single,\ 0-\/valued}}
\DoxyCodeLine{00260\ \ \ \textcolor{comment}{//\ transmitted\ bit).}}
\DoxyCodeLine{00261\ \ \ \mbox{\hyperlink{classsrsran_1_1static__vector}{static\_vector<uint8\_t,\ 1>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{temp\_bits}}(1);}
\DoxyCodeLine{00262\ \ \ \textcolor{keywordflow}{if}\ (config.nof\_harq\_ack\ ==\ 0)\ \{}
\DoxyCodeLine{00263\ \ \ \ \ bits\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{temp\_bits}};}
\DoxyCodeLine{00264\ \ \ \}}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \ \ \textcolor{keywordtype}{float}\ detection\_metric\ =\ detect\_bits(bits,\ detected\_symbol,\ eq\_noise\_var);}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \textcolor{comment}{//\ Detection\ threshold.}}
\DoxyCodeLine{00269\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00270\ \ \ \textcolor{comment}{//\ The\ detection\ metric,\ as\ computed\ by\ \(\backslash\)c\ detect\_bits,\ is\ assumed\ to\ be\ normally\ distributed\ with\ variance\ 1\ and\ mean}}
\DoxyCodeLine{00271\ \ \ \textcolor{comment}{//\ either\ 0\ (when\ there\ is\ no\ PUCCH)\ or\ larger\ than\ 0\ (when\ there\ is\ a\ PUCCH).\ Therefore,\ one\ can\ target\ a\ constant}}
\DoxyCodeLine{00272\ \ \ \textcolor{comment}{//\ probability\ of\ false\ alarm\ of\ 1\%\ by\ setting\ the\ detection\ threshold\ T\ such\ that\ Q(T)\ =\ 0.01,\ where\ the\ Q-\/function}}
\DoxyCodeLine{00273\ \ \ \textcolor{comment}{//\ is\ the\ tail\ distribution\ function\ of\ the\ standard\ normal\ distribution.}}
\DoxyCodeLine{00274\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{THRESHOLD}}\ =\ 3.3F;}
\DoxyCodeLine{00275\ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_msg\_ok}}\ =\ (detection\_metric\ >\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{THRESHOLD}});}
\DoxyCodeLine{00276\ \ \ output.detection\_metric\ \ \ =\ detection\_metric\ /\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{THRESHOLD}};}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_msg\_ok}})\ \{}
\DoxyCodeLine{00279\ \ \ \ \ output.uci\_message.set\_status(\mbox{\hyperlink{namespacesrsran_ad0b3056a8f46434cbe4f350f2772d7afafedb2d84cafe20862cb4399751a8a7e3}{uci\_status::invalid}});}
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keywordflow}{return}\ output;}
\DoxyCodeLine{00281\ \ \ \}}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \textcolor{keywordflow}{if}\ (config.nof\_harq\_ack\ >\ 0)\ \{}
\DoxyCodeLine{00284\ \ \ \ \ output.uci\_message.set\_status(\mbox{\hyperlink{namespacesrsran_ad0b3056a8f46434cbe4f350f2772d7afa9f7d0ee82b6a6ca7ddeae841f3253059}{uci\_status::valid}});}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keywordflow}{return}\ output;}
\DoxyCodeLine{00286\ \ \ \}}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \textcolor{comment}{//\ If\ we\ are\ here,\ there\ should\ only\ be\ a\ positive\ SR\ bit\ and\ it\ should\ be\ 0,\ since\ nothing\ is\ sent\ for\ negative}}
\DoxyCodeLine{00289\ \ \ \textcolor{comment}{//\ SR\ and\ no\ ACK.}}
\DoxyCodeLine{00290\ \ \ \textcolor{keywordflow}{if}\ (bits[0]\ ==\ 0U)\ \{}
\DoxyCodeLine{00291\ \ \ \ \ output.uci\_message.set\_status(\mbox{\hyperlink{namespacesrsran_ad0b3056a8f46434cbe4f350f2772d7afa9f7d0ee82b6a6ca7ddeae841f3253059}{uci\_status::valid}});}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordflow}{return}\ output;}
\DoxyCodeLine{00293\ \ \ \}}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ output.uci\_message.set\_status(\mbox{\hyperlink{namespacesrsran_ad0b3056a8f46434cbe4f350f2772d7afaad921d60486366258809553a3db49a4a}{uci\_status::unknown}});}
\DoxyCodeLine{00296\ \ \ \textcolor{keywordflow}{return}\ output;}
\DoxyCodeLine{00297\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d21/classsrsran_1_1pucch__detector__impl_acf8f0e3a6c9750220d51790ca5a1b2f5_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\Hypertarget{classsrsran_1_1pucch__detector__impl_a165b2499bb95e4fbc5a4a18b4eeb0b9c}\label{classsrsran_1_1pucch__detector__impl_a165b2499bb95e4fbc5a4a18b4eeb0b9c} 
\index{srsran::pucch\_detector\_impl@{srsran::pucch\_detector\_impl}!MAX\_ALLOCATED\_RE\_F1@{MAX\_ALLOCATED\_RE\_F1}}
\index{MAX\_ALLOCATED\_RE\_F1@{MAX\_ALLOCATED\_RE\_F1}!srsran::pucch\_detector\_impl@{srsran::pucch\_detector\_impl}}
\doxysubsubsection{\texorpdfstring{MAX\_ALLOCATED\_RE\_F1}{MAX\_ALLOCATED\_RE\_F1}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{constexpr}} \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::pucch\+\_\+detector\+\_\+impl\+::\+MAX\+\_\+\+ALLOCATED\+\_\+\+RE\+\_\+\+F1 = NRE \texorpdfstring{$\ast$}{*} MAX\+\_\+\+NSYMB\+\_\+\+PER\+\_\+\+SLOT\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}



Maximum number of REs allocated to PUCCH Format 1. 

The allocated resources are at most one PRB over all OFDM symbols. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/channel\+\_\+processors/\mbox{\hyperlink{pucch__detector__impl_8h}{pucch\+\_\+detector\+\_\+impl.\+h}}\item 
lib/phy/upper/channel\+\_\+processors/\mbox{\hyperlink{pucch__detector__impl_8cpp}{pucch\+\_\+detector\+\_\+impl.\+cpp}}\end{DoxyCompactItemize}
