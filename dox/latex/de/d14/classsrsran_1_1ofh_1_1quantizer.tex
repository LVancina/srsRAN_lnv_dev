\doxysection{srsran\+::ofh\+::quantizer Class Reference}
\hypertarget{classsrsran_1_1ofh_1_1quantizer}{}\label{classsrsran_1_1ofh_1_1quantizer}\index{srsran::ofh::quantizer@{srsran::ofh::quantizer}}


Describes quantization of floating point number in the range \mbox{[}-\/1; +1\mbox{]} to a fixed point number of a given bit width.  




{\ttfamily \#include $<$quantizer.\+h$>$}



Collaboration diagram for srsran\+::ofh\+::quantizer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=194pt]{db/db1/classsrsran_1_1ofh_1_1quantizer__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ofh_1_1quantizer_ad361e3a19a4a155e15b078409b3bbc99}{quantizer}} (\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bit\+\_\+width\+\_\+}})
\begin{DoxyCompactList}\small\item\em Constructor receives width in bits of a resulting fixed point number. \end{DoxyCompactList}\item 
int16\+\_\+t \mbox{\hyperlink{classsrsran_1_1ofh_1_1quantizer_ad7c5ac9bad2c2b753e3f1399d31b20da}{to\+\_\+fixed\+\_\+point}} (\mbox{\hyperlink{classfloat}{float}} value) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Quantizes a floating point value into 16bit integer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1quantizer_a3e2414b6a8bd979ae954d0499e376659}{to\+\_\+fixed\+\_\+point}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ int16\+\_\+t $>$ z, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classfloat}{float}} $>$ x, \mbox{\hyperlink{classfloat}{float}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{in\+\_\+scale}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Quantizes a sequence of floating point values into 16bit integers. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classfloat}{float}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1quantizer_a617f62d3fbfa1cef32a469a8ce74c7c5}{to\+\_\+float}} (\mbox{\hyperlink{classint}{int}} p) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Converts fixed point value to floating point. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1quantizer_ac0443201b8b5b885572c53b5191a426b}{to\+\_\+float}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$ z, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} int16\+\_\+t $>$ x, int16\+\_\+t \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{in\+\_\+scale}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Converts a sequence of fixed point values to complex floating point values. \end{DoxyCompactList}\item 
int16\+\_\+t \mbox{\hyperlink{classsrsran_1_1ofh_1_1quantizer_a7f5b8f7e35ae89f4f31105d31fc22435}{sign\+\_\+extend}} (int16\+\_\+t value) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Sign extends the input value. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Describes quantization of floating point number in the range \mbox{[}-\/1; +1\mbox{]} to a fixed point number of a given bit width. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1quantizer_ad361e3a19a4a155e15b078409b3bbc99}\label{classsrsran_1_1ofh_1_1quantizer_ad361e3a19a4a155e15b078409b3bbc99} 
\index{srsran::ofh::quantizer@{srsran::ofh::quantizer}!quantizer@{quantizer}}
\index{quantizer@{quantizer}!srsran::ofh::quantizer@{srsran::ofh::quantizer}}
\doxysubsubsection{\texorpdfstring{quantizer()}{quantizer()}}
{\footnotesize\ttfamily srsran\+::ofh\+::quantizer\+::quantizer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{bit\+\_\+width\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Constructor receives width in bits of a resulting fixed point number. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00038\ \ \ \ \ bit\_width(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bit\_width\_}}),\ nbits\_shift\_sign(16U\ -\/\ bit\_width),\ gain((1\ <<\ (bit\_width\ -\/\ 1))\ -\/\ 1.0f)}
\DoxyCodeLine{00039\ \ \ \{}
\DoxyCodeLine{00040\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1quantizer_a7f5b8f7e35ae89f4f31105d31fc22435}\label{classsrsran_1_1ofh_1_1quantizer_a7f5b8f7e35ae89f4f31105d31fc22435} 
\index{srsran::ofh::quantizer@{srsran::ofh::quantizer}!sign\_extend@{sign\_extend}}
\index{sign\_extend@{sign\_extend}!srsran::ofh::quantizer@{srsran::ofh::quantizer}}
\doxysubsubsection{\texorpdfstring{sign\_extend()}{sign\_extend()}}
{\footnotesize\ttfamily int16\+\_\+t srsran\+::ofh\+::quantizer\+::sign\+\_\+extend (\begin{DoxyParamCaption}\item[{int16\+\_\+t}]{value }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Sign extends the input value. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00090\ \ \ \{}
\DoxyCodeLine{00091\ \ \ \ \ int16\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{shifted}}\ =\ value\ <<\ nbits\_shift\_sign;}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{shifted}}\ >>\ nbits\_shift\_sign;}
\DoxyCodeLine{00093\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1quantizer_ad7c5ac9bad2c2b753e3f1399d31b20da}\label{classsrsran_1_1ofh_1_1quantizer_ad7c5ac9bad2c2b753e3f1399d31b20da} 
\index{srsran::ofh::quantizer@{srsran::ofh::quantizer}!to\_fixed\_point@{to\_fixed\_point}}
\index{to\_fixed\_point@{to\_fixed\_point}!srsran::ofh::quantizer@{srsran::ofh::quantizer}}
\doxysubsubsection{\texorpdfstring{to\_fixed\_point()}{to\_fixed\_point()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily int16\+\_\+t srsran\+::ofh\+::quantizer\+::to\+\_\+fixed\+\_\+point (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classfloat}{float}}}]{value }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Quantizes a floating point value into 16bit integer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em value} & A floating point value. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Resultant quantized value. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00047\ \ \ \{}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{clipped}}\ =\ value;}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{if}\ (std::abs(value)\ >\ 1.0)\ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{clipped}}\ =\ std::copysign(1.0,\ value);}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}int16\_t\textcolor{keyword}{>}(std::round(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{clipped}}\ *\ gain));}
\DoxyCodeLine{00053\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1quantizer_a3e2414b6a8bd979ae954d0499e376659}\label{classsrsran_1_1ofh_1_1quantizer_a3e2414b6a8bd979ae954d0499e376659} 
\index{srsran::ofh::quantizer@{srsran::ofh::quantizer}!to\_fixed\_point@{to\_fixed\_point}}
\index{to\_fixed\_point@{to\_fixed\_point}!srsran::ofh::quantizer@{srsran::ofh::quantizer}}
\doxysubsubsection{\texorpdfstring{to\_fixed\_point()}{to\_fixed\_point()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ofh\+::quantizer\+::to\+\_\+fixed\+\_\+point (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ int16\+\_\+t $>$}]{z,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classfloat}{float}} $>$}]{x,  }\item[{\mbox{\hyperlink{classfloat}{float}}}]{in\+\_\+scale }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Quantizes a sequence of floating point values into 16bit integers. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em z} & Resultant quantized values. \\
\hline
\mbox{\texttt{ in}}  & {\em x} & Sequence of floating point values. \\
\hline
\mbox{\texttt{ in}}  & {\em in\+\_\+scale} & Scaling factor applied to the input prior conversion.\\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
{\ttfamily z} and {\ttfamily x} must have the same size. 
\end{DoxyRemark}

\begin{DoxyCode}{0}
\DoxyCodeLine{00063\ \ \ \{}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordtype}{float}\ scale\ =\ gain\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{in\_scale}};}
\DoxyCodeLine{00065\ \ \ \ \ srsvec::convert\_round(x,\ scale,\ z);}
\DoxyCodeLine{00066\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1quantizer_a617f62d3fbfa1cef32a469a8ce74c7c5}\label{classsrsran_1_1ofh_1_1quantizer_a617f62d3fbfa1cef32a469a8ce74c7c5} 
\index{srsran::ofh::quantizer@{srsran::ofh::quantizer}!to\_float@{to\_float}}
\index{to\_float@{to\_float}!srsran::ofh::quantizer@{srsran::ofh::quantizer}}
\doxysubsubsection{\texorpdfstring{to\_float()}{to\_float()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classfloat}{float}} srsran\+::ofh\+::quantizer\+::to\+\_\+float (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{p }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Converts fixed point value to floating point. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em p} & 16bit integer value. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Resultant floating point value. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00072\ \{\ \textcolor{keywordflow}{return}\ (p\ /\ gain);\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1quantizer_ac0443201b8b5b885572c53b5191a426b}\label{classsrsran_1_1ofh_1_1quantizer_ac0443201b8b5b885572c53b5191a426b} 
\index{srsran::ofh::quantizer@{srsran::ofh::quantizer}!to\_float@{to\_float}}
\index{to\_float@{to\_float}!srsran::ofh::quantizer@{srsran::ofh::quantizer}}
\doxysubsubsection{\texorpdfstring{to\_float()}{to\_float()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ofh\+::quantizer\+::to\+\_\+float (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$}]{z,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} int16\+\_\+t $>$}]{x,  }\item[{int16\+\_\+t}]{in\+\_\+scale }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Converts a sequence of fixed point values to complex floating point values. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em z} & Resultant complex floating point values. \\
\hline
\mbox{\texttt{ in}}  & {\em x} & Sequence of 16bit integer values. \\
\hline
\mbox{\texttt{ in}}  & {\em in\+\_\+scale} & Scaling factor (expected to be bigger or equal to 1) applied to the input prior conversion.\\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
The size of {\ttfamily x} must be twice the size of {\ttfamily z} as \textbackslash{}x is comprised by the quantized pairs of real and imaginary parts of complex values. 
\end{DoxyRemark}

\begin{DoxyCode}{0}
\DoxyCodeLine{00083\ \ \ \{}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{float}\ scale\ =\ gain\ /\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{in\_scale}};}
\DoxyCodeLine{00085\ \ \ \ \ srsvec::convert(x,\ scale,\ z);}
\DoxyCodeLine{00086\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/ofh/compression/quantizer.\+h\end{DoxyCompactItemize}
