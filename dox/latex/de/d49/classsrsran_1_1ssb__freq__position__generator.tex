\doxysection{srsran\+::ssb\+\_\+freq\+\_\+position\+\_\+generator Class Reference}
\hypertarget{classsrsran_1_1ssb__freq__position__generator}{}\label{classsrsran_1_1ssb__freq__position__generator}\index{srsran::ssb\_freq\_position\_generator@{srsran::ssb\_freq\_position\_generator}}


Class that implements utilities that compute the SSB position within the band.  




{\ttfamily \#include $<$ssb\+\_\+freq\+\_\+position\+\_\+generator.\+h$>$}



Collaboration diagram for srsran\+::ssb\+\_\+freq\+\_\+position\+\_\+generator\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=247pt]{d5/dd4/classsrsran_1_1ssb__freq__position__generator__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ssb__freq__position__generator_a9a75a814c0d9c331c1ec54f03b2b45a0}{ssb\+\_\+freq\+\_\+position\+\_\+generator}} (\mbox{\hyperlink{classunsigned}{unsigned}} dl\+\_\+arfcn, \mbox{\hyperlink{namespacesrsran_a9e91de4bdf4fc6af2e4fba60dde4d0c5}{nr\+\_\+band}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nr\+\_\+band\+\_\+}}, \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{n\+\_\+rbs\+\_\+}}, \mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\+\_\+spacing}} scs\+\_\+common, \mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\+\_\+spacing}} scs\+\_\+ssb)
\item 
\mbox{\hyperlink{structsrsran_1_1ssb__freq__location}{ssb\+\_\+freq\+\_\+location}} \mbox{\hyperlink{classsrsran_1_1ssb__freq__position__generator_a1dbb01e4b3fba247beb7c44a8471053f}{get\+\_\+next\+\_\+ssb\+\_\+location}} ()
\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1ssb__freq__position__generator_a8aefde68f3576c6381c678d92dfd06b0}{get\+\_\+ssb\+\_\+first\+\_\+symbol}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1ssb__freq__position__generator_a8210ecad51d1c9e44d2451a159670ddd}{get\+\_\+max\+\_\+ss0\+\_\+idx}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class that implements utilities that compute the SSB position within the band. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ssb__freq__position__generator_a9a75a814c0d9c331c1ec54f03b2b45a0}\label{classsrsran_1_1ssb__freq__position__generator_a9a75a814c0d9c331c1ec54f03b2b45a0} 
\index{srsran::ssb\_freq\_position\_generator@{srsran::ssb\_freq\_position\_generator}!ssb\_freq\_position\_generator@{ssb\_freq\_position\_generator}}
\index{ssb\_freq\_position\_generator@{ssb\_freq\_position\_generator}!srsran::ssb\_freq\_position\_generator@{srsran::ssb\_freq\_position\_generator}}
\doxysubsubsection{\texorpdfstring{ssb\_freq\_position\_generator()}{ssb\_freq\_position\_generator()}}
{\footnotesize\ttfamily ssb\+\_\+freq\+\_\+position\+\_\+generator\+::ssb\+\_\+freq\+\_\+position\+\_\+generator (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{dl\+\_\+arfcn,  }\item[{\mbox{\hyperlink{namespacesrsran_a9e91de4bdf4fc6af2e4fba60dde4d0c5}{nr\+\_\+band}}}]{nr\+\_\+band\+\_\+,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{n\+\_\+rbs\+\_\+,  }\item[{\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\+\_\+spacing}}}]{scs\+\_\+common,  }\item[{\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\+\_\+spacing}}}]{scs\+\_\+ssb }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00080\ \ \ dl\_arfcn\{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_arfcn\_}}\},}
\DoxyCodeLine{00081\ \ \ band(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nr\_band\_}}),}
\DoxyCodeLine{00082\ \ \ n\_rbs(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{n\_rbs\_}}),}
\DoxyCodeLine{00083\ \ \ scs\_common\{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{scs\_common\_}}\},}
\DoxyCodeLine{00084\ \ \ scs\_ssb\{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{scs\_ssb\_}}\},}
\DoxyCodeLine{00085\ \ \ ssb\_case\{band\_helper::get\_ssb\_pattern(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nr\_band\_}},\ scs\_ssb)\},}
\DoxyCodeLine{00086\ \ \ N\_raster\{0\},}
\DoxyCodeLine{00087\ \ \ M\_raster\{0\},}
\DoxyCodeLine{00088\ \ \ gscn\_raster\_idx\{0\}}
\DoxyCodeLine{00089\ \{}
\DoxyCodeLine{00090\ \ \ \textcolor{comment}{//\ Compute\ the\ RF\ reference\ frequency,\ pointA\ and\ upper-\/bound\ of\ the\ band.}}
\DoxyCodeLine{00091\ \ \ f\_ref\_hz\ \ \ =\ band\_helper::nr\_arfcn\_to\_freq(dl\_arfcn);}
\DoxyCodeLine{00092\ \ \ point\_A\_hz\ =\ band\_helper::get\_abs\_freq\_point\_a\_from\_f\_ref(f\_ref\_hz,\ n\_rbs,\ scs\_common);}
\DoxyCodeLine{00093\ \ \ \textcolor{comment}{//\ Frequency\ (in\ Hz)\ corresponding\ to\ the\ last\ subcarrier\ of\ the\ Channel\ Band,\ or\ upper-\/bound\ (ub).}}
\DoxyCodeLine{00094\ \ \ \textcolor{comment}{//\ NOTE:\ The\ difference\ between\ bw\_ub\_hz\ and\ point\_A\_hz\ is\ 1\ SCS\ smaller\ than\ n\_rbs\ *\ NOF\_SUBCARRIERS\_PER\_RB\ *}}
\DoxyCodeLine{00095\ \ \ \textcolor{comment}{//\ SCS\_common.\ This\ is\ because\ the\ distance\ between\ the\ first\ and\ last\ subcarrier\ (in\ numbers\ of\ subcarriers)\ \ is}}
\DoxyCodeLine{00096\ \ \ \textcolor{comment}{//\ NOF\_SUBCARRIERS\_PER\_RB\ -\/\ 1.}}
\DoxyCodeLine{00097\ \ \ bw\_ub\_hz\ =\ point\_A\_hz\ +}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(n\_rbs\ *\ \mbox{\hyperlink{namespacesrsran_a1d73f866251b700d7747204655a84500}{NOF\_SUBCARRIERS\_PER\_RB}}\ *\ \mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}(scs\_common)\ *\ band\_helper::KHZ\_TO\_HZ\ -\/\ 1);}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{//\ Lower-\/bound\ for\ the\ SSB\ central\ frequency,\ or\ SS\_ref,\ as\ a\ function\ of\ pointA.}}
\DoxyCodeLine{00101\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_ref\_l\_bound\_hz}}\ =}
\DoxyCodeLine{00102\ \ \ \ \ \ \ point\_A\_hz\ +\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}(scs\_ssb)\ *\ band\_helper::KHZ\_TO\_HZ\ *\ \mbox{\hyperlink{namespacesrsran_a0b2b4b6efd51c69501b718054dd03007}{NOF\_SSB\_SUBCARRIERS}}\ /\ 2);}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{comment}{//\ Get\ the\ starting\ point\ of\ parameter\ N\ for\ the\ sync-\/raster.\ This\ allows\ us\ to\ avoid\ the\ generation\ of\ all\ possible}}
\DoxyCodeLine{00105\ \ \ \textcolor{comment}{//\ SSB\ positions\ in\ the\ raster.}}
\DoxyCodeLine{00106\ \ \ \textcolor{keywordflow}{if}\ (dl\_arfcn\ <\ band\_helper::MIN\_ARFCN\_3\_GHZ\_24\_5\_GHZ)\ \{}
\DoxyCodeLine{00107\ \ \ \ \ N\_raster\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(std::floor(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_ref\_l\_bound\_hz}}\ /\ band\_helper::N\_SIZE\_SYNC\_RASTER\_1\_HZ));}
\DoxyCodeLine{00108\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (dl\_arfcn\ >=\ band\_helper::MIN\_ARFCN\_3\_GHZ\_24\_5\_GHZ\ \&\&\ dl\_arfcn\ <\ band\_helper::MIN\_ARFCN\_24\_5\_GHZ\_100\_GHZ)\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{comment}{//\ For\ BW\ >=\ 40MHz,\ Band\ n79\ has\ a\ different\ sync\ raster\ step\ size\ and\ need\ to\ be\ handled\ separately.}}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_band\_40mhz\_or\_above}}\ =\ (scs\_common\ ==\ subcarrier\_spacing::kHz15\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ n\_rbs\ >=\ 216U)\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (scs\_common\ ==\ subcarrier\_spacing::kHz30\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ n\_rbs\ >=\ 106U)\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (scs\_common\ ==\ subcarrier\_spacing::kHz60\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ n\_rbs\ >=\ 51U);}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{comment}{//\ For\ bands\ n79\ and\ n104,\ the\ sync\ raster\ has\ a\ specific\ step\ and\ need\ to\ be\ handled\ separately,\ as\ per}}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{comment}{//\ Table\ 5.4.3.3-\/1,\ TS\ 38.104,\ ver.\ 17.8.0.\ In\ the\ following,\ we\ compute\ the\ starting\ point\ of\ parameter\ N\ for\ the}}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{comment}{//\ sync-\/raster,\ so\ that\ the\ resulting\ GSCN\ (i)\ is\ compatible\ with\ the\ raster\ step\ and\ starting\ point\ and\ (ii)\ the}}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{comment}{//\ SSB\ lowest\ subcarrier\ is\ greater\ than\ pointA.}}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{if}\ (band\ ==\ nr\_band::n79\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_band\_40mhz\_or\_above}})\ \{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ N\_raster\ =\ band\_helper::GSCN\_LB\_N\_79\_BW\_40\_MHZ\ -\/\ band\_helper::GSCN\_LB\_SYNC\_RASTER\_2;}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (get\_ss\_ref\_hz(N\_raster,\ 0)\ <\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_ref\_l\_bound\_hz}})\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ increase\_N\_raster();}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (band\ ==\ nr\_band::n104)\ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ N\_raster\ =\ band\_helper::GSCN\_LB\_N\_104\ -\/\ band\_helper::GSCN\_LB\_SYNC\_RASTER\_2;}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (get\_ss\_ref\_hz(N\_raster,\ 0)\ <\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_ref\_l\_bound\_hz}})\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ increase\_N\_raster();}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ N\_raster\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(std::floor((\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_ref\_l\_bound\_hz}}\ -\/\ band\_helper::N\_REF\_OFFSET\_3\_GHZ\_24\_5\_GHZ)\ /}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ band\_helper::N\_SIZE\_SYNC\_RASTER\_2\_HZ));}
\DoxyCodeLine{00131\ \ \ \ \ \}}
\DoxyCodeLine{00132\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00133\ \ \ \ \ srsran\_assert(dl\_arfcn\ <\ band\_helper::MIN\_ARFCN\_24\_5\_GHZ\_100\_GHZ,\ \textcolor{stringliteral}{"{}FR2\ frequencies\ not\ supported"{}});}
\DoxyCodeLine{00134\ \ \ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \textcolor{comment}{//\ This\ constraint\ comes\ from\ the\ scheduler,\ which\ cannot\ allocate\ PDCCH\ starting\ at\ symbols\ different\ from\ 0;}}
\DoxyCodeLine{00137\ \ \ \textcolor{comment}{//\ therefore,\ as\ per\ Table\ 13-\/11,\ TS\ 38.213,\ only\ the\ searchSpaceZero\ indices\ with\ starting\ symbol\ 0\ are\ those\ with}}
\DoxyCodeLine{00138\ \ \ \textcolor{comment}{//\ index\ <=\ 9.}}
\DoxyCodeLine{00139\ \ \ max\_ss0\_idx\ =\ 9;}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \textcolor{comment}{//\ As\ per\ TS38.213,\ Section\ 4.1.}}
\DoxyCodeLine{00142\ \ \ ssb\_first\_symbol\ =\ ssb\_case\ ==\ \mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3ea9d5ed678fe57bcca610140957afab571}{ssb\_pattern\_case::B}}\ ?\ 4\ :\ 2;}
\DoxyCodeLine{00143\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ssb__freq__position__generator_a8210ecad51d1c9e44d2451a159670ddd}\label{classsrsran_1_1ssb__freq__position__generator_a8210ecad51d1c9e44d2451a159670ddd} 
\index{srsran::ssb\_freq\_position\_generator@{srsran::ssb\_freq\_position\_generator}!get\_max\_ss0\_idx@{get\_max\_ss0\_idx}}
\index{get\_max\_ss0\_idx@{get\_max\_ss0\_idx}!srsran::ssb\_freq\_position\_generator@{srsran::ssb\_freq\_position\_generator}}
\doxysubsubsection{\texorpdfstring{get\_max\_ss0\_idx()}{get\_max\_ss0\_idx()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::ssb\+\_\+freq\+\_\+position\+\_\+generator\+::get\+\_\+max\+\_\+ss0\+\_\+idx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060\ \{\ \textcolor{keywordflow}{return}\ max\_ss0\_idx;\ \};}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ssb__freq__position__generator_a1dbb01e4b3fba247beb7c44a8471053f}\label{classsrsran_1_1ssb__freq__position__generator_a1dbb01e4b3fba247beb7c44a8471053f} 
\index{srsran::ssb\_freq\_position\_generator@{srsran::ssb\_freq\_position\_generator}!get\_next\_ssb\_location@{get\_next\_ssb\_location}}
\index{get\_next\_ssb\_location@{get\_next\_ssb\_location}!srsran::ssb\_freq\_position\_generator@{srsran::ssb\_freq\_position\_generator}}
\doxysubsubsection{\texorpdfstring{get\_next\_ssb\_location()}{get\_next\_ssb\_location()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1ssb__freq__location}{ssb\+\_\+freq\+\_\+location}} ssb\+\_\+freq\+\_\+position\+\_\+generator\+::get\+\_\+next\+\_\+ssb\+\_\+location (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Return the next viable position of the SSB on the raster, so that the SSB falls within the band CRBs and the SSB subcarriers are aligned with those of the CRBs. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00216\ \{}
\DoxyCodeLine{00217\ \ \ \textcolor{comment}{//\ Handle\ bands\ with\ special\ raster\ separately.}}
\DoxyCodeLine{00218\ \ \ \textcolor{keywordflow}{if}\ (band\ ==\ nr\_band::n46\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}\ band\ ==\ nr\_band::n96\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}\ band\ ==\ nr\_band::n102\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ (ssb\_case\ ==\ \mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3ea7fc56270e7a70fa81a5935b72eacbe29}{ssb\_pattern\_case::A}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ (band\ ==\ nr\_band::n34\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}\ band\ ==\ nr\_band::n38\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}\ band\ ==\ nr\_band::n39)))\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_next\_ssb\_location\_special\_raster();}
\DoxyCodeLine{00221\ \ \ \}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \mbox{\hyperlink{structsrsran_1_1ssb__freq__location}{ssb\_freq\_location}}\ ssb\{.is\_valid\ =\ \textcolor{keyword}{false}\};}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{N\_raster\_max}}\ =\ dl\_arfcn\ <\ band\_helper::MIN\_ARFCN\_3\_GHZ\_24\_5\_GHZ}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ band\_helper::N\_UB\_SYNC\_RASTER\_1}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ band\_helper::N\_UB\_SYNC\_RASTER\_2;}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \textcolor{keywordflow}{while}\ (N\_raster\ <\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{N\_raster\_max}})\ \{}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{comment}{//\ If\ M\_raster\ >\ 0,\ no\ need\ \ to\ find\ the\ same\ value\ again.}}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{comment}{//\ NOTE:\ (i)\ Once\ the\ value\ of\ M\ is\ found,\ all\ the\ possible\ SSB\ positions\ within\ the\ raster\ that\ are\ viable\ will\ be}}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{comment}{//\ obtained\ for\ the\ same\ value\ of\ M,\ by\ varying\ N.}}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ (ii)\ For\ NR-\/bands\ above\ 3GHz,\ M\ is\ not\ used.}}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordflow}{if}\ (M\_raster\ ==\ 0)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ M\_raster\ =\ find\_M\_raster();}
\DoxyCodeLine{00236\ \ \ \ \ \}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_N\_M\_hz}}\ =\ get\_ss\_ref\_hz(N\_raster,\ M\_raster);}
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_0\_hz}}\ \ \ =\ get\_f\_ssb\_0\_hz(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_N\_M\_hz}},\ scs\_ssb);}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_ub\_hz}}\ \ =\ get\_f\_ssb\_ub\_hz(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_N\_M\_hz}},\ scs\_ssb);}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{comment}{//\ An\ SSB\ centre\ frequency\ SS\_ref\ is\ satisfactory\ if\ (i)\ if\ the\ SSB\ falls\ within\ the\ band\ and\ (ii)\ SS\_ref\ falls\ into}}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{comment}{//\ the\ subcarrier\ grid\ of\ CRBs;\ or,\ equivalently,\ if\ the\ distance\ of\ the\ first\ SSB's\ subcarrier\ from\ pointA\ can\ be}}
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{comment}{//\ expressed\ as\ a\ multiple\ of\ SCS.}}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{comment}{//\ NOTES:}}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{comment}{//\ 1)\ As\ the\ TS\ reports\ no\ explicit\ definition\ of\ how\ to\ determine\ the\ condition\ "{}SSB\ falls\ within\ the\ band"{},\ this}}
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{comment}{//\ is\ determined\ based\ on\ the\ position\ of\ the\ first\ SSB's\ subcarrier\ and\ first\ Channel\ Band\ subcarrier,\ for\ the}}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{comment}{//\ lower\ bound;\ and\ based\ on\ the\ position\ of\ the\ last\ SSB's\ subcarrier\ and\ last\ Channel\ Band\ subcarrier,\ for\ the}}
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{comment}{//\ upper\ bound.}}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{comment}{//\ 2)\ Condition\ "{}SS\_ref\ falls\ into\ the\ subcarrier\ grid\ of\ CRBs"{}\ is\ implementation\ defined\ and\ comes\ from\ PHY}}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{comment}{//\ constraints.}}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_ssb\_inside\_band}}\ =\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_0\_hz}}\ >=\ point\_A\_hz)\ \&\&\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_ub\_hz}}\ <=\ bw\_ub\_hz);}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_ssb\_inside\_band}})\ \{}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_scs\_30khz\_spacing}}\ =\ scs\_common\ ==\ subcarrier\_spacing::kHz30\ \&\&\ scs\_ssb\ ==\ subcarrier\_spacing::kHz30;}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_multiple\_of\_scs}}\ =}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_scs\_30khz\_spacing}}}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fmod}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_0\_hz}}\ -\/\ point\_A\_hz,}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}(subcarrier\_spacing::kHz30)\ *\ band\_helper::KHZ\_TO\_HZ))\ ==\ 0.0}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fmod}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_0\_hz}}\ -\/\ point\_A\_hz,\ \mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}(subcarrier\_spacing::kHz15)\ *\ band\_helper::KHZ\_TO\_HZ)\ ==\ 0.0;}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_multiple\_of\_scs}})\ \{}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ ssb.offset\_to\_point\_A\ =\ compute\_offset\_to\_pointA(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_0\_hz}},\ point\_A\_hz,\ scs\_common);}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ ssb.k\_ssb\ \ \ \ \ \ \ \ \ \ \ \ \ =\ compute\_k\_ssb(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_0\_hz}},\ point\_A\_hz,\ ssb.offset\_to\_point\_A);}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ ssb.is\_valid\ \ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ ssb.ss\_ref\ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{f\_ssb\_N\_M\_hz}};}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Increment\ N\_raster\ according\ to\ the\ band.}}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ increase\_N\_raster();}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ssb;}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00271\ \ \ \ \ \}}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{comment}{//\ Increment\ N\_raster.}}
\DoxyCodeLine{00274\ \ \ \ \ increase\_N\_raster();}
\DoxyCodeLine{00275\ \ \ \}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \textcolor{keywordflow}{return}\ ssb;}
\DoxyCodeLine{00278\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ssb__freq__position__generator_a8aefde68f3576c6381c678d92dfd06b0}\label{classsrsran_1_1ssb__freq__position__generator_a8aefde68f3576c6381c678d92dfd06b0} 
\index{srsran::ssb\_freq\_position\_generator@{srsran::ssb\_freq\_position\_generator}!get\_ssb\_first\_symbol@{get\_ssb\_first\_symbol}}
\index{get\_ssb\_first\_symbol@{get\_ssb\_first\_symbol}!srsran::ssb\_freq\_position\_generator@{srsran::ssb\_freq\_position\_generator}}
\doxysubsubsection{\texorpdfstring{get\_ssb\_first\_symbol()}{get\_ssb\_first\_symbol()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::ssb\+\_\+freq\+\_\+position\+\_\+generator\+::get\+\_\+ssb\+\_\+first\+\_\+symbol (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00059\ \{\ \textcolor{keywordflow}{return}\ ssb\_first\_symbol;\ \};}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/ran/ssb\+\_\+freq\+\_\+position\+\_\+generator.\+h\item 
lib/ran/ssb\+\_\+freq\+\_\+position\+\_\+generator.\+cpp\end{DoxyCompactItemize}
