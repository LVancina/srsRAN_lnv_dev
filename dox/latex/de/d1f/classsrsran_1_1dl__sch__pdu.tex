\doxysection{srsran\+::dl\+\_\+sch\+\_\+pdu Class Reference}
\hypertarget{classsrsran_1_1dl__sch__pdu}{}\label{classsrsran_1_1dl__sch__pdu}\index{srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}}


This class represents and encodes a MAC DL-\/\+SCH PDU that may contain multiple sub\+PDUs. Each sub\+PDU is composed of a MAC subheader and MAC CE or MAC SDU payload.  




{\ttfamily \#include $<$dl\+\_\+sch\+\_\+pdu\+\_\+assembler.\+h$>$}



Collaboration diagram for srsran\+::dl\+\_\+sch\+\_\+pdu\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{d5/d6d/classsrsran_1_1dl__sch__pdu__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_1_1mac__sdu__encoder}{mac\+\_\+sdu\+\_\+encoder}}
\begin{DoxyCompactList}\small\item\em Encoder of a MAC SDU. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_a040d3e57f02267bc59af7ad9068271b3}{dl\+\_\+sch\+\_\+pdu}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdu\+\_\+buffer\+\_\+}})
\item 
\mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_1_1mac__sdu__encoder}{mac\+\_\+sdu\+\_\+encoder}} \mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_a89ff4a38d2cf883fcc29df7e755355f1}{get\+\_\+sdu\+\_\+encoder}} (\mbox{\hyperlink{namespacesrsran_a9fb768b4a14baadb9295634bcaf010bc}{lcid\+\_\+t}} lcid, \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\+\_\+payload\+\_\+len\+\_\+estimate}})
\begin{DoxyCompactList}\small\item\em Gets a MAC SDU encoder for a given LCID and scheduler grant size. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_a404717a7a76228da518a302d6c98ad21}{add\+\_\+sdu}} (\mbox{\hyperlink{namespacesrsran_a9fb768b4a14baadb9295634bcaf010bc}{lcid\+\_\+t}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{lcid\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1byte__buffer__chain}{byte\+\_\+buffer\+\_\+chain}} \&\&sdu)
\begin{DoxyCompactList}\small\item\em Adds a MAC SDU as a sub\+PDU. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_a6e28ea11004fad43d1393498ff114df3}{add\+\_\+ue\+\_\+con\+\_\+res\+\_\+id}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} ue\+\_\+con\+\_\+res\+\_\+id\+\_\+t \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{con\+\_\+res\+\_\+payload}})
\begin{DoxyCompactList}\small\item\em Adds a UE Contention Resolution CE as a sub\+PDU. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_aff6e371368b32299b2fca45d98590493}{add\+\_\+tag\+\_\+cmd}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ta__cmd__ce__payload}{ta\+\_\+cmd\+\_\+ce\+\_\+payload}} \&ce\+\_\+payload)
\begin{DoxyCompactList}\small\item\em Adds a Timing Advance Command CE as a sub\+PDU. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_acfd1925f89351aef3b111d856aeea69e}{add\+\_\+padding}} (\mbox{\hyperlink{classunsigned}{unsigned}} len)
\begin{DoxyCompactList}\small\item\em Adds a padding CE as a sub\+PDU. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_a32b266134b79026ce8508bfd33d82323}{nof\+\_\+bytes}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Number of bytes of the MAC PDU. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_adb15624710dcea7a7187153d73741b69}{nof\+\_\+empty\+\_\+bytes}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Remaining space in number of bytes in the PDU. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ \mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_a84cd4cdf302847809fd9ff209de14fb4}{get}} ()
\begin{DoxyCompactList}\small\item\em Gets the held MAC PDU bytes. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This class represents and encodes a MAC DL-\/\+SCH PDU that may contain multiple sub\+PDUs. Each sub\+PDU is composed of a MAC subheader and MAC CE or MAC SDU payload. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1dl__sch__pdu_a040d3e57f02267bc59af7ad9068271b3}\label{classsrsran_1_1dl__sch__pdu_a040d3e57f02267bc59af7ad9068271b3} 
\index{srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}!dl\_sch\_pdu@{dl\_sch\_pdu}}
\index{dl\_sch\_pdu@{dl\_sch\_pdu}!srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}}
\doxysubsubsection{\texorpdfstring{dl\_sch\_pdu()}{dl\_sch\_pdu()}}
{\footnotesize\ttfamily srsran\+::dl\+\_\+sch\+\_\+pdu\+::dl\+\_\+sch\+\_\+pdu (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{pdu\+\_\+buffer\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00063\ :\ pdu(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdu\_buffer\_}})\ \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1dl__sch__pdu_acfd1925f89351aef3b111d856aeea69e}\label{classsrsran_1_1dl__sch__pdu_acfd1925f89351aef3b111d856aeea69e} 
\index{srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}!add\_padding@{add\_padding}}
\index{add\_padding@{add\_padding}!srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}}
\doxysubsubsection{\texorpdfstring{add\_padding()}{add\_padding()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} dl\+\_\+sch\+\_\+pdu\+::add\+\_\+padding (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{len }\end{DoxyParamCaption})}



Adds a padding CE as a sub\+PDU. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00156\ \{}
\DoxyCodeLine{00157\ \ \ \textcolor{comment}{//\ 1\ Byte\ R/LCID\ MAC\ subheader.}}
\DoxyCodeLine{00158\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{header\_len}}\ =\ 1;}
\DoxyCodeLine{00159\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_len}}\ \ \ \ =\ len\ -\/\ 1;}
\DoxyCodeLine{00160\ \ \ encode\_subheader(\textcolor{keyword}{false},\ lcid\_dl\_sch\_t::PADDING,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{header\_len}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_len}});}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \textcolor{comment}{//\ Padding\ bits.}}
\DoxyCodeLine{00163\ \ \ std::fill(pdu.\mbox{\hyperlink{classsrsran_1_1span_a451a209648781b54503ae671408e16b8}{data}}()\ +\ byte\_offset,\ pdu.\mbox{\hyperlink{classsrsran_1_1span_a451a209648781b54503ae671408e16b8}{data}}()\ +\ byte\_offset\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_len}},\ 0);}
\DoxyCodeLine{00164\ \ \ byte\_offset\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_len}};}
\DoxyCodeLine{00165\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1dl__sch__pdu_a404717a7a76228da518a302d6c98ad21}\label{classsrsran_1_1dl__sch__pdu_a404717a7a76228da518a302d6c98ad21} 
\index{srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}!add\_sdu@{add\_sdu}}
\index{add\_sdu@{add\_sdu}!srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}}
\doxysubsubsection{\texorpdfstring{add\_sdu()}{add\_sdu()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} dl\+\_\+sch\+\_\+pdu\+::add\+\_\+sdu (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a9fb768b4a14baadb9295634bcaf010bc}{lcid\+\_\+t}}}]{lcid\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1byte__buffer__chain}{byte\+\_\+buffer\+\_\+chain}} \&\&}]{sdu }\end{DoxyParamCaption})}



Adds a MAC SDU as a sub\+PDU. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00098\ \{}
\DoxyCodeLine{00099\ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ sdu.\mbox{\hyperlink{classsrsran_1_1byte__buffer__chain_a6ff58af91c0b8280e65d78b8221f04d2}{empty}}(),\ \textcolor{stringliteral}{"{}Trying\ to\ add\ an\ empty\ SDU"{}});}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \mbox{\hyperlink{classsrsran_1_1lcid__dl__sch__t}{lcid\_dl\_sch\_t}}\ lcid\ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{lcid\_}};}
\DoxyCodeLine{00102\ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_len}}\ =\ sdu.\mbox{\hyperlink{classsrsran_1_1byte__buffer__chain_a920d27fb7727abcca479deb6a517cfe1}{length}}();}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{keywordtype}{unsigned}\ header\_length\ =\ 2;}
\DoxyCodeLine{00105\ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ F\_bit\ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00106\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_len}}\ >=\ MAC\_SDU\_SUBHEADER\_LENGTH\_THRES)\ \{}
\DoxyCodeLine{00107\ \ \ \ \ F\_bit\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00108\ \ \ \ \ header\_length\ +=\ 1;}
\DoxyCodeLine{00109\ \ \ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{if}\ (byte\_offset\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_len}}\ +\ header\_length\ >\ pdu.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}())\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00113\ \ \ \}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \textcolor{comment}{//\ Encode\ Header.}}
\DoxyCodeLine{00116\ \ \ encode\_subheader(F\_bit,\ lcid,\ header\_length,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_len}});}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \textcolor{comment}{//\ Encode\ Payload.}}
\DoxyCodeLine{00119\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sl}}\ :\ sdu.slices())\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ uint8\_t>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{seg}}\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sl}}.segments())\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ std::copy(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{seg}}.begin(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{seg}}.end(),\ pdu.\mbox{\hyperlink{classsrsran_1_1span_a451a209648781b54503ae671408e16b8}{data}}()\ +\ byte\_offset);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ byte\_offset\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{seg}}.size();}
\DoxyCodeLine{00123\ \ \ \ \ \}}
\DoxyCodeLine{00124\ \ \ \}}
\DoxyCodeLine{00125\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_len}}\ +\ header\_length;}
\DoxyCodeLine{00126\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1dl__sch__pdu_aff6e371368b32299b2fca45d98590493}\label{classsrsran_1_1dl__sch__pdu_aff6e371368b32299b2fca45d98590493} 
\index{srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}!add\_tag\_cmd@{add\_tag\_cmd}}
\index{add\_tag\_cmd@{add\_tag\_cmd}!srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}}
\doxysubsubsection{\texorpdfstring{add\_tag\_cmd()}{add\_tag\_cmd()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} dl\+\_\+sch\+\_\+pdu\+::add\+\_\+tag\+\_\+cmd (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ta__cmd__ce__payload}{ta\+\_\+cmd\+\_\+ce\+\_\+payload}} \&}]{ce\+\_\+payload }\end{DoxyParamCaption})}



Adds a Timing Advance Command CE as a sub\+PDU. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00143\ \{}
\DoxyCodeLine{00144\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1lcid__dl__sch__t}{lcid\_dl\_sch\_t}}\ lcid\ \ \ \ \ \ \ \ =\ lcid\_dl\_sch\_t::TA\_CMD;}
\DoxyCodeLine{00145\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{header\_len}}\ \ =\ 1;}
\DoxyCodeLine{00146\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{payload\_len}}\ =\ lcid.sizeof\_ce();}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \textcolor{comment}{//\ Encode\ header\ and\ payload.}}
\DoxyCodeLine{00149\ \ \ encode\_subheader(\textcolor{keyword}{false},\ lcid\_dl\_sch\_t::TA\_CMD,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{header\_len}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{payload\_len}});}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \textcolor{comment}{//\ Encode\ Timing\ Advance\ Command.}}
\DoxyCodeLine{00152\ \ \ pdu[byte\_offset++]\ =\ (ce\_payload.tag\_id\ \&\ 0xc0U)\ |\ (ce\_payload.ta\_cmd\ \&\ 0x3fU);}
\DoxyCodeLine{00153\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1dl__sch__pdu_a6e28ea11004fad43d1393498ff114df3}\label{classsrsran_1_1dl__sch__pdu_a6e28ea11004fad43d1393498ff114df3} 
\index{srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}!add\_ue\_con\_res\_id@{add\_ue\_con\_res\_id}}
\index{add\_ue\_con\_res\_id@{add\_ue\_con\_res\_id}!srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}}
\doxysubsubsection{\texorpdfstring{add\_ue\_con\_res\_id()}{add\_ue\_con\_res\_id()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} dl\+\_\+sch\+\_\+pdu\+::add\+\_\+ue\+\_\+con\+\_\+res\+\_\+id (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} ue\+\_\+con\+\_\+res\+\_\+id\+\_\+t \&}]{con\+\_\+res\+\_\+payload }\end{DoxyParamCaption})}



Adds a UE Contention Resolution CE as a sub\+PDU. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00129\ \{}
\DoxyCodeLine{00130\ \ \ \mbox{\hyperlink{classsrsran_1_1lcid__dl__sch__t}{lcid\_dl\_sch\_t}}\ lcid\ \ \ \ \ \ \ \ =\ lcid\_dl\_sch\_t::UE\_CON\_RES\_ID;}
\DoxyCodeLine{00131\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{header\_len}}\ \ =\ 1;}
\DoxyCodeLine{00132\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{payload\_len}}\ =\ lcid.sizeof\_ce();}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \textcolor{comment}{//\ Encode\ header\ and\ payload.}}
\DoxyCodeLine{00135\ \ \ encode\_subheader(\textcolor{keyword}{false},\ lcid\_dl\_sch\_t::UE\_CON\_RES\_ID,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{header\_len}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{payload\_len}});}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \textcolor{comment}{//\ Encode\ UE\ ConRes\ ID.}}
\DoxyCodeLine{00138\ \ \ std::copy(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{con\_res\_payload}}.begin(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{con\_res\_payload}}.end(),\ pdu.\mbox{\hyperlink{classsrsran_1_1span_a451a209648781b54503ae671408e16b8}{data}}()\ +\ byte\_offset);}
\DoxyCodeLine{00139\ \ \ byte\_offset\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{con\_res\_payload}}.size();}
\DoxyCodeLine{00140\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1dl__sch__pdu_a84cd4cdf302847809fd9ff209de14fb4}\label{classsrsran_1_1dl__sch__pdu_a84cd4cdf302847809fd9ff209de14fb4} 
\index{srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}!get@{get}}
\index{get@{get}!srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}}
\doxysubsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ srsran\+::dl\+\_\+sch\+\_\+pdu\+::get (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Gets the held MAC PDU bytes. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00087\ \{\ \textcolor{keywordflow}{return}\ pdu.\mbox{\hyperlink{classsrsran_1_1span_aa4238c2e04ac8c60726db8cc0b687582}{first}}(byte\_offset);\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1dl__sch__pdu_a89ff4a38d2cf883fcc29df7e755355f1}\label{classsrsran_1_1dl__sch__pdu_a89ff4a38d2cf883fcc29df7e755355f1} 
\index{srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}!get\_sdu\_encoder@{get\_sdu\_encoder}}
\index{get\_sdu\_encoder@{get\_sdu\_encoder}!srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}}
\doxysubsubsection{\texorpdfstring{get\_sdu\_encoder()}{get\_sdu\_encoder()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1dl__sch__pdu_1_1mac__sdu__encoder}{dl\+\_\+sch\+\_\+pdu\+::mac\+\_\+sdu\+\_\+encoder}} dl\+\_\+sch\+\_\+pdu\+::get\+\_\+sdu\+\_\+encoder (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a9fb768b4a14baadb9295634bcaf010bc}{lcid\+\_\+t}}}]{lcid,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{sdu\+\_\+payload\+\_\+len\+\_\+estimate }\end{DoxyParamCaption})}



Gets a MAC SDU encoder for a given LCID and scheduler grant size. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00076\ \{}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_payload\_len\_estimate}}\ ==\ 0)\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{return}\ mac\_sdu\_encoder\{\};}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rem\_grant\_space}}\ =\ pdu.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}()\ -\/\ byte\_offset;}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rem\_grant\_space}}\ <\ min\_mac\_subhdr\_and\_sdu\_space\_required(lcid))\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{//\ No\ space\ available\ for\ the\ smallest\ possible\ MAC\ SDU.}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordflow}{return}\ mac\_sdu\_encoder\{\};}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \textcolor{comment}{//\ Space\ to\ be\ used\ to\ encode\ the\ MAC\ subheader\ +\ SDU\ (expected\ sizes).}}
\DoxyCodeLine{00088\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{space\_estim}}\ =\ std::min(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rem\_grant\_space}},\ \mbox{\hyperlink{namespacesrsran_a638bd679b667b6131f68636b3451d3c4}{get\_mac\_sdu\_required\_bytes}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_payload\_len\_estimate}}));}
\DoxyCodeLine{00089\ \ \ \textcolor{comment}{//\ Space\ to\ encode\ expected\ MAC\ SDU\ without\ subheader.}}
\DoxyCodeLine{00090\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_space\_estim}}\ =\ get\_mac\_sdu\_payload\_size(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{space\_estim}});}
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{//\ Determine\ whether\ a\ MAC\ subheader\ with\ 8-\/bit\ or\ 16-\/bit\ L\ field\ is\ required.}}
\DoxyCodeLine{00092\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{chosen\_subhdr\_len}}\ =\ \mbox{\hyperlink{namespacesrsran_aca7b2b0f2de72440093afc2d58363aef}{get\_mac\_sdu\_subheader\_size}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_space\_estim}});}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \textcolor{keywordflow}{return}\ mac\_sdu\_encoder\{*\textcolor{keyword}{this},\ lcid,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{chosen\_subhdr\_len}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sdu\_space\_estim}}\};}
\DoxyCodeLine{00095\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1dl__sch__pdu_a32b266134b79026ce8508bfd33d82323}\label{classsrsran_1_1dl__sch__pdu_a32b266134b79026ce8508bfd33d82323} 
\index{srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}!nof\_bytes@{nof\_bytes}}
\index{nof\_bytes@{nof\_bytes}!srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}}
\doxysubsubsection{\texorpdfstring{nof\_bytes()}{nof\_bytes()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::dl\+\_\+sch\+\_\+pdu\+::nof\+\_\+bytes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Number of bytes of the MAC PDU. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00081\ \{\ \textcolor{keywordflow}{return}\ byte\_offset;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1dl__sch__pdu_adb15624710dcea7a7187153d73741b69}\label{classsrsran_1_1dl__sch__pdu_adb15624710dcea7a7187153d73741b69} 
\index{srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}!nof\_empty\_bytes@{nof\_empty\_bytes}}
\index{nof\_empty\_bytes@{nof\_empty\_bytes}!srsran::dl\_sch\_pdu@{srsran::dl\_sch\_pdu}}
\doxysubsubsection{\texorpdfstring{nof\_empty\_bytes()}{nof\_empty\_bytes()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::dl\+\_\+sch\+\_\+pdu\+::nof\+\_\+empty\+\_\+bytes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Remaining space in number of bytes in the PDU. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00084\ \{\ \textcolor{keywordflow}{return}\ pdu.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}()\ -\/\ byte\_offset;\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/mac/mac\+\_\+dl/dl\+\_\+sch\+\_\+pdu\+\_\+assembler.\+h\item 
lib/mac/mac\+\_\+dl/dl\+\_\+sch\+\_\+pdu\+\_\+assembler.\+cpp\end{DoxyCompactItemize}
