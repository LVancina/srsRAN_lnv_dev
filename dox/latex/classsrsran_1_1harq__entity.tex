\doxysection{srsran\+::harq\+\_\+entity Class Reference}
\hypertarget{classsrsran_1_1harq__entity}{}\label{classsrsran_1_1harq__entity}\index{srsran::harq\_entity@{srsran::harq\_entity}}


{\ttfamily \#include $<$harq\+\_\+process.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1harq__entity_a5eb0652618d233bfe1b57855981f85a9}{harq\+\_\+entity}} (\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}} rnti, unsigned nof\+\_\+dl\+\_\+harq\+\_\+procs, unsigned nof\+\_\+ul\+\_\+harq\+\_\+procs, \mbox{\hyperlink{classsrsran_1_1ue__harq__timeout__notifier}{ue\+\_\+harq\+\_\+timeout\+\_\+notifier}} timeout\+\_\+notif, unsigned ntn\+\_\+cs\+\_\+koffset=0, unsigned max\+\_\+ack\+\_\+wait\+\_\+in\+\_\+slots=\mbox{\hyperlink{classsrsran_1_1detail_1_1harq__process}{detail\+::harq\+\_\+process}}$<$ true $>$\+::\+DEFAULT\+\_\+\+ACK\+\_\+\+TIMEOUT\+\_\+\+SLOTS)
\begin{DoxyCompactList}\small\item\em Creates a HARQ entity for a given UE cell. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1harq__entity_ae9e1342bc87ff9035b8e98535aaaa4d7}\label{classsrsran_1_1harq__entity_ae9e1342bc87ff9035b8e98535aaaa4d7} 
void {\bfseries slot\+\_\+indication} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} slot\+\_\+tx\+\_\+)
\begin{DoxyCompactList}\small\item\em Update slot, and checks if there are HARQ processes that have reached max\+Re\+Tx with no ACK. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structsrsran_1_1dl__harq__process_1_1dl__ack__info__result}{dl\+\_\+harq\+\_\+process\+::dl\+\_\+ack\+\_\+info\+\_\+result}} \mbox{\hyperlink{classsrsran_1_1harq__entity_aa2828a14b911b195b07d3cfae323f9bc}{dl\+\_\+ack\+\_\+info}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} uci\+\_\+slot, \mbox{\hyperlink{namespacesrsran_ad15571815e2fd31523e75ed1b2b5012a}{mac\+\_\+harq\+\_\+ack\+\_\+report\+\_\+status}} ack, uint8\+\_\+t harq\+\_\+bit\+\_\+idx, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ float $>$ pucch\+\_\+snr)
\begin{DoxyCompactList}\small\item\em Update the state of the DL HARQ for the specified UCI slot. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classsrsran_1_1harq__entity_ac7d8dd718225b1f0260eb66022fc5282}{ul\+\_\+crc\+\_\+info}} (\mbox{\hyperlink{namespacesrsran_a5afde872b5d597c47d3674cc7f86b19b}{harq\+\_\+id\+\_\+t}} h\+\_\+id, bool ack, \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} pusch\+\_\+slot)
\item 
void \mbox{\hyperlink{classsrsran_1_1harq__entity_a107e35d945d967f5909099ec376a1f0d}{dl\+\_\+ack\+\_\+info\+\_\+cancelled}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} uci\+\_\+slot)
\begin{DoxyCompactList}\small\item\em The UCI scheduling associated with a given slot was cancelled. The associated DL HARQs will be NACKEd. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1harq__entity_a02203388cf3b782c03a37d457425ab4a}\label{classsrsran_1_1harq__entity_a02203388cf3b782c03a37d457425ab4a} 
uint32\+\_\+t {\bfseries nof\+\_\+dl\+\_\+harqs} () const
\item 
\Hypertarget{classsrsran_1_1harq__entity_ae4f9dd72625e4a7f373659498023d77b}\label{classsrsran_1_1harq__entity_ae4f9dd72625e4a7f373659498023d77b} 
uint32\+\_\+t {\bfseries nof\+\_\+ul\+\_\+harqs} () const
\item 
\Hypertarget{classsrsran_1_1harq__entity_a2c6e295ba23e2b4dd1ecadfc54b42605}\label{classsrsran_1_1harq__entity_a2c6e295ba23e2b4dd1ecadfc54b42605} 
const \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \& {\bfseries dl\+\_\+harq} (uint32\+\_\+t pid) const
\item 
\Hypertarget{classsrsran_1_1harq__entity_adce88051184823a47364347f9211687a}\label{classsrsran_1_1harq__entity_adce88051184823a47364347f9211687a} 
\mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \& {\bfseries dl\+\_\+harq} (uint32\+\_\+t pid)
\item 
\Hypertarget{classsrsran_1_1harq__entity_abb5ae8046d51bf5098a6fdf078560db3}\label{classsrsran_1_1harq__entity_abb5ae8046d51bf5098a6fdf078560db3} 
const \mbox{\hyperlink{classsrsran_1_1ul__harq__process}{ul\+\_\+harq\+\_\+process}} \& {\bfseries ul\+\_\+harq} (uint32\+\_\+t pid) const
\item 
\Hypertarget{classsrsran_1_1harq__entity_adadb5c972379770e38aa356ff061f7d8}\label{classsrsran_1_1harq__entity_adadb5c972379770e38aa356ff061f7d8} 
\mbox{\hyperlink{classsrsran_1_1ul__harq__process}{ul\+\_\+harq\+\_\+process}} \& {\bfseries ul\+\_\+harq} (uint32\+\_\+t pid)
\item 
\Hypertarget{classsrsran_1_1harq__entity_afd46fd403cef029d1a01a57d4e015e9b}\label{classsrsran_1_1harq__entity_afd46fd403cef029d1a01a57d4e015e9b} 
\mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+pending\+\_\+dl\+\_\+retx} ()
\item 
\Hypertarget{classsrsran_1_1harq__entity_a9a46293d46adf71292455bedad2986a0}\label{classsrsran_1_1harq__entity_a9a46293d46adf71292455bedad2986a0} 
const \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+pending\+\_\+dl\+\_\+retx} () const
\item 
\Hypertarget{classsrsran_1_1harq__entity_a9e2b7070e9859dd6a2df4e37e0eb458d}\label{classsrsran_1_1harq__entity_a9e2b7070e9859dd6a2df4e37e0eb458d} 
\mbox{\hyperlink{classsrsran_1_1ul__harq__process}{ul\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+pending\+\_\+ul\+\_\+retx} ()
\item 
\Hypertarget{classsrsran_1_1harq__entity_a32bb25b007e30fd8c17fb6bd4f13d619}\label{classsrsran_1_1harq__entity_a32bb25b007e30fd8c17fb6bd4f13d619} 
const \mbox{\hyperlink{classsrsran_1_1ul__harq__process}{ul\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+pending\+\_\+ul\+\_\+retx} () const
\item 
\Hypertarget{classsrsran_1_1harq__entity_a94396ffa9dcbebd79b5f360f68d15fcb}\label{classsrsran_1_1harq__entity_a94396ffa9dcbebd79b5f360f68d15fcb} 
\mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+empty\+\_\+dl\+\_\+harq} ()
\item 
\Hypertarget{classsrsran_1_1harq__entity_a0f992b8edf9bc26786affb2df786e79b}\label{classsrsran_1_1harq__entity_a0f992b8edf9bc26786affb2df786e79b} 
const \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+empty\+\_\+dl\+\_\+harq} () const
\item 
\Hypertarget{classsrsran_1_1harq__entity_ae8b216d7464da8ec18a76893fc0bfc69}\label{classsrsran_1_1harq__entity_ae8b216d7464da8ec18a76893fc0bfc69} 
\mbox{\hyperlink{classsrsran_1_1ul__harq__process}{ul\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+empty\+\_\+ul\+\_\+harq} ()
\item 
\Hypertarget{classsrsran_1_1harq__entity_aaa857be57a96c860d9ea9c3d5d3b6486}\label{classsrsran_1_1harq__entity_aaa857be57a96c860d9ea9c3d5d3b6486} 
const \mbox{\hyperlink{classsrsran_1_1ul__harq__process}{ul\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+empty\+\_\+ul\+\_\+harq} () const
\item 
\Hypertarget{classsrsran_1_1harq__entity_a0e37db0359a747f9c69b468d1b7757dc}\label{classsrsran_1_1harq__entity_a0e37db0359a747f9c69b468d1b7757dc} 
const \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+dl\+\_\+harq\+\_\+waiting\+\_\+ack} () const
\item 
\Hypertarget{classsrsran_1_1harq__entity_aa767c2fd38afd3a56fc2cdfea30e5fa8}\label{classsrsran_1_1harq__entity_aa767c2fd38afd3a56fc2cdfea30e5fa8} 
const \mbox{\hyperlink{classsrsran_1_1ul__harq__process}{ul\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+ul\+\_\+harq\+\_\+waiting\+\_\+ack} () const
\item 
\Hypertarget{classsrsran_1_1harq__entity_aa38074bee1035326a99f2c7d4a30209e}\label{classsrsran_1_1harq__entity_aa38074bee1035326a99f2c7d4a30209e} 
\mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*} {\bfseries find\+\_\+dl\+\_\+harq\+\_\+waiting\+\_\+ack\+\_\+slot} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} sl\+\_\+ack, unsigned harq\+\_\+bit\+\_\+idx)
\item 
\Hypertarget{classsrsran_1_1harq__entity_a8bfa81cf4a52e9e9b2815ec5a5ad133c}\label{classsrsran_1_1harq__entity_a8bfa81cf4a52e9e9b2815ec5a5ad133c} 
unsigned {\bfseries ntn\+\_\+get\+\_\+tbs\+\_\+pending\+\_\+crcs} () const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This object handles the DL and UL HARQ processes for each UE\textquotesingle{}s Component Carrier; therefore, for each UE, we instantiate as many \doxylink{classsrsran_1_1harq__entity}{harq\+\_\+entity} object as CCs 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1harq__entity_a5eb0652618d233bfe1b57855981f85a9}\label{classsrsran_1_1harq__entity_a5eb0652618d233bfe1b57855981f85a9} 
\index{srsran::harq\_entity@{srsran::harq\_entity}!harq\_entity@{harq\_entity}}
\index{harq\_entity@{harq\_entity}!srsran::harq\_entity@{srsran::harq\_entity}}
\doxysubsubsection{\texorpdfstring{harq\_entity()}{harq\_entity()}}
{\footnotesize\ttfamily harq\+\_\+entity\+::harq\+\_\+entity (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}}}]{rnti,  }\item[{unsigned}]{nof\+\_\+dl\+\_\+harq\+\_\+procs,  }\item[{unsigned}]{nof\+\_\+ul\+\_\+harq\+\_\+procs,  }\item[{\mbox{\hyperlink{classsrsran_1_1ue__harq__timeout__notifier}{ue\+\_\+harq\+\_\+timeout\+\_\+notifier}}}]{timeout\+\_\+notif,  }\item[{unsigned}]{ntn\+\_\+cs\+\_\+koffset = {\ttfamily 0},  }\item[{unsigned}]{max\+\_\+ack\+\_\+wait\+\_\+in\+\_\+slots = {\ttfamily \mbox{\hyperlink{classsrsran_1_1detail_1_1harq__process}{detail\+::harq\+\_\+process}}$<$true$>$\+:\+:DEFAULT\+\_\+ACK\+\_\+TIMEOUT\+\_\+SLOTS} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Creates a HARQ entity for a given UE cell. 


\begin{DoxyParams}{Parameters}
{\em rnti} & RNTI of the UE \\
\hline
{\em nof\+\_\+dl\+\_\+harq\+\_\+procs} & Number of DL HARQ processes that the UE can support. This value is derived based on the UE capabilities, and passed to the UE via RRC signalling. See TS38.\+331, "{}nrof\+HARQ-\/\+Processes\+For\+PDSCH"{}. Values\+: \{2, 4, 6, 10, 12, 16\}. \\
\hline
{\em nof\+\_\+ul\+\_\+harq\+\_\+procs} & Number of UL HARQ processes that g\+NB can support. This value is implementation-\/defined and can up to 16 (there are up to 4 bits for HARQ-\/\+Id signalling). \\
\hline
{\em max\+\_\+ack\+\_\+wait\+\_\+in\+\_\+slots} & Duration in slots before a HARQ process acknowledgement is considered to have gone missing and that the HARQ can be reset. \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1harq__entity_aa2828a14b911b195b07d3cfae323f9bc}\label{classsrsran_1_1harq__entity_aa2828a14b911b195b07d3cfae323f9bc} 
\index{srsran::harq\_entity@{srsran::harq\_entity}!dl\_ack\_info@{dl\_ack\_info}}
\index{dl\_ack\_info@{dl\_ack\_info}!srsran::harq\_entity@{srsran::harq\_entity}}
\doxysubsubsection{\texorpdfstring{dl\_ack\_info()}{dl\_ack\_info()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1dl__harq__process_1_1dl__ack__info__result}{dl\+\_\+harq\+\_\+process\+::dl\+\_\+ack\+\_\+info\+\_\+result}} harq\+\_\+entity\+::dl\+\_\+ack\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{uci\+\_\+slot,  }\item[{\mbox{\hyperlink{namespacesrsran_ad15571815e2fd31523e75ed1b2b5012a}{mac\+\_\+harq\+\_\+ack\+\_\+report\+\_\+status}}}]{ack,  }\item[{uint8\+\_\+t}]{harq\+\_\+bit\+\_\+idx,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ float $>$}]{pucch\+\_\+snr }\end{DoxyParamCaption})}



Update the state of the DL HARQ for the specified UCI slot. 

\begin{DoxyReturn}{Returns}
struct containing the HARQ process ID, MCS, TBS and status update. ACK/\+NACK was directed was found. 
\end{DoxyReturn}
\Hypertarget{classsrsran_1_1harq__entity_a107e35d945d967f5909099ec376a1f0d}\label{classsrsran_1_1harq__entity_a107e35d945d967f5909099ec376a1f0d} 
\index{srsran::harq\_entity@{srsran::harq\_entity}!dl\_ack\_info\_cancelled@{dl\_ack\_info\_cancelled}}
\index{dl\_ack\_info\_cancelled@{dl\_ack\_info\_cancelled}!srsran::harq\_entity@{srsran::harq\_entity}}
\doxysubsubsection{\texorpdfstring{dl\_ack\_info\_cancelled()}{dl\_ack\_info\_cancelled()}}
{\footnotesize\ttfamily void harq\+\_\+entity\+::dl\+\_\+ack\+\_\+info\+\_\+cancelled (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{uci\+\_\+slot }\end{DoxyParamCaption})}



The UCI scheduling associated with a given slot was cancelled. The associated DL HARQs will be NACKEd. 

This function can be called for instance when there is an error indication coming from lower layers. \Hypertarget{classsrsran_1_1harq__entity_ac7d8dd718225b1f0260eb66022fc5282}\label{classsrsran_1_1harq__entity_ac7d8dd718225b1f0260eb66022fc5282} 
\index{srsran::harq\_entity@{srsran::harq\_entity}!ul\_crc\_info@{ul\_crc\_info}}
\index{ul\_crc\_info@{ul\_crc\_info}!srsran::harq\_entity@{srsran::harq\_entity}}
\doxysubsubsection{\texorpdfstring{ul\_crc\_info()}{ul\_crc\_info()}}
{\footnotesize\ttfamily int harq\+\_\+entity\+::ul\+\_\+crc\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a5afde872b5d597c47d3674cc7f86b19b}{harq\+\_\+id\+\_\+t}}}]{h\+\_\+id,  }\item[{bool}]{ack,  }\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{pusch\+\_\+slot }\end{DoxyParamCaption})}

Update UL HARQ state given the received CRC indication. \begin{DoxyReturn}{Returns}
Transport Block size of the HARQ whose state was updated. 
\end{DoxyReturn}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/ue\+\_\+scheduling/harq\+\_\+process.\+h\item 
lib/scheduler/ue\+\_\+scheduling/harq\+\_\+process.\+cpp\end{DoxyCompactItemize}
