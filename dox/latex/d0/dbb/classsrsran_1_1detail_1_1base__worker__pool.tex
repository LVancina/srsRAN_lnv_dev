\doxysection{srsran\+::detail\+::base\+\_\+worker\+\_\+pool Class Reference}
\hypertarget{classsrsran_1_1detail_1_1base__worker__pool}{}\label{classsrsran_1_1detail_1_1base__worker__pool}\index{srsran::detail::base\_worker\_pool@{srsran::detail::base\_worker\_pool}}


Inheritance diagram for srsran\+::detail\+::base\+\_\+worker\+\_\+pool\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{de/d2a/classsrsran_1_1detail_1_1base__worker__pool__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::detail\+::base\+\_\+worker\+\_\+pool\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=268pt]{d6/da2/classsrsran_1_1detail_1_1base__worker__pool__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1detail_1_1base__worker__pool_a62c2192382132df84b26c31c3ac06952}{base\+\_\+worker\+\_\+pool}} (\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\+\_\+workers\+\_\+}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} std\+::string \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{worker\+\_\+pool\+\_\+name}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} std\+::function$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}}()$>$ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{run\+\_\+tasks\+\_\+job}}, \mbox{\hyperlink{classsrsran_1_1os__thread__realtime__priority}{os\+\_\+thread\+\_\+realtime\+\_\+priority}} prio=\mbox{\hyperlink{classsrsran_1_1os__thread__realtime__priority_af2cf72da038c74badffd988ce6a08e46}{os\+\_\+thread\+\_\+realtime\+\_\+priority\+::no\+\_\+realtime}}(), \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1os__sched__affinity__bitmask}{os\+\_\+sched\+\_\+affinity\+\_\+bitmask}} $>$ cpu\+\_\+masks=\{\})
\item 
\Hypertarget{classsrsran_1_1detail_1_1base__worker__pool_af0664ed9ffff53f719d156adcd7b09d0}\label{classsrsran_1_1detail_1_1base__worker__pool_af0664ed9ffff53f719d156adcd7b09d0} 
{\bfseries base\+\_\+worker\+\_\+pool} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1detail_1_1base__worker__pool}{base\+\_\+worker\+\_\+pool}} \&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
\Hypertarget{classsrsran_1_1detail_1_1base__worker__pool_aaa125215f80ce34a10b72c8d0e06ab90}\label{classsrsran_1_1detail_1_1base__worker__pool_aaa125215f80ce34a10b72c8d0e06ab90} 
{\bfseries base\+\_\+worker\+\_\+pool} (\mbox{\hyperlink{classsrsran_1_1detail_1_1base__worker__pool}{base\+\_\+worker\+\_\+pool}} \&\&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
\Hypertarget{classsrsran_1_1detail_1_1base__worker__pool_a26686a8b16786d3dc30804f38ff5435b}\label{classsrsran_1_1detail_1_1base__worker__pool_a26686a8b16786d3dc30804f38ff5435b} 
\mbox{\hyperlink{classsrsran_1_1detail_1_1base__worker__pool}{base\+\_\+worker\+\_\+pool}} \& {\bfseries operator=} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1detail_1_1base__worker__pool}{base\+\_\+worker\+\_\+pool}} \&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
\Hypertarget{classsrsran_1_1detail_1_1base__worker__pool_a7f3a96071fe480d37995566251f9e951}\label{classsrsran_1_1detail_1_1base__worker__pool_a7f3a96071fe480d37995566251f9e951} 
\mbox{\hyperlink{classsrsran_1_1detail_1_1base__worker__pool}{base\+\_\+worker\+\_\+pool}} \& {\bfseries operator=} (\mbox{\hyperlink{classsrsran_1_1detail_1_1base__worker__pool}{base\+\_\+worker\+\_\+pool}} \&\&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classsrsran_1_1detail_1_1base__worker__pool_af1b4a19374e74617208c321dfd5d45e9}{name}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Name given to the pool. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1detail_1_1base__worker__pool_acfd715e518133fdeca2bb40c9ae6b129}{nof\+\_\+workers}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Number of workers that compose the worker pool. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1detail_1_1base__worker__pool_a5cf84d9fa36017e95693400624138414}{is\+\_\+in\+\_\+thread\+\_\+pool}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Determines whether the caller is inside the pool. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1detail_1_1base__worker__pool_aead1b9cb6ab286c879a022d37e4e0285}\label{classsrsran_1_1detail_1_1base__worker__pool_aead1b9cb6ab286c879a022d37e4e0285} 
std\+::string {\bfseries pool\+\_\+name}
\item 
\Hypertarget{classsrsran_1_1detail_1_1base__worker__pool_a65720c487f1b8de83b6db9dbc00d6486}\label{classsrsran_1_1detail_1_1base__worker__pool_a65720c487f1b8de83b6db9dbc00d6486} 
std\+::vector$<$ \mbox{\hyperlink{classsrsran_1_1unique__thread}{unique\+\_\+thread}} $>$ {\bfseries worker\+\_\+threads}
\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1detail_1_1base__worker__pool_a62c2192382132df84b26c31c3ac06952}\label{classsrsran_1_1detail_1_1base__worker__pool_a62c2192382132df84b26c31c3ac06952} 
\index{srsran::detail::base\_worker\_pool@{srsran::detail::base\_worker\_pool}!base\_worker\_pool@{base\_worker\_pool}}
\index{base\_worker\_pool@{base\_worker\_pool}!srsran::detail::base\_worker\_pool@{srsran::detail::base\_worker\_pool}}
\doxysubsubsection{\texorpdfstring{base\_worker\_pool()}{base\_worker\_pool()}}
{\footnotesize\ttfamily detail\+::base\+\_\+worker\+\_\+pool\+::base\+\_\+worker\+\_\+pool (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{nof\+\_\+workers\+\_\+,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} std\+::string \&}]{worker\+\_\+pool\+\_\+name,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} std\+::function$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}}()$>$ \&}]{run\+\_\+tasks\+\_\+job,  }\item[{\mbox{\hyperlink{classsrsran_1_1os__thread__realtime__priority}{os\+\_\+thread\+\_\+realtime\+\_\+priority}}}]{prio = {\ttfamily \mbox{\hyperlink{classsrsran_1_1os__thread__realtime__priority_af2cf72da038c74badffd988ce6a08e46}{os\+\_\+thread\+\_\+realtime\+\_\+priority\+::no\+\_\+realtime}}()},  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1os__sched__affinity__bitmask}{os\+\_\+sched\+\_\+affinity\+\_\+bitmask}} $>$}]{cpu\+\_\+masks = {\ttfamily \{\}} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00033\ \ \ pool\_name(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{worker\_pool\_name}})}
\DoxyCodeLine{00034\ \{}
\DoxyCodeLine{00035\ \ \ worker\_threads.reserve(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_workers\_}});}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \textcolor{keywordflow}{if}\ (cpu\_masks.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}()\ >\ 1)\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{comment}{//\ An\ array\ with\ a\ single\ mask\ is\ allowed,\ otherwise\ the\ number\ of\ masks\ must\ be\ equal\ to\ the\ number\ of\ workers.}}
\DoxyCodeLine{00039\ \ \ \ \ report\_error\_if\_not(cpu\_masks.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}()\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_workers\_}},\ \textcolor{stringliteral}{"{}Wrong\ array\ of\ CPU\ masks\ provided"{}});}
\DoxyCodeLine{00040\ \ \ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{comment}{//\ Task\ dispatched\ to\ workers\ of\ the\ pool.}}
\DoxyCodeLine{00043\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_workers\_}};\ ++i)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{if}\ (cpu\_masks.\mbox{\hyperlink{classsrsran_1_1span_a06f3393981b96d556095d9023b894a8f}{empty}}())\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ worker\_threads.emplace\_back(fmt::format(\textcolor{stringliteral}{"{}\{\}\#\{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{worker\_pool\_name}},\ i),\ prio,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{run\_tasks\_job}});}
\DoxyCodeLine{00046\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ whether\ a\ single\ mask\ for\ all\ workers\ should\ be\ used.}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1os__sched__affinity__bitmask}{os\_sched\_affinity\_bitmask}}\ cpu\_mask\ =\ (cpu\_masks.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}()\ ==\ 1)\ ?\ cpu\_masks[0]\ :\ cpu\_masks[i];}
\DoxyCodeLine{00049\ \ \ \ \ \ \ worker\_threads.emplace\_back(fmt::format(\textcolor{stringliteral}{"{}\{\}\#\{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{worker\_pool\_name}},\ i),\ prio,\ cpu\_mask,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{run\_tasks\_job}});}
\DoxyCodeLine{00050\ \ \ \ \ \}}
\DoxyCodeLine{00051\ \ \ \}}
\DoxyCodeLine{00052\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1detail_1_1base__worker__pool_a5cf84d9fa36017e95693400624138414}\label{classsrsran_1_1detail_1_1base__worker__pool_a5cf84d9fa36017e95693400624138414} 
\index{srsran::detail::base\_worker\_pool@{srsran::detail::base\_worker\_pool}!is\_in\_thread\_pool@{is\_in\_thread\_pool}}
\index{is\_in\_thread\_pool@{is\_in\_thread\_pool}!srsran::detail::base\_worker\_pool@{srsran::detail::base\_worker\_pool}}
\doxysubsubsection{\texorpdfstring{is\_in\_thread\_pool()}{is\_in\_thread\_pool()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} detail\+::base\+\_\+worker\+\_\+pool\+::is\+\_\+in\+\_\+thread\+\_\+pool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Determines whether the caller is inside the pool. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00055\ \{}
\DoxyCodeLine{00056\ \ \ \textcolor{keywordflow}{return}\ std::any\_of(worker\_threads.begin(),}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ worker\_threads.end(),}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keywordtype}{id}\ =\ std::this\_thread::get\_id()](\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1unique__thread}{unique\_thread}}\&\ t)\ \{\ return\ t.get\_id()\ ==\ id;\ \});}
\DoxyCodeLine{00059\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1detail_1_1base__worker__pool_af1b4a19374e74617208c321dfd5d45e9}\label{classsrsran_1_1detail_1_1base__worker__pool_af1b4a19374e74617208c321dfd5d45e9} 
\index{srsran::detail::base\_worker\_pool@{srsran::detail::base\_worker\_pool}!name@{name}}
\index{name@{name}!srsran::detail::base\_worker\_pool@{srsran::detail::base\_worker\_pool}}
\doxysubsubsection{\texorpdfstring{name()}{name()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*} srsran\+::detail\+::base\+\_\+worker\+\_\+pool\+::name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Name given to the pool. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00048\ \{\ \textcolor{keywordflow}{return}\ this-\/>pool\_name.c\_str();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1detail_1_1base__worker__pool_acfd715e518133fdeca2bb40c9ae6b129}\label{classsrsran_1_1detail_1_1base__worker__pool_acfd715e518133fdeca2bb40c9ae6b129} 
\index{srsran::detail::base\_worker\_pool@{srsran::detail::base\_worker\_pool}!nof\_workers@{nof\_workers}}
\index{nof\_workers@{nof\_workers}!srsran::detail::base\_worker\_pool@{srsran::detail::base\_worker\_pool}}
\doxysubsubsection{\texorpdfstring{nof\_workers()}{nof\_workers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::detail\+::base\+\_\+worker\+\_\+pool\+::nof\+\_\+workers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Number of workers that compose the worker pool. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00051\ \{\ \textcolor{keywordflow}{return}\ worker\_threads.size();\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/srsran/support/executors/task\+\_\+worker\+\_\+pool.\+h\item 
lib/support/executors/task\+\_\+worker\+\_\+pool.\+cpp\end{DoxyCompactItemize}
