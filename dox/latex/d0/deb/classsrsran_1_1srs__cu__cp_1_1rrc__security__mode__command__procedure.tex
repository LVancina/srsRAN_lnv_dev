\doxysection{srsran\+::srs\+\_\+cu\+\_\+cp\+::rrc\+\_\+security\+\_\+mode\+\_\+command\+\_\+procedure Class Reference}
\hypertarget{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure}{}\label{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure}\index{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure@{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure}}


Handles the setup of AS security keys in the RRC UE. TODO Add seqdiag.  




{\ttfamily \#include $<$rrc\+\_\+security\+\_\+mode\+\_\+command\+\_\+procedure.\+h$>$}



Collaboration diagram for srsran\+::srs\+\_\+cu\+\_\+cp\+::rrc\+\_\+security\+\_\+mode\+\_\+command\+\_\+procedure\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=246pt]{d4/dfc/classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure_a0628eb1aca8561199d25cef856e8d86d}{rrc\+\_\+security\+\_\+mode\+\_\+command\+\_\+procedure}} (\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__context__t}{rrc\+\_\+ue\+\_\+context\+\_\+t}} \&context\+\_\+, \mbox{\hyperlink{structsrsran_1_1security_1_1security__context}{security\+::security\+\_\+context}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sec\+\_\+ctx}}, \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__security__mode__command__proc__notifier}{rrc\+\_\+ue\+\_\+security\+\_\+mode\+\_\+command\+\_\+proc\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rrc\+\_\+ue\+\_\+notifier\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__event__manager}{rrc\+\_\+ue\+\_\+event\+\_\+manager}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ev\+\_\+mng\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1prefixed__logger}{rrc\+\_\+ue\+\_\+logger}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure_a0179457c0b9e23f5292f771ff95393f3}{operator()}} (\mbox{\hyperlink{namespacesrsran_aadfca39572d46ed2a532ab91af40292e}{coro\+\_\+context}}$<$ \mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{classbool}{bool}} $>$ $>$ \&ctx)
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure_a390c0660398b73a89f7ecf33256c41b3}{name}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Handles the setup of AS security keys in the RRC UE. TODO Add seqdiag. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure_a0628eb1aca8561199d25cef856e8d86d}\label{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure_a0628eb1aca8561199d25cef856e8d86d} 
\index{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure@{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure}!rrc\_security\_mode\_command\_procedure@{rrc\_security\_mode\_command\_procedure}}
\index{rrc\_security\_mode\_command\_procedure@{rrc\_security\_mode\_command\_procedure}!srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure@{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure}}
\doxysubsubsection{\texorpdfstring{rrc\_security\_mode\_command\_procedure()}{rrc\_security\_mode\_command\_procedure()}}
{\footnotesize\ttfamily rrc\+\_\+security\+\_\+mode\+\_\+command\+\_\+procedure\+::rrc\+\_\+security\+\_\+mode\+\_\+command\+\_\+procedure (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__context__t}{rrc\+\_\+ue\+\_\+context\+\_\+t}} \&}]{context\+\_\+,  }\item[{\mbox{\hyperlink{structsrsran_1_1security_1_1security__context}{security\+::security\+\_\+context}}}]{sec\+\_\+ctx,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__security__mode__command__proc__notifier}{rrc\+\_\+ue\+\_\+security\+\_\+mode\+\_\+command\+\_\+proc\+\_\+notifier}} \&}]{rrc\+\_\+ue\+\_\+notifier\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__event__manager}{rrc\+\_\+ue\+\_\+event\+\_\+manager}} \&}]{ev\+\_\+mng\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1prefixed__logger}{rrc\+\_\+ue\+\_\+logger}} \&}]{logger\+\_\+ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00036\ \ \ context(context\_),\ rrc\_ue(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rrc\_ue\_notifier\_}}),\ event\_mng(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{event\_mng\_}}),\ logger(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\_}})}
\DoxyCodeLine{00037\ \{}
\DoxyCodeLine{00038\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure_a390c0660398b73a89f7ecf33256c41b3}\label{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure_a390c0660398b73a89f7ecf33256c41b3} 
\index{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure@{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure}!name@{name}}
\index{name@{name}!srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure@{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure}}
\doxysubsubsection{\texorpdfstring{name()}{name()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*} srsran\+::srs\+\_\+cu\+\_\+cp\+::rrc\+\_\+security\+\_\+mode\+\_\+command\+\_\+procedure\+::name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00050\ \{\ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}RRC\ Security\ Mode\ Command\ Procedure"{}};\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure_a0179457c0b9e23f5292f771ff95393f3}\label{classsrsran_1_1srs__cu__cp_1_1rrc__security__mode__command__procedure_a0179457c0b9e23f5292f771ff95393f3} 
\index{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure@{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure}!operator()@{operator()}}
\index{operator()@{operator()}!srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure@{srsran::srs\_cu\_cp::rrc\_security\_mode\_command\_procedure}}
\doxysubsubsection{\texorpdfstring{operator()()}{operator()()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} rrc\+\_\+security\+\_\+mode\+\_\+command\+\_\+procedure\+::operator() (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_aadfca39572d46ed2a532ab91af40292e}{coro\+\_\+context}}$<$ \mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{classbool}{bool}} $>$ $>$ \&}]{ctx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00041\ \{}
\DoxyCodeLine{00042\ \ \ CORO\_BEGIN(ctx);}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ logger.log\_debug(\textcolor{stringliteral}{"{}\(\backslash\)"{}\{\}\(\backslash\)"{}\ initialized"{}},\ name());}
\DoxyCodeLine{00045\ \ \ \textcolor{comment}{//\ create\ new\ transaction\ for\ RRCSecurityModeCommand}}
\DoxyCodeLine{00046\ \ \ transaction\ =}
\DoxyCodeLine{00047\ \ \ \ \ \ \ event\_mng.transactions.create\_transaction(std::chrono::milliseconds(context.cfg.\mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1rrc__ue__cfg__t_a81e63bb0d2c6ad6574ec48c42470174d}{rrc\_procedure\_timeout\_ms}}));}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \textcolor{comment}{//\ select\ security\ algorithms\ to\ be\ used}}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ select\_security\_algo())\ \{}
\DoxyCodeLine{00051\ \ \ \ \ logger.log\_debug(\textcolor{stringliteral}{"{}\(\backslash\)"{}\{\}\(\backslash\)"{}\ could\ not\ select\ security\ algorithms"{}},\ name());}
\DoxyCodeLine{00052\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//\ send\ RRC\ SMC\ to\ UE}}
\DoxyCodeLine{00054\ \ \ \ \ logger.log\_debug(\textcolor{stringliteral}{"{}\(\backslash\)"{}\{\}\(\backslash\)"{}\ selected\ security\ algorithms\ integrity=NIA\{\}\ ciphering=NEA\{\}"{}},}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ name(),}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ context.sec\_context.sel\_algos.integ\_algo,}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ context.sec\_context.sel\_algos.cipher\_algo);}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ generate\_as\_keys();}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ activate\ SRB1\ PDCP\ security}}
\DoxyCodeLine{00062\ \ \ \ \ rrc\_ue.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__security__mode__command__proc__notifier_a2f05c9b22426b51b2fc6db920cea25ff}{on\_new\_as\_security\_context}}();}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ send\_rrc\_security\_mode\_command();}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//\ Await\ UE\ response}}
\DoxyCodeLine{00066\ \ \ \ \ CORO\_AWAIT(transaction);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{if}\ (transaction.\mbox{\hyperlink{classsrsran_1_1protocol__transaction_a8a8ceaa33d77f12ada00763baabdcb28}{has\_response}}())\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ logger.log\_debug(\textcolor{stringliteral}{"{}\(\backslash\)"{}\{\}\(\backslash\)"{}\ finished\ successfully"{}},\ name());}
\DoxyCodeLine{00070\ \ \ \ \ \ \ rrc\_ue.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__security__mode__command__proc__notifier_a28ff743a51e3708f73cc02b46c109c8b}{on\_security\_context\_sucessful}}();}
\DoxyCodeLine{00071\ \ \ \ \ \ \ procedure\_result\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00072\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ logger.log\_warning(\textcolor{stringliteral}{"{}\(\backslash\)"{}\{\}\(\backslash\)"{}\ timed\ out\ after\ \{\}ms"{}},\ name(),\ context.cfg.\mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1rrc__ue__cfg__t_a81e63bb0d2c6ad6574ec48c42470174d}{rrc\_procedure\_timeout\_ms}});}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ \ \ \}}
\DoxyCodeLine{00076\ \ \ logger.log\_debug(\textcolor{stringliteral}{"{}\(\backslash\)"{}\{\}\(\backslash\)"{}\ finalized"{}},\ name());}
\DoxyCodeLine{00077\ \ \ CORO\_RETURN(procedure\_result);}
\DoxyCodeLine{00078\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/rrc/ue/procedures/rrc\+\_\+security\+\_\+mode\+\_\+command\+\_\+procedure.\+h\item 
lib/rrc/ue/procedures/rrc\+\_\+security\+\_\+mode\+\_\+command\+\_\+procedure.\+cpp\end{DoxyCompactItemize}
