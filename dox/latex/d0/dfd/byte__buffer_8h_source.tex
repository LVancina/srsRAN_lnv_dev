\doxysection{byte\+\_\+buffer.\+h}
\hypertarget{byte__buffer_8h_source}{}\label{byte__buffer_8h_source}\index{include/srsran/adt/byte\_buffer.h@{include/srsran/adt/byte\_buffer.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ 2021-\/2024\ Software\ Radio\ Systems\ Limited}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ srsRAN.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ srsRAN\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ it\ under\ the\ terms\ of\ the\ GNU\ Affero\ General\ Public\ License\ as}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ published\ by\ the\ Free\ Software\ Foundation,\ either\ version\ 3\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ the\ License,\ or\ (at\ your\ option)\ any\ later\ version.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ srsRAN\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ GNU\ Affero\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ A\ copy\ of\ the\ GNU\ Affero\ General\ Public\ License\ can\ be\ found\ in}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ the\ LICENSE\ file\ in\ the\ top-\/level\ directory\ of\ this\ distribution}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ and\ at\ http://www.gnu.org/licenses/.}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{pragma}\ \textcolor{preprocessor}{once}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}srsran/adt/detail/byte\_buffer\_range\_helpers.h"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}fmt/format.h"{}}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{namespace}\ \mbox{\hyperlink{namespacesrsran}{srsran}}\ \{}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{comment}{///\ Default\ byte\ buffer\ segment\ size\ in\ the\ byte\ buffer\ pool.}}
\DoxyCodeLine{00031\ \mbox{\hyperlink{namespacesrsran_ab9590b056edbbb6f192be084876f657b}{size\_t}}\ \mbox{\hyperlink{namespacesrsran_ab9590b056edbbb6f192be084876f657b}{byte\_buffer\_segment\_pool\_default\_segment\_size}}();}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{comment}{///\ \(\backslash\)brief\ Sets\ the\ default\ size\ of\ the\ default\ byte\_buffer\ segment\ pool.}}
\DoxyCodeLine{00034\ \textcolor{comment}{///}}
\DoxyCodeLine{00035\ \textcolor{comment}{///\ This\ function\ asserts\ if\ the\ pool\ has\ already\ been\ initialized.}}
\DoxyCodeLine{00036\ \textcolor{comment}{///\ \(\backslash\)param\ nof\_segments\ Number\ of\ byte\_buffer\_segments\ stored\ in\ the\ pool.}}
\DoxyCodeLine{00037\ \textcolor{comment}{///\ \(\backslash\)param\ memory\_block\_size\ Number,\ in\ bytes,\ for\ each\ memory\ block\ on\ which\ a\ buffer\_byte\_segment\ header\ and\ payload}}
\DoxyCodeLine{00038\ \textcolor{comment}{///\ will\ be\ stored.}}
\DoxyCodeLine{00039\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacesrsran_a6f2d9201de8bb48106eb4d7214da70c8}{init\_byte\_buffer\_segment\_pool}}(std::size\_t\ nof\_segments,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ memory\_block\_size\ =\ \mbox{\hyperlink{namespacesrsran_a6f2d9201de8bb48106eb4d7214da70c8}{byte\_buffer\_segment\_pool\_default\_segment\_size}}());}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{comment}{///\ \(\backslash\)brief\ Non-\/owning\ view\ to\ a\ byte\ sequence.}}
\DoxyCodeLine{00043\ \textcolor{comment}{///\ The\ underlying\ byte\ sequence\ is\ not\ contiguous\ in\ memory.\ Instead,\ it\ is\ represented\ as\ an\ intrusive\ linked\ list\ of}}
\DoxyCodeLine{00044\ \textcolor{comment}{///\ byte\ buffer\ segments,\ where\ each\ segment\ contains\ a\ span\ of\ bytes.}}
\DoxyCodeLine{00045\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}}
\DoxyCodeLine{00046\ \{}
\DoxyCodeLine{00047\ \ \ \textcolor{comment}{///\ Checks\ whether\ type\ is\ a\ byte\_buffer/byte\_buffer\_slice.}}
\DoxyCodeLine{00048\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{ByteBufferType}}>}
\DoxyCodeLine{00049\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{is\_owning\_byte\_buffer\_type}}\ =}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{std}}::\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{conditional\_t}}<\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{std}}::\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{is\_same}}<\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{std}}::\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{decay\_t}}<\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{ByteBufferType}}>,\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}>::\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{value}},}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{std}}::\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{false\_type}},}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{is\_byte\_buffer\_range}}<\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{ByteBufferType}}>>;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00055\ \ \ \textcolor{keyword}{using}\ value\_type\ \ \ \ \ =\ uint8\_t;}
\DoxyCodeLine{00056\ \ \ \textcolor{keyword}{using}\ iterator\ \ \ \ \ \ \ =\ detail::byte\_buffer\_segment\_list\_byte\_iterator;}
\DoxyCodeLine{00057\ \ \ \textcolor{keyword}{using}\ const\_iterator\ =\ detail::byte\_buffer\_segment\_list\_byte\_const\_iterator;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ byte\_buffer\_view()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \textcolor{comment}{///\ Conversion\ from\ a\ pair\ of\ iterators.}}
\DoxyCodeLine{00062\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a82c3a0d8229e9cfe5a0d6b6bb526eccf}{byte\_buffer\_view}}(iterator\ it\_begin\_,\ iterator\ it\_end\_)\ :\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a82c3a0d8229e9cfe5a0d6b6bb526eccf}{it}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a82c3a0d8229e9cfe5a0d6b6bb526eccf}{it\_begin\_}}),\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a82c3a0d8229e9cfe5a0d6b6bb526eccf}{it\_end}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a82c3a0d8229e9cfe5a0d6b6bb526eccf}{it\_end\_}})\ \{\}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \textcolor{comment}{///\ Conversion\ from\ byte\_buffer-\/like\ type\ (e.g.\ byte\_buffer,\ byte\_buffer\_slice)\ to\ byte\_buffer\_view.}}
\DoxyCodeLine{00065\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ByteBufferType,\ std::enable\_if\_t<is\_owning\_byte\_buffer\_type<ByteBufferType>::value,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_ac9071d037c74f2bbacd2f2b1810a1392}{byte\_buffer\_view}}(\textcolor{keyword}{const}\ ByteBufferType\&\ buffer)\ :\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_ac9071d037c74f2bbacd2f2b1810a1392}{it}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__view_ac9071d037c74f2bbacd2f2b1810a1392}{buffer}}.\mbox{\hyperlink{classsrsran_1_1byte__buffer__view_ac9071d037c74f2bbacd2f2b1810a1392}{begin}}()),\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_ac9071d037c74f2bbacd2f2b1810a1392}{it\_end}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__view_ac9071d037c74f2bbacd2f2b1810a1392}{buffer}}.\mbox{\hyperlink{classsrsran_1_1byte__buffer__view_ac9071d037c74f2bbacd2f2b1810a1392}{end}}())}
\DoxyCodeLine{00067\ \ \ \{}
\DoxyCodeLine{00068\ \ \ \}}
\DoxyCodeLine{00069\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ByteBufferType,\ std::enable\_if\_t<is\_owning\_byte\_buffer\_type<ByteBufferType>::value,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00070\ \ \ byte\_buffer\_view(\textcolor{keyword}{const}\ ByteBufferType\&\ buffer,\ size\_t\ start,\ size\_t\ sz)\ :\ it(buffer.begin()\ +\ start),\ it\_end(it\ +\ sz)}
\DoxyCodeLine{00071\ \ \ \{}
\DoxyCodeLine{00072\ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \textcolor{comment}{///\ Get\ iterator\ pointing\ at\ the\ first\ byte\ of\ the\ view.}}
\DoxyCodeLine{00075\ \ \ iterator\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a6878ab1403493852ca6edd1b91a87ab6}{begin}}()\ \{\ \textcolor{keywordflow}{return}\ it;\ \}}
\DoxyCodeLine{00076\ \ \ const\_iterator\ begin()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ it;\ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \textcolor{comment}{///\ Get\ iterator\ pointing\ at\ the\ end\ of\ the\ view.}}
\DoxyCodeLine{00079\ \ \ iterator\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a6972dc15ca1c582b963dc10e06d77c26}{end}}()\ \{\ \textcolor{keywordflow}{return}\ it\_end;\ \}}
\DoxyCodeLine{00080\ \ \ const\_iterator\ end()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ it\_end;\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \textcolor{comment}{///\ Checks\ whether\ the\ view\ is\ empty.}}
\DoxyCodeLine{00083\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_ac60e89fcf20711ba93b20c382a312c24}{empty}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ it\ ==\ it\_end;\ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \textcolor{comment}{///\ Checks\ the\ length\ in\ bytes\ of\ the\ view.}}
\DoxyCodeLine{00086\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a779c0f30d8ccff3944084130af6adde3}{size\_t}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a779c0f30d8ccff3944084130af6adde3}{length}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ it\_end\ -\/\ it;\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \textcolor{comment}{///\ Index-\/based\ random\ access\ to\ bytes\ of\ the\ view.}}
\DoxyCodeLine{00089\ \ \ \textcolor{keyword}{const}\ uint8\_t\&\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a471432bd6cbe57ad9fdaaad2e1a4735b}{operator}}[](size\_t\ i)\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ *(it\ +\ i);\ \}}
\DoxyCodeLine{00090\ \ \ uint8\_t\&\ \ \ \ \ \ \ operator[](size\_t\ i)\ \{\ \textcolor{keywordflow}{return}\ *(it\ +\ i);\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \textcolor{comment}{///\ Returns\ another\ sub-\/view\ with\ dimensions\ specified\ in\ arguments.}}
\DoxyCodeLine{00093\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_aa374f409b1bee0caf3c1a86bf2cebe83}{view}}(size\_t\ offset,\ size\_t\ size)\ \textcolor{keyword}{const}}
\DoxyCodeLine{00094\ \ \ \{}
\DoxyCodeLine{00095\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(offset\ +\ size\ <=\ length(),\ \textcolor{stringliteral}{"{}Invalid\ view\ dimensions."{}});}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordflow}{return}\ \{it\ +\ offset,\ it\ +\ offset\ +\ size\};}
\DoxyCodeLine{00097\ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \textcolor{comment}{///\ Split\ byte\ buffer\ view\ into\ two\ contiguous\ views,\ with\ break\ point\ defined\ by\ "{}offset"{}.}}
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{///\ \(\backslash\)param\ offset\ index\ at\ which\ view\ is\ split\ into\ two\ contiguous\ views.}}
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ pair\ of\ contiguous\ views.}}
\DoxyCodeLine{00102\ \ \ std::pair<\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}},\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}>\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_ad9bae385261f591c3315ed4e15b12bf6}{split}}(size\_t\ offset)}
\DoxyCodeLine{00103\ \ \ \{}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{auto}\ it\_split\ =\ begin()\ +\ offset;}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{return}\ \{\{begin(),\ it\_split\},\ \{it\_split,\ end()\}\};}
\DoxyCodeLine{00106\ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \textcolor{comment}{///\ Returns\ a\ non-\/owning\ list\ of\ segments\ that\ compose\ the\ byte\_buffer.}}
\DoxyCodeLine{00109\ \ \ const\_byte\_buffer\_segment\_span\_range\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a7d683ccdd7a39bccbd6a5c37d3a3cf26}{segments}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \{it,\ length()\};\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{comment}{///\ Returns\ a\ non-\/owning\ list\ of\ segments\ that\ compose\ the\ byte\_buffer.}}
\DoxyCodeLine{00112\ \ \ \textcolor{comment}{///\ The\ segments\ are\ not\ const,\ so\ that\ the\ callee\ can\ modify\ the\ bytes,}}
\DoxyCodeLine{00113\ \ \ \textcolor{comment}{///\ but\ not\ layout\ of\ the\ buffer.}}
\DoxyCodeLine{00114\ \ \ byte\_buffer\_segment\_span\_range\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_acf63da5d365718ab26e22b7e4f91a4ac}{modifiable\_segments}}()\ \{\ \textcolor{keywordflow}{return}\ \{it,\ length()\};\ \};}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Equality\ comparison\ between\ byte\ buffer\ view\ and\ another\ range.}}
\DoxyCodeLine{00117\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00118\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a5e3b57f2f8e72f09065d6149fd0db9d4}{operator}}==(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\&\ lhs,\ \textcolor{keyword}{const}\ T\&\ r)}
\DoxyCodeLine{00119\ \ \ \{}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::compare\_byte\_buffer\_range(lhs,\ r);}
\DoxyCodeLine{00121\ \ \ \}}
\DoxyCodeLine{00122\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::enable\_if\_t<\textcolor{keyword}{not}\ is\_byte\_buffer\_range<T>::value,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00123\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator==(\textcolor{keyword}{const}\ T\&\ r,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\&\ rhs)}
\DoxyCodeLine{00124\ \ \ \{}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::compare\_byte\_buffer\_range(rhs,\ r);}
\DoxyCodeLine{00126\ \ \ \}}
\DoxyCodeLine{00127\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00128\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\&\ lhs,\ \textcolor{keyword}{const}\ T\&\ r)}
\DoxyCodeLine{00129\ \ \ \{}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{not}(lhs\ ==\ r);}
\DoxyCodeLine{00131\ \ \ \}}
\DoxyCodeLine{00132\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::enable\_if\_t<\textcolor{keyword}{not}\ is\_byte\_buffer\_range<T>::value,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00133\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ T\&\ r,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\&\ rhs)}
\DoxyCodeLine{00134\ \ \ \{}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{not}(rhs\ ==\ r);}
\DoxyCodeLine{00136\ \ \ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00139\ \ \ iterator\ it;}
\DoxyCodeLine{00140\ \ \ iterator\ it\_end;}
\DoxyCodeLine{00141\ \};}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}};}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \textcolor{comment}{///\ \(\backslash\)brief\ Byte\ sequence,\ which\ represents\ its\ data\ in\ memory\ via\ an\ intrusive\ linked\ list\ of\ memory\ chunks.}}
\DoxyCodeLine{00146\ \textcolor{comment}{///\ This\ container\ is\ not\ contiguous\ in\ memory.}}
\DoxyCodeLine{00147\ \textcolor{comment}{///\ Default\ copy\ ctor\ and\ assignment\ is\ disabled\ in\ this\ container.\ The\ user\ should\ instead\ std::move\ to\ transfer}}
\DoxyCodeLine{00148\ \textcolor{comment}{///\ ownership,\ .copy()\ for\ shallow\ copies\ with\ shared\ ownership\ and\ .deep\_copy()\ for\ byte-\/wise\ copies.}}
\DoxyCodeLine{00149\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}}
\DoxyCodeLine{00150\ \{}
\DoxyCodeLine{00151\ \ \ \textcolor{comment}{///\ Node\ of\ linked\ list\ of\ byte\ buffer\ segments.}}
\DoxyCodeLine{00152\ \ \ \textcolor{keyword}{using}\ node\_t\ =\ detail::\mbox{\hyperlink{classsrsran_1_1detail_1_1byte__buffer__segment__list}{byte\_buffer\_segment\_list}}::\mbox{\hyperlink{structsrsran_1_1detail_1_1byte__buffer__segment__list_1_1node__t}{node\_t}};}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \textcolor{comment}{///\ Control\ block\ of\ byte\_buffer\ used\ to\ store\ the\ head\ and\ tail\ of\ the\ segment\ linked\ list\ and\ the\ number\ of\ total}}
\DoxyCodeLine{00155\ \ \ \textcolor{comment}{///\ bytes\ of\ the\ buffer.}}
\DoxyCodeLine{00156\ \ \ \textcolor{keyword}{struct}\ control\_block\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{comment}{///\ Linked\ list\ of\ byte\ buffer\ segments\ that\ this\ byte\_buffer\ holds.}}
\DoxyCodeLine{00158\ \ \ \ \ detail::\mbox{\hyperlink{classsrsran_1_1detail_1_1byte__buffer__segment__list}{byte\_buffer\_segment\_list}}\ segments;}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{comment}{///\ Length\ in\ bytes\ of\ the\ linked\ list\ of\ segments.}}
\DoxyCodeLine{00160\ \ \ \ \ size\_t\ pkt\_len\ =\ 0;}
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{comment}{///\ One\ of\ the\ segments\ shares\ the\ same\ memory\ block\ with\ the\ byte\_buffer\ control\ block.}}
\DoxyCodeLine{00162\ \ \ \ \ node\_t*\ segment\_in\_cb\_memory\_block\ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordtype}{void}\ destroy\_node(node\_t*\ node)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \string~control\_block();}
\DoxyCodeLine{00167\ \ \ \};}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \textcolor{comment}{///\ Headroom\ given\ to\ the\ first\ segment\ of\ the\ byte\_buffer.}}
\DoxyCodeLine{00170\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{static}\ size\_t\ DEFAULT\_FIRST\_SEGMENT\_HEADROOM\ =\ 16;}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00173\ \ \ \textcolor{keyword}{using}\ value\_type\ \ \ \ \ =\ uint8\_t;}
\DoxyCodeLine{00174\ \ \ \textcolor{keyword}{using}\ iterator\ \ \ \ \ \ \ =\ detail::byte\_buffer\_segment\_list\_byte\_iterator;}
\DoxyCodeLine{00175\ \ \ \textcolor{keyword}{using}\ const\_iterator\ =\ detail::byte\_buffer\_segment\_list\_byte\_const\_iterator;}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \textcolor{comment}{///\ Creates\ an\ empty\ byte\_buffer.}}
\DoxyCodeLine{00178\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a9d95648e141616eb82e4db1be807148c}{byte\_buffer}}()\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \textcolor{comment}{///\ Explicit\ copy\ ctor.\ User\ should\ use\ copy()\ method\ for\ copy\ assignments.}}
\DoxyCodeLine{00181\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a6de51a4dc546559b66af861d51e29fc3}{byte\_buffer}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \textcolor{comment}{///\ Creates\ a\ byte\_buffer\ with\ content\ provided\ by\ a\ span\ of\ bytes.}}
\DoxyCodeLine{00184\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a68178f768cd233f55b4e6ebba378bf1e}{byte\_buffer}}(span<\textcolor{keyword}{const}\ uint8\_t>\ bytes)}
\DoxyCodeLine{00185\ \ \ \{}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ append(bytes))\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{clear}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{(}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{)}};}
\DoxyCodeLine{00188\ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \textcolor{comment}{///\ Creates\ a\ byte\_buffer\ with\ data\ intialized\ via\ a\ initializer\ list.}}
\DoxyCodeLine{00192\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a23243c3899f5fb66157c4b8151136dbd}{byte\_buffer}}(std::initializer\_list<uint8\_t>\ lst)\ :\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a23243c3899f5fb66157c4b8151136dbd}{byte\_buffer}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer_a23243c3899f5fb66157c4b8151136dbd}{span}}<\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a23243c3899f5fb66157c4b8151136dbd}{uint8\_t}}>\{\mbox{\hyperlink{classsrsran_1_1byte__buffer_a23243c3899f5fb66157c4b8151136dbd}{lst}}.\mbox{\hyperlink{classsrsran_1_1byte__buffer_a23243c3899f5fb66157c4b8151136dbd}{begin}}(),\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a23243c3899f5fb66157c4b8151136dbd}{lst}}.\mbox{\hyperlink{classsrsran_1_1byte__buffer_a23243c3899f5fb66157c4b8151136dbd}{size}}()\})\ \{\}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \textcolor{comment}{///\ Creates\ a\ byte\_buffer\ with\ data\ assigned\ from\ a\ range\ of\ bytes.}}
\DoxyCodeLine{00195\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ It>}
\DoxyCodeLine{00196\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a3bffb2221d9e273d2227d182403a2016}{byte\_buffer}}(It\ other\_begin,\ It\ other\_end)}
\DoxyCodeLine{00197\ \ \ \{}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ append(other\_begin,\ other\_end))\ \{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{clear}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{(}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{)}};}
\DoxyCodeLine{00200\ \ \ \ \ \}}
\DoxyCodeLine{00201\ \ \ \}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \textcolor{comment}{///\ Move\ constructor.}}
\DoxyCodeLine{00204\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a82bd84dfe3119fbeb1c63e4028361aed}{byte\_buffer}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\&\ other)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \textcolor{comment}{///\ copy\ assignment\ is\ disabled.\ Use\ std::move,\ .copy()\ or\ .deep\_copy()\ instead.}}
\DoxyCodeLine{00207\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_af519f1b008b53df31f03005e4a590ae6}{operator}}=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \textcolor{comment}{///\ Move\ assignment\ of\ byte\_buffer.\ It\ avoids\ unnecessary\ reference\ counting\ increment.}}
\DoxyCodeLine{00210\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a10a40af12ed4cd3da56159f069131df8}{operator}}=(\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\&\ other)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \textcolor{comment}{///\ Assignment\ of\ span\ of\ bytes.}}
\DoxyCodeLine{00213\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a4d2ffb4df18c0d3ddc15a68b75664b43}{operator}}=(span<\textcolor{keyword}{const}\ uint8\_t>\ bytes)\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00214\ \ \ \{}
\DoxyCodeLine{00215\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{clear}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{(}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{)}};}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ append(bytes))\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{clear}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{(}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{)}};}
\DoxyCodeLine{00218\ \ \ \ \ \}}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00220\ \ \ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \textcolor{comment}{///\ Performs\ a\ deep\ copy\ (byte\ by\ bytes)\ of\ this\ byte\_buffer.}}
\DoxyCodeLine{00223\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_aa79a5e270dbb5dd01b83c034853b9fb3}{deep\_copy}}()\ \textcolor{keyword}{const}}
\DoxyCodeLine{00224\ \ \ \{}
\DoxyCodeLine{00225\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ buf;}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordflow}{if}\ (ctrl\_blk\_ptr\ !=\ \textcolor{keywordtype}{nullptr})\ \{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (node\_t*\ seg\ =\ ctrl\_blk\_ptr-\/>segments.head;\ seg\ !=\ \textcolor{keywordtype}{nullptr};\ seg\ =\ seg-\/>next)\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ buf.append(span<uint8\_t>\{seg-\/>data(),\ seg-\/>length()\}))\ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ buf\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{.}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{clear}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{(}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{)}};}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00233\ \ \ \ \ \}}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordflow}{return}\ buf;}
\DoxyCodeLine{00235\ \ \ \}}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \textcolor{comment}{///\ Performs\ a\ shallow\ copy.\ Head\ segment\ reference\ counter\ is\ incremented.}}
\DoxyCodeLine{00238\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a1f08be439b9c2c174b4b2827c18feda6}{copy}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a6de51a4dc546559b66af861d51e29fc3}{\{}}*\textcolor{keyword}{this}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a6de51a4dc546559b66af861d51e29fc3}{\}}};\ \}}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \textcolor{comment}{///\ Append\ bytes\ of\ a\ iterator\ range.}}
\DoxyCodeLine{00241\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Iterator>}
\DoxyCodeLine{00242\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a190484f4224c88acb2f1b3334b28421b}{append}}(Iterator\ begin,\ Iterator\ end)}
\DoxyCodeLine{00243\ \ \ \{}
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_same<std::decay\_t<\textcolor{keyword}{decltype}(*begin)>,\ uint8\_t>::value\ \textcolor{keyword}{or}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::is\_same<std::decay\_t<\textcolor{keyword}{decltype}(*begin)>,\ \textcolor{keyword}{const}\ uint8\_t>::value,}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Iterator\ value\ type\ is\ not\ uint8\_t"{}});}
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{comment}{//\ TODO:\ use\ segment-\/wise\ copy\ if\ it\ is\ a\ span.}}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ begin;\ it\ !=\ end;\ ++it)\ \{}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ append(*it))\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00252\ \ \ \ \ \}}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00254\ \ \ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{///\ Appends\ bytes\ to\ the\ byte\ buffer.\ This\ function\ may\ retrieve\ new\ segments\ from\ a\ memory\ pool.}}
\DoxyCodeLine{00257\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_ad7c9b29ce6019b29798495213d68096c}{append}}(span<\textcolor{keyword}{const}\ uint8\_t>\ bytes);}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \textcolor{comment}{///\ Appends\ an\ initializer\ list\ of\ bytes.}}
\DoxyCodeLine{00260\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a244844e979a2bf6e2bdb96574c65584b}{append}}(\textcolor{keyword}{const}\ std::initializer\_list<uint8\_t>\&\ bytes)}
\DoxyCodeLine{00261\ \ \ \{}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordflow}{return}\ append(span<\textcolor{keyword}{const}\ uint8\_t>\{bytes.begin(),\ bytes.size()\});}
\DoxyCodeLine{00263\ \ \ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \textcolor{comment}{///\ Appends\ bytes\ from\ another\ byte\_buffer.\ This\ function\ may\ allocate\ new\ segments.}}
\DoxyCodeLine{00266\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_af6cbb3c32365a49af9d01ae53360a43c}{append}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ other);}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \textcolor{comment}{///\ Appends\ bytes\ from\ another\ rvalue\ byte\_buffer.\ This\ function\ may\ allocate\ new\ segments.}}
\DoxyCodeLine{00269\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a4ef452363346e8bf3176c8d2d31a5171}{append}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\&\ other);}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{comment}{///\ Appends\ bytes\ to\ the\ byte\ buffer.\ This\ function\ may\ allocate\ new\ segments.}}
\DoxyCodeLine{00272\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_ae74d9a2442b1103a2ac0852afd7f3e1a}{append}}(uint8\_t\ byte)}
\DoxyCodeLine{00273\ \ \ \{}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{keywordflow}{if}\ (empty()\ \textcolor{keyword}{or}\ ctrl\_blk\_ptr-\/>segments.tail-\/>tailroom()\ ==\ 0)\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ append\_segment(DEFAULT\_FIRST\_SEGMENT\_HEADROOM))\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00278\ \ \ \ \ \}}
\DoxyCodeLine{00279\ \ \ \ \ ctrl\_blk\_ptr-\/>segments.tail-\/>append(byte);}
\DoxyCodeLine{00280\ \ \ \ \ ctrl\_blk\_ptr-\/>pkt\_len++;}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00282\ \ \ \}}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \ \ \textcolor{comment}{///\ Appends\ a\ view\ of\ bytes\ into\ current\ byte\ buffer.}}
\DoxyCodeLine{00285\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_af4563ca3bb9e2b8634e96ec87911c838}{append}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\&\ view)}
\DoxyCodeLine{00286\ \ \ \{}
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{comment}{//\ append\ segment\ by\ segment.}}
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{keyword}{auto}\ view\_segs\ =\ view.segments();}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keywordflow}{for}\ (span<\textcolor{keyword}{const}\ uint8\_t>\ seg\ :\ view\_segs)\ \{}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ append(seg))\ \{}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00293\ \ \ \ \ \}}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00295\ \ \ \}}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \textcolor{comment}{///\ Appends\ an\ owning\ view\ of\ bytes\ into\ current\ byte\ buffer.}}
\DoxyCodeLine{00298\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a60a8d0f483eeaaa7c31d576782070647}{append}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\ view);}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \textcolor{comment}{///\ Prepends\ bytes\ to\ byte\_buffer.\ This\ function\ may\ allocate\ new\ segments.}}
\DoxyCodeLine{00301\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_ae8478410e24f9b23cafda0cbabdbf403}{prepend}}(span<\textcolor{keyword}{const}\ uint8\_t>\ bytes);}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Prepend\ data\ of\ byte\ buffer\ to\ this\ byte\ buffer.}}
\DoxyCodeLine{00304\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a6acac0fd07a5577ba3a430b636c74741}{prepend}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ other);}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Prepend\ data\ of\ r-\/value\ byte\ buffer\ to\ this\ byte\ buffer.\ The\ segments\ of\ the\ provided\ byte\ buffer\ can\ get}}
\DoxyCodeLine{00307\ \ \ \textcolor{comment}{///\ "{}stolen"{}\ if\ the\ byte\ buffer\ is\ the\ last\ reference\ to\ the\ segments.}}
\DoxyCodeLine{00308\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_ababbb591f47600a9a0ffbf5a91b19e87}{prepend}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\&\ other);}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \textcolor{comment}{///\ Prepends\ space\ in\ byte\_buffer.\ This\ function\ may\ allocate\ new\ segments.}}
\DoxyCodeLine{00311\ \ \ \textcolor{comment}{///\ \(\backslash\)param\ nof\_bytes\ Number\ of\ bytes\ to\ reserve\ at\ header.}}
\DoxyCodeLine{00312\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ range\ of\ bytes\ that\ were\ reserved.}}
\DoxyCodeLine{00313\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_ad8dbd27b3715bfe6abc890fbfd170245}{reserve\_prepend}}(size\_t\ nof\_bytes);}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \textcolor{comment}{///\ Clear\ byte\ buffer.}}
\DoxyCodeLine{00316\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a7c8882b6403ea3f246d63c64dd122f10}{clear}}()\ \{\ ctrl\_blk\_ptr.reset();\ \}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \textcolor{comment}{///\ Removes\ "{}nof\_bytes"{}\ from\ the\ head\ of\ the\ byte\_buffer.}}
\DoxyCodeLine{00319\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a832175c27ef0d111b127c1a0bc421ec3}{trim\_head}}(size\_t\ nof\_bytes);}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Remove\ "{}nof\_bytes"{}\ bytes\ at\ the\ end\ of\ the\ byte\_buffer.}}
\DoxyCodeLine{00322\ \ \ \textcolor{comment}{///\ If\ the\ length\ is\ greater\ than\ the\ length\ of\ the\ last\ segment,\ the\ function\ will\ fail\ and\ return\ -\/1\ without}}
\DoxyCodeLine{00323\ \ \ \textcolor{comment}{///\ modifying\ the\ byte\_buffer.}}
\DoxyCodeLine{00324\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_ad94ff05447760ce113c0ee12f92cb503}{trim\_tail}}(size\_t\ nof\_bytes);}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \textcolor{comment}{///\ Checks\ whether\ byte\_buffer\ is\ empty.}}
\DoxyCodeLine{00327\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a4d77b44f1d800f8b2f92bb76e80512f3}{empty}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ length()\ ==\ 0;\ \}}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ \textcolor{comment}{///\ Checks\ byte\_buffer\ length.}}
\DoxyCodeLine{00330\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a7168fb8841a83a60b60a2ae06b59662d}{size\_t}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a7168fb8841a83a60b60a2ae06b59662d}{length}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ ctrl\_blk\_ptr\ !=\ \textcolor{keywordtype}{nullptr}\ ?\ ctrl\_blk\_ptr-\/>pkt\_len\ :\ 0;\ \}}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \ \ uint8\_t\&\ \ \ \ \ \ \ back()\ \{\ \textcolor{keywordflow}{return}\ ctrl\_blk\_ptr-\/>segments.tail-\/>back();\ \}}
\DoxyCodeLine{00333\ \ \ \textcolor{keyword}{const}\ uint8\_t\&\ back()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ ctrl\_blk\_ptr-\/>segments.tail-\/>back();\ \}}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \ \ \textcolor{keyword}{const}\ uint8\_t\&\ operator[](size\_t\ i)\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ *(begin()\ +\ i);\ \}}
\DoxyCodeLine{00336\ \ \ uint8\_t\&\ \ \ \ \ \ \ operator[](size\_t\ i)\ \{\ \textcolor{keywordflow}{return}\ *(begin()\ +\ i);\ \}}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ iterator\ \ \ \ \ \ \ begin()\ \{\ \textcolor{keywordflow}{return}\ iterator\{ctrl\_blk\_ptr\ !=\ \textcolor{keywordtype}{nullptr}\ ?\ ctrl\_blk\_ptr-\/>segments.head\ :\ \textcolor{keywordtype}{nullptr},\ 0\};\ \}}
\DoxyCodeLine{00339\ \ \ const\_iterator\ cbegin()\ \textcolor{keyword}{const}}
\DoxyCodeLine{00340\ \ \ \{}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{keywordflow}{return}\ const\_iterator\{ctrl\_blk\_ptr\ !=\ \textcolor{keywordtype}{nullptr}\ ?\ ctrl\_blk\_ptr-\/>segments.head\ :\ \textcolor{keywordtype}{nullptr},\ 0\};}
\DoxyCodeLine{00342\ \ \ \}}
\DoxyCodeLine{00343\ \ \ const\_iterator\ begin()\ \textcolor{keyword}{const}}
\DoxyCodeLine{00344\ \ \ \{}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keywordflow}{return}\ const\_iterator\{ctrl\_blk\_ptr\ !=\ \textcolor{keywordtype}{nullptr}\ ?\ ctrl\_blk\_ptr-\/>segments.head\ :\ \textcolor{keywordtype}{nullptr},\ 0\};}
\DoxyCodeLine{00346\ \ \ \}}
\DoxyCodeLine{00347\ \ \ iterator\ \ \ \ \ \ \ end()\ \{\ \textcolor{keywordflow}{return}\ iterator\{\textcolor{keywordtype}{nullptr},\ 0\};\ \}}
\DoxyCodeLine{00348\ \ \ const\_iterator\ end()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ const\_iterator\{\textcolor{keywordtype}{nullptr},\ 0\};\ \}}
\DoxyCodeLine{00349\ \ \ const\_iterator\ cend()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ const\_iterator\{\textcolor{keywordtype}{nullptr},\ 0\};\ \}}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \ \ \textcolor{comment}{///\ Test\ if\ byte\ buffer\ is\ contiguous\ in\ memory,\ i.e.\ it\ has\ only\ one\ segment.}}
\DoxyCodeLine{00352\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_af35457b6e2f22016d8f8736ed4dd405e}{is\_contiguous}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ empty()\ \textcolor{keyword}{or}\ ctrl\_blk\_ptr-\/>segments.head\ ==\ ctrl\_blk\_ptr-\/>segments.tail;\ \}}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ \ \ \textcolor{comment}{///\ Moves\ the\ bytes\ stored\ in\ different\ segments\ of\ the\ byte\_buffer\ into\ first\ segment.}}
\DoxyCodeLine{00355\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_ad68551742e508e22eb0729f9701a6a87}{linearize}}();}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \textcolor{comment}{///\ Set\ byte\_buffer\ length.\ Note:\ It\ doesn't\ initialize\ newly\ created\ bytes.}}
\DoxyCodeLine{00358\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a854af8571f283c815b9b429393c5b0dd}{resize}}(size\_t\ new\_sz);}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \ \ \textcolor{comment}{///\ Returns\ a\ non-\/owning\ list\ of\ segments\ that\ compose\ the\ byte\_buffer.}}
\DoxyCodeLine{00361\ \ \ byte\_buffer\_segment\_span\_range\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a43b324249f8e1d4366bbe869fe464444}{segments}}()}
\DoxyCodeLine{00362\ \ \ \{}
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keywordflow}{return}\ byte\_buffer\_segment\_span\_range(ctrl\_blk\_ptr\ !=\ \textcolor{keywordtype}{nullptr}\ ?\ ctrl\_blk\_ptr-\/>segments.head\ :\ \textcolor{keywordtype}{nullptr},\ 0,\ length());}
\DoxyCodeLine{00364\ \ \ \}}
\DoxyCodeLine{00365\ \ \ const\_byte\_buffer\_segment\_span\_range\ segments()\ \textcolor{keyword}{const}}
\DoxyCodeLine{00366\ \ \ \{}
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{keywordflow}{return}\ const\_byte\_buffer\_segment\_span\_range(}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ ctrl\_blk\_ptr\ !=\ \textcolor{keywordtype}{nullptr}\ ?\ ctrl\_blk\_ptr-\/>segments.head\ :\ \textcolor{keywordtype}{nullptr},\ 0,\ length());}
\DoxyCodeLine{00369\ \ \ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Equality\ comparison\ between\ byte\ buffer\ view\ and\ another\ range.}}
\DoxyCodeLine{00372\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ R>}
\DoxyCodeLine{00373\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_a02c6cbc753f5908a4e21237c5001c939}{operator}}==(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ lhs,\ \textcolor{keyword}{const}\ R\&\ r)}
\DoxyCodeLine{00374\ \ \ \{}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::compare\_byte\_buffer\_range(lhs,\ r);}
\DoxyCodeLine{00376\ \ \ \}}
\DoxyCodeLine{00377\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::enable\_if\_t<std::is\_convertible<T,\ span<\textcolor{keyword}{const}\ uint8\_t>>::value,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00378\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator==(\textcolor{keyword}{const}\ T\&\ r,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ rhs)}
\DoxyCodeLine{00379\ \ \ \{}
\DoxyCodeLine{00380\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::compare\_byte\_buffer\_range(rhs,\ r);}
\DoxyCodeLine{00381\ \ \ \}}
\DoxyCodeLine{00382\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00383\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ lhs,\ \textcolor{keyword}{const}\ T\&\ r)}
\DoxyCodeLine{00384\ \ \ \{}
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{keywordflow}{return}\ !(lhs\ ==\ r);}
\DoxyCodeLine{00386\ \ \ \}}
\DoxyCodeLine{00387\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::enable\_if\_t<std::is\_convertible<T,\ span<\textcolor{keyword}{const}\ uint8\_t>>::value,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00388\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ T\&\ r,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ rhs)}
\DoxyCodeLine{00389\ \ \ \{}
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{keywordflow}{return}\ !(rhs\ ==\ r);}
\DoxyCodeLine{00391\ \ \ \}}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00393\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00394\ \ \ \textcolor{keywordtype}{bool}\ has\_ctrl\_block()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ ctrl\_blk\_ptr\ !=\ \textcolor{keywordtype}{nullptr};\ \}}
\DoxyCodeLine{00395\ }
\DoxyCodeLine{00396\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ node\_t*\ create\_head\_segment(size\_t\ headroom);}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ node\_t*\ create\_segment(size\_t\ headroom);}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ append\_segment(size\_t\ headroom\_suggestion);}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ prepend\_segment(size\_t\ headroom\_suggestion);}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Removes\ last\ segment\ of\ the\ byte\_buffer.}}
\DoxyCodeLine{00405\ \ \ \textcolor{comment}{///\ Note:\ This\ operation\ is\ O(N),\ as\ it\ requires\ recomputing\ the\ tail.}}
\DoxyCodeLine{00406\ \ \ \textcolor{keywordtype}{void}\ pop\_last\_segment()}
\DoxyCodeLine{00407\ \ \ \{}
\DoxyCodeLine{00408\ \ \ \ \ node\_t*\ tail\ =\ ctrl\_blk\_ptr-\/>segments.tail;}
\DoxyCodeLine{00409\ \ \ \ \ \textcolor{keywordflow}{if}\ (tail\ ==\ \textcolor{keywordtype}{nullptr})\ \{}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00411\ \ \ \ \ \}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{comment}{//\ Decrement\ bytes\ stored\ in\ the\ tail.}}
\DoxyCodeLine{00414\ \ \ \ \ ctrl\_blk\_ptr-\/>pkt\_len\ -\/=\ tail-\/>length();}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{comment}{//\ Remove\ tail\ from\ linked\ list.}}
\DoxyCodeLine{00417\ \ \ \ \ ctrl\_blk\_ptr-\/>segments.pop\_back();}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{comment}{//\ Deallocate\ tail\ segment.}}
\DoxyCodeLine{00420\ \ \ \ \ ctrl\_blk\_ptr-\/>destroy\_node(tail);}
\DoxyCodeLine{00421\ \ \ \}}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ warn\_alloc\_failure();}
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00425\ \ \ \textcolor{comment}{//\ TODO:\ Optimize.\ shared\_ptr<>\ has\ a\ lot\ of\ boilerplate\ we\ don't\ need.\ It\ is\ also\ hard\ to\ determine\ the\ size}}
\DoxyCodeLine{00426\ \ \ \textcolor{comment}{//\ of\ the\ shared\_ptr\ control\ block\ allocation\ and\ how\ much\ we\ need\ to\ discount\ in\ the\ segment.}}
\DoxyCodeLine{00427\ \ \ std::shared\_ptr<control\_block>\ ctrl\_blk\_ptr\ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00428\ \};}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \textcolor{comment}{///\ \(\backslash\)brief\ This\ class\ represents\ a\ sub-\/interval\ or\ make\_slice\ of\ a\ potentially\ larger\ byte\_buffer.}}
\DoxyCodeLine{00431\ \textcolor{comment}{///\ Like\ byte\_buffer\ and\ byte\_buffer\_view,\ the\ represented\ bytes\ by\ this\ class\ are\ not\ contiguous\ in\ memory.}}
\DoxyCodeLine{00432\ \textcolor{comment}{///\ Contrarily\ to\ byte\_buffer\_view,\ this\ class\ retains\ shared\ ownership\ of\ the\ segments\ held\ by\ the\ byte\_buffer}}
\DoxyCodeLine{00433\ \textcolor{comment}{///\ which\ it\ references.}}
\DoxyCodeLine{00434\ \textcolor{comment}{///\ Due\ to\ the\ shared\ ownership\ model,\ the\ usage\ of\ this\ class\ may\ involve\ additional\ overhead\ associated\ with}}
\DoxyCodeLine{00435\ \textcolor{comment}{///\ reference\ counting,\ which\ does\ not\ take\ place\ when\ using\ byte\_buffer\_view.}}
\DoxyCodeLine{00436\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}}
\DoxyCodeLine{00437\ \{}
\DoxyCodeLine{00438\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00439\ \ \ \textcolor{keyword}{using}\ value\_type\ \ \ \ \ =\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}::value\_type;}
\DoxyCodeLine{00440\ \ \ \textcolor{keyword}{using}\ iterator\ \ \ \ \ \ \ =\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}::iterator;}
\DoxyCodeLine{00441\ \ \ \textcolor{keyword}{using}\ const\_iterator\ =\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}::const\_iterator;}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00443\ \ \ \textcolor{comment}{///\ Constructs\ an\ empty\ byte\_buffer\_slice.}}
\DoxyCodeLine{00444\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a0f98e50a4a891e04adca5928bba8b634}{byte\_buffer\_slice}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00445\ }
\DoxyCodeLine{00446\ \ \ \textcolor{comment}{///\ Copy-\/construction\ of\ a\ byte\_buffer\_slice\ is\ a\ shallow\ copy\ of\ the\ underlying\ byte\_buffer.}}
\DoxyCodeLine{00447\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_ad5004af82afe51d7633b797aa1733cca}{byte\_buffer\_slice}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ byte\_buffer\_slice(\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\&)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00450\ \ \ byte\_buffer\_slice(span<\textcolor{keyword}{const}\ uint8\_t>\ bytes)\ :\ byte\_buffer\_slice(byte\_buffer\{bytes\})\ \{\}}
\DoxyCodeLine{00451\ \ \ byte\_buffer\_slice(std::initializer\_list<uint8\_t>\ bytes)\ :\ byte\_buffer\_slice(byte\_buffer\{bytes\})\ \{\}}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ \textcolor{comment}{///\ Conversion\ from\ byte\_buffer\ to\ byte\_buffer\_slice\ via\ move.}}
\DoxyCodeLine{00454\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a58a3d5f3247f95c6f85676796e2042c8}{byte\_buffer\_slice}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\&\ buf\_)\ :\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a58a3d5f3247f95c6f85676796e2042c8}{buf}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a58a3d5f3247f95c6f85676796e2042c8}{std}}::\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a58a3d5f3247f95c6f85676796e2042c8}{move}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a58a3d5f3247f95c6f85676796e2042c8}{buf\_}})),\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a58a3d5f3247f95c6f85676796e2042c8}{sliced\_view}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a58a3d5f3247f95c6f85676796e2042c8}{buf}})\ \{\}}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00456\ \ \ \textcolor{comment}{///\ Conversion\ from\ byte\_buffer\ to\ byte\_buffer\_slice\ via\ shallow\ copy.}}
\DoxyCodeLine{00457\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a767b9f994c95c5a1c2ca52b01887d0b9}{byte\_buffer\_slice}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ buf\_)\ :\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a767b9f994c95c5a1c2ca52b01887d0b9}{buf}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a767b9f994c95c5a1c2ca52b01887d0b9}{buf\_}}.\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a767b9f994c95c5a1c2ca52b01887d0b9}{copy}}()),\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a767b9f994c95c5a1c2ca52b01887d0b9}{sliced\_view}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a767b9f994c95c5a1c2ca52b01887d0b9}{buf}})\ \{\}}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ byte\_buffer\_slice(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ buf\_,\ size\_t\ offset,\ size\_t\ length)\ :}
\DoxyCodeLine{00460\ \ \ \ \ buf(buf\_.copy()),\ sliced\_view(buf,\ offset,\ length)}
\DoxyCodeLine{00461\ \ \ \{}
\DoxyCodeLine{00462\ \ \ \}}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \ \ \textcolor{comment}{///\ Conversion\ from\ a\ [start,\ end)\ interval\ of\ a\ byte\_buffer\ to\ a\ byte\_buffer\_slice.}}
\DoxyCodeLine{00465\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a82edc0c8641f1bc8cdc33d6834bd674b}{byte\_buffer\_slice}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\&\ buf\_,\ size\_t\ offset,\ size\_t\ length)\ :}
\DoxyCodeLine{00466\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a82edc0c8641f1bc8cdc33d6834bd674b}{buf}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a82edc0c8641f1bc8cdc33d6834bd674b}{std}}::\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a82edc0c8641f1bc8cdc33d6834bd674b}{move}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a82edc0c8641f1bc8cdc33d6834bd674b}{buf\_}})),\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a82edc0c8641f1bc8cdc33d6834bd674b}{sliced\_view}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a82edc0c8641f1bc8cdc33d6834bd674b}{buf}},\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a82edc0c8641f1bc8cdc33d6834bd674b}{offset}},\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a82edc0c8641f1bc8cdc33d6834bd674b}{length}})}
\DoxyCodeLine{00467\ \ \ \{}
\DoxyCodeLine{00468\ \ \ \}}
\DoxyCodeLine{00469\ }
\DoxyCodeLine{00470\ \ \ byte\_buffer\_slice(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ buf\_,\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\ view)\ :\ buf(buf\_.copy()),\ sliced\_view(view)}
\DoxyCodeLine{00471\ \ \ \{}
\DoxyCodeLine{00472\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_af4c77185b269332767c554ee6b23df8e}{srsran\_sanity\_check}}(view.begin()\ -\/\ byte\_buffer\_view\{buf\}.begin()\ <\ (\textcolor{keywordtype}{int})buf.length(),}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}byte\_buffer\_view\ is\ not\ part\ of\ the\ owned\ byte\_buffer"{}});}
\DoxyCodeLine{00474\ \ \ \}}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00476\ \ \ byte\_buffer\_slice(\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\&\ buf\_,\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\ view)\ :\ buf(std::move(buf\_)),\ sliced\_view(view)}
\DoxyCodeLine{00477\ \ \ \{}
\DoxyCodeLine{00478\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_af4c77185b269332767c554ee6b23df8e}{srsran\_sanity\_check}}(view.begin()\ -\/\ byte\_buffer\_view\{buf\}.begin()\ <\ (\textcolor{keywordtype}{int})buf.length(),}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}byte\_buffer\_view\ is\ not\ part\ of\ the\ owned\ byte\_buffer"{}});}
\DoxyCodeLine{00480\ \ \ \}}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00482\ \ \ \textcolor{comment}{///\ Copy\ assignment\ is\ disabled.\ Use\ std::move\ or\ .copy()\ instead}}
\DoxyCodeLine{00483\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_ac08043381c8be12fd10c8ba89b4b331f}{operator}}=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \ \ \textcolor{comment}{///\ Move\ assignment\ of\ byte\_buffer\_slice.\ It\ avoids\ unnecessary\ reference\ counting\ increment.}}
\DoxyCodeLine{00486\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a5879e1cb08f688beeff79350e3f8a5c3}{operator}}=(\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\&\ other)\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00488\ \ \ \textcolor{comment}{///\ Performs\ a\ shallow\ copy.\ Nested\ segment\ reference\ counter\ is\ incremented.}}
\DoxyCodeLine{00489\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a4874cbc94aaababa9af6e192018805a2}{copy}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_ad5004af82afe51d7633b797aa1733cca}{\{}}*\textcolor{keyword}{this}\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_ad5004af82afe51d7633b797aa1733cca}{\}}};\ \}}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \textcolor{keywordtype}{void}\ clear()}
\DoxyCodeLine{00492\ \ \ \{}
\DoxyCodeLine{00493\ \ \ \ \ buf.clear();}
\DoxyCodeLine{00494\ \ \ \ \ sliced\_view\ =\ \{\};}
\DoxyCodeLine{00495\ \ \ \}}
\DoxyCodeLine{00496\ }
\DoxyCodeLine{00497\ \ \ \textcolor{comment}{///\ Converts\ to\ non-\/owning\ byte\ buffer\ view.}}
\DoxyCodeLine{00498\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_aa0f9cc1c31982d12d935d10ef9e3a5f9}{view}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ sliced\_view;\ \}}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \textcolor{keyword}{explicit}\ operator\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ sliced\_view;\ \}}
\DoxyCodeLine{00501\ }
\DoxyCodeLine{00502\ \ \ \textcolor{comment}{///\ Returns\ another\ owning\ sub-\/view\ with\ dimensions\ specified\ in\ arguments.}}
\DoxyCodeLine{00503\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a7ef71ef1beb92e9e3c47f8ebc5fbcf7e}{make\_slice}}(size\_t\ offset,\ size\_t\ size)\ \textcolor{keyword}{const}}
\DoxyCodeLine{00504\ \ \ \{}
\DoxyCodeLine{00505\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(offset\ +\ size\ <=\ length(),\ \textcolor{stringliteral}{"{}Invalid\ view\ dimensions."{}});}
\DoxyCodeLine{00506\ \ \ \ \ \textcolor{keywordflow}{return}\ \{buf,\ sliced\_view.view(offset,\ size)\};}
\DoxyCodeLine{00507\ \ \ \}}
\DoxyCodeLine{00508\ }
\DoxyCodeLine{00509\ \ \ \textcolor{comment}{///\ Advances\ slice\ by\ provided\ offset.\ The\ length\ of\ the\ slice\ gets\ automatically\ reduced\ by\ the\ provided\ offset.}}
\DoxyCodeLine{00510\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a2d9b37bacea73af91cc2d21db8a47d90}{advance}}(size\_t\ offset)}
\DoxyCodeLine{00511\ \ \ \{}
\DoxyCodeLine{00512\ \ \ \ \ sliced\_view\ =\ byte\_buffer\_view\{sliced\_view.begin()\ +\ offset,\ sliced\_view.end()\};}
\DoxyCodeLine{00513\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00514\ \ \ \}}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ \ \ \textcolor{keywordtype}{bool}\ \ \ empty()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ sliced\_view.empty();\ \}}
\DoxyCodeLine{00517\ \ \ size\_t\ length()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ sliced\_view.length();\ \}}
\DoxyCodeLine{00518\ }
\DoxyCodeLine{00519\ \ \ \textcolor{keyword}{const}\ uint8\_t\&\ operator[](size\_t\ idx)\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ sliced\_view[idx];\ \}}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \ \ iterator\ \ \ \ \ \ \ begin()\ \{\ \textcolor{keywordflow}{return}\ sliced\_view.begin();\ \}}
\DoxyCodeLine{00522\ \ \ const\_iterator\ begin()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ sliced\_view.begin();\ \}}
\DoxyCodeLine{00523\ \ \ iterator\ \ \ \ \ \ \ end()\ \{\ \textcolor{keywordflow}{return}\ sliced\_view.end();\ \}}
\DoxyCodeLine{00524\ \ \ const\_iterator\ end()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ sliced\_view.end();\ \}}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \ \ \textcolor{comment}{///\ Returns\ a\ non-\/owning\ list\ of\ segments\ that\ compose\ the\ byte\_buffer.}}
\DoxyCodeLine{00527\ \ \ const\_byte\_buffer\_segment\_span\_range\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_af02b100f46b6f59d5fbce63db4e24b76}{segments}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ sliced\_view.segments();\ \}}
\DoxyCodeLine{00528\ }
\DoxyCodeLine{00529\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Equality\ comparison\ between\ byte\ buffer\ slice\ and\ another\ range.}}
\DoxyCodeLine{00530\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00531\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_a04bb31a2c490baf905a94163b0632a58}{operator}}==(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\ lhs,\ \textcolor{keyword}{const}\ T\&\ r)}
\DoxyCodeLine{00532\ \ \ \{}
\DoxyCodeLine{00533\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::compare\_byte\_buffer\_range(lhs,\ r);}
\DoxyCodeLine{00534\ \ \ \}}
\DoxyCodeLine{00535\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::enable\_if\_t<\textcolor{keyword}{not}\ is\_byte\_buffer\_range<T>::value,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00536\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator==(\textcolor{keyword}{const}\ T\&\ r,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\ rhs)}
\DoxyCodeLine{00537\ \ \ \{}
\DoxyCodeLine{00538\ \ \ \ \ \textcolor{keywordflow}{return}\ detail::compare\_byte\_buffer\_range(rhs,\ r);}
\DoxyCodeLine{00539\ \ \ \}}
\DoxyCodeLine{00540\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00541\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\ lhs,\ \textcolor{keyword}{const}\ T\&\ r)}
\DoxyCodeLine{00542\ \ \ \{}
\DoxyCodeLine{00543\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{not}(lhs\ ==\ r);}
\DoxyCodeLine{00544\ \ \ \}}
\DoxyCodeLine{00545\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::enable\_if\_t<\textcolor{keyword}{not}\ is\_byte\_buffer\_range<T>::value,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00546\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ T\&\ r,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\ rhs)}
\DoxyCodeLine{00547\ \ \ \{}
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{not}(rhs\ ==\ r);}
\DoxyCodeLine{00549\ \ \ \}}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00552\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ \ \ \ \ \ buf;}
\DoxyCodeLine{00553\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\ sliced\_view;}
\DoxyCodeLine{00554\ \};}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}::\mbox{\hyperlink{classsrsran_1_1byte__buffer_a60a8d0f483eeaaa7c31d576782070647}{append}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__slice}{byte\_buffer\_slice}}\&\ slice)}
\DoxyCodeLine{00557\ \{}
\DoxyCodeLine{00558\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer_af4563ca3bb9e2b8634e96ec87911c838}{append}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_af4563ca3bb9e2b8634e96ec87911c838}{(}}slice\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_aa0f9cc1c31982d12d935d10ef9e3a5f9}{.}}\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_aa0f9cc1c31982d12d935d10ef9e3a5f9}{view}}\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_aa0f9cc1c31982d12d935d10ef9e3a5f9}{(}}\mbox{\hyperlink{classsrsran_1_1byte__buffer__slice_aa0f9cc1c31982d12d935d10ef9e3a5f9}{)}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_af4563ca3bb9e2b8634e96ec87911c838}{)}};}
\DoxyCodeLine{00559\ \}}
\DoxyCodeLine{00560\ }
\DoxyCodeLine{00561\ \textcolor{comment}{///\ Used\ to\ read\ a\ range\ of\ bytes\ stored\ in\ a\ byte\_buffer.}}
\DoxyCodeLine{00562\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__reader}{byte\_buffer\_reader}}\ :\ \textcolor{keyword}{private}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}}
\DoxyCodeLine{00563\ \{}
\DoxyCodeLine{00564\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00565\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}::begin;}
\DoxyCodeLine{00566\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}::byte\_buffer\_view;}
\DoxyCodeLine{00567\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}::empty;}
\DoxyCodeLine{00568\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}::end;}
\DoxyCodeLine{00569\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}::length;}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00571\ \ \ byte\_buffer\_reader(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\&\ other)\ :\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}(other)\ \{\}}
\DoxyCodeLine{00572\ }
\DoxyCodeLine{00573\ \ \ \textcolor{comment}{///\ Obtain\ a\ range\ view\ to\ the\ bytes\ pointed\ by\ the\ reader.}}
\DoxyCodeLine{00574\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__reader_a006bd9a098c9983bcc13d04dd854f4c2}{view}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \{it,\ it\_end\};\ \}}
\DoxyCodeLine{00575\ }
\DoxyCodeLine{00576\ \ \ \textcolor{keyword}{const}\ uint8\_t\&\ operator*()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ *it;\ \}}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00578\ \ \ const\_iterator\ operator++()\ \{\ \textcolor{keywordflow}{return}\ ++it;\ \}}
\DoxyCodeLine{00579\ }
\DoxyCodeLine{00580\ \ \ \textcolor{comment}{///\ Advance\ reader\ by\ offset\ bytes.\ Returns\ an\ iterator\ to\ new\ position.}}
\DoxyCodeLine{00581\ \ \ const\_iterator\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__reader_a8ddf63a500ff44a3491528e5c434c7dd}{operator}}+=(size\_t\ offset)\ \{\ \textcolor{keywordflow}{return}\ it\ +=\ offset;\ \}}
\DoxyCodeLine{00582\ }
\DoxyCodeLine{00583\ \ \ \textcolor{comment}{///\ Advance\ offset\ bytes\ and\ returns\ view\ to\ skipped\ bytes.}}
\DoxyCodeLine{00584\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__reader_a81af2d017b46ea4b1e7d03d9470b1fec}{split\_and\_advance}}(size\_t\ offset)}
\DoxyCodeLine{00585\ \ \ \{}
\DoxyCodeLine{00586\ \ \ \ \ \textcolor{keyword}{auto}\ prev\_it\ =\ it;}
\DoxyCodeLine{00587\ \ \ \ \ it\ +=\ offset;}
\DoxyCodeLine{00588\ \ \ \ \ \textcolor{keywordflow}{return}\ \{prev\_it,\ it\};}
\DoxyCodeLine{00589\ \ \ \}}
\DoxyCodeLine{00590\ \};}
\DoxyCodeLine{00591\ }
\DoxyCodeLine{00592\ \textcolor{comment}{///\ Used\ to\ write\ into\ a\ range\ of\ bytes\ stored\ in\ a\ byte\_buffer.}}
\DoxyCodeLine{00593\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__writer}{byte\_buffer\_writer}}}
\DoxyCodeLine{00594\ \{}
\DoxyCodeLine{00595\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00596\ \ \ byte\_buffer\_writer(\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ other)\ :\ buffer(\&other)\ \{\}}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00598\ \ \ \textcolor{comment}{///\ Obtain\ a\ range\ view\ to\ the\ bytes\ pointed\ by\ the\ reader.}}
\DoxyCodeLine{00599\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a71a3c19ef897cd34d462eed52c8cf13e}{view}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ *buffer;\ \}}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \ \ \textcolor{comment}{///\ Appends\ bytes.}}
\DoxyCodeLine{00602\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a698c43cd05defb783d7e582bdda40bfe}{append}}(\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\_buffer\_view}}\ bytes)\ \{\ \textcolor{keywordflow}{return}\ buffer\mbox{\hyperlink{classsrsran_1_1byte__buffer_af4563ca3bb9e2b8634e96ec87911c838}{-\/>}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_af4563ca3bb9e2b8634e96ec87911c838}{append}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_af4563ca3bb9e2b8634e96ec87911c838}{(}}bytes\mbox{\hyperlink{classsrsran_1_1byte__buffer_af4563ca3bb9e2b8634e96ec87911c838}{)}};\ \}}
\DoxyCodeLine{00603\ }
\DoxyCodeLine{00604\ \ \ \textcolor{comment}{///\ Appends\ initializer\ list\ of\ bytes.}}
\DoxyCodeLine{00605\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a4248c953c08b59c4126f4f7357ea6724}{append}}(\textcolor{keyword}{const}\ std::initializer\_list<uint8\_t>\&\ bytes)}
\DoxyCodeLine{00606\ \ \ \{}
\DoxyCodeLine{00607\ \ \ \ \ \textcolor{keywordflow}{return}\ buffer-\/>append(span<\textcolor{keyword}{const}\ uint8\_t>\{bytes.begin(),\ bytes.size()\});}
\DoxyCodeLine{00608\ \ \ \}}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \ \ \textcolor{comment}{///\ Appends\ span\ of\ bytes.}}
\DoxyCodeLine{00611\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_ae2b8292663cc48cc440f04e939ed7439}{append}}(span<\textcolor{keyword}{const}\ uint8\_t>\ bytes)\ \{\ \textcolor{keywordflow}{return}\ buffer-\/>append(bytes);\ \}}
\DoxyCodeLine{00612\ }
\DoxyCodeLine{00613\ \ \ \textcolor{comment}{///\ Appends\ single\ byte.}}
\DoxyCodeLine{00614\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a772f2c568eae6f4c2aae66303423290c}{append}}(uint8\_t\ byte)\ \{\ \textcolor{keywordflow}{return}\ buffer\mbox{\hyperlink{classsrsran_1_1byte__buffer_ae74d9a2442b1103a2ac0852afd7f3e1a}{-\/>}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_ae74d9a2442b1103a2ac0852afd7f3e1a}{append}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_ae74d9a2442b1103a2ac0852afd7f3e1a}{(}}byte\mbox{\hyperlink{classsrsran_1_1byte__buffer_ae74d9a2442b1103a2ac0852afd7f3e1a}{)}};\ \}}
\DoxyCodeLine{00615\ }
\DoxyCodeLine{00616\ \ \ \mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\_NODISCARD}}\ \textcolor{keywordtype}{bool}\ append\_zeros(size\_t\ nof\_zeros)}
\DoxyCodeLine{00617\ \ \ \{}
\DoxyCodeLine{00618\ \ \ \ \ \textcolor{comment}{//\ TODO:\ optimize.}}
\DoxyCodeLine{00619\ \ \ \ \ \textcolor{keywordflow}{for}\ (size\_t\ i\ =\ 0;\ i\ <\ nof\_zeros;\ ++i)\ \{}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ buffer-\/>append(0))\ \{}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00623\ \ \ \ \ \}}
\DoxyCodeLine{00624\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00625\ \ \ \}}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00627\ \ \ \textcolor{comment}{///\ Checks\ last\ appended\ byte.}}
\DoxyCodeLine{00628\ \ \ uint8\_t\&\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a95e4d9f58101d7077b2bb9eb9214a5bc}{back}}()\ \{\ \textcolor{keywordflow}{return}\ buffer-\/>back();\ \}}
\DoxyCodeLine{00629\ }
\DoxyCodeLine{00630\ \ \ \textcolor{comment}{///\ Number\ of\ bytes\ in\ the\ byte\_buffer.}}
\DoxyCodeLine{00631\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a8818b11085b9f71510ab081f0c6d6102}{size\_t}}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a8818b11085b9f71510ab081f0c6d6102}{length}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ buffer-\/>length();\ \}}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00633\ \ \ \textcolor{comment}{///\ Checks\ whether\ any\ byte\ has\ been\ written.}}
\DoxyCodeLine{00634\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_ad19b31e296139396621c81839a17a572}{empty}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ buffer\mbox{\hyperlink{classsrsran_1_1byte__buffer_a4d77b44f1d800f8b2f92bb76e80512f3}{-\/>}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a4d77b44f1d800f8b2f92bb76e80512f3}{empty}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a4d77b44f1d800f8b2f92bb76e80512f3}{(}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a4d77b44f1d800f8b2f92bb76e80512f3}{)}};\ \}}
\DoxyCodeLine{00635\ }
\DoxyCodeLine{00636\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00637\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}*\ buffer;}
\DoxyCodeLine{00638\ \};}
\DoxyCodeLine{00639\ }
\DoxyCodeLine{00640\ \textcolor{comment}{///\ Converts\ a\ hex\ string\ (e.g.\ 01FA02)\ to\ a\ byte\ buffer.}}
\DoxyCodeLine{00641\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ \mbox{\hyperlink{namespacesrsran_a0ea08395ea7e678fa65063f01c5d2f02}{make\_byte\_buffer}}(\textcolor{keyword}{const}\ std::string\&\ hex\_str)}
\DoxyCodeLine{00642\ \{}
\DoxyCodeLine{00643\ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(hex\_str.size()\ \%\ 2\ ==\ 0,\ \textcolor{stringliteral}{"{}The\ number\ of\ hex\ digits\ must\ be\ even"{}});}
\DoxyCodeLine{00644\ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ ret;}
\DoxyCodeLine{00645\ \ \ \textcolor{keywordflow}{for}\ (size\_t\ i\ =\ 0;\ i\ <\ hex\_str.size();\ i\ +=\ 2)\ \{}
\DoxyCodeLine{00646\ \ \ \ \ uint8\_t\ val;}
\DoxyCodeLine{00647\ \ \ \ \ sscanf(hex\_str.data()\ +\ i,\ \textcolor{stringliteral}{"{}\%02hhX"{}},\ \&val);}
\DoxyCodeLine{00648\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ ret.append(val))\ \{}
\DoxyCodeLine{00649\ \ \ \ \ \ \ ret.clear();}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00651\ \ \ \ \ \}}
\DoxyCodeLine{00652\ \ \ \}}
\DoxyCodeLine{00653\ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00654\ \}}
\DoxyCodeLine{00655\ }
\DoxyCodeLine{00656\ \textcolor{comment}{///\ Perfoms\ a\ segment-\/wise\ copy\ of\ the\ byte\_buffer\ into\ a\ span<uint8\_t>\ object.}}
\DoxyCodeLine{00657\ \textcolor{comment}{///\ The\ length\ is\ limited\ by\ the\ length\ of\ src\ and\ dst,\ whichever\ is\ smaller.}}
\DoxyCodeLine{00658\ \textcolor{comment}{///}}
\DoxyCodeLine{00659\ \textcolor{comment}{///\ \(\backslash\)param\ src\ Source\ byte\_buffer.}}
\DoxyCodeLine{00660\ \textcolor{comment}{///\ \(\backslash\)param\ dst\ Destination\ span<uint8\_t>.}}
\DoxyCodeLine{00661\ \textcolor{comment}{///\ \(\backslash\)return\ Number\ of\ bytes\ copied.}}
\DoxyCodeLine{00662\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ByteBufferType>}
\DoxyCodeLine{00663\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacesrsran_a25b3f3ac88ceac35444d218355d229f9}{size\_t}}\ \mbox{\hyperlink{namespacesrsran_a25b3f3ac88ceac35444d218355d229f9}{copy\_segments}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesrsran_a25b3f3ac88ceac35444d218355d229f9}{ByteBufferType}}\&\ \mbox{\hyperlink{namespacesrsran_a25b3f3ac88ceac35444d218355d229f9}{src}},\ \mbox{\hyperlink{namespacesrsran_a25b3f3ac88ceac35444d218355d229f9}{span}}<\mbox{\hyperlink{namespacesrsran_a25b3f3ac88ceac35444d218355d229f9}{uint8\_t}}>\ \mbox{\hyperlink{namespacesrsran_a25b3f3ac88ceac35444d218355d229f9}{dst}})}
\DoxyCodeLine{00664\ \{}
\DoxyCodeLine{00665\ \ \ size\_t\ bytes\_copied\ \ \ \ =\ 0;}
\DoxyCodeLine{00666\ \ \ size\_t\ bytes\_remaining\ =\ std::min(src.length(),\ dst.size\_bytes());}
\DoxyCodeLine{00667\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ src\_segment\ :\ src.segments())\ \{}
\DoxyCodeLine{00668\ \ \ \ \ size\_t\ \ \ \ \ \ \ \ block\_size\ \ =\ std::min(bytes\_remaining,\ src\_segment.size());}
\DoxyCodeLine{00669\ \ \ \ \ span<uint8\_t>\ dst\_segment\ =\ dst.subspan(bytes\_copied,\ block\_size);}
\DoxyCodeLine{00670\ \ \ \ \ std::copy(src\_segment.begin(),\ src\_segment.begin()\ +\ block\_size,\ dst\_segment.begin());}
\DoxyCodeLine{00671\ \ \ \ \ bytes\_copied\ +=\ block\_size;}
\DoxyCodeLine{00672\ \ \ \ \ bytes\_remaining\ -\/=\ block\_size;}
\DoxyCodeLine{00673\ \ \ \ \ \textcolor{keywordflow}{if}\ (bytes\_remaining\ ==\ 0)\ \{}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00675\ \ \ \ \ \}}
\DoxyCodeLine{00676\ \ \ \}}
\DoxyCodeLine{00677\ \ \ \textcolor{keywordflow}{return}\ bytes\_copied;}
\DoxyCodeLine{00678\ \}}
\DoxyCodeLine{00679\ }
\DoxyCodeLine{00680\ \textcolor{comment}{///\ Provides\ a\ contiguous\ view\ of\ a\ byte\_buffer.}}
\DoxyCodeLine{00681\ \textcolor{comment}{///\ It\ is\ bound\ to\ the\ lifetime\ of\ the\ byte\_buffer\ \(\backslash\)p\ src\ and\ the\ temporary\ buffer\ \(\backslash\)p\ tmp\_mem,\ whichever\ is\ shorter.}}
\DoxyCodeLine{00682\ \textcolor{comment}{///\ Important:\ \(\backslash\)p\ tmp\_mem\ must\ be\ at\ least\ as\ large\ as\ \(\backslash\)p\ src.}}
\DoxyCodeLine{00683\ \textcolor{comment}{///}}
\DoxyCodeLine{00684\ \textcolor{comment}{///\ The\ memory\ used\ for\ the\ result\ and\ the\ complexity\ depends\ on\ whether\ \(\backslash\)p\ src\ is\ contiguous\ or\ not:}}
\DoxyCodeLine{00685\ \textcolor{comment}{///\ -\/\ Contiguous:\ Result\ is\ a\ view\ of\ the\ first\ and\ only\ segment\ of\ \(\backslash\)p\ src.}}
\DoxyCodeLine{00686\ \textcolor{comment}{///\ -\/\ Non-\/Contiguous:\ Result\ is\ a\ view\ of\ \(\backslash\)p\ tmp\_mem\ in\ which\ all\ segments\ of\ \(\backslash\)p\ src\ are\ copied.}}
\DoxyCodeLine{00687\ \textcolor{comment}{///}}
\DoxyCodeLine{00688\ \textcolor{comment}{///\ \(\backslash\)param\ src\ Source\ byte\_buffer.}}
\DoxyCodeLine{00689\ \textcolor{comment}{///\ \(\backslash\)param\ tmp\_mem\ Temporary\ memory\ for\ a\ possible\ copy.\ Must\ be\ at\ least\ as\ large\ as\ \(\backslash\)p\ src.}}
\DoxyCodeLine{00690\ \textcolor{comment}{///\ \(\backslash\)return\ A\ contiguous\ view\ of\ the\ byte\_buffer}}
\DoxyCodeLine{00691\ \textcolor{keyword}{inline}\ span<\textcolor{keyword}{const}\ uint8\_t>\ \mbox{\hyperlink{namespacesrsran_a06e71b6c89d45f7936dbec73a200f49c}{to\_span}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\&\ src,\ span<uint8\_t>\ tmp\_mem)}
\DoxyCodeLine{00692\ \{}
\DoxyCodeLine{00693\ \ \ \textcolor{comment}{//\ empty\ buffer}}
\DoxyCodeLine{00694\ \ \ \textcolor{keywordflow}{if}\ (src\mbox{\hyperlink{classsrsran_1_1byte__buffer_a4d77b44f1d800f8b2f92bb76e80512f3}{.}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a4d77b44f1d800f8b2f92bb76e80512f3}{empty}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a4d77b44f1d800f8b2f92bb76e80512f3}{(}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_a4d77b44f1d800f8b2f92bb76e80512f3}{)}})\ \{}
\DoxyCodeLine{00695\ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00696\ \ \ \}}
\DoxyCodeLine{00697\ }
\DoxyCodeLine{00698\ \ \ \textcolor{comment}{//\ is\ contiguous:\ shortcut\ without\ copy}}
\DoxyCodeLine{00699\ \ \ \textcolor{keywordflow}{if}\ (src\mbox{\hyperlink{classsrsran_1_1byte__buffer_af35457b6e2f22016d8f8736ed4dd405e}{.}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_af35457b6e2f22016d8f8736ed4dd405e}{is\_contiguous}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_af35457b6e2f22016d8f8736ed4dd405e}{(}}\mbox{\hyperlink{classsrsran_1_1byte__buffer_af35457b6e2f22016d8f8736ed4dd405e}{)}})\ \{}
\DoxyCodeLine{00700\ \ \ \ \ \textcolor{keywordflow}{return}\ *src.segments().begin();}
\DoxyCodeLine{00701\ \ \ \}}
\DoxyCodeLine{00702\ \ \ \textcolor{comment}{//\ non-\/contiguous:\ copy\ required}}
\DoxyCodeLine{00703\ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(src.length()\ <=\ tmp\_mem.size(),}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Insufficient\ temporary\ memory\ to\ fit\ the\ byte\_buffer.\ buffer\_size=\{\},\ tmp\_size=\{\}"{}},}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src.length(),}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tmp\_mem.size());}
\DoxyCodeLine{00707\ \ \ span<uint8\_t>\ result\ =\ \{tmp\_mem.data(),\ src.length()\};}
\DoxyCodeLine{00708\ \ \ copy\_segments(src,\ result);}
\DoxyCodeLine{00709\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00710\ \}}
\DoxyCodeLine{00711\ }
\DoxyCodeLine{00712\ \}\ \textcolor{comment}{//\ namespace\ srsran}}
\DoxyCodeLine{00713\ }
\DoxyCodeLine{00714\ \textcolor{keyword}{namespace}\ fmt\ \{}
\DoxyCodeLine{00715\ }
\DoxyCodeLine{00716\ \textcolor{comment}{///\ \(\backslash\)brief\ Custom\ formatter\ for\ byte\_buffer\_view.}}
\DoxyCodeLine{00717\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00718\ \textcolor{keyword}{struct}\ formatter<srsran::byte\_buffer\_view>\ \{}
\DoxyCodeLine{00719\ \ \ \textcolor{keyword}{enum}\ \{\ hexadecimal,\ binary\ \}\ mode\ =\ hexadecimal;}
\DoxyCodeLine{00720\ }
\DoxyCodeLine{00721\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ParseContext>}
\DoxyCodeLine{00722\ \ \ \textcolor{keyword}{auto}\ parse(ParseContext\&\ ctx)\ -\/>\ \textcolor{keyword}{decltype}(ctx.begin())}
\DoxyCodeLine{00723\ \ \ \{}
\DoxyCodeLine{00724\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ ctx.begin();}
\DoxyCodeLine{00725\ \ \ \ \ \textcolor{keywordflow}{while}\ (it\ !=\ ctx.end()\ \textcolor{keyword}{and}\ *it\ !=\ \textcolor{stringliteral}{'\}'})\ \{}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (*it\ ==\ \textcolor{stringliteral}{'b'})\ \{}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ mode\ =\ binary;}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00729\ \ \ \ \ \ \ ++it;}
\DoxyCodeLine{00730\ \ \ \ \ \}}
\DoxyCodeLine{00731\ \ \ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{00732\ \ \ \}}
\DoxyCodeLine{00733\ }
\DoxyCodeLine{00734\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{00735\ \ \ \textcolor{keyword}{auto}\ format(\textcolor{keyword}{const}\ srsran::byte\_buffer\_view\&\ buf,\ FormatContext\&\ ctx)\ -\/>\ \textcolor{keyword}{decltype}(std::declval<FormatContext>().out())}
\DoxyCodeLine{00736\ \ \ \{}
\DoxyCodeLine{00737\ \ \ \ \ \textcolor{keywordflow}{if}\ (mode\ ==\ hexadecimal)\ \{}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ format\_to(ctx.out(),\ \textcolor{stringliteral}{"{}\{:0>2x\}"{}},\ fmt::join(buf.begin(),\ buf.end(),\ \textcolor{stringliteral}{"{}\ "{}}));}
\DoxyCodeLine{00739\ \ \ \ \ \}}
\DoxyCodeLine{00740\ \ \ \ \ \textcolor{keywordflow}{return}\ format\_to(ctx.out(),\ \textcolor{stringliteral}{"{}\{:0>8b\}"{}},\ fmt::join(buf.begin(),\ buf.end(),\ \textcolor{stringliteral}{"{}\ "{}}));}
\DoxyCodeLine{00741\ \ \ \}}
\DoxyCodeLine{00742\ \};}
\DoxyCodeLine{00743\ }
\DoxyCodeLine{00744\ \textcolor{comment}{///\ \(\backslash\)brief\ Custom\ formatter\ for\ byte\_buffer.}}
\DoxyCodeLine{00745\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00746\ \textcolor{keyword}{struct}\ formatter<srsran::byte\_buffer>\ \{}
\DoxyCodeLine{00747\ \ \ \textcolor{keyword}{enum}\ \{\ hexadecimal,\ binary\ \}\ mode\ =\ hexadecimal;}
\DoxyCodeLine{00748\ }
\DoxyCodeLine{00749\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ParseContext>}
\DoxyCodeLine{00750\ \ \ \textcolor{keyword}{auto}\ parse(ParseContext\&\ ctx)\ -\/>\ \textcolor{keyword}{decltype}(ctx.begin())}
\DoxyCodeLine{00751\ \ \ \{}
\DoxyCodeLine{00752\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ ctx.begin();}
\DoxyCodeLine{00753\ \ \ \ \ \textcolor{keywordflow}{while}\ (it\ !=\ ctx.end()\ \textcolor{keyword}{and}\ *it\ !=\ \textcolor{stringliteral}{'\}'})\ \{}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (*it\ ==\ \textcolor{stringliteral}{'b'})\ \{}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ mode\ =\ binary;}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00757\ \ \ \ \ \ \ ++it;}
\DoxyCodeLine{00758\ \ \ \ \ \}}
\DoxyCodeLine{00759\ \ \ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{00760\ \ \ \}}
\DoxyCodeLine{00761\ }
\DoxyCodeLine{00762\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{00763\ \ \ \textcolor{keyword}{auto}\ format(\textcolor{keyword}{const}\ srsran::byte\_buffer\&\ buf,\ FormatContext\&\ ctx)\ -\/>\ \textcolor{keyword}{decltype}(std::declval<FormatContext>().out())}
\DoxyCodeLine{00764\ \ \ \{}
\DoxyCodeLine{00765\ \ \ \ \ \textcolor{keywordflow}{if}\ (mode\ ==\ hexadecimal)\ \{}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ format\_to(ctx.out(),\ \textcolor{stringliteral}{"{}\{:0>2x\}"{}},\ fmt::join(buf.begin(),\ buf.end(),\ \textcolor{stringliteral}{"{}\ "{}}));}
\DoxyCodeLine{00767\ \ \ \ \ \}}
\DoxyCodeLine{00768\ \ \ \ \ \textcolor{keywordflow}{return}\ format\_to(ctx.out(),\ \textcolor{stringliteral}{"{}\{:0>8b\}"{}},\ fmt::join(buf.begin(),\ buf.end(),\ \textcolor{stringliteral}{"{}\ "{}}));}
\DoxyCodeLine{00769\ \ \ \}}
\DoxyCodeLine{00770\ \};}
\DoxyCodeLine{00771\ }
\DoxyCodeLine{00772\ \textcolor{comment}{///\ \(\backslash\)brief\ Custom\ formatter\ for\ byte\_buffer\_slice.}}
\DoxyCodeLine{00773\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00774\ \textcolor{keyword}{struct}\ formatter<srsran::byte\_buffer\_slice>\ :\ \textcolor{keyword}{public}\ formatter<srsran::byte\_buffer\_view>\ \{}
\DoxyCodeLine{00775\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{00776\ \ \ \textcolor{keyword}{auto}\ format(\textcolor{keyword}{const}\ srsran::byte\_buffer\_slice\&\ buf,\ FormatContext\&\ ctx)\ -\/>\ \textcolor{keyword}{decltype}(std::declval<FormatContext>().out())}
\DoxyCodeLine{00777\ \ \ \{}
\DoxyCodeLine{00778\ \ \ \ \ \textcolor{keywordflow}{return}\ formatter<srsran::byte\_buffer\_view>::format(buf.view(),\ ctx);}
\DoxyCodeLine{00779\ \ \ \}}
\DoxyCodeLine{00780\ \};}
\DoxyCodeLine{00781\ }
\DoxyCodeLine{00782\ \}\ \textcolor{comment}{//\ namespace\ fmt}}

\end{DoxyCode}
