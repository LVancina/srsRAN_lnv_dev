\doxysection{srsran\+::radio\+\_\+zmq\+\_\+tx\+\_\+channel Class Reference}
\hypertarget{classsrsran_1_1radio__zmq__tx__channel}{}\label{classsrsran_1_1radio__zmq__tx__channel}\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}


Collaboration diagram for srsran\+::radio\+\_\+zmq\+\_\+tx\+\_\+channel\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=227pt]{df/d7b/classsrsran_1_1radio__zmq__tx__channel__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsrsran_1_1radio__zmq__tx__channel_1_1channel__description}{channel\+\_\+description}}
\begin{DoxyCompactList}\small\item\em Describes the necessary parameters to create a ZMQ Tx channel. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel_ab403be80e76b9b73509d37be4c8b37f2}{radio\+\_\+zmq\+\_\+tx\+\_\+channel}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \texorpdfstring{$\ast$}{*}zmq\+\_\+context, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1radio__zmq__tx__channel_1_1channel__description}{channel\+\_\+description}} \&config, \mbox{\hyperlink{classsrsran_1_1radio__notification__handler}{radio\+\_\+notification\+\_\+handler}} \&notification\+\_\+handler, \mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{async\+\_\+executor\+\_\+}})
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel_aa778b0944de5cdd31e88d5b09988ed42}{is\+\_\+successful}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel_a04cc307d938516c1beb38ce9858a714b}{receive\+\_\+request}} ()
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel_a9d5f6d763262c8e0a90aeb446334e623}{send\+\_\+response}} ()
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel_a734c0f4ef8a23c60f9a8ed75be934e4d}{run\+\_\+async}} ()
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel_a78bd52b5ac5ab46987dcd808513d04e3}{align}} (uint64\+\_\+t timestamp, std\+::chrono\+::milliseconds timeout)
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel_a70be609aeb5e16e12a25fb65bf3640db}{transmit}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$ buffer)
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel_a58641126c29760365e901e188a72af34}{start}} (uint64\+\_\+t \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{init\+\_\+time}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel_a4854f62a6fe2881a7d65b729ab1c9006}{stop}} ()
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel_a6f20806b499e8f6945319033c654c649}{wait\+\_\+stop}} ()
\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_ab403be80e76b9b73509d37be4c8b37f2}\label{classsrsran_1_1radio__zmq__tx__channel_ab403be80e76b9b73509d37be4c8b37f2} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!radio\_zmq\_tx\_channel@{radio\_zmq\_tx\_channel}}
\index{radio\_zmq\_tx\_channel@{radio\_zmq\_tx\_channel}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{radio\_zmq\_tx\_channel()}{radio\_zmq\_tx\_channel()}}
{\footnotesize\ttfamily radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::radio\+\_\+zmq\+\_\+tx\+\_\+channel (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \texorpdfstring{$\ast$}{*}}]{zmq\+\_\+context,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1radio__zmq__tx__channel_1_1channel__description}{channel\+\_\+description}} \&}]{config,  }\item[{\mbox{\hyperlink{classsrsran_1_1radio__notification__handler}{radio\+\_\+notification\+\_\+handler}} \&}]{notification\+\_\+handler,  }\item[{\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&}]{async\+\_\+executor\+\_\+ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00033\ \ \ stream\_id(config.stream\_id),}
\DoxyCodeLine{00034\ \ \ channel\_id(config.channel\_id),}
\DoxyCodeLine{00035\ \ \ channel\_id\_str(config.channel\_id\_str),}
\DoxyCodeLine{00036\ \ \ socket\_type(config.socket\_type),}
\DoxyCodeLine{00037\ \ \ logger(srslog::fetch\_basic\_logger(config.channel\_id\_str,\ \textcolor{keyword}{false})),}
\DoxyCodeLine{00038\ \ \ circular\_buffer(config.buffer\_size),}
\DoxyCodeLine{00039\ \ \ buffer(config.buffer\_size\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\_t}})),}
\DoxyCodeLine{00040\ \ \ notification\_handler(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{notification\_handler\_}}),}
\DoxyCodeLine{00041\ \ \ async\_executor(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{async\_executor\_}})}
\DoxyCodeLine{00042\ \{}
\DoxyCodeLine{00043\ \ \ \textcolor{comment}{//\ Set\ log\ level.}}
\DoxyCodeLine{00044\ \ \ logger.\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl_a70bfaf5c4255d339daae19d8d7194b23}{set\_level}}(config.log\_level);}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \textcolor{comment}{//\ Validate\ the\ socket\ type.}}
\DoxyCodeLine{00047\ \ \ \textcolor{keywordflow}{if}\ (VALID\_SOCKET\_TYPES.count(config.socket\_type)\ ==\ 0)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Invalid\ transmitter\ type\ \{\}\ (\{\})."{}},\ config.socket\_type,\ config.address);}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00050\ \ \ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{comment}{//\ Create\ socket.}}
\DoxyCodeLine{00053\ \ \ sock\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_socket}}(zmq\_context,\ config.socket\_type);}
\DoxyCodeLine{00054\ \ \ \textcolor{keywordflow}{if}\ (sock\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00055\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ open\ transmitter\ socket\ (\{\}).\ \{\}."{}},\ config.address,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}()));}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00057\ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \textcolor{comment}{//\ Bind\ socket.}}
\DoxyCodeLine{00060\ \ \ logger.info(\textcolor{stringliteral}{"{}Binding\ to\ address\ \{\}."{}},\ config.address);}
\DoxyCodeLine{00061\ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bind\_success}}\ \ \ \ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00062\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bind\_trial\_count}}\ =\ 0;}
\DoxyCodeLine{00063\ \ \ \textcolor{keywordflow}{while}\ (!\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bind\_success}}\ \&\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bind\_trial\_count}}\ !=\ BIND\_MAX\_TRIALS)\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ Sleep\ if\ it\ is\ not\ the\ first\ trial.}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bind\_trial\_count}}\ !=\ 0)\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_sleep}}(BIND\_FAILURE\_SLEEP\_SECONDS);}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{//\ Try\ to\ bind.}}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bind\_success}}\ =\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_bind}}(sock,\ config.address.c\_str())\ ==\ 0);}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bind\_success}})\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \textcolor{comment}{//\ Unhandled\ error.}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}()\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EADDRINUSE}})\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \textcolor{comment}{//\ Address\ already\ in\ use\ error.}}
\DoxyCodeLine{00078\ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}Failed\ to\ bind\ transmitter\ socket\ (\{\}).\ \{\}.\ Trying\ in\ 1\ seconds."{}},}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.address,}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}()));}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bind\_trial\_count}}++;}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ \ \ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bind\_success}})\ \{}
\DoxyCodeLine{00086\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ bind\ transmitter\ socket\ (\{\}).\ \{\}."{}},\ config.address,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}()));}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00088\ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \textcolor{comment}{//\ If\ a\ timeout\ is\ set...}}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordflow}{if}\ (config.trx\_timeout\_ms)\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{int}\ timeout\ =\ config.trx\_timeout\_ms;}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{comment}{//\ Set\ receive\ timeout.}}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_setsockopt}}(sock,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ZMQ\_RCVTIMEO}},\ \&timeout,\ \textcolor{keyword}{sizeof}(timeout))\ ==\ -\/1)\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ set\ receive\ timeout\ on\ tx\ socket.\ \{\}."{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}()));}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ Set\ send\ timeout.}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_setsockopt}}(sock,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ZMQ\_SNDTIMEO}},\ \&timeout,\ \textcolor{keyword}{sizeof}(timeout))\ ==\ -\/1)\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ set\ send\ timeout\ on\ tx\ socket.\ \{\}."{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}()));}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00104\ \ \ \ \ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{comment}{//\ Set\ linger\ timeout.}}
\DoxyCodeLine{00107\ \ \ \ \ timeout\ =\ config.linger\_timeout\_ms;}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_setsockopt}}(sock,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ZMQ\_LINGER}},\ \&timeout,\ \textcolor{keyword}{sizeof}(timeout))\ ==\ -\/1)\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ set\ linger\ timeout\ on\ tx\ socket.\ \{\}."{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}()));}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00111\ \ \ \ \ \}}
\DoxyCodeLine{00112\ \ \ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \textcolor{comment}{//\ Indicate\ the\ initialization\ was\ successful.}}
\DoxyCodeLine{00115\ \ \ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a4e2c7d5df82a56297500825ba4e61876}{init\_successful}}();}
\DoxyCodeLine{00116\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_a35a90e123ad3a8738b05df2345d3bbd9}\label{classsrsran_1_1radio__zmq__tx__channel_a35a90e123ad3a8738b05df2345d3bbd9} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!````~radio\_zmq\_tx\_channel@{\texorpdfstring{$\sim$}{\string~}radio\_zmq\_tx\_channel}}
\index{````~radio\_zmq\_tx\_channel@{\texorpdfstring{$\sim$}{\string~}radio\_zmq\_tx\_channel}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}radio\_zmq\_tx\_channel()}{\string~radio\_zmq\_tx\_channel()}}
{\footnotesize\ttfamily radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::\texorpdfstring{$\sim$}{\string~}radio\+\_\+zmq\+\_\+tx\+\_\+channel (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00119\ \{}
\DoxyCodeLine{00120\ \ \ \textcolor{comment}{//\ Close\ socket\ if\ opened.}}
\DoxyCodeLine{00121\ \ \ \textcolor{keywordflow}{if}\ (sock\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_close}}(sock);}
\DoxyCodeLine{00123\ \ \ \ \ sock\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00124\ \ \ \}}
\DoxyCodeLine{00125\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_a78bd52b5ac5ab46987dcd808513d04e3}\label{classsrsran_1_1radio__zmq__tx__channel_a78bd52b5ac5ab46987dcd808513d04e3} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!align@{align}}
\index{align@{align}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{align()}{align()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::align (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{timestamp,  }\item[{std\+::chrono\+::milliseconds}]{timeout }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00255\ \{}
\DoxyCodeLine{00256\ \ \ \textcolor{keywordtype}{unsigned}\ count\ =\ 0;}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \textcolor{comment}{//\ Early\ return\ if\ alignment\ is\ unnecessary.}}
\DoxyCodeLine{00259\ \ \ \textcolor{keywordflow}{if}\ (sample\_count\ >=\ timestamp)\ \{}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{comment}{//\ Return\ true\ if\ the\ timestamp\ is\ in\ the\ past.}}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keywordflow}{return}\ sample\_count\ >\ timestamp;}
\DoxyCodeLine{00262\ \ \ \}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \textcolor{comment}{//\ Protect\ concurrent\ alignment\ and\ transmit.}}
\DoxyCodeLine{00265\ \ \ std::unique\_lock<std::mutex>\ lock(transmit\_alignment\_mutex);}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \textcolor{comment}{//\ If\ the\ channel\ has\ never\ transmitted,\ skip\ wait.}}
\DoxyCodeLine{00268\ \ \ \textcolor{keywordflow}{if}\ (is\_tx\_enabled\ \&\&\ (timeout.count()\ !=\ 0))\ \{}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{comment}{//\ Otherwise,\ wait\ for\ the\ transmitter\ to\ transmit.}}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_not\_timeout}}\ =}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ transmit\_alignment\_cvar.wait\_for(lock,\ timeout,\ [\textcolor{keyword}{this},\ timestamp]()\ \{\ \textcolor{keywordflow}{return}\ sample\_count\ >=\ timestamp;\ \});}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_not\_timeout}})\ \{}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ sample\_count\ >\ timestamp;}
\DoxyCodeLine{00274\ \ \ \ \ \}}
\DoxyCodeLine{00275\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Transmit\ timed\ out.\ Enabling\ transmit\ zeros."{}});}
\DoxyCodeLine{00276\ \ \ \ \ is\_tx\_enabled\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00277\ \ \ \}}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ std::array<cf\_t,\ 1024>\ zero\_buffer\ =\ \{\};}
\DoxyCodeLine{00280\ \ \ \textcolor{comment}{//\ Transmit\ zeros\ until\ the\ sample\ count\ reaches\ the\ timestamp.}}
\DoxyCodeLine{00281\ \ \ \textcolor{keywordflow}{while}\ (sample\_count\ <\ timestamp\ \&\&\ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a006067ef5e4e6e09286fd23e2b6a0436}{is\_running}}())\ \{}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{to\_send}}\ =\ std::min(zero\_buffer.size(),\ timestamp\ -\/\ sample\_count);}
\DoxyCodeLine{00283\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<cf\_t>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zeros}}\ \ \ =\ \mbox{\hyperlink{classsrsran_1_1span}{span<cf\_t>}}(zero\_buffer.begin(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{to\_send}});}
\DoxyCodeLine{00284\ \ \ \ \ transmit\_samples(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zeros}});}
\DoxyCodeLine{00285\ \ \ \ \ count\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zeros}}.size();}
\DoxyCodeLine{00286\ \ \ \}}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \textcolor{keywordflow}{if}\ (count\ >\ 0)\ \{}
\DoxyCodeLine{00289\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Aligned\ with\ \{\}\ zeros."{}},\ count);}
\DoxyCodeLine{00290\ \ \ \}}
\DoxyCodeLine{00291\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00292\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_aa778b0944de5cdd31e88d5b09988ed42}\label{classsrsran_1_1radio__zmq__tx__channel_aa778b0944de5cdd31e88d5b09988ed42} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!is\_successful@{is\_successful}}
\index{is\_successful@{is\_successful}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{is\_successful()}{is\_successful()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::is\+\_\+successful (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00113\ \{\ \textcolor{keywordflow}{return}\ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_affc074f5a76273a360f9fb5deaa52c59}{is\_initiated}}();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_a04cc307d938516c1beb38ce9858a714b}\label{classsrsran_1_1radio__zmq__tx__channel_a04cc307d938516c1beb38ce9858a714b} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!receive\_request@{receive\_request}}
\index{receive\_request@{receive\_request}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{receive\_request()}{receive\_request()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::receive\+\_\+request (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00128\ \{}
\DoxyCodeLine{00129\ \ \ \textcolor{comment}{//\ Receive\ Transmit\ request\ is\ socket\ type\ is\ REPLY\ and\ no\ request\ is\ available.}}
\DoxyCodeLine{00130\ \ \ \textcolor{keywordflow}{if}\ (socket\_type\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ZMQ\_REP}})\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//\ Receive\ request.}}
\DoxyCodeLine{00132\ \ \ \ \ \mbox{\hyperlink{classuint8__t}{uint8\_t}}\ dummy\ =\ 0;}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ n\ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_recv}}(sock,\ \&dummy,\ \textcolor{keyword}{sizeof}(dummy),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ZMQ\_DONTWAIT}});}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{comment}{//\ Request\ received.}}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ >\ 0)\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Socket\ received\ request."{}});}
\DoxyCodeLine{00138\ \ \ \ \ \ \ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a9280f4c354fe28bd80d149607f458b29}{request\_received}}();}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00140\ \ \ \ \ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{comment}{//\ Error.}}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 0)\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \textcolor{comment}{//\ Error\ happened.}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{err}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}();}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{err}}\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EFSM}}\ ||\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{err}}\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EAGAIN}})\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ignore\ timeout\ and\ FSM\ error.}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ error\ cannot\ be\ ignored.}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Socket\ failed\ to\ receive\ request.\ \{\}."{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}()));}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_aa45bbe954f56ea27b24af5ae7006e455}{on\_error}}();}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00154\ \ \ \ \ \}}
\DoxyCodeLine{00155\ \ \ \}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \textcolor{comment}{//\ Implement\ other\ socket\ types\ here.}}
\DoxyCodeLine{00158\ \ \ \textcolor{comment}{//\ ...}}
\DoxyCodeLine{00159\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_a734c0f4ef8a23c60f9a8ed75be934e4d}\label{classsrsran_1_1radio__zmq__tx__channel_a734c0f4ef8a23c60f9a8ed75be934e4d} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!run\_async@{run\_async}}
\index{run\_async@{run\_async}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{run\_async()}{run\_async()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::run\+\_\+async (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00201\ \{}
\DoxyCodeLine{00202\ \ \ \textcolor{comment}{//\ Receive\ request\ if\ there\ is\ no\ pending\ request.\ Otherwise,\ send\ response.}}
\DoxyCodeLine{00203\ \ \ \textcolor{keywordflow}{if}\ (!state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a7bc6840b118b5ec174db823cf407c18f}{has\_pending\_request}}())\ \{}
\DoxyCodeLine{00204\ \ \ \ \ receive\_request();}
\DoxyCodeLine{00205\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00206\ \ \ \ \ send\_response();}
\DoxyCodeLine{00207\ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \textcolor{comment}{//\ Check\ if\ the\ state\ timer\ expired.}}
\DoxyCodeLine{00210\ \ \ \textcolor{keywordflow}{if}\ (state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_af7bcaa163a319aabf132e1d074a19549}{has\_wait\_expired}}())\ \{}
\DoxyCodeLine{00211\ \ \ \ \ logger.info(\textcolor{stringliteral}{"{}Waiting\ for\ \{\}."{}},\ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a7bc6840b118b5ec174db823cf407c18f}{has\_pending\_request}}()\ ?\ \textcolor{stringliteral}{"{}data"{}}\ :\ \textcolor{stringliteral}{"{}request"{}});}
\DoxyCodeLine{00212\ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \textcolor{comment}{//\ Feedback\ task\ if\ not\ stopped.}}
\DoxyCodeLine{00215\ \ \ \textcolor{keywordflow}{if}\ (state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a006067ef5e4e6e09286fd23e2b6a0436}{is\_running}}())\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ async\_executor.\mbox{\hyperlink{classsrsran_1_1task__executor_a296e1c4285dafdbfcbc912c3006690a4}{defer}}([\textcolor{keyword}{this}]()\ \{\ run\_async();\ \}))\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Unable\ to\ initiate\ async\ task"{}});}
\DoxyCodeLine{00218\ \ \ \ \ \}}
\DoxyCodeLine{00219\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00220\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Stopped\ asynchronous\ task."{}});}
\DoxyCodeLine{00221\ \ \ \ \ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a48737cd8081bd695b0172a3b8f6b958c}{async\_task\_stopped}}();}
\DoxyCodeLine{00222\ \ \ \}}
\DoxyCodeLine{00223\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_a9d5f6d763262c8e0a90aeb446334e623}\label{classsrsran_1_1radio__zmq__tx__channel_a9d5f6d763262c8e0a90aeb446334e623} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!send\_response@{send\_response}}
\index{send\_response@{send\_response}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{send\_response()}{send\_response()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::send\+\_\+response (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00162\ \{}
\DoxyCodeLine{00163\ \ \ \textcolor{comment}{//\ Try\ popping\ samples\ until\ the\ circular\ buffer\ is\ empty.}}
\DoxyCodeLine{00164\ \ \ \textcolor{keywordtype}{unsigned}\ count\ =\ circular\_buffer.\mbox{\hyperlink{classsrsran_1_1detail_1_1base__blocking__queue_af1dcbeceaf0fa122c07152441f6fd988}{try\_pop}}(buffer.begin(),\ buffer.end());}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \textcolor{comment}{//\ Check\ if\ it\ is\ still\ running.}}
\DoxyCodeLine{00167\ \ \ \textcolor{keywordflow}{if}\ (!state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a006067ef5e4e6e09286fd23e2b6a0436}{is\_running}}())\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00169\ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \textcolor{comment}{//\ If\ no\ samples\ are\ available\ return\ without\ transitioning\ state.}}
\DoxyCodeLine{00172\ \ \ \textcolor{keywordflow}{if}\ (count\ ==\ 0)\ \{}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00174\ \ \ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \textcolor{comment}{//\ Otherwise,\ send\ samples\ over\ socket.}}
\DoxyCodeLine{00177\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbytes}}\ =\ count\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\_t}});}
\DoxyCodeLine{00178\ \ \ \textcolor{keywordtype}{int}\ n\ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_send}}(sock,\ (\textcolor{keywordtype}{void}*)buffer.data(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbytes}},\ 0);}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \textcolor{comment}{//\ Check\ if\ an\ error\ occurred.}}
\DoxyCodeLine{00181\ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 0)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Exception\ to\ transmit\ data.\ \{\}."{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}()));}
\DoxyCodeLine{00183\ \ \ \ \ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_aa45bbe954f56ea27b24af5ae7006e455}{on\_error}}();}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00185\ \ \ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \textcolor{comment}{//\ Check\ if\ the\ number\ of\ bytes\ is\ correct.}}
\DoxyCodeLine{00188\ \ \ \textcolor{keywordflow}{if}\ (n\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbytes}})\ \{}
\DoxyCodeLine{00189\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ transmit\ data.\ Unmatched\ number\ of\ bytes\ \{\}!=\{\}."{}},\ n,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbytes}});}
\DoxyCodeLine{00190\ \ \ \ \ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_aa45bbe954f56ea27b24af5ae7006e455}{on\_error}}();}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00192\ \ \ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ logger.debug(\textcolor{stringliteral}{"{}Socket\ sent\ \{\}\ samples."{}},\ count);}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \textcolor{comment}{//\ If\ successful\ transition\ to\ wait\ for\ data.}}
\DoxyCodeLine{00197\ \ \ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a05fa11c083c963446264ab08bbea9f9f}{data\_sent}}();}
\DoxyCodeLine{00198\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_a58641126c29760365e901e188a72af34}\label{classsrsran_1_1radio__zmq__tx__channel_a58641126c29760365e901e188a72af34} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!start@{start}}
\index{start@{start}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::start (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{init\+\_\+time }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00312\ \{}
\DoxyCodeLine{00313\ \ \ sample\_count\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{init\_time}};}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \textcolor{comment}{//\ Start\ processing.}}
\DoxyCodeLine{00316\ \ \ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a365d3657ef4bdfc3ea8020d451a4e4c1}{on\_start}}();}
\DoxyCodeLine{00317\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ async\_executor.\mbox{\hyperlink{classsrsran_1_1task__executor_a296e1c4285dafdbfcbc912c3006690a4}{defer}}([\textcolor{keyword}{this}]()\ \{\ run\_async();\ \}))\ \{}
\DoxyCodeLine{00318\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Unable\ to\ initiate\ radio\ zmq\ tx\ async\ task"{}});}
\DoxyCodeLine{00319\ \ \ \}}
\DoxyCodeLine{00320\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_a4854f62a6fe2881a7d65b729ab1c9006}\label{classsrsran_1_1radio__zmq__tx__channel_a4854f62a6fe2881a7d65b729ab1c9006} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!stop@{stop}}
\index{stop@{stop}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00323\ \{}
\DoxyCodeLine{00324\ \ \ logger.debug(\textcolor{stringliteral}{"{}Stopping..."{}});}
\DoxyCodeLine{00325\ \ \ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_ad981fc293f4afc46508cad92e2d21ad2}{stop}}();}
\DoxyCodeLine{00326\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_a70be609aeb5e16e12a25fb65bf3640db}\label{classsrsran_1_1radio__zmq__tx__channel_a70be609aeb5e16e12a25fb65bf3640db} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!transmit@{transmit}}
\index{transmit@{transmit}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{transmit()}{transmit()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::transmit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$}]{buffer }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00295\ \{}
\DoxyCodeLine{00296\ \ \ logger.debug(\textcolor{stringliteral}{"{}Requested\ to\ transmit\ \{\}\ samples."{}},\ data.size());}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \textcolor{comment}{//\ Protect\ concurrent\ alignment\ and\ transmit.}}
\DoxyCodeLine{00299\ \ \ std::unique\_lock<std::mutex>\ lock(transmit\_alignment\_mutex);}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \textcolor{comment}{//\ Actual\ baseband\ transmission.}}
\DoxyCodeLine{00302\ \ \ transmit\_samples(data);}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \textcolor{comment}{//\ Indicate\ that\ transmit\ is\ enabled.}}
\DoxyCodeLine{00305\ \ \ is\_tx\_enabled\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \ \ \textcolor{comment}{//\ Notify\ transmission.}}
\DoxyCodeLine{00308\ \ \ transmit\_alignment\_cvar.notify\_all();}
\DoxyCodeLine{00309\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__zmq__tx__channel_a6f20806b499e8f6945319033c654c649}\label{classsrsran_1_1radio__zmq__tx__channel_a6f20806b499e8f6945319033c654c649} 
\index{srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}!wait\_stop@{wait\_stop}}
\index{wait\_stop@{wait\_stop}!srsran::radio\_zmq\_tx\_channel@{srsran::radio\_zmq\_tx\_channel}}
\doxysubsubsection{\texorpdfstring{wait\_stop()}{wait\_stop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} radio\+\_\+zmq\+\_\+tx\+\_\+channel\+::wait\+\_\+stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00329\ \{}
\DoxyCodeLine{00330\ \ \ state\_fsm.\mbox{\hyperlink{classsrsran_1_1radio__zmq__tx__channel__fsm_a726c463265c3be0a40713de391705c0f}{wait\_stop}}();}
\DoxyCodeLine{00331\ \ \ logger.debug(\textcolor{stringliteral}{"{}Stopped\ successfully."{}});}
\DoxyCodeLine{00332\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/radio/zmq/radio\+\_\+zmq\+\_\+tx\+\_\+channel.\+h\item 
lib/radio/zmq/radio\+\_\+zmq\+\_\+tx\+\_\+channel.\+cpp\end{DoxyCompactItemize}
