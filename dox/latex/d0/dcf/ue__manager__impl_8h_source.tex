\doxysection{ue\+\_\+manager\+\_\+impl.\+h}
\hypertarget{ue__manager__impl_8h_source}{}\label{ue__manager__impl_8h_source}\index{lib/cu\_cp/ue\_manager/ue\_manager\_impl.h@{lib/cu\_cp/ue\_manager/ue\_manager\_impl.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ 2021-\/2024\ Software\ Radio\ Systems\ Limited}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ srsRAN.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ srsRAN\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ it\ under\ the\ terms\ of\ the\ GNU\ Affero\ General\ Public\ License\ as}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ published\ by\ the\ Free\ Software\ Foundation,\ either\ version\ 3\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ the\ License,\ or\ (at\ your\ option)\ any\ later\ version.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ srsRAN\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ GNU\ Affero\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ A\ copy\ of\ the\ GNU\ Affero\ General\ Public\ License\ can\ be\ found\ in}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ the\ LICENSE\ file\ in\ the\ top-\/level\ directory\ of\ this\ distribution}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ and\ at\ http://www.gnu.org/licenses/.}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{pragma}\ \textcolor{preprocessor}{once}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}../adapters/cu\_cp\_adapters.h"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}../adapters/ngap\_adapters.h"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}../adapters/rrc\_ue\_adapters.h"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \mbox{\hyperlink{ue__metrics__handler_8h}{"{}ue\_metrics\_handler.h"{}}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \mbox{\hyperlink{ue__task__scheduler_8h}{"{}ue\_task\_scheduler.h"{}}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}srsran/cu\_cp/ue\_manager.h"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{<}\textcolor{preprocessor}{unordered\_map}\textcolor{preprocessor}{>}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{namespace}\ \mbox{\hyperlink{namespacesrsran}{srsran}}\ \{}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{namespace}\ srs\_cu\_cp\ \{}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ngap__ue__t}{ngap\_ue\_t}}\ \{}
\DoxyCodeLine{00038\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__pdu__notifier}{ngap\_rrc\_ue\_pdu\_notifier}}\&\ \ \ \ \ \ \ \ \ \ \ rrc\_ue\_pdu\_notifier;}
\DoxyCodeLine{00039\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__control__notifier}{ngap\_rrc\_ue\_control\_notifier}}\&\ \ \ \ \ \ \ rrc\_ue\_ctrl\_notifier;}
\DoxyCodeLine{00040\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__du__processor__control__notifier}{ngap\_du\_processor\_control\_notifier}}\&\ du\_processor\_ctrl\_notifier;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ ngap\_ue\_t(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__pdu__notifier}{ngap\_rrc\_ue\_pdu\_notifier}}\&\ \ \ \ \ \ \ \ \ \ \ rrc\_ue\_pdu\_notifier\_,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__control__notifier}{ngap\_rrc\_ue\_control\_notifier}}\&\ \ \ \ \ \ \ rrc\_ue\_ctrl\_notifier\_,}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__du__processor__control__notifier}{ngap\_du\_processor\_control\_notifier}}\&\ du\_processor\_ctrl\_notifier\_)\ :}
\DoxyCodeLine{00045\ \ \ \ \ rrc\_ue\_pdu\_notifier(rrc\_ue\_pdu\_notifier\_),}
\DoxyCodeLine{00046\ \ \ \ \ rrc\_ue\_ctrl\_notifier(rrc\_ue\_ctrl\_notifier\_),}
\DoxyCodeLine{00047\ \ \ \ \ du\_processor\_ctrl\_notifier(du\_processor\_ctrl\_notifier\_)}
\DoxyCodeLine{00048\ \ \ \{}
\DoxyCodeLine{00049\ \ \ \}}
\DoxyCodeLine{00050\ \};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{keyword}{class}\ cu\_cp\_ue\ \textcolor{keyword}{final}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__ue}{du\_ue}},\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__ue}{ngap\_ue}},\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__task__scheduler}{rrc\_ue\_task\_scheduler}}}
\DoxyCodeLine{00053\ \{}
\DoxyCodeLine{00054\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00055\ \ \ cu\_cp\_ue(\textcolor{keyword}{const}\ ue\_index\_t\ \ \ \ \ \ \ \ \ \ \ \ \ \ ue\_index\_,}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1up__resource__manager__cfg}{up\_resource\_manager\_cfg}}\ up\_cfg,}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__task__scheduler}{ue\_task\_scheduler}}\ \ \ \ \ \ \ \ \ \ \ \ \ task\_sched\_,}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ pci\_t\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pci\_\ \ \ \ =\ INVALID\_PCI,}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c\_rnti\_\ =\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}::INVALID\_RNTI)\ :}
\DoxyCodeLine{00060\ \ \ \ \ ue\_index(ue\_index\_),\ task\_sched(std::move(task\_sched\_)),\ up\_mng(create\_up\_resource\_manager(up\_cfg))}
\DoxyCodeLine{00061\ \ \ \{}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{if}\ (pci\_\ !=\ INVALID\_PCI)\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ pci\ =\ pci\_;}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{if}\ (c\_rnti\_\ !=\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}::INVALID\_RNTI)\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ c\_rnti\ =\ c\_rnti\_;}
\DoxyCodeLine{00068\ \ \ \ \ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ du\_index\ =\ get\_du\_index\_from\_ue\_index(ue\_index);}
\DoxyCodeLine{00071\ \ \ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Cancel\ all\ pending\ UE\ tasks.}}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_ab8d1676142bff570b6983407396d187d}{stop}}();}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{comment}{//\ generic\_ue}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ UE\ index\ of\ the\ UE.}}
\DoxyCodeLine{00079\ \ \ ue\_index\_t\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_adc313731005fbab6f17d01cd0875cce4}{get\_ue\_index}}()\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ ue\_index;\ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ UP\ resource\ manager\ of\ the\ UE.}}
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1up__resource__manager}{up\_resource\_manager}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a299b8a7adbcf86b4cf352bfe52330f96}{get\_up\_resource\_manager}}()\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ *up\_mng;\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{comment}{//\ rrc\ ue\ task\ scheduler.}}
\DoxyCodeLine{00085\ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a2ed55582b8663b20b3e63ae543be0cc7}{schedule\_async\_task}}(\mbox{\hyperlink{classsrsran_1_1async__task}{async\_task}}<\textcolor{keywordtype}{void}>\ task)\ \textcolor{keyword}{override}\ \{\ task\_sched.schedule\_async\_task(std::move(task));\ \}}
\DoxyCodeLine{00086\ \ \ \mbox{\hyperlink{classsrsran_1_1unique__timer}{unique\_timer}}\ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a34a19ebaa59872af0819dfccd930b0eb}{make\_unique\_timer}}()\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ task\_sched.create\_timer();\ \}}
\DoxyCodeLine{00087\ \ \ \mbox{\hyperlink{classsrsran_1_1timer__factory}{timer\_factory}}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_abe5fbe2ee89bef91d5d12cba5e583cd3}{get\_timer\_factory}}()\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ task\_sched.get\_timer\_factory();\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \textcolor{comment}{//\ du\_ue}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ task\ scheduler\ of\ the\ UE.}}
\DoxyCodeLine{00092\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__task__scheduler}{rrc\_ue\_task\_scheduler}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a621d1e87937e63f87b388623fdeb5aec}{get\_task\_sched}}()\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ RRC\ UE\ control\ message\ notifier\ of\ the\ UE.}}
\DoxyCodeLine{00095\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__rrc__ue__control__message__notifier}{du\_processor\_rrc\_ue\_control\_message\_notifier}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a3fc86c155b221a1c6d76d8998cabb24f}{get\_rrc\_ue\_notifier}}()\ \textcolor{keyword}{override}}
\DoxyCodeLine{00096\ \ \ \{}
\DoxyCodeLine{00097\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(rrc\_ue\_notifier\ !=\ \textcolor{keywordtype}{nullptr},\ \textcolor{stringliteral}{"{}ue=\{\}:\ RRC\ UE\ notifier\ was\ not\ set"{}},\ ue\_index);}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordflow}{return}\ *rrc\_ue\_notifier;}
\DoxyCodeLine{00099\ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ RRC\ UE\ SRB\ control\ notifier\ of\ the\ UE.}}
\DoxyCodeLine{00102\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__rrc__ue__srb__control__notifier}{du\_processor\_rrc\_ue\_srb\_control\_notifier}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_aea97df156390b5e5313744a32d48fb23}{get\_rrc\_ue\_srb\_notifier}}()\ \textcolor{keyword}{override}}
\DoxyCodeLine{00103\ \ \ \{}
\DoxyCodeLine{00104\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(rrc\_ue\_srb\_notifier\ !=\ \textcolor{keywordtype}{nullptr},\ \textcolor{stringliteral}{"{}ue=\{\}:\ RRC\ UE\ SRB\ notifier\ was\ not\ set"{}},\ ue\_index);}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{return}\ *rrc\_ue\_srb\_notifier;}
\DoxyCodeLine{00106\ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__context__update__notifier}{rrc\_ue\_context\_update\_notifier}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a7ebc60b95d71eb4d35fc490b493ea2af}{get\_rrc\_ue\_context\_update\_notifier}}()\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ rrc\_ue\_cu\_cp\_ev\_notifier;\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ RRC\ UE\ measurement\ notifier\ of\ the\ UE.}}
\DoxyCodeLine{00111\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__measurement__notifier}{rrc\_ue\_measurement\_notifier}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a9efebdfd9c37dfc4c145f71df2b96a9d}{get\_rrc\_ue\_measurement\_notifier}}()\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ rrc\_ue\_cu\_cp\_ev\_notifier;\ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ PCI\ of\ the\ UE.}}
\DoxyCodeLine{00114\ \ \ pci\_t\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_ad7ae292c87f0cfec7dd716be53d02c25}{get\_pci}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ pci;\ \};}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ C-\/RNTI\ of\ the\ UE.}}
\DoxyCodeLine{00117\ \ \ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_adfa0155034551c3d1c8859ecb79bd8b4}{get\_c\_rnti}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ c\_rnti;\ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \mbox{\hyperlink{namespacesrsran_a24d9c58a8feb961399d30d43f80302f6}{gnb\_du\_id\_t}}\ get\_du\_id()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ du\_id;\ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ DU\ index\ of\ the\ UE.}}
\DoxyCodeLine{00122\ \ \ du\_index\_t\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a3870ed3edf26aed2eb1756ab643c9042}{get\_du\_index}}()\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ du\_index;\ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ PCell\ index\ of\ the\ UE.}}
\DoxyCodeLine{00125\ \ \ du\_cell\_index\_t\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a8c22b8b59dbddca386b1682432e5d42e}{get\_pcell\_index}}()\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ pcell\_index;\ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Update\ a\ UE\ with\ PCI\ and/or\ C-\/RNTI.}}
\DoxyCodeLine{00128\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a38ee9f96ba86c918876b2303902cb367}{update\_du\_ue}}(\mbox{\hyperlink{namespacesrsran_a24d9c58a8feb961399d30d43f80302f6}{gnb\_du\_id\_t}}\ du\_id\_\ \ =\ \mbox{\hyperlink{namespacesrsran_a24d9c58a8feb961399d30d43f80302f6}{gnb\_du\_id\_t}}::invalid,}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pci\_t\ \ \ \ \ \ \ pci\_\ \ \ \ =\ INVALID\_PCI,}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ \ \ \ \ \ c\_rnti\_\ =\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}::INVALID\_RNTI)\ \textcolor{keyword}{override}}
\DoxyCodeLine{00131\ \ \ \{}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordflow}{if}\ (du\_id\_\ !=\ \mbox{\hyperlink{namespacesrsran_a24d9c58a8feb961399d30d43f80302f6}{gnb\_du\_id\_t}}::invalid)\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ du\_id\ =\ du\_id\_;}
\DoxyCodeLine{00134\ \ \ \ \ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{if}\ (pci\_\ !=\ INVALID\_PCI)\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ pci\ =\ pci\_;}
\DoxyCodeLine{00138\ \ \ \ \ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordflow}{if}\ (c\_rnti\_\ !=\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}::INVALID\_RNTI)\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ c\_rnti\ =\ c\_rnti\_;}
\DoxyCodeLine{00142\ \ \ \ \ \}}
\DoxyCodeLine{00143\ \ \ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Set\ the\ DU\ and\ PCell\ index\ of\ the\ UE.}}
\DoxyCodeLine{00146\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ pcell\_index\ PCell\ index\ of\ the\ UE.}}
\DoxyCodeLine{00147\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a7cd74eed553902351f9379c3f52503fc}{set\_pcell\_index}}(du\_cell\_index\_t\ pcell\_index\_)\ \textcolor{keyword}{override}\ \{\ pcell\_index\ =\ pcell\_index\_;\ \}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Set\ the\ RRC\ UE\ control\ message\ notifier\ of\ the\ UE.}}
\DoxyCodeLine{00150\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ rrc\_ue\_notifier\_\ RRC\ UE\ control\ message\ notifier\ of\ the\ UE.}}
\DoxyCodeLine{00151\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a4069a9c9dc98eb507a20227b163e79e3}{set\_rrc\_ue\_notifier}}(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__rrc__ue__control__message__notifier}{du\_processor\_rrc\_ue\_control\_message\_notifier}}\&\ rrc\_ue\_notifier\_)\ \textcolor{keyword}{override}}
\DoxyCodeLine{00152\ \ \ \{}
\DoxyCodeLine{00153\ \ \ \ \ rrc\_ue\_notifier\ =\ \&rrc\_ue\_notifier\_;}
\DoxyCodeLine{00154\ \ \ \}}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Set\ the\ RRC\ UE\ SRB\ notifier\ of\ the\ UE.}}
\DoxyCodeLine{00157\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ rrc\_ue\_srb\_notifier\_\ RRC\ UE\ SRB\ control\ notifier\ of\ the\ UE.}}
\DoxyCodeLine{00158\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a79948c673ea0a6a9855c6ce32536c6b2}{set\_rrc\_ue\_srb\_notifier}}(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__rrc__ue__srb__control__notifier}{du\_processor\_rrc\_ue\_srb\_control\_notifier}}\&\ rrc\_ue\_srb\_notifier\_)\ \textcolor{keyword}{override}}
\DoxyCodeLine{00159\ \ \ \{}
\DoxyCodeLine{00160\ \ \ \ \ rrc\_ue\_srb\_notifier\ =\ \&rrc\_ue\_srb\_notifier\_;}
\DoxyCodeLine{00161\ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \textcolor{comment}{//\ ngap\_ue}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ RRC\ UE\ PDU\ notifier\ of\ the\ UE.}}
\DoxyCodeLine{00166\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__pdu__notifier}{ngap\_rrc\_ue\_pdu\_notifier}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a7196d682a62eb10355a35d028b9e6778}{get\_rrc\_ue\_pdu\_notifier}}()\ \textcolor{keyword}{override}}
\DoxyCodeLine{00167\ \ \ \{}
\DoxyCodeLine{00168\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(ngap\_ue\_context.has\_value(),\ \textcolor{stringliteral}{"{}ue=\{\}:\ NGAP\ UE\ was\ not\ created"{}},\ ue\_index);}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{return}\ ngap\_ue\_context.value().rrc\_ue\_pdu\_notifier;}
\DoxyCodeLine{00170\ \ \ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ RRC\ UE\ control\ notifier\ of\ the\ UE.}}
\DoxyCodeLine{00173\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__control__notifier}{ngap\_rrc\_ue\_control\_notifier}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a736660b15aa40f47955410ac65b40206}{get\_rrc\_ue\_control\_notifier}}()\ \textcolor{keyword}{override}}
\DoxyCodeLine{00174\ \ \ \{}
\DoxyCodeLine{00175\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(ngap\_ue\_context.has\_value(),\ \textcolor{stringliteral}{"{}ue=\{\}:\ NGAP\ UE\ was\ not\ created"{}},\ ue\_index);}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordflow}{return}\ ngap\_ue\_context.value().rrc\_ue\_ctrl\_notifier;}
\DoxyCodeLine{00177\ \ \ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ DU\ processor\ control\ notifier\ of\ the\ UE.}}
\DoxyCodeLine{00180\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__du__processor__control__notifier}{ngap\_du\_processor\_control\_notifier}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a074a471a7c119f2eb21aeafea873004f}{get\_du\_processor\_control\_notifier}}()\ \textcolor{keyword}{override}}
\DoxyCodeLine{00181\ \ \ \{}
\DoxyCodeLine{00182\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(ngap\_ue\_context.has\_value(),\ \textcolor{stringliteral}{"{}ue=\{\}:\ NGAP\ UE\ was\ not\ created"{}},\ ue\_index);}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordflow}{return}\ ngap\_ue\_context.value().du\_processor\_ctrl\_notifier;}
\DoxyCodeLine{00184\ \ \ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Add\ the\ context\ for\ the\ NGAP\ UE.}}
\DoxyCodeLine{00187\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ rrc\_ue\_pdu\_notifier\ The\ RRC\ UE\ PDU\ notifier\ for\ the\ UE.}}
\DoxyCodeLine{00188\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ rrc\_ue\_ctrl\_notifier\ The\ RRC\ UE\ ctrl\ notifier\ for\ the\ UE.}}
\DoxyCodeLine{00189\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ du\_processor\_ctrl\_notifier\ The\ DU\ processor\ ctrl\ notifier\ for\ the\ UE.}}
\DoxyCodeLine{00190\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_abd003c1108bfd90f2ac254c2604167a7}{add\_ngap\_ue\_context}}(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__pdu__notifier}{ngap\_rrc\_ue\_pdu\_notifier}}\&\ \ \ \ \ \ \ \ \ \ \ rrc\_ue\_pdu\_notifier,}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__control__notifier}{ngap\_rrc\_ue\_control\_notifier}}\&\ \ \ \ \ \ \ rrc\_ue\_ctrl\_notifier,}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__du__processor__control__notifier}{ngap\_du\_processor\_control\_notifier}}\&\ du\_processor\_ctrl\_notifier)}
\DoxyCodeLine{00193\ \ \ \{}
\DoxyCodeLine{00194\ \ \ \ \ ngap\_ue\_context.emplace(rrc\_ue\_pdu\_notifier,\ rrc\_ue\_ctrl\_notifier,\ du\_processor\_ctrl\_notifier);}
\DoxyCodeLine{00195\ \ \ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \textcolor{keywordtype}{bool}\ ngap\_ue\_created()\ \{\ \textcolor{keywordflow}{return}\ ngap\_ue\_context.has\_value();\ \}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \textcolor{comment}{//\ cu-\/cp\ ue}}
\DoxyCodeLine{00200\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ NGAP\ to\ RRC\ UE\ adapter\ of\ the\ UE.}}
\DoxyCodeLine{00201\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__adapter}{ngap\_rrc\_ue\_adapter}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a43c18bde5157b38b53debff249677c5d}{get\_ngap\_rrc\_ue\_adapter}}()\ \{\ \textcolor{keywordflow}{return}\ ngap\_rrc\_ue\_ev\_notifier;\ \}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ CU-\/CP\ to\ RRC\ UE\ adapter\ of\ the\ UE.}}
\DoxyCodeLine{00204\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__rrc__ue__adapter}{cu\_cp\_rrc\_ue\_adapter}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_aba0a2a14a752e66214a35594b8562c96}{get\_cu\_cp\_rrc\_ue\_adapter}}()\ \{\ \textcolor{keywordflow}{return}\ cu\_cp\_rrc\_ue\_ev\_notifier;\ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ RRC\ to\ CU-\/CP\ adapter\ of\ the\ UE.}}
\DoxyCodeLine{00207\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__cu__cp__adapter}{rrc\_ue\_cu\_cp\_adapter}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__ue_a09c10e2212008c69f9e438911b726c6a}{get\_rrc\_ue\_cu\_cp\_adapter}}()\ \{\ \textcolor{keywordflow}{return}\ rrc\_ue\_cu\_cp\_ev\_notifier;\ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00210\ \ \ \textcolor{comment}{//\ common\ context}}
\DoxyCodeLine{00211\ \ \ ue\_index\_t\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ue\_index\ =\ ue\_index\_t::invalid;}
\DoxyCodeLine{00212\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__task__scheduler}{ue\_task\_scheduler}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ task\_sched;}
\DoxyCodeLine{00213\ \ \ std::unique\_ptr<up\_resource\_manager>\ up\_mng;}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \textcolor{comment}{//\ du\ ue\ context}}
\DoxyCodeLine{00216\ \ \ du\_index\_t\ \ \ \ \ \ du\_index\ \ \ \ =\ du\_index\_t::invalid;}
\DoxyCodeLine{00217\ \ \ \mbox{\hyperlink{namespacesrsran_a24d9c58a8feb961399d30d43f80302f6}{gnb\_du\_id\_t}}\ \ \ \ \ du\_id\ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a24d9c58a8feb961399d30d43f80302f6}{gnb\_du\_id\_t}}::invalid;}
\DoxyCodeLine{00218\ \ \ du\_cell\_index\_t\ pcell\_index\ =\ du\_cell\_index\_t::invalid;}
\DoxyCodeLine{00219\ \ \ pci\_t\ \ \ \ \ \ \ \ \ \ \ pci\ \ \ \ \ \ \ \ \ =\ INVALID\_PCI;}
\DoxyCodeLine{00220\ \ \ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ \ \ \ \ \ \ \ \ \ c\_rnti\ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}::INVALID\_RNTI;}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__rrc__ue__control__message__notifier}{du\_processor\_rrc\_ue\_control\_message\_notifier}}*\ rrc\_ue\_notifier\ \ \ \ \ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00223\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__rrc__ue__srb__control__notifier}{du\_processor\_rrc\_ue\_srb\_control\_notifier}}*\ \ \ \ \ rrc\_ue\_srb\_notifier\ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \textcolor{comment}{//\ ngap\ ue\ context}}
\DoxyCodeLine{00226\ \ \ \mbox{\hyperlink{classsrsran_1_1optional}{optional}}<\mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ngap__ue__t}{ngap\_ue\_t}}>\ ngap\_ue\_context;}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \textcolor{comment}{//\ cu-\/cp\ ue\ context}}
\DoxyCodeLine{00229\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__adapter}{ngap\_rrc\_ue\_adapter}}\ \ ngap\_rrc\_ue\_ev\_notifier;}
\DoxyCodeLine{00230\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__rrc__ue__adapter}{cu\_cp\_rrc\_ue\_adapter}}\ cu\_cp\_rrc\_ue\_ev\_notifier;}
\DoxyCodeLine{00231\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__cu__cp__adapter}{rrc\_ue\_cu\_cp\_adapter}}\ rrc\_ue\_cu\_cp\_ev\_notifier;}
\DoxyCodeLine{00232\ \};}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager}{ue\_manager}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__ue__manager}{du\_processor\_ue\_manager}},\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__ue__manager}{ngap\_ue\_manager}},\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__metrics__handler}{ue\_metrics\_handler}}}
\DoxyCodeLine{00235\ \{}
\DoxyCodeLine{00236\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00237\ \ \ \textcolor{keyword}{explicit}\ ue\_manager(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ue__configuration}{ue\_configuration}}\&\ \ \ \ \ \ \ \ ue\_config\_,}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1up__resource__manager__cfg}{up\_resource\_manager\_cfg}}\&\ up\_config\_,}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1timer__manager}{timer\_manager}}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ timers,}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1task__executor}{task\_executor}}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cu\_cp\_exec);}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \textcolor{comment}{///\ Stop\ UE\ activity.}}
\DoxyCodeLine{00243\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_a46140d36f35c6c0f7bc8d8a976a7930f}{stop}}();}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \textcolor{comment}{//\ common}}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ CU-\/CP\ UE\ configuration\ stored\ in\ the\ UE\ manager.}}
\DoxyCodeLine{00248\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ The\ CU-\/CP\ UE\ configuration.}}
\DoxyCodeLine{00249\ \ \ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ue__configuration}{ue\_configuration}}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_addd593fdddcf507dc4a3959662be4066}{get\_ue\_config}}()\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ ue\_config;\ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ UE\ index\ of\ the\ UE.}}
\DoxyCodeLine{00252\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ pci\ The\ PCI\ of\ the\ cell\ the\ UE\ is/was\ connected\ to.}}
\DoxyCodeLine{00253\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ c\_rnti\ The\ RNTI\ of\ the\ UE.}}
\DoxyCodeLine{00254\ \ \ ue\_index\_t\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_a826c8df4aeec50963b8545605ac0a153}{get\_ue\_index}}(pci\_t\ pci,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ c\_rnti)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Remove\ the\ UE\ context\ with\ the\ given\ UE\ index.}}
\DoxyCodeLine{00257\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ ue\_index\ Index\ of\ the\ UE\ to\ be\ removed.}}
\DoxyCodeLine{00258\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ad7f6fed10a7ab5bf6dca6ab8fc7d5017}{remove\_ue}}(ue\_index\_t\ ue\_index)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ number\ of\ UEs.}}
\DoxyCodeLine{00261\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ Number\ of\ UEs.}}
\DoxyCodeLine{00262\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_a9d7aa76b1c9a6a6d111f095b11ca016b}{size\_t}}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_a9d7aa76b1c9a6a6d111f095b11ca016b}{get\_nof\_ues}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override}\ \{\ \textcolor{keywordflow}{return}\ ues.size();\ \}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \textcolor{comment}{//\ du\_processor\_ue\_manager}}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Allocate\ resources\ for\ the\ UE\ in\ the\ CU-\/CP.}}
\DoxyCodeLine{00267\ \ \ \textcolor{comment}{///}}
\DoxyCodeLine{00268\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ ue\_index\ of\ the\ created\ UE\ or\ ue\_index\_t::invalid\ in\ case\ of\ failure.}}
\DoxyCodeLine{00269\ \ \ ue\_index\_t\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_a1257d9a11efdab93e0e0cf2e9cc518d6}{add\_ue}}(du\_index\_t\ du\_index)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Find\ the\ UE\ with\ the\ given\ UE\ index.\ Note\ that\ this\ will\ not\ check\ if\ a\ DU\ context\ exists.}}
\DoxyCodeLine{00272\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ ue\_index\ Index\ of\ the\ UE\ to\ be\ found.}}
\DoxyCodeLine{00273\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ Pointer\ to\ the\ UE\ if\ found,\ nullptr\ otherwise.}}
\DoxyCodeLine{00274\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__ue}{du\_ue}}*\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_a3ef8cd198d1f01983fe87c7b0e10ac19}{find\_ue}}(ue\_index\_t\ ue\_index)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__ue}{du\_ue}}*\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_a5f1d69de147bcb1ccb3f19b56e11e70c}{set\_ue\_du\_context}}(ue\_index\_t\ ue\_index,\ \mbox{\hyperlink{namespacesrsran_a24d9c58a8feb961399d30d43f80302f6}{gnb\_du\_id\_t}}\ du\_id,\ pci\_t\ pci,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ rnti)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Find\ the\ UE\ with\ the\ given\ UE\ index,\ thats\ DU\ context\ is\ set\ up.}}
\DoxyCodeLine{00279\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ ue\_index\ Index\ of\ the\ UE\ to\ be\ found.}}
\DoxyCodeLine{00280\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ Pointer\ to\ the\ DU\ UE\ if\ found,\ nullptr\ otherwise.}}
\DoxyCodeLine{00281\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__ue}{du\_ue}}*\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ae2398ec164174300ad8d7723ce13793c}{find\_du\_ue}}(ue\_index\_t\ ue\_index)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ number\ of\ UEs\ connected\ to\ a\ specific\ DU.}}
\DoxyCodeLine{00284\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ Number\ of\ UEs.}}
\DoxyCodeLine{00285\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_aca748559cf99a06d618719b282752bd4}{size\_t}}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_aca748559cf99a06d618719b282752bd4}{get\_nof\_du\_ues}}(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_aca748559cf99a06d618719b282752bd4}{du\_index\_t}}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_aca748559cf99a06d618719b282752bd4}{du\_index}})\ \textcolor{keyword}{override}}
\DoxyCodeLine{00286\ \ \ \{}
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ ue\_count\ =\ 0;}
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{comment}{//\ Search\ allocated\ UE\ indexes}}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint16\_t\ i\ =\ 0;\ i\ <\ MAX\_NOF\_UES\_PER\_DU;\ i++)\ \{}
\DoxyCodeLine{00290\ \ \ \ \ \ \ ue\_index\_t\ new\_ue\_index\ =\ generate\_ue\_index(du\_index,\ i);}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ues.find(new\_ue\_index)\ !=\ ues.end())\ \{}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ ue\_count++;}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00294\ \ \ \ \ \}}
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keywordflow}{return}\ ue\_count;}
\DoxyCodeLine{00296\ \ \ \}}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \textcolor{comment}{//\ ngap\_ue\_manager}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Add\ notifier\ to\ a\ UE\ for\ the\ given\ UE\ index.\ A\ RAN\ UE\ ID\ is\ allocated\ internally.\ If\ a\ new\ UE\ can't\ be}}
\DoxyCodeLine{00301\ \ \ \textcolor{comment}{///\ found\ or\ if\ a\ UE\ with\ the\ UE\ index\ was\ already\ setup,\ nulltpr\ is\ returned.}}
\DoxyCodeLine{00302\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ ue\_index\ Index\ of\ the\ UE\ to\ add\ the\ notifiers\ to.}}
\DoxyCodeLine{00303\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ rrc\_ue\_pdu\_notifier\ RRC\ UE\ PDU\ notifier\ for\ the\ UE.}}
\DoxyCodeLine{00304\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ rrc\_ue\_ctrl\_notifier\ RRC\ UE\ control\ notifier\ for\ the\ UE.}}
\DoxyCodeLine{00305\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ du\_processor\_ctrl\_notifier\ DU\ processor\ control\ notifier\ for\ the\ UE.}}
\DoxyCodeLine{00306\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ Pointer\ to\ the\ NGAP\ UE\ if\ found,\ nullptr\ otherwise.}}
\DoxyCodeLine{00307\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__ue}{ngap\_ue}}*\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_a2609ee374c472a30d6f7b4a62ecddb23}{set\_ue\_ng\_context}}(ue\_index\_t\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ue\_index,}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__pdu__notifier}{ngap\_rrc\_ue\_pdu\_notifier}}\&\ \ \ \ \ \ \ \ \ \ \ rrc\_ue\_pdu\_notifier\_,}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__control__notifier}{ngap\_rrc\_ue\_control\_notifier}}\&\ \ \ \ \ \ \ rrc\_ue\_ctrl\_notifier\_,}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__du__processor__control__notifier}{ngap\_du\_processor\_control\_notifier}}\&\ du\_processor\_ctrl\_notifier\_)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Find\ the\ NGAP\ UE\ with\ the\ given\ UE\ index.}}
\DoxyCodeLine{00313\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ ue\_index\ Index\ of\ the\ UE\ to\ be\ found.}}
\DoxyCodeLine{00314\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ Pointer\ to\ the\ NGAP\ UE\ if\ found,\ nullptr\ otherwise.}}
\DoxyCodeLine{00315\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__ue}{ngap\_ue}}*\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ad21bedf0a1a1d1fab12dd5900656712a}{find\_ngap\_ue}}(ue\_index\_t\ ue\_index)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ number\ of\ UEs\ connected\ to\ the\ AMF.}}
\DoxyCodeLine{00318\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ Number\ of\ UEs.}}
\DoxyCodeLine{00319\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ab4c9082b1d90380eea02ea1687da7bda}{size\_t}}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ab4c9082b1d90380eea02ea1687da7bda}{get\_nof\_ngap\_ues}}()\ \textcolor{keyword}{override}}
\DoxyCodeLine{00320\ \ \ \{}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ ue\_count\ =\ 0;}
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{comment}{//\ Search\ allocated\ UE\ indexes}}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ ue\ :\ ues)\ \{}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ue.second.ngap\_ue\_created())\ \{}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ ue\_count++;}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00327\ \ \ \ \ \}}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keywordflow}{return}\ ue\_count;}
\DoxyCodeLine{00329\ \ \ \}}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \textcolor{comment}{//\ cu-\/cp\ ue\ manager}}
\DoxyCodeLine{00332\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ NGAP\ to\ RRC\ UE\ adapter\ of\ the\ UE.}}
\DoxyCodeLine{00333\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ngap__rrc__ue__adapter}{ngap\_rrc\_ue\_adapter}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_adfa054cfa13308585f6d97e44089c276}{get\_ngap\_rrc\_ue\_adapter}}(ue\_index\_t\ ue\_index)}
\DoxyCodeLine{00334\ \ \ \{}
\DoxyCodeLine{00335\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(ue\_index\ !=\ ue\_index\_t::invalid,\ \textcolor{stringliteral}{"{}Invalid\ ue\_index=\{\}"{}},\ ue\_index);}
\DoxyCodeLine{00336\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(ues.find(ue\_index)\ !=\ ues.end(),\ \textcolor{stringliteral}{"{}UE\ with\ ue\_index=\{\}\ does\ not\ exist"{}},\ ue\_index);}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{keywordflow}{return}\ ues.at(ue\_index).get\_ngap\_rrc\_ue\_adapter();}
\DoxyCodeLine{00339\ \ \ \}}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ CU-\/CP\ to\ RRC\ UE\ adapter\ of\ the\ UE.}}
\DoxyCodeLine{00342\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__rrc__ue__adapter}{cu\_cp\_rrc\_ue\_adapter}}\&\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_adbd291f11deac244e666e1630d1b5c1f}{get\_cu\_cp\_rrc\_ue\_adapter}}(ue\_index\_t\ ue\_index)}
\DoxyCodeLine{00343\ \ \ \{}
\DoxyCodeLine{00344\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(ue\_index\ !=\ ue\_index\_t::invalid,\ \textcolor{stringliteral}{"{}Invalid\ ue\_index=\{\}"{}},\ ue\_index);}
\DoxyCodeLine{00345\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(ues.find(ue\_index)\ !=\ ues.end(),\ \textcolor{stringliteral}{"{}UE\ with\ ue\_index=\{\}\ does\ not\ exist"{}},\ ue\_index);}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{keywordflow}{return}\ ues.at(ue\_index).get\_cu\_cp\_rrc\_ue\_adapter();}
\DoxyCodeLine{00348\ \ \ \}}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1rrc__ue__cu__cp__adapter}{rrc\_ue\_cu\_cp\_adapter}}\&\ get\_rrc\_ue\_cu\_cp\_adapter(ue\_index\_t\ ue\_index)}
\DoxyCodeLine{00351\ \ \ \{}
\DoxyCodeLine{00352\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(ue\_index\ !=\ ue\_index\_t::invalid,\ \textcolor{stringliteral}{"{}Invalid\ ue\_index=\{\}"{}},\ ue\_index);}
\DoxyCodeLine{00353\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(ues.find(ue\_index)\ !=\ ues.end(),\ \textcolor{stringliteral}{"{}UE\ with\ ue\_index=\{\}\ does\ not\ exist"{}},\ ue\_index);}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \ \ \textcolor{keywordflow}{return}\ ues.at(ue\_index).get\_rrc\_ue\_cu\_cp\_adapter();}
\DoxyCodeLine{00356\ \ \ \}}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ac8b9801835fc778d88602cb145fa69a8}{std}}::\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ac8b9801835fc778d88602cb145fa69a8}{vector}}<\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ac8b9801835fc778d88602cb145fa69a8}{metrics\_report}}::\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ac8b9801835fc778d88602cb145fa69a8}{ue\_info}}>\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ac8b9801835fc778d88602cb145fa69a8}{handle\_ue\_metrics\_report\_request}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__task__scheduler__manager}{ue\_task\_scheduler\_manager}}\&\ get\_task\_sched()\ \{\ \textcolor{keywordflow}{return}\ ue\_task\_scheds;\ \}}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00363\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Get\ the\ next\ available\ UE\ index.}}
\DoxyCodeLine{00364\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ The\ UE\ index.}}
\DoxyCodeLine{00365\ \ \ ue\_index\_t\ get\_next\_ue\_index(du\_index\_t\ du\_index);}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ srslog::basic\_logger\&\ \ \ \ \ \ \ \ \ logger\ =\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager}{srslog}}::\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager}{fetch\_basic\_logger}}(\textcolor{stringliteral}{"{}CU-\/UEMNG"{}});}
\DoxyCodeLine{00368\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ue__configuration}{ue\_configuration}}\ \ \ \ \ \ \ \ ue\_config;}
\DoxyCodeLine{00369\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1up__resource__manager__cfg}{up\_resource\_manager\_cfg}}\ up\_config;}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \textcolor{comment}{//\ Manager\ of\ UE\ task\ schedulers.}}
\DoxyCodeLine{00372\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__task__scheduler__manager}{ue\_task\_scheduler\_manager}}\ ue\_task\_scheds;}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \textcolor{comment}{//\ Container\ of\ UE\ contexts\ handled\ by\ the\ CU-\/CP.}}
\DoxyCodeLine{00375\ \ \ std::unordered\_map<ue\_index\_t,\ cu\_cp\_ue>\ ues;}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \textcolor{comment}{//\ ue\ index\ lookups}}
\DoxyCodeLine{00378\ \ \ std::map<std::tuple<pci\_t,\ rnti\_t>,\ ue\_index\_t>\ pci\_rnti\_to\_ue\_index;\ \textcolor{comment}{//\ ue\_indexes\ indexed\ by\ pci\ and\ rnti}}
\DoxyCodeLine{00379\ \};}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \}\ \textcolor{comment}{//\ namespace\ srs\_cu\_cp}}
\DoxyCodeLine{00382\ \}\ \textcolor{comment}{//\ namespace\ srsran}}

\end{DoxyCode}
