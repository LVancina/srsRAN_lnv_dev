\doxysection{srsran\+::dmrs\+\_\+pdsch\+\_\+processor\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1dmrs__pdsch__processor__impl}{}\label{classsrsran_1_1dmrs__pdsch__processor__impl}\index{srsran::dmrs\_pdsch\_processor\_impl@{srsran::dmrs\_pdsch\_processor\_impl}}


Defines a DMRS for PDSCH generic implementation.  




{\ttfamily \#include $<$dmrs\+\_\+pdsch\+\_\+processor\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::dmrs\+\_\+pdsch\+\_\+processor\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d7/db8/classsrsran_1_1dmrs__pdsch__processor__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::dmrs\+\_\+pdsch\+\_\+processor\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{df/d95/classsrsran_1_1dmrs__pdsch__processor__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1dmrs__pdsch__processor__impl_a45445711cc44064baa97f8471088023a}{dmrs\+\_\+pdsch\+\_\+processor\+\_\+impl}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pseudo__random__generator}{pseudo\+\_\+random\+\_\+generator}} $>$ \mbox{\hyperlink{classsrsran_1_1pseudo__random__generator}{pseudo\+\_\+random\+\_\+generator}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1dmrs__pdsch__processor__impl_a62da12916d824e7cd78c6939217011e3}{map}} (\mbox{\hyperlink{classsrsran_1_1resource__grid__mapper}{resource\+\_\+grid\+\_\+mapper}} \&mapper, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1dmrs__pdsch__processor_1_1config__t}{config\+\_\+t}} \&config) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Generates and maps DMRS for PDSCH. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1dmrs__pdsch__processor}{srsran\+::dmrs\+\_\+pdsch\+\_\+processor}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}dmrs\+\_\+pdsch\+\_\+processor} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Defines a DMRS for PDSCH generic implementation. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1dmrs__pdsch__processor__impl_a45445711cc44064baa97f8471088023a}\label{classsrsran_1_1dmrs__pdsch__processor__impl_a45445711cc44064baa97f8471088023a} 
\index{srsran::dmrs\_pdsch\_processor\_impl@{srsran::dmrs\_pdsch\_processor\_impl}!dmrs\_pdsch\_processor\_impl@{dmrs\_pdsch\_processor\_impl}}
\index{dmrs\_pdsch\_processor\_impl@{dmrs\_pdsch\_processor\_impl}!srsran::dmrs\_pdsch\_processor\_impl@{srsran::dmrs\_pdsch\_processor\_impl}}
\doxysubsubsection{\texorpdfstring{dmrs\_pdsch\_processor\_impl()}{dmrs\_pdsch\_processor\_impl()}}
{\footnotesize\ttfamily srsran\+::dmrs\+\_\+pdsch\+\_\+processor\+\_\+impl\+::dmrs\+\_\+pdsch\+\_\+processor\+\_\+impl (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pseudo__random__generator}{pseudo\+\_\+random\+\_\+generator}} $>$}]{pseudo\+\_\+random\+\_\+generator }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00094\ \ \ \ \ prg(std::move(pseudo\_random\_generator))}
\DoxyCodeLine{00095\ \ \ \{}
\DoxyCodeLine{00096\ \ \ \ \ srsran\_assert(prg,\ \textcolor{stringliteral}{"{}Invalid\ PRG."{}});}
\DoxyCodeLine{00097\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1dmrs__pdsch__processor__impl_a62da12916d824e7cd78c6939217011e3}\label{classsrsran_1_1dmrs__pdsch__processor__impl_a62da12916d824e7cd78c6939217011e3} 
\index{srsran::dmrs\_pdsch\_processor\_impl@{srsran::dmrs\_pdsch\_processor\_impl}!map@{map}}
\index{map@{map}!srsran::dmrs\_pdsch\_processor\_impl@{srsran::dmrs\_pdsch\_processor\_impl}}
\doxysubsubsection{\texorpdfstring{map()}{map()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::dmrs\+\_\+pdsch\+\_\+processor\+\_\+impl\+::map (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1resource__grid__mapper}{resource\+\_\+grid\+\_\+mapper}} \&}]{mapper,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1dmrs__pdsch__processor_1_1config__t}{config\+\_\+t}} \&}]{config }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Generates and maps DMRS for PDSCH. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em grid} & Provides the destination resource grid. \\
\hline
\mbox{\texttt{ in}}  & {\em config} & Provides the required configuration to generate and map the signal. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1dmrs__pdsch__processor_a9b12b364364bae8346ad16c07957087c}{srsran\+::dmrs\+\_\+pdsch\+\_\+processor}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00146\ \{}
\DoxyCodeLine{00147\ \ \ \textcolor{comment}{//\ Number\ of\ DM-\/RS\ RE\ in\ an\ OFDM\ symbol.}}
\DoxyCodeLine{00148\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_symbol}}\ =\ config.type.nof\_dmrs\_per\_rb()\ *\ config.rb\_mask.count();}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \textcolor{comment}{//\ Number\ of\ DM-\/RS\ RE\ in\ the\ entire\ slot.}}
\DoxyCodeLine{00151\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_slot}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_symbol}}\ *\ config.symbols\_mask.count();}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ \textcolor{comment}{//\ Number\ of\ logical\ DM-\/RS\ ports.\ It\ is\ equivalent\ to\ the\ number\ of\ PDSCH\ transmit\ layers.}}
\DoxyCodeLine{00154\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_ports}}\ =\ config.precoding.get\_nof\_layers();}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \textcolor{comment}{//\ Number\ of\ physical\ antenna\ ports.}}
\DoxyCodeLine{00157\ \ \ \textcolor{keywordtype}{unsigned}\ nof\_antenna\_ports\ =\ config.precoding.get\_nof\_ports();}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \textcolor{comment}{//\ Number\ of\ grid\ OFDM\ symbols.}}
\DoxyCodeLine{00160\ \ \ \textcolor{keywordtype}{unsigned}\ nof\_symbols\ =\ config.symbols\_mask.size();}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \textcolor{comment}{//\ CDM\ group\ size\ in\ number\ of\ DM-\/RS\ ports.}}
\DoxyCodeLine{00163\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cdm\_group\_size}}\ =\ 2;}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \textcolor{comment}{//\ Calculate\ number\ of\ CDM\ groups.}}
\DoxyCodeLine{00166\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_cdm\_groups}}\ =\ \mbox{\hyperlink{namespacesrsran_a6e5aee1d553dc6e825017842e4059adb}{divide\_ceil}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_ports}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cdm\_group\_size}});}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \textcolor{comment}{//\ Iterate\ each\ CDM\ group.}}
\DoxyCodeLine{00169\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_group}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_group}}\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_cdm\_groups}};\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_group}})\ \{}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{comment}{//\ Number\ of\ DM-\/RS\ ports\ belonging\ to\ the\ current\ CDM\ group.}}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_ports\_cdm}}\ =\ std::min(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cdm\_group\_size}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_ports}}\ -\/\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cdm\_group\_size}}\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_group}}));}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{comment}{//\ Resize\ RE\ buffer\ where\ the\ DM-\/RS\ RE\ are\ stored.}}
\DoxyCodeLine{00174\ \ \ \ \ temp\_re.\mbox{\hyperlink{classsrsran_1_1static__re__buffer_ad3ed004b724ca236afb3d3efa7c69439}{resize}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_ports\_cdm}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_slot}});}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{comment}{//\ Prepare\ precoding\ configuration\ for\ the\ CDM\ group.}}
\DoxyCodeLine{00177\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1precoding__configuration}{precoding\_configuration}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cdm\_group\_precoding}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_ports\_cdm}},\ nof\_antenna\_ports,\ 1,\ MAX\_RB);}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{comment}{//\ For\ each\ symbol\ in\ the\ slot....}}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_gen\_dmrs\_symbols}}\ =\ 0;}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symbol}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symbol}}\ !=\ nof\_symbols;\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symbol}})\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \textcolor{comment}{//\ Skip\ symbol\ if\ it\ is\ not\ selected.}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!config.symbols\_mask.test(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symbol}}))\ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \ \ \textcolor{comment}{//\ Buffer\ to\ hold\ the\ DM-\/RS\ sequence.}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<cf\_t>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{base\_sequence}}\ =\ temp\_re.\mbox{\hyperlink{classsrsran_1_1static__re__buffer_a900371c4bb36aa06ee04505357c1dae6}{get\_slice}}(0).\mbox{\hyperlink{classsrsran_1_1span_ac5f02596fcb6e8f430a3e11e47a6d7e8}{subspan}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_gen\_dmrs\_symbols}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_symbol}});}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \textcolor{comment}{//\ Generate\ sequence\ for\ the\ given\ symbol.}}
\DoxyCodeLine{00191\ \ \ \ \ \ \ sequence\_generation(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{base\_sequence}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symbol}},\ config);}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \ \ \textcolor{comment}{//\ Advance\ view.}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_gen\_dmrs\_symbols}}\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_symbol}};}
\DoxyCodeLine{00195\ \ \ \ \ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ srsran\_assert((\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_gen\_dmrs\_symbols}}\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_slot}}),}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ number\ of\ generated\ DM-\/RS\ seymbols\ (i.e.,\ \{\})\ does\ not\ match\ the\ expected\ (i.e.,\ \{\})"{}},}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_gen\_dmrs\_symbols}},}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_slot}});}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{comment}{//\ Set\ DM-\/RS\ allocation\ pattern\ of\ the\ CDM\ group.}}
\DoxyCodeLine{00203\ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1re__pattern}{re\_pattern}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dmrs\_pattern\_cdm}};}
\DoxyCodeLine{00204\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dmrs\_pattern\_cdm}}.\mbox{\hyperlink{structsrsran_1_1re__pattern_ad54232b98e15d6169aad59093d196710}{prb\_mask}}\ =\ config.rb\_mask;}
\DoxyCodeLine{00205\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dmrs\_pattern\_cdm}}.symbols\ \ =\ config.symbols\_mask;}
\DoxyCodeLine{00206\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dmrs\_pattern\_cdm}}.re\_mask\ =}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ (config.type\ ==\ dmrs\_type::TYPE1)\ ?\ get\_re\_mask\_type\_1(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_group}})\ :\ get\_re\_mask\_type\_2(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_group}});}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{comment}{//\ Iterate\ each\ port\ within\ the\ CDM\ group}}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_port}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_port}}\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_ports\_cdm}};\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_port}})\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \textcolor{comment}{//\ Current\ DM-\/RS\ port.}}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_dmrs\_port}}\ =\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cdm\_group\_size}}\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_group}})\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_port}};}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \ \ \textcolor{comment}{//\ Load\ the\ port\ coefficients\ for\ the\ CDM\ port.}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_ant\_port}}\ =\ 0,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port\_end}}\ =\ nof\_antenna\_ports;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_ant\_port}}\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_port\_end}};\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_ant\_port}})\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_prg}}\ =\ 0,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_prg\_end}}\ =\ config.precoding.get\_nof\_prg();\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_prg}}\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_prg\_end}};\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_prg}})\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Extract\ the\ coefficient\ for\ mapping\ the\ DM-\/RS\ port\ to\ the\ antenna\ port.}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\_t}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{coefficient}}\ =\ config.precoding.get\_coefficient(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_dmrs\_port}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_ant\_port}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_prg}});}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ coefficient\ in\ the\ CDM\ group\ precoding.}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cdm\_group\_precoding}}.set\_coefficient(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{coefficient}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_port}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_ant\_port}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_prg}});}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \ \ \textcolor{comment}{//\ Skip\ CDM\ weights\ for\ first\ DM-\/RS\ port.}}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_dmrs\_port}}\ ==\ 0)\ \{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ \ \ \textcolor{comment}{//\ Apply\ CDM\ weights\ for\ each\ symbol.}}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_proc\_re\_cdm}}\ =\ 0;}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symbol}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symbol}}\ !=\ nof\_symbols;\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symbol}})\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Skip\ symbol\ if\ it\ is\ not\ selected.}}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!config.symbols\_mask.test(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symbol}}))\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ view\ of\ the\ base\ DM-\/RS\ sequence.}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ cf\_t>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{base\_sequence}}\ =\ temp\_re.\mbox{\hyperlink{classsrsran_1_1static__re__buffer_a900371c4bb36aa06ee04505357c1dae6}{get\_slice}}(0).\mbox{\hyperlink{classsrsran_1_1span_ac5f02596fcb6e8f430a3e11e47a6d7e8}{subspan}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_proc\_re\_cdm}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_symbol}});}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ view\ of\ the\ CDM\ sequence\ destination.}}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<cf\_t>}}\ sequence\ =\ temp\_re.\mbox{\hyperlink{classsrsran_1_1static__re__buffer_a900371c4bb36aa06ee04505357c1dae6}{get\_slice}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_cdm\_port}}).\mbox{\hyperlink{classsrsran_1_1span_ac5f02596fcb6e8f430a3e11e47a6d7e8}{subspan}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_proc\_re\_cdm}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_symbol}});}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Apply\ the\ CDM\ codes.}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ apply\_cdm(sequence,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{base\_sequence}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_dmrs\_port}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_symbol}},\ config);}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Advance\ view.}}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_proc\_re\_cdm}}\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_re\_symbol}};}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ \ \ srsran\_assert((\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_proc\_re\_cdm}}\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_gen\_dmrs\_symbols}}),}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ length\ of\ the\ CDM-\/coded\ DM-\/RS\ (i.e.,\ \{\})\ for\ DM-\/RS\ port\ \{\}\ does\ not\ match\ the\ DM-\/RS\ sequence\ "{}}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}length\ (i.e.,\ \{\})"{}},}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_proc\_re\_cdm}},}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_dmrs\_port}},}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_gen\_dmrs\_symbols}});}
\DoxyCodeLine{00257\ \ \ \ \ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{comment}{//\ Map\ the\ CDM\ group\ symbols\ into\ the\ resource\ grid.}}
\DoxyCodeLine{00260\ \ \ \ \ mapper.\mbox{\hyperlink{classsrsran_1_1resource__grid__mapper_a9fc1909c95b969acdd14de808d4cb0c2}{map}}(temp\_re,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dmrs\_pattern\_cdm}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cdm\_group\_precoding}});}
\DoxyCodeLine{00261\ \ \ \}}
\DoxyCodeLine{00262\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/signal\+\_\+processors/dmrs\+\_\+pdsch\+\_\+processor\+\_\+impl.\+h\item 
lib/phy/upper/signal\+\_\+processors/dmrs\+\_\+pdsch\+\_\+processor\+\_\+impl.\+cpp\end{DoxyCompactItemize}
