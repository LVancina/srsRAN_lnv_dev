\doxysection{srsran\+::log\+\_\+sink\+\_\+message\+\_\+spy Class Reference}
\hypertarget{classsrsran_1_1log__sink__message__spy}{}\label{classsrsran_1_1log__sink__message__spy}\index{srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}}


{\ttfamily \#include $<$test\+\_\+utils.\+h$>$}



Inheritance diagram for srsran\+::log\+\_\+sink\+\_\+message\+\_\+spy\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=239pt]{d1/d97/classsrsran_1_1log__sink__message__spy__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::log\+\_\+sink\+\_\+message\+\_\+spy\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=239pt]{dd/d68/classsrsran_1_1log__sink__message__spy__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1log__sink__message__spy_a2e4b09f18ea87e43dc0294b6cde8d21e}{log\+\_\+sink\+\_\+message\+\_\+spy}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrslog_1_1log__formatter}{srslog\+::log\+\_\+formatter}} $>$ f)
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1log__sink__message__spy_a7ad35db72db59252f91ad255956eb50e}{reset}} ()
\begin{DoxyCompactList}\small\item\em Discards all registered log entries. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1log__sink__message__spy_a4f6ad18f3e6a0f9d9b1f4555537067b2}{has\+\_\+message}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} std\+::string \&msg) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Returns true if the string in msg is found in the registered log entries. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{srslog\+::detail\+::error\+\_\+string}} \mbox{\hyperlink{classsrsran_1_1log__sink__message__spy_add6ab6922d98be1bb18543ddd84b0f16}{write}} (\mbox{\hyperlink{classsrslog_1_1detail_1_1memory__buffer}{srslog\+::detail\+::memory\+\_\+buffer}} buffer) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Writes the provided memory buffer into the sink. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{srslog\+::detail\+::error\+\_\+string}} \mbox{\hyperlink{classsrsran_1_1log__sink__message__spy_a98223c0aa592fa253556968a68149763}{flush}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Flushes any buffered contents to the backing store. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrslog_1_1sink}{srslog\+::sink}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrslog_1_1sink_a67b8e754a3c8f4e1668b7d9305fdbb58}{sink}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrslog_1_1log__formatter}{log\+\_\+formatter}} $>$ f)
\item 
\mbox{\hyperlink{classsrslog_1_1log__formatter}{log\+\_\+formatter}} \& \mbox{\hyperlink{classsrslog_1_1sink_ace34bef8911e2766143a6e79e36e687b}{get\+\_\+formatter}} ()
\begin{DoxyCompactList}\small\item\em Returns the formatter used by this sink. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{classsrslog_1_1log__formatter}{log\+\_\+formatter}} \& \mbox{\hyperlink{classsrslog_1_1sink_aae43c1cb1aa24e9ae952b7ea18584fd3}{get\+\_\+formatter}} () const
\item 
virtual \mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{detail\+::error\+\_\+string}} \mbox{\hyperlink{classsrslog_1_1sink_acf4afffd3a90345c40b68ccae3c6b00d}{write\+\_\+error}} (\mbox{\hyperlink{classsrslog_1_1detail_1_1memory__buffer}{detail\+::memory\+\_\+buffer}} buffer)
\begin{DoxyCompactList}\small\item\em Writes as an error the provided memory buffer into the sink. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classsrsran_1_1log__sink__message__spy_adf4f953a6ff0cd9293d6935e74f0aa27}{name}} ()
\begin{DoxyCompactList}\small\item\em Identifier of this custom sink. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This custom sink intercepts log messages allowing users to check if a certain log entry has been generated. Calling spy.\+has\+\_\+message("{}something"{}) will return true if any log entries generated so far contain the string "{}something"{}. The log entries history can be cleared with reset so old entries can be discarded. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1log__sink__message__spy_a2e4b09f18ea87e43dc0294b6cde8d21e}\label{classsrsran_1_1log__sink__message__spy_a2e4b09f18ea87e43dc0294b6cde8d21e} 
\index{srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}!log\_sink\_message\_spy@{log\_sink\_message\_spy}}
\index{log\_sink\_message\_spy@{log\_sink\_message\_spy}!srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}}
\doxysubsubsection{\texorpdfstring{log\_sink\_message\_spy()}{log\_sink\_message\_spy()}}
{\footnotesize\ttfamily srsran\+::log\+\_\+sink\+\_\+message\+\_\+spy\+::log\+\_\+sink\+\_\+message\+\_\+spy (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrslog_1_1log__formatter}{srslog\+::log\+\_\+formatter}} $>$}]{f }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{classsrslog_1_1sink}{srslog::sink}}(std::move(f)),\ s(srslog::get\_default\_sink())}
\DoxyCodeLine{00101\ \ \ \{}
\DoxyCodeLine{00102\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1log__sink__message__spy_a98223c0aa592fa253556968a68149763}\label{classsrsran_1_1log__sink__message__spy_a98223c0aa592fa253556968a68149763} 
\index{srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}!flush@{flush}}
\index{flush@{flush}!srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}}
\doxysubsubsection{\texorpdfstring{flush()}{flush()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{srslog\+::detail\+::error\+\_\+string}} srsran\+::log\+\_\+sink\+\_\+message\+\_\+spy\+::flush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Flushes any buffered contents to the backing store. 



Implements \mbox{\hyperlink{classsrslog_1_1sink_a6f32149349a60fcf5c6ee68174ac5aa5}{srslog\+::sink}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00131\ \{\ \textcolor{keywordflow}{return}\ s.\mbox{\hyperlink{classsrslog_1_1sink_a6f32149349a60fcf5c6ee68174ac5aa5}{flush}}();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1log__sink__message__spy_a4f6ad18f3e6a0f9d9b1f4555537067b2}\label{classsrsran_1_1log__sink__message__spy_a4f6ad18f3e6a0f9d9b1f4555537067b2} 
\index{srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}!has\_message@{has\_message}}
\index{has\_message@{has\_message}!srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}}
\doxysubsubsection{\texorpdfstring{has\_message()}{has\_message()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::log\+\_\+sink\+\_\+message\+\_\+spy\+::has\+\_\+message (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} std\+::string \&}]{msg }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns true if the string in msg is found in the registered log entries. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00117\ \ \ \{}
\DoxyCodeLine{00118\ \ \ \ \ srslog::flush();}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{return}\ std::find\_if(entries.cbegin(),\ entries.cend(),\ [\&](\textcolor{keyword}{const}\ std::string\&\ entry)\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ entry.find(msg)\ !=\ std::string::npos;}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \})\ !=\ entries.cend();}
\DoxyCodeLine{00122\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1log__sink__message__spy_adf4f953a6ff0cd9293d6935e74f0aa27}\label{classsrsran_1_1log__sink__message__spy_adf4f953a6ff0cd9293d6935e74f0aa27} 
\index{srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}!name@{name}}
\index{name@{name}!srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}}
\doxysubsubsection{\texorpdfstring{name()}{name()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*} srsran\+::log\+\_\+sink\+\_\+message\+\_\+spy\+::name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Identifier of this custom sink. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00105\ \{\ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}log\_sink\_message\_spy"{}};\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1log__sink__message__spy_a7ad35db72db59252f91ad255956eb50e}\label{classsrsran_1_1log__sink__message__spy_a7ad35db72db59252f91ad255956eb50e} 
\index{srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}!reset@{reset}}
\index{reset@{reset}!srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::log\+\_\+sink\+\_\+message\+\_\+spy\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Discards all registered log entries. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00109\ \ \ \{}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{//\ Flush\ to\ make\ sure\ all\ entries\ have\ been\ processed\ by\ the\ backend.}}
\DoxyCodeLine{00111\ \ \ \ \ srslog::flush();}
\DoxyCodeLine{00112\ \ \ \ \ entries.clear();}
\DoxyCodeLine{00113\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1log__sink__message__spy_add6ab6922d98be1bb18543ddd84b0f16}\label{classsrsran_1_1log__sink__message__spy_add6ab6922d98be1bb18543ddd84b0f16} 
\index{srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}!write@{write}}
\index{write@{write}!srsran::log\_sink\_message\_spy@{srsran::log\_sink\_message\_spy}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrslog_1_1detail_1_1error__string}{srslog\+::detail\+::error\+\_\+string}} srsran\+::log\+\_\+sink\+\_\+message\+\_\+spy\+::write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1memory__buffer}{srslog\+::detail\+::memory\+\_\+buffer}}}]{buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Writes the provided memory buffer into the sink. 



Implements \mbox{\hyperlink{classsrslog_1_1sink_ad88268d4cca4ef27ec7c4a95cda288b1}{srslog\+::sink}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00125\ \ \ \{}
\DoxyCodeLine{00126\ \ \ \ \ entries.emplace\_back(buffer.\mbox{\hyperlink{classsrslog_1_1detail_1_1memory__buffer_a16d30488bcfc2b4dd889f66d7fd64233}{data}}(),\ buffer.\mbox{\hyperlink{classsrslog_1_1detail_1_1memory__buffer_a911bbffed1ea236e25f5533ad1183791}{size}}());}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{return}\ s.\mbox{\hyperlink{classsrslog_1_1sink_ad88268d4cca4ef27ec7c4a95cda288b1}{write}}(buffer);}
\DoxyCodeLine{00129\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/srsran/support/test\+\_\+utils.\+h\end{DoxyCompactItemize}
