\doxysection{lib/hal/dpdk/dpdk.h File Reference}
\hypertarget{dpdk_8h}{}\label{dpdk_8h}\index{lib/hal/dpdk/dpdk.h@{lib/hal/dpdk/dpdk.h}}


Definition of the common functions used by all ACC100-\/accelerated channel processor function implementations.  


{\ttfamily \#include "{}srsran/hal/dpdk/dpdk\+\_\+eal.\+h"{}}\newline
{\ttfamily \#include "{}srsran/srslog/logger.\+h"{}}\newline
{\ttfamily \#include $<$rte\+\_\+eal.\+h$>$}\newline
{\ttfamily \#include $<$rte\+\_\+mbuf.\+h$>$}\newline
Include dependency graph for dpdk.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d9b/dpdk_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/da4/dpdk_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespacesrsran}{srsran}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{dpdk_8h_addab3d7b95d5ea440265e55ac82e5b7d}{srsran\+::dpdk\+::eal\+\_\+init}} (\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{argc}}, \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{argv}}, \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&logger)
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rte\+\_\+mempool}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{dpdk_8h_af73891750ec7290c3f6d80118100e563}{srsran\+::dpdk\+::create\+\_\+mem\+\_\+pool}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*}pool\+\_\+name, \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{socket}}, \mbox{\hyperlink{classunsigned}{unsigned}} n\+\_\+mbuf, \mbox{\hyperlink{classunsigned}{unsigned}} mempool\+\_\+cache\+\_\+size, \mbox{\hyperlink{classunsigned}{unsigned}} mbuf\+\_\+data\+\_\+size, \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&logger)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Definition of the common functions used by all ACC100-\/accelerated channel processor function implementations. 

Common DPDK support functions.

\doxysubsection{Function Documentation}
\Hypertarget{dpdk_8h_af73891750ec7290c3f6d80118100e563}\label{dpdk_8h_af73891750ec7290c3f6d80118100e563} 
\index{dpdk.h@{dpdk.h}!create\_mem\_pool@{create\_mem\_pool}}
\index{create\_mem\_pool@{create\_mem\_pool}!dpdk.h@{dpdk.h}}
\doxysubsubsection{\texorpdfstring{create\_mem\_pool()}{create\_mem\_pool()}}
{\footnotesize\ttfamily rte\+\_\+mempool \texorpdfstring{$\ast$}{*} srsran\+::dpdk\+::create\+\_\+mem\+\_\+pool (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*}}]{pool\+\_\+name,  }\item[{\mbox{\hyperlink{classint}{int}}}]{socket,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{n\+\_\+mbuf,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{mempool\+\_\+cache\+\_\+size,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{mbuf\+\_\+data\+\_\+size,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger }\end{DoxyParamCaption})}

Creates a new memory pool for a given hardware-\/accelerator device. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em pool\+\_\+name} & Unique ID for the new mbuf pool. \\
\hline
\mbox{\texttt{ in}}  & {\em socket} & Socket used by the bbdev accelerator. \\
\hline
\mbox{\texttt{ in}}  & {\em n\+\_\+mbuf} & Number of elements in the mbuf pool. \\
\hline
\mbox{\texttt{ in}}  & {\em mempool\+\_\+cache\+\_\+size} & Size of the per-\/core object cache. \\
\hline
\mbox{\texttt{ in}}  & {\em mbuf\+\_\+data\+\_\+size} & Size of data buffer in each mbuf. \\
\hline
\mbox{\texttt{ in}}  & {\em logger} & SRS logger. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the created mbuf pool. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00050\ \{}
\DoxyCodeLine{00051\ \ \ \textcolor{comment}{//\ Create\ a\ new\ mbuf\ pool\ for\ the\ hardware-\/accelerated\ functions.}}
\DoxyCodeLine{00052\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::rte\_mempool}}*\ \mbox{\hyperlink{classsrsran_1_1dpdk_1_1mbuf__pool}{mbuf\_pool}}\ =}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::rte\_pktmbuf\_pool\_create}}(pool\_name,\ n\_mbuf,\ mempool\_cache\_size,\ 0,\ mbuf\_data\_size,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{socket}});}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsrsran_1_1dpdk_1_1mbuf__pool}{mbuf\_pool}}\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00056\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}dpdk:\ create\_mbuf\_pool\ '\{\}'\ failed\ (size\ \{\})"{}},\ pool\_name,\ mbuf\_data\_size);}
\DoxyCodeLine{00057\ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsrsran_1_1dpdk_1_1mbuf__pool}{mbuf\_pool}};}
\DoxyCodeLine{00060\ \}}

\end{DoxyCode}
\Hypertarget{dpdk_8h_addab3d7b95d5ea440265e55ac82e5b7d}\label{dpdk_8h_addab3d7b95d5ea440265e55ac82e5b7d} 
\index{dpdk.h@{dpdk.h}!eal\_init@{eal\_init}}
\index{eal\_init@{eal\_init}!dpdk.h@{dpdk.h}}
\doxysubsubsection{\texorpdfstring{eal\_init()}{eal\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::dpdk\+::eal\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{argc,  }\item[{\mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{argv,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger }\end{DoxyParamCaption})}

EAL initialization (called at application init). 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em argc,argv} & Command line arguments. \\
\hline
\mbox{\texttt{ in}}  & {\em logger} & SRS logger. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00032\ \{}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::rte\_eal\_init}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{argc}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{argv}})\ <\ 0)\ \{}
\DoxyCodeLine{00034\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}dpdk:\ rte\_eal\_init\ failed"{}});}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00036\ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00039\ \}}

\end{DoxyCode}
