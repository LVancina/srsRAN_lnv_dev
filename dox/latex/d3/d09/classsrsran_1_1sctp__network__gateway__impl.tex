\doxysection{srsran\+::sctp\+\_\+network\+\_\+gateway\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1sctp__network__gateway__impl}{}\label{classsrsran_1_1sctp__network__gateway__impl}\index{srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}}


Inheritance diagram for srsran\+::sctp\+\_\+network\+\_\+gateway\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{df/d48/classsrsran_1_1sctp__network__gateway__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::sctp\+\_\+network\+\_\+gateway\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d3/d64/classsrsran_1_1sctp__network__gateway__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__impl_af98fa1cf0e3257bf03d299ae1e26ab60}{sctp\+\_\+network\+\_\+gateway\+\_\+impl}} (\mbox{\hyperlink{structsrsran_1_1sctp__network__gateway__config}{sctp\+\_\+network\+\_\+gateway\+\_\+config}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{config\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__control__notifier}{sctp\+\_\+network\+\_\+gateway\+\_\+control\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ctrl\+\_\+notfier\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1network__gateway__data__notifier}{network\+\_\+gateway\+\_\+data\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{data\+\_\+notifier\+\_\+}})
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__impl_a9e785b1be48c75d1a8999ae7312a59f5}{create\+\_\+and\+\_\+connect}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Create and connect socket to given address. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__impl_a01778b410bca995a567ce00c568606e2}{get\+\_\+socket\+\_\+fd}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Return socket file descriptor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__impl_a28b0744772c3ef9e7a8d673b6cd72e47}{receive}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Trigger receive call on socket. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__impl_a86897e24298889b09d86e56c36265056}{handle\+\_\+pdu}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\+\_\+buffer}} \&pdu) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Set socket to non-\/blocking-\/mode. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__impl_aa61fe4e28127a4304793559c8ae5b054}{create\+\_\+and\+\_\+bind}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Create and bind socket to given address. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__impl_a7162e5b40bd39225f6d2753e50b874e9}{listen}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Start listening on socket. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ uint16\+\_\+t $>$ \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__impl_a22306648cfe5fe19148f23368fe08821}{get\+\_\+listen\+\_\+port}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Return the port on which the socket is listening. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1sctp__network__gateway__impl_af98fa1cf0e3257bf03d299ae1e26ab60}\label{classsrsran_1_1sctp__network__gateway__impl_af98fa1cf0e3257bf03d299ae1e26ab60} 
\index{srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}!sctp\_network\_gateway\_impl@{sctp\_network\_gateway\_impl}}
\index{sctp\_network\_gateway\_impl@{sctp\_network\_gateway\_impl}!srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}}
\doxysubsubsection{\texorpdfstring{sctp\_network\_gateway\_impl()}{sctp\_network\_gateway\_impl()}}
{\footnotesize\ttfamily sctp\+\_\+network\+\_\+gateway\+\_\+impl\+::sctp\+\_\+network\+\_\+gateway\+\_\+impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1sctp__network__gateway__config}{sctp\+\_\+network\+\_\+gateway\+\_\+config}}}]{config\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__control__notifier}{sctp\+\_\+network\+\_\+gateway\+\_\+control\+\_\+notifier}} \&}]{ctrl\+\_\+notfier\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1network__gateway__data__notifier}{network\+\_\+gateway\+\_\+data\+\_\+notifier}} \&}]{data\+\_\+notifier\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00035\ \ \ config(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{config\_}})),}
\DoxyCodeLine{00036\ \ \ ctrl\_notifier(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ctrl\_notfier\_}}),}
\DoxyCodeLine{00037\ \ \ data\_notifier(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{data\_notifier\_}}),}
\DoxyCodeLine{00038\ \ \ logger(srslog::fetch\_basic\_logger(\textcolor{stringliteral}{"{}SCTP-\/GW"{}}))}
\DoxyCodeLine{00039\ \{}
\DoxyCodeLine{00040\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1sctp__network__gateway__impl_aeb2879a325fa657c0290bfeddeca5417}\label{classsrsran_1_1sctp__network__gateway__impl_aeb2879a325fa657c0290bfeddeca5417} 
\index{srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}!````~sctp\_network\_gateway\_impl@{\texorpdfstring{$\sim$}{\string~}sctp\_network\_gateway\_impl}}
\index{````~sctp\_network\_gateway\_impl@{\texorpdfstring{$\sim$}{\string~}sctp\_network\_gateway\_impl}!srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}sctp\_network\_gateway\_impl()}{\string~sctp\_network\_gateway\_impl()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} srsran\+::sctp\+\_\+network\+\_\+gateway\+\_\+impl\+::\texorpdfstring{$\sim$}{\string~}sctp\+\_\+network\+\_\+gateway\+\_\+impl (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00039\ \{\ close\_socket();\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1sctp__network__gateway__impl_aa61fe4e28127a4304793559c8ae5b054}\label{classsrsran_1_1sctp__network__gateway__impl_aa61fe4e28127a4304793559c8ae5b054} 
\index{srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}!create\_and\_bind@{create\_and\_bind}}
\index{create\_and\_bind@{create\_and\_bind}!srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}}
\doxysubsubsection{\texorpdfstring{create\_and\_bind()}{create\_and\_bind()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} sctp\+\_\+network\+\_\+gateway\+\_\+impl\+::create\+\_\+and\+\_\+bind (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Create and bind socket to given address. 



Implements \mbox{\hyperlink{classsrsran_1_1network__gateway__controller_a9c0e4bf6fb69ba5e19e98767baba1a8b}{srsran\+::network\+\_\+gateway\+\_\+controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00124\ \{}
\DoxyCodeLine{00125\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{addrinfo}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}};}
\DoxyCodeLine{00126\ \ \ \textcolor{comment}{//\ support\ ipv4,\ ipv6\ and\ hostnames}}
\DoxyCodeLine{00127\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_family\ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{AF\_UNSPEC}};}
\DoxyCodeLine{00128\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_socktype\ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{SOCK\_SEQPACKET}};}
\DoxyCodeLine{00129\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_flags\ \ \ \ \ =\ 0;}
\DoxyCodeLine{00130\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_protocol\ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{IPPROTO\_SCTP}};}
\DoxyCodeLine{00131\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_canonname\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00132\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_addr\ \ \ \ \ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00133\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_next\ \ \ \ \ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ std::string\ \ \ \ \ \ bind\_port\ =\ std::to\_string(config.bind\_port);}
\DoxyCodeLine{00136\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{addrinfo}}*\ results;}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{getaddrinfo}}(config.bind\_address.c\_str(),\ bind\_port.c\_str(),\ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}},\ \&results);}
\DoxyCodeLine{00139\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ !=\ 0)\ \{}
\DoxyCodeLine{00140\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Getaddrinfo\ error:\ \{\}\ -\/\ \{\}"{}},\ config.bind\_address,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gai\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}));}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00142\ \ \ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{addrinfo}}*\ result;}
\DoxyCodeLine{00145\ \ \ \textcolor{keywordflow}{for}\ (result\ =\ results;\ result\ !=\ \textcolor{keyword}{nullptr};\ result\ =\ result-\/>ai\_next)\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{comment}{//\ create\ SCTP\ socket}}
\DoxyCodeLine{00147\ \ \ \ \ sock\_fd\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::socket}}(result-\/>ai\_family,\ result-\/>ai\_socktype,\ result-\/>ai\_protocol);}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{if}\ (sock\_fd\ ==\ -\/1)\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}};}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ESOCKTNOSUPPORT}})\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ probably\ the\ sctp\ kernel\ module\ is\ missing\ on\ the\ system,\ inform\ the\ user\ and\ exit\ here}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ logger.error(}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ create\ SCTP\ socket:\ \{\}.\ Hint:\ Please\ ensure\ 'sctp'\ kernel\ module\ is\ available\ on\ the\ system."{}},}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}));}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a355eafe8d872b8f555172fa7bcd1482f}{report\_error}}(}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ create\ SCTP\ socket:\ \{\}.\ Hint:\ Please\ ensure\ 'sctp'\ kernel\ module\ is\ available\ on\ the\ system.\(\backslash\)n"{}},}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}));}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00161\ \ \ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ set\_sockopts())\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ close\_socket();}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00166\ \ \ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keywordtype}{char}\ ip\_addr[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_MAXHOST}}],\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_nr}}[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_MAXSERV}}];}
\DoxyCodeLine{00169\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{getnameinfo}}(}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ result-\/>ai\_addr,\ result-\/>ai\_addrlen,\ ip\_addr,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_MAXHOST}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_nr}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_MAXSERV}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_NUMERICHOST}}\ |\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_NUMERICSERV}});}
\DoxyCodeLine{00171\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Binding\ to\ \{\}\ port\ \{\}"{}},\ ip\_addr,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_nr}});}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::bind}}(sock\_fd,\ result-\/>ai\_addr,\ result-\/>ai\_addrlen)\ ==\ -\/1)\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \textcolor{comment}{//\ binding\ failed,\ try\ next\ address}}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}};}
\DoxyCodeLine{00176\ \ \ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Failed\ to\ bind\ to\ \{\}:\{\}\ -\/\ \{\}"{}},\ ip\_addr,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_nr}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}));}
\DoxyCodeLine{00177\ \ \ \ \ \ \ close\_socket();}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00179\ \ \ \ \ \}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//\ store\ client\ address}}
\DoxyCodeLine{00182\ \ \ \ \ std::memcpy(\&client\_addr,\ result-\/>ai\_addr,\ result-\/>ai\_addrlen);}
\DoxyCodeLine{00183\ \ \ \ \ client\_addrlen\ \ \ \ \ =\ result-\/>ai\_addrlen;}
\DoxyCodeLine{00184\ \ \ \ \ client\_ai\_family\ \ \ =\ result-\/>ai\_family;}
\DoxyCodeLine{00185\ \ \ \ \ client\_ai\_socktype\ =\ result-\/>ai\_socktype;}
\DoxyCodeLine{00186\ \ \ \ \ client\_ai\_protocol\ =\ result-\/>ai\_protocol;}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{comment}{//\ set\ socket\ to\ non-\/blocking\ after\ bind\ is\ successful}}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordflow}{if}\ (config.non\_blocking\_mode)\ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ set\_non\_blocking())\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ failed,\ try\ next\ address}}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Socket\ not\ non-\/blocking"{}});}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ close\_socket();}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00196\ \ \ \ \ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Binding\ successful"{}});}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00200\ \ \ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{freeaddrinfo}}(results);}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \textcolor{keywordflow}{if}\ (sock\_fd\ ==\ -\/1)\ \{}
\DoxyCodeLine{00205\ \ \ \ \ fmt::print(\textcolor{stringliteral}{"{}Failed\ to\ bind\ \{\}\ socket\ to\ \{\}:\{\}.\ \{\}\(\backslash\)n"{}},}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ipproto\_to\_string(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_protocol),}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.bind\_address,}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.bind\_port,}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}));}
\DoxyCodeLine{00210\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ bind\ \{\}\ socket\ to\ \{\}:\{\}.\ \{\}"{}},}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ipproto\_to\_string(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_protocol),}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.bind\_address,}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.bind\_port,}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}));}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00216\ \ \ \}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00219\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1sctp__network__gateway__impl_a9e785b1be48c75d1a8999ae7312a59f5}\label{classsrsran_1_1sctp__network__gateway__impl_a9e785b1be48c75d1a8999ae7312a59f5} 
\index{srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}!create\_and\_connect@{create\_and\_connect}}
\index{create\_and\_connect@{create\_and\_connect}!srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}}
\doxysubsubsection{\texorpdfstring{create\_and\_connect()}{create\_and\_connect()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} sctp\+\_\+network\+\_\+gateway\+\_\+impl\+::create\+\_\+and\+\_\+connect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Create and connect socket to given address. 



Implements \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__controller_ae00cc4599c95dc5c97f35b1de7f87725}{srsran\+::sctp\+\_\+network\+\_\+gateway\+\_\+controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00267\ \{}
\DoxyCodeLine{00268\ \ \ \textcolor{comment}{//\ bind\ to\ address/port}}
\DoxyCodeLine{00269\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ config.bind\_address.empty())\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__impl_aa61fe4e28127a4304793559c8ae5b054}{create\_and\_bind}}())\ \{}
\DoxyCodeLine{00271\ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Couldn't\ bind\ to\ address\ \{\}:\{\}"{}},\ config.bind\_address,\ config.bind\_port);}
\DoxyCodeLine{00272\ \ \ \ \ \ \ close\_socket();}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00274\ \ \ \ \ \}}
\DoxyCodeLine{00275\ \ \ \}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{addrinfo}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}};}
\DoxyCodeLine{00278\ \ \ \textcolor{comment}{//\ support\ ipv4,\ ipv6\ and\ hostnames}}
\DoxyCodeLine{00279\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_family\ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{AF\_UNSPEC}};}
\DoxyCodeLine{00280\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_socktype\ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{SOCK\_SEQPACKET}};}
\DoxyCodeLine{00281\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_flags\ \ \ \ \ =\ 0;}
\DoxyCodeLine{00282\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_protocol\ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{IPPROTO\_SCTP}};}
\DoxyCodeLine{00283\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_canonname\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00284\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_addr\ \ \ \ \ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00285\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_next\ \ \ \ \ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ std::string\ \ \ \ \ \ connect\_port\ =\ std::to\_string(config.connect\_port);}
\DoxyCodeLine{00288\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{addrinfo}}*\ results;}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{getaddrinfo}}(config.connect\_address.c\_str(),\ connect\_port.c\_str(),\ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}},\ \&results);}
\DoxyCodeLine{00291\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ !=\ 0)\ \{}
\DoxyCodeLine{00292\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Getaddrinfo\ error:\ \{\}\ -\/\ \{\}"{}},\ config.connect\_address,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gai\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}));}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00294\ \ \ \}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ fmt::print(\textcolor{stringliteral}{"{}Connecting\ to\ \{\}\ on\ \{\}:\{\}\(\backslash\)n"{}},}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ config.connection\_name.c\_str(),}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ config.connect\_address.c\_str(),}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ connect\_port.c\_str());}
\DoxyCodeLine{00300\ \ \ std::chrono::time\_point<std::chrono::steady\_clock>\ start\ =\ std::chrono::steady\_clock::now();}
\DoxyCodeLine{00301\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{addrinfo}}*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result;}
\DoxyCodeLine{00302\ \ \ \textcolor{keywordflow}{for}\ (result\ =\ results;\ result\ !=\ \textcolor{keyword}{nullptr};\ result\ =\ result-\/>ai\_next)\ \{}
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{comment}{//\ Create\ SCTP\ socket\ only\ if\ not\ created\ in\ create\_and\_bind\ function.}}
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{keywordflow}{if}\ (sock\_fd\ ==\ -\/1)\ \{}
\DoxyCodeLine{00305\ \ \ \ \ \ \ sock\_fd\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::socket}}(result-\/>ai\_family,\ result-\/>ai\_socktype,\ result-\/>ai\_protocol);}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sock\_fd\ ==\ -\/1)\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}};}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ESOCKTNOSUPPORT}})\ \{}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ probably\ the\ sctp\ kernel\ module\ is\ missing\ on\ the\ system,\ inform\ the\ user\ and\ exit\ here}}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ logger.error(}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ create\ SCTP\ socket:\ \{\}.\ Hint:\ Please\ ensure\ 'sctp'\ kernel\ module\ is\ available\ on\ the\ system."{}},}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}));}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a355eafe8d872b8f555172fa7bcd1482f}{report\_error}}(\textcolor{stringliteral}{"{}Failed\ to\ create\ SCTP\ socket:\ \{\}.\ Hint:\ Please\ ensure\ 'sctp'\ kernel\ module\ is\ available\ on\ the\ "{}}}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}system.\(\backslash\)n"{}},}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}));}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00320\ \ \ \ \ \}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ set\_sockopts())\ \{}
\DoxyCodeLine{00323\ \ \ \ \ \ \ close\_socket();}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00325\ \ \ \ \ \}}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keywordtype}{char}\ ip\_addr[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_MAXHOST}}],\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_nr}}[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_MAXSERV}}];}
\DoxyCodeLine{00328\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{getnameinfo}}(}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ result-\/>ai\_addr,\ result-\/>ai\_addrlen,\ ip\_addr,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_MAXHOST}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_nr}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_MAXSERV}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_NUMERICHOST}}\ |\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NI\_NUMERICSERV}});}
\DoxyCodeLine{00330\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Connecting\ to\ \{\}\ port\ \{\}"{}},\ ip\_addr,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_nr}});}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{keywordflow}{if}\ (::connect(sock\_fd,\ result-\/>ai\_addr,\ result-\/>ai\_addrlen)\ ==\ -\/1)\ \{}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \textcolor{comment}{//\ connection\ failed,\ try\ next\ address}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}};}
\DoxyCodeLine{00335\ \ \ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Failed\ to\ connect\ to\ \{\}:\{\}\ -\/\ \{\}"{}},\ ip\_addr,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_nr}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}));}
\DoxyCodeLine{00336\ \ \ \ \ \ \ close\_socket();}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00338\ \ \ \ \ \}}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{comment}{//\ store\ server\ address}}
\DoxyCodeLine{00341\ \ \ \ \ std::memcpy(\&server\_addr,\ result-\/>ai\_addr,\ result-\/>ai\_addrlen);}
\DoxyCodeLine{00342\ \ \ \ \ server\_addrlen\ \ \ \ \ =\ result-\/>ai\_addrlen;}
\DoxyCodeLine{00343\ \ \ \ \ server\_ai\_family\ \ \ =\ result-\/>ai\_family;}
\DoxyCodeLine{00344\ \ \ \ \ server\_ai\_socktype\ =\ result-\/>ai\_socktype;}
\DoxyCodeLine{00345\ \ \ \ \ server\_ai\_protocol\ =\ result-\/>ai\_protocol;}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{comment}{//\ set\ socket\ to\ non-\/blocking\ after\ connect\ is\ established}}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keywordflow}{if}\ (config.non\_blocking\_mode)\ \{}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ set\_non\_blocking())\ \{}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ failed,\ try\ next\ address}}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Socket\ not\ non-\/blocking"{}});}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ close\_socket();}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00355\ \ \ \ \ \}}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{comment}{//\ If\ connected\ then\ use\ server\ address\ as\ destination\ address.}}
\DoxyCodeLine{00358\ \ \ \ \ std::memcpy(\&msg\_dst\_addr,\ \&server\_addr,\ server\_addrlen);}
\DoxyCodeLine{00359\ \ \ \ \ msg\_dst\_addrlen\ =\ server\_addrlen;}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Connection\ successful"{}});}
\DoxyCodeLine{00362\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00363\ \ \ \}}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{freeaddrinfo}}(results);}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \textcolor{keywordflow}{if}\ (sock\_fd\ ==\ -\/1)\ \{}
\DoxyCodeLine{00368\ \ \ \ \ std::chrono::time\_point<std::chrono::steady\_clock>\ end\ =\ std::chrono::steady\_clock::now();}
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{now\_ms}}\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(end\ -\/\ start);}
\DoxyCodeLine{00370\ \ \ \ \ fmt::print(\textcolor{stringliteral}{"{}Failed\ to\ connect\ \{\}\ socket\ to\ \{\}:\{\}.\ error=\(\backslash\)"{}\{\}\(\backslash\)"{}\ timeout=\{\}ms\(\backslash\)n"{}},}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ipproto\_to\_string(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_protocol),}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.connect\_address,}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.connect\_port,}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}),}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{now\_ms}}.count());}
\DoxyCodeLine{00376\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ connect\ \{\}\ socket\ to\ \{\}:\{\}.\ error=\(\backslash\)"{}\{\}\(\backslash\)"{}\ timeout=\{\}ms"{}},}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ipproto\_to\_string(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hints}}.ai\_protocol),}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.connect\_address,}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.connect\_port,}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}),}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{now\_ms}}.count());}
\DoxyCodeLine{00382\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00383\ \ \ \}}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00386\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1sctp__network__gateway__impl_a22306648cfe5fe19148f23368fe08821}\label{classsrsran_1_1sctp__network__gateway__impl_a22306648cfe5fe19148f23368fe08821} 
\index{srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}!get\_listen\_port@{get\_listen\_port}}
\index{get\_listen\_port@{get\_listen\_port}!srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}}
\doxysubsubsection{\texorpdfstring{get\_listen\_port()}{get\_listen\_port()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ uint16\+\_\+t $>$ sctp\+\_\+network\+\_\+gateway\+\_\+impl\+::get\+\_\+listen\+\_\+port (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Return the port on which the socket is listening. 



Implements \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__controller_a9272d258eb59d4112bb8724c0871619c}{srsran\+::sctp\+\_\+network\+\_\+gateway\+\_\+controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00235\ \{}
\DoxyCodeLine{00236\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ is\_initialized())\ \{}
\DoxyCodeLine{00237\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Socket\ of\ UDP\ network\ gateway\ not\ initialized."{}});}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00239\ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ sockaddr\_storage\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr\_storage}};}
\DoxyCodeLine{00242\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sockaddr}}*\ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr}}\ \ \ \ \ =\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sockaddr}}*)\&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr\_storage}};}
\DoxyCodeLine{00243\ \ \ socklen\_t\ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr\_len}}\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr\_storage}});}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{getsockname}}(sock\_fd,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr}},\ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr\_len}});}
\DoxyCodeLine{00246\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ !=\ 0)\ \{}
\DoxyCodeLine{00247\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ \`{}getsockname`\ in\ SCTP\ network\ gateway\ with\ sock\_fd=\{\}:\ \{\}"{}},\ sock\_fd,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}}));}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00249\ \ \ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ uint16\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_listen\_port}};}
\DoxyCodeLine{00252\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr}}-\/>sa\_family\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{AF\_INET}})\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_listen\_port}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ntohs}}(((sockaddr\_in*)\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr}})-\/>\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sin\_port}});}
\DoxyCodeLine{00254\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr}}-\/>sa\_family\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{AF\_INET6}})\ \{}
\DoxyCodeLine{00255\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_listen\_port}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ntohs}}(((\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sockaddr\_in6}}*)\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr}})-\/>\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sin6\_port}});}
\DoxyCodeLine{00256\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00257\ \ \ \ \ logger.error(}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Unhandled\ address\ family\ in\ SCTP\ network\ gateway\ with\ sock\_fd=\{\},\ family=\{\}"{}},\ sock\_fd,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_addr}}-\/>sa\_family);}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00260\ \ \ \}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ logger.debug(\textcolor{stringliteral}{"{}Read\ bind\ port\ of\ SCTP\ network\ gateway:\ \{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_listen\_port}});}
\DoxyCodeLine{00263\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gw\_listen\_port}};}
\DoxyCodeLine{00264\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1sctp__network__gateway__impl_a01778b410bca995a567ce00c568606e2}\label{classsrsran_1_1sctp__network__gateway__impl_a01778b410bca995a567ce00c568606e2} 
\index{srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}!get\_socket\_fd@{get\_socket\_fd}}
\index{get\_socket\_fd@{get\_socket\_fd}!srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}}
\doxysubsubsection{\texorpdfstring{get\_socket\_fd()}{get\_socket\_fd()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} sctp\+\_\+network\+\_\+gateway\+\_\+impl\+::get\+\_\+socket\+\_\+fd (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Return socket file descriptor. 



Implements \mbox{\hyperlink{classsrsran_1_1network__gateway__controller_a6bc57302bb572f201965e19ad501a3ab}{srsran\+::network\+\_\+gateway\+\_\+controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00488\ \{}
\DoxyCodeLine{00489\ \ \ \textcolor{keywordflow}{return}\ sock\_fd;}
\DoxyCodeLine{00490\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1sctp__network__gateway__impl_a86897e24298889b09d86e56c36265056}\label{classsrsran_1_1sctp__network__gateway__impl_a86897e24298889b09d86e56c36265056} 
\index{srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}!handle\_pdu@{handle\_pdu}}
\index{handle\_pdu@{handle\_pdu}!srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}}
\doxysubsubsection{\texorpdfstring{handle\_pdu()}{handle\_pdu()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} sctp\+\_\+network\+\_\+gateway\+\_\+impl\+::handle\+\_\+pdu (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\+\_\+buffer}} \&}]{pdu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Set socket to non-\/blocking-\/mode. 



Implements \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__data__handler_a4bb65dd68f5340d3f29224ca1ae21d7d}{srsran\+::sctp\+\_\+network\+\_\+gateway\+\_\+data\+\_\+handler}}.

\Hypertarget{classsrsran_1_1sctp__network__gateway__impl_a7162e5b40bd39225f6d2753e50b874e9}\label{classsrsran_1_1sctp__network__gateway__impl_a7162e5b40bd39225f6d2753e50b874e9} 
\index{srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}!listen@{listen}}
\index{listen@{listen}!srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}}
\doxysubsubsection{\texorpdfstring{listen()}{listen()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} sctp\+\_\+network\+\_\+gateway\+\_\+impl\+::listen (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Start listening on socket. 



Implements \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__controller_a86851d7f59b4c8842a1b9726a4f87564}{srsran\+::sctp\+\_\+network\+\_\+gateway\+\_\+controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00222\ \{}
\DoxyCodeLine{00223\ \ \ \textcolor{comment}{//\ Listen\ for\ connections}}
\DoxyCodeLine{00224\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ =\ \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__impl_a7162e5b40bd39225f6d2753e50b874e9}{::listen}}(sock\_fd,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{SOMAXCONN}});}
\DoxyCodeLine{00225\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ !=\ 0)\ \{}
\DoxyCodeLine{00226\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Error\ in\ SCTP\ socket\ listen:\ \{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}}));}
\DoxyCodeLine{00227\ \ \ \ \ close\_socket();}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00229\ \ \ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00232\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1sctp__network__gateway__impl_a28b0744772c3ef9e7a8d673b6cd72e47}\label{classsrsran_1_1sctp__network__gateway__impl_a28b0744772c3ef9e7a8d673b6cd72e47} 
\index{srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}!receive@{receive}}
\index{receive@{receive}!srsran::sctp\_network\_gateway\_impl@{srsran::sctp\_network\_gateway\_impl}}
\doxysubsubsection{\texorpdfstring{receive()}{receive()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} sctp\+\_\+network\+\_\+gateway\+\_\+impl\+::receive (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Trigger receive call on socket. 



Implements \mbox{\hyperlink{classsrsran_1_1network__gateway__controller_a525587c1087992b09956c233fa82c6a5}{srsran\+::network\+\_\+gateway\+\_\+controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00455\ \{}
\DoxyCodeLine{00456\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sctp\_sndrcvinfo}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sri}}\ \ \ \ \ \ \ =\ \{\};}
\DoxyCodeLine{00457\ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\_flags}}\ =\ 0;}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ \textcolor{comment}{//\ Fixme:\ consider\ class\ member\ on\ heap\ when\ sequential\ access\ is\ guaranteed}}
\DoxyCodeLine{00460\ \ \ std::array<uint8\_t,\ network\_gateway\_sctp\_max\_len>\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp\_mem}};\ \textcolor{comment}{//\ no\ init}}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00462\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_bytes}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::sctp\_recvmsg}}(sock\_fd,}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp\_mem}}.data(),}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ network\_gateway\_sctp\_max\_len,}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keyword}{struct}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sockaddr}}*)\&msg\_src\_addr,}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&msg\_src\_addrlen,}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sri}},}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\_flags}});}
\DoxyCodeLine{00469\ }
\DoxyCodeLine{00470\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_bytes}}\ ==\ -\/1\ \&\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}}\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EAGAIN}})\ \{}
\DoxyCodeLine{00471\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Error\ reading\ from\ SCTP\ socket:\ \{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}}));}
\DoxyCodeLine{00472\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_bytes}}\ ==\ -\/1\ \&\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}}\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EAGAIN}})\ \{}
\DoxyCodeLine{00473\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Socket\ timeout\ reached"{}});}
\DoxyCodeLine{00474\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00475\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Received\ \{\}\ bytes\ on\ SCTP\ socket"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_bytes}});}
\DoxyCodeLine{00476\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<socket\_buffer\_type>}}\ payload(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp\_mem}}.data(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_bytes}});}
\DoxyCodeLine{00477\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\_flags}}\ \&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{MSG\_NOTIFICATION}})\ \{}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \textcolor{comment}{//\ Received\ notification}}
\DoxyCodeLine{00479\ \ \ \ \ \ \ handle\_notification(payload);}
\DoxyCodeLine{00480\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \textcolor{comment}{//\ Received\ data}}
\DoxyCodeLine{00482\ \ \ \ \ \ \ handle\_data(payload);}
\DoxyCodeLine{00483\ \ \ \ \ \}}
\DoxyCodeLine{00484\ \ \ \}}
\DoxyCodeLine{00485\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/gateways/sctp\+\_\+network\+\_\+gateway\+\_\+impl.\+h\item 
lib/gateways/sctp\+\_\+network\+\_\+gateway\+\_\+impl.\+cpp\end{DoxyCompactItemize}
