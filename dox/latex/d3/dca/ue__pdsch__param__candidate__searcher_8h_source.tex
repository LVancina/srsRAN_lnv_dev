\doxysection{ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher.\+h}
\hypertarget{ue__pdsch__param__candidate__searcher_8h_source}{}\label{ue__pdsch__param__candidate__searcher_8h_source}\index{lib/scheduler/ue\_scheduling/ue\_pdsch\_param\_candidate\_searcher.h@{lib/scheduler/ue\_scheduling/ue\_pdsch\_param\_candidate\_searcher.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ 2021-\/2024\ Software\ Radio\ Systems\ Limited}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ srsRAN.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ srsRAN\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ it\ under\ the\ terms\ of\ the\ GNU\ Affero\ General\ Public\ License\ as}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ published\ by\ the\ Free\ Software\ Foundation,\ either\ version\ 3\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ the\ License,\ or\ (at\ your\ option)\ any\ later\ version.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ srsRAN\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ GNU\ Affero\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ A\ copy\ of\ the\ GNU\ Affero\ General\ Public\ License\ can\ be\ found\ in}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ the\ LICENSE\ file\ in\ the\ top-\/level\ directory\ of\ this\ distribution}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ and\ at\ http://www.gnu.org/licenses/.}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{pragma}\ \textcolor{preprocessor}{once}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \mbox{\hyperlink{ue_8h}{"{}ue.h"{}}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{namespace}\ \mbox{\hyperlink{namespacesrsran}{srsran}}\ \{}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{comment}{///\ \(\backslash\)brief\ This\ class\ assists\ with\ the\ search\ of\ PDSCH\ parameters\ given\ an\ UE\ config\ that\ ensures\ a\ valid\ UE\ PDSCH}}
\DoxyCodeLine{00030\ \textcolor{comment}{///\ resource\ allocation\ in\ the\ Cell\ Resource\ Grid.\ The\ search\ iterates\ through\ different\ HARQ,\ SearchSpace\ and\ PDSCH}}
\DoxyCodeLine{00031\ \textcolor{comment}{///\ time-\/domain\ resource\ candidates,\ returning\ only\ the\ valid\ ones.\ This\ class\ operates\ as\ a\ range\ with\ begin()}}
\DoxyCodeLine{00032\ \textcolor{comment}{///\ and\ end()\ iterators,\ and\ only\ searches\ for\ valid\ candidates\ in\ a\ lazy\ fashion.\ That\ means\ that\ we\ only\ compute}}
\DoxyCodeLine{00033\ \textcolor{comment}{///\ all\ valid\ candidates\ if\ we\ iterate\ from\ begin()\ to\ end().}}
\DoxyCodeLine{00034\ \textcolor{comment}{///}}
\DoxyCodeLine{00035\ \textcolor{comment}{///\ To\ be\ a\ valid\ candidate,\ the\ following\ conditions\ must\ be\ met:}}
\DoxyCodeLine{00036\ \textcolor{comment}{///\ -\/\ The\ HARQ\ process\ state\ must\ match\ the\ \(\backslash\)c\ is\_retx\ state\ passed\ in\ the\ constructor.\ If\ \(\backslash\)c\ is\_retx\ is\ false,\ there}}
\DoxyCodeLine{00037\ \textcolor{comment}{///\ should\ be\ at\ most\ one\ empty\ HARQ\ candidate\ returned\ during\ the\ whole\ search.\ If\ \(\backslash\)c\ is\_retx\ is\ true,\ all\ the\ HARQs}}
\DoxyCodeLine{00038\ \textcolor{comment}{///\ of\ the\ candidates\ returned\ must\ have\ a\ pending\ retransmission.}}
\DoxyCodeLine{00039\ \textcolor{comment}{///\ -\/\ We\ avoid\ SearchSpace\#0\ for\ UE\ PDSCH\ allocation.}}
\DoxyCodeLine{00040\ \textcolor{comment}{///\ -\/\ The\ slot\ must\ have\ sufficient\ DL\ symbols,\ given\ the\ PDSCH\ time-\/domain\ resource.}}
\DoxyCodeLine{00041\ \textcolor{comment}{///\ -\/\ For\ \(\backslash\)c\ is\_retx\ equal\ to\ true,\ we\ ensure\ the\ candidates\ will\ lead\ to\ allocations\ with\ the\ same\ number\ of\ DL}}
\DoxyCodeLine{00042\ \textcolor{comment}{///\ symbols\ as\ the\ previous\ HARQ\ allocation.}}
\DoxyCodeLine{00043\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{ue\_pdsch\_param\_candidate\_searcher}}}
\DoxyCodeLine{00044\ \{}
\DoxyCodeLine{00045\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{search\_space\_candidate\_list}}\ =\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{static\_vector}}<\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{search\_space\_info}}*,\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{MAX\_NOF\_SEARCH\_SPACE\_PER\_BWP}}>;}
\DoxyCodeLine{00046\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{dl\_harq\_iter}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{static\_vector}}<\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{dl\_harq\_process}}*,\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{MAX\_NOF\_HARQS}}>::\mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{const\_iterator}};}
\DoxyCodeLine{00047\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{ss\_iter}}\ =\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{static\_vector}}<\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{search\_space\_info}}*,\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{MAX\_NOF\_SEARCH\_SPACE\_PER\_BWP}}>::\mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{const\_iterator}};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00050\ \ \ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{comment}{///\ Parameters\ for\ a\ given\ PDSCH\ candidate.}}
\DoxyCodeLine{00053\ \ \ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{///\ DL\ HARQ\ process\ (may\ be\ newTx\ or\ reTx).}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\_harq\_process}}\&\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{harq}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ **harq\_it;\ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{///\ Chosen\ Search\ Space.}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1search__space__info}{search\_space\_info}}\&\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{ss}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ **ss\_it;\ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{///\ Chosen\ PDSCH\ Time\ Domain\ Resource.}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pdsch__time__domain__resource__allocation}{pdsch\_time\_domain\_resource\_allocation}}\&\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{pdsch\_td\_res}}()\ \textcolor{keyword}{const}}
\DoxyCodeLine{00062\ \ \ \ \ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (*ss\_it)-\/>pdsch\_time\_domain\_list[time\_res];}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{///\ Chosen\ PDSCH\ Time\ Domain\ Resource\ Index.}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a23c7ce7e2e3d18997e1b5c3cd325a06c}{pdsch\_td\_res\_index}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ time\_res;\ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{///\ Chosen\ DCI\ DL\ RNTI\ Config\ Type.}}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_ac0a93d3e0aa8452e32308d5038bcad49}{dci\_dl\_rnti\_config\_type}}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_acf4ce9ce51c2f732be6d8079b8321b29}{dci\_dl\_rnti\_cfg\_type}}()\ \textcolor{keyword}{const}}
\DoxyCodeLine{00071\ \ \ \ \ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{harq}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{(}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{)}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_a84adccf19cb19a9a41622c6b6c7761ef}{.}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_a84adccf19cb19a9a41622c6b6c7761ef}{empty}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_a84adccf19cb19a9a41622c6b6c7761ef}{(}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_a84adccf19cb19a9a41622c6b6c7761ef}{)}})\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{harq}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{(}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{)}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_ad4d77ca89e13c47dfeb6fca29fbada75}{.}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_ad4d77ca89e13c47dfeb6fca29fbada75}{last\_alloc\_params}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_ad4d77ca89e13c47dfeb6fca29fbada75}{(}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_ad4d77ca89e13c47dfeb6fca29fbada75}{)}}.dci\_cfg\_type;}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{ss}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{(}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{)}}\mbox{\hyperlink{structsrsran_1_1search__space__info_a4c0c87405da9e35ca3ae653d0de619ef}{.}}\mbox{\hyperlink{structsrsran_1_1search__space__info_a4c0c87405da9e35ca3ae653d0de619ef}{get\_dl\_dci\_format}}\mbox{\hyperlink{structsrsran_1_1search__space__info_a4c0c87405da9e35ca3ae653d0de619ef}{(}}\mbox{\hyperlink{structsrsran_1_1search__space__info_a4c0c87405da9e35ca3ae653d0de619ef}{)}}\ ==\ dci\_dl\_format::f1\_0\ ?\ \mbox{\hyperlink{namespacesrsran_ac0a93d3e0aa8452e32308d5038bcad49}{dci\_dl\_rnti\_config\_type}}::c\_rnti\_f1\_0}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{namespacesrsran_ac0a93d3e0aa8452e32308d5038bcad49}{dci\_dl\_rnti\_config\_type}}::c\_rnti\_f1\_1;}
\DoxyCodeLine{00077\ \ \ \ \ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator==(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\&\ other)\ \textcolor{keyword}{const}}
\DoxyCodeLine{00080\ \ \ \ \ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ harq\_it\ ==\ other.harq\_it\ \textcolor{keyword}{and}\ ss\_it\ ==\ other.ss\_it\ \textcolor{keyword}{and}\ time\_res\ ==\ other.time\_res;}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\&\ other)\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{not}(*\textcolor{keyword}{this}\ ==\ other);\ \}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{comment}{///\ A\ candidate\ being\ less\ than\ another\ means\ that\ the\ first\ has\ higher\ priority\ than\ the\ second.}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_acaa91a5a6940f44cece37c30676c5733}{operator}}<(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\&\ other)\ \textcolor{keyword}{const}}
\DoxyCodeLine{00086\ \ \ \ \ \{}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ harq\_it\ <\ other.harq\_it\ \textcolor{keyword}{or}\ (harq\_it\ ==\ other.harq\_it\ \textcolor{keyword}{and}\ ss\_it\ <\ other.ss\_it)\ \textcolor{keyword}{or}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ (harq\_it\ ==\ other.harq\_it\ \textcolor{keyword}{and}\ ss\_it\ ==\ other.ss\_it\ \textcolor{keyword}{and}\ time\_res\ <\ other.time\_res);}
\DoxyCodeLine{00089\ \ \ \ \ \}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator>=(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\&\ other)\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{not}(*\textcolor{keyword}{this}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_acaa91a5a6940f44cece37c30676c5733}{<}}\ other);\ \}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator<=(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\&\ other)\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_acaa91a5a6940f44cece37c30676c5733}{<}}\ other\ \textcolor{keyword}{or}\ *\textcolor{keyword}{this}\ ==\ other;\ \}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator>(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\&\ other)\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{not}(*\textcolor{keyword}{this}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_acaa91a5a6940f44cece37c30676c5733}{<}}\ other)\ \textcolor{keyword}{and}\ *\textcolor{keyword}{this}\ !=\ other;\ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}};}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{ue\_pdsch\_param\_candidate\_searcher}};}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ candidate(dl\_harq\_iter\ h,\ ss\_iter\ ss,\ \textcolor{keywordtype}{unsigned}\ time\_res\_)\ :\ harq\_it(h),\ ss\_it(ss),\ time\_res(time\_res\_)\ \{\}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ dl\_harq\_iter\ harq\_it;}
\DoxyCodeLine{00101\ \ \ \ \ ss\_iter\ \ \ \ \ \ ss\_it;}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ time\_res;}
\DoxyCodeLine{00103\ \ \ \};}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \textcolor{comment}{///\ Iterator\ for\ list\ of\ candidates.}}
\DoxyCodeLine{00106\ \ \ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}}\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{using}\ value\_type\ =\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}};}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keyword}{using}\ reference\ \ =\ value\_type\&;}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{using}\ pointer\ \ \ \ =\ value\_type*;}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ iterator(\mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{ue\_pdsch\_param\_candidate\_searcher}}\&\ parent\_,\ dl\_harq\_iter\ h\_it,\ ss\_iter\ ss\_it,\ \textcolor{keywordtype}{unsigned}\ time\_res\_)\ :}
\DoxyCodeLine{00112\ \ \ \ \ \ \ parent(\&parent\_),\ current(h\_it,\ ss\_it,\ time\_res\_)}
\DoxyCodeLine{00113\ \ \ \ \ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ parent-\/>iterate\_until\_valid\_candidate\_found(current);}
\DoxyCodeLine{00115\ \ \ \ \ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\&\ \ \ \ \ \ \ operator*()\ \{\ \textcolor{keywordflow}{return}\ current;\ \}}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\&\ operator*()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ current;\ \}}
\DoxyCodeLine{00119\ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}*\ \ \ \ \ \ \ operator-\/>()\ \{\ \textcolor{keywordflow}{return}\ \&current;\ \}}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}*\ operator-\/>()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \&current;\ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{comment}{///\ Incrementing\ the\ iterator\ means\ moving\ up\ one\ position\ in\ the\ list\ of\ candidates.}}
\DoxyCodeLine{00123\ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}}\&\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator_ae1b1f398a3e033b9a82edc87ed2d0404}{operator}}++()}
\DoxyCodeLine{00124\ \ \ \ \ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ ++current.time\_res;}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \textcolor{comment}{//\ When\ we\ increment\ the\ time\_res,\ it\ may\ be\ pointing\ to\ the\ end\ of\ the\ PDSCH\ time\ domain\ resource\ list.}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \textcolor{comment}{//\ So,\ we\ may\ need\ to\ move\ to\ the\ next\ SearchSpace\ or\ HARQ\ candidate.}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ parent-\/>iterate\_until\_valid\_candidate\_found(current);}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00130\ \ \ \ \ \}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator==(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}}\&\ other)\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ current\ ==\ other.current;\ \}}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}}\&\ other)\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{not}(*\textcolor{keyword}{this}\ ==\ other);\ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00136\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher}{ue\_pdsch\_param\_candidate\_searcher}}*\ parent;}
\DoxyCodeLine{00137\ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ current;}
\DoxyCodeLine{00138\ \ \ \};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \textcolor{comment}{///\ Create\ a\ searcher\ for\ UE\ PDSCH\ parameters.}}
\DoxyCodeLine{00141\ \ \ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher_afb44590eeecbe5659d20ce0695a4f0f9}{ue\_pdsch\_param\_candidate\_searcher}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1ue}{ue}}\&\ \ \ \ \ \ \ ue\_ref\_,}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a43119bc16f40f319a0f1687fea2b1ff0}{ue\_cell\_index\_t}}\ cell\_index,}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ is\_retx\_,}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \ \ \ \ \ pdcch\_slot\_)\ :}
\DoxyCodeLine{00145\ \ \ \ \ ue\_ref(ue\_ref\_),\ ue\_cc(ue\_ref.get\_cell(cell\_index)),\ is\_retx(is\_retx\_),\ pdcch\_slot(pdcch\_slot\_)}
\DoxyCodeLine{00146\ \ \ \{}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_retx)\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ list\ of\ DL\ HARQ\ processes\ with\ pending\ retx,\ sorted\ from\ oldest\ to\ newest.}}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ !=\ ue\_cc.harqs.nof\_dl\_harqs();\ ++i)\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\_harq\_process}}\&\ h\ =\ ue\_cc.harqs.dl\_harq(i);}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (h\mbox{\hyperlink{classsrsran_1_1dl__harq__process_a7ccc8dee176194af632872aa2732dd07}{.}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_a7ccc8dee176194af632872aa2732dd07}{has\_pending\_retx}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_a7ccc8dee176194af632872aa2732dd07}{(}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_a7ccc8dee176194af632872aa2732dd07}{)}})\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ dl\_harq\_candidates.push\_back(\&h);}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ std::sort(}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ dl\_harq\_candidates.begin(),}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ dl\_harq\_candidates.end(),}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ [](\textcolor{keyword}{const}\ dl\_harq\_process*\ lhs,\ \textcolor{keyword}{const}\ dl\_harq\_process*\ rhs)\ \{\ \textcolor{keywordflow}{return}\ lhs-\/>slot\_ack()\ <\ rhs-\/>slot\_ack();\ \});}
\DoxyCodeLine{00159\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ue\_ref.get\_cell(cell\_index)\mbox{\hyperlink{classsrsran_1_1ue__cell_a5547f22a9e862e932a494f187f17b61a}{.}}\mbox{\hyperlink{classsrsran_1_1ue__cell_a5547f22a9e862e932a494f187f17b61a}{is\_active}}\mbox{\hyperlink{classsrsran_1_1ue__cell_a5547f22a9e862e932a494f187f17b61a}{(}}\mbox{\hyperlink{classsrsran_1_1ue__cell_a5547f22a9e862e932a494f187f17b61a}{)}})\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \textcolor{comment}{//\ If\ there\ are\ no\ pending\ new\ Tx\ bytes,\ return.}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ ue\_ref\mbox{\hyperlink{classsrsran_1_1ue_ab3cc9e4be962ce4f7a6b034d4ce27e7c}{.}}\mbox{\hyperlink{classsrsran_1_1ue_ab3cc9e4be962ce4f7a6b034d4ce27e7c}{has\_pending\_dl\_newtx\_bytes}}\mbox{\hyperlink{classsrsran_1_1ue_ab3cc9e4be962ce4f7a6b034d4ce27e7c}{(}}\mbox{\hyperlink{classsrsran_1_1ue_ab3cc9e4be962ce4f7a6b034d4ce27e7c}{)}})\ \{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \textcolor{comment}{//\ Find\ empty\ HARQ.\ Create\ a\ list\ with\ a\ single\ position.}}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\_harq\_process}}*\ h\ =\ ue\_cc.harqs.find\_empty\_dl\_harq();}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (h\ !=\ \textcolor{keywordtype}{nullptr})\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ dl\_harq\_candidates.push\_back(h);}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00170\ \ \ \ \ \}}
\DoxyCodeLine{00171\ \ \ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \textcolor{comment}{///\ Get\ begin\ to\ the\ list\ of\ candidates.}}
\DoxyCodeLine{00174\ \ \ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}}\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher_a09476b70ae4f52810f4590e6ac152e55}{begin}}()\ \{\ \textcolor{keywordflow}{return}\ iterator\{*\textcolor{keyword}{this},\ dl\_harq\_candidates.begin(),\ ss\_candidate\_list.begin(),\ 0\};\ \}}
\DoxyCodeLine{00175\ \ \ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}}\ end()\ \{\ \textcolor{keywordflow}{return}\ iterator\{*\textcolor{keyword}{this},\ dl\_harq\_candidates.end(),\ \textcolor{keywordtype}{nullptr},\ 0\};\ \}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \textcolor{comment}{///\ List\ of\ DL\ HARQ\ candidates.}}
\DoxyCodeLine{00178\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1static__vector}{static\_vector}}<\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\_harq\_process}}*,\ MAX\_NOF\_HARQS>\&\ \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher_a0e2a54caa82e34c8897662e992ba69a4}{dl\_harqs}}()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ dl\_harq\_candidates;\ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00181\ \ \ \textcolor{comment}{//\ Generate\ Search\ Space\ candidates\ for\ a\ given\ HARQ.}}
\DoxyCodeLine{00182\ \ \ \textcolor{keywordtype}{void}\ generate\_ss\_candidates(dl\_harq\_iter\ current\_harq\_it)}
\DoxyCodeLine{00183\ \ \ \{}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordflow}{if}\ (harq\_of\_ss\_list\ ==\ *current\_harq\_it)\ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ HARQ\ candidate\ didn't\ change.\ We\ can\ early\ exit.}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00187\ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \ \ \mbox{\hyperlink{srsran__assert_8h_ab080308588b563333b9da75e3746eed6}{srsran\_assert}}(is\_retx\ \textcolor{keyword}{or}\ harq\_of\_ss\_list\ ==\ \textcolor{keywordtype}{nullptr},\ \textcolor{stringliteral}{"{}Regenerating\ SS\ candidates\ should\ only\ be\ needed\ for\ reTxs"{}});}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{comment}{//\ New\ HARQ.\ Search\ Space\ candidates\ are\ recomputed.}}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}*\ prev\_h\ =\ harq\_of\_ss\_list;}
\DoxyCodeLine{00192\ \ \ \ \ harq\_of\_ss\_list\ \ \ \ =\ *current\_harq\_it;}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{comment}{//\ Check\ which\ RNTI\ Type\ is\ preferred\ for\ this\ UE\ and\ HARQ.}}
\DoxyCodeLine{00195\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1optional}{optional}}<\mbox{\hyperlink{namespacesrsran_ac0a93d3e0aa8452e32308d5038bcad49}{dci\_dl\_rnti\_config\_type}}>\ preferred\_rnti\_type;}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_retx)\ \{}
\DoxyCodeLine{00197\ \ \ \ \ \ \ preferred\_rnti\_type\ =\ harq\_of\_ss\_list-\/>last\_alloc\_params().dci\_cfg\_type;}
\DoxyCodeLine{00198\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ue\_ref\mbox{\hyperlink{classsrsran_1_1ue_a009850d92300e2137c65a21030ec7c1c}{.}}\mbox{\hyperlink{classsrsran_1_1ue_a009850d92300e2137c65a21030ec7c1c}{is\_conres\_ce\_pending}}\mbox{\hyperlink{classsrsran_1_1ue_a009850d92300e2137c65a21030ec7c1c}{(}}\mbox{\hyperlink{classsrsran_1_1ue_a009850d92300e2137c65a21030ec7c1c}{)}})\ \{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ preferred\_rnti\_type\ =\ dci\_dl\_rnti\_config\_type::tc\_rnti\_f1\_0;}
\DoxyCodeLine{00200\ \ \ \ \ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordflow}{if}\ (prev\_h\ !=\ \textcolor{keywordtype}{nullptr}\ \textcolor{keyword}{and}\ preferred\_rnti\_type\ ==\ current\_rnti\_type)\ \{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \textcolor{comment}{//\ It\ is\ the\ same\ RNTI\ Type\ as\ the\ previous\ HARQ\ candidate.\ Search\ Space\ Candidate\ doesn't\ need\ to\ be\ regenerated,}}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \textcolor{comment}{//\ and\ we\ can\ use\ the\ previous\ list.}}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00206\ \ \ \ \ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{comment}{//\ Update\ alloc\_params\ list.}}
\DoxyCodeLine{00209\ \ \ \ \ ss\_candidate\_list\ =\ ue\_cc.get\_active\_dl\_search\_spaces(pdcch\_slot,\ preferred\_rnti\_type);}
\DoxyCodeLine{00210\ \ \ \ \ current\_rnti\_type\ =\ preferred\_rnti\_type;}
\DoxyCodeLine{00211\ \ \ \}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \textcolor{comment}{//\ Check\ if\ a\ candidate\ has\ valid\ parameters\ for\ an\ allocation.}}
\DoxyCodeLine{00214\ \ \ \textcolor{keywordtype}{bool}\ is\_candidate\_valid(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\&\ current)\ \textcolor{keyword}{const}}
\DoxyCodeLine{00215\ \ \ \{}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordflow}{if}\ (ue\_cc.cfg().cell\_cfg\_common.get\_nof\_dl\_symbol\_per\_slot(pdcch\_slot\ +\ current\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{.}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{pdsch\_td\_res}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{(}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{)}}\mbox{\hyperlink{structsrsran_1_1pdsch__time__domain__resource__allocation_a3f698a37065b60f5f080331efb3c8bd0}{.}}\mbox{\hyperlink{structsrsran_1_1pdsch__time__domain__resource__allocation_a3f698a37065b60f5f080331efb3c8bd0}{k0}})\ <}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ current\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{.}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{pdsch\_td\_res}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{(}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{)}}.symbols.stop())\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ whether\ PDSCH\ time\ domain\ resource\ fits\ in\ DL\ symbols\ of\ the\ slot.}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00220\ \ \ \ \ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{comment}{//\ Check\ whether\ PDSCH\ time\ domain\ resource\ does\ not\ overlap\ with\ CORESET.}}
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordflow}{if}\ (current\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{.}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{pdsch\_td\_res}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{(}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{)}}.symbols.start()\ <}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ current\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{.}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{ss}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{(}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{)}}.cfg\mbox{\hyperlink{structsrsran_1_1search__space__configuration_ab5df7a88e860e0181fb1c5bd24dd0831}{-\/>}}\mbox{\hyperlink{structsrsran_1_1search__space__configuration_ab5df7a88e860e0181fb1c5bd24dd0831}{get\_first\_symbol\_index}}\mbox{\hyperlink{structsrsran_1_1search__space__configuration_ab5df7a88e860e0181fb1c5bd24dd0831}{(}}\mbox{\hyperlink{structsrsran_1_1search__space__configuration_ab5df7a88e860e0181fb1c5bd24dd0831}{)}}\ +\ current\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{.}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{ss}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{(}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_af6d6a532b9fc6028500eb1ebf40d75c7}{)}}.coreset\mbox{\hyperlink{structsrsran_1_1coreset__configuration_ac70faa1088f184a624da17749bc1c863}{-\/>}}\mbox{\hyperlink{structsrsran_1_1coreset__configuration_ac70faa1088f184a624da17749bc1c863}{duration}})\ \{}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00226\ \ \ \ \ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{comment}{//\ If\ it\ is\ a\ retx,\ we\ need\ to\ ensure\ we\ use\ a\ time\_domain\_resource\ with\ the\ same\ number\ of\ symbols\ as\ used\ for}}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{comment}{//\ the\ first\ transmission.}}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_retx\ \textcolor{keyword}{and}\ current\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{.}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{pdsch\_td\_res}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{(}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_a73618cfee35783380492c8d1c38186ac}{)}}.symbols.length()\ !=\ current\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{.}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{harq}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{(}}\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate_ab72cc823fdbb89a17a2e3aa8301a0fb0}{)}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_ad4d77ca89e13c47dfeb6fca29fbada75}{.}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_ad4d77ca89e13c47dfeb6fca29fbada75}{last\_alloc\_params}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_ad4d77ca89e13c47dfeb6fca29fbada75}{(}}\mbox{\hyperlink{classsrsran_1_1dl__harq__process_ad4d77ca89e13c47dfeb6fca29fbada75}{)}}.nof\_symbols)\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00232\ \ \ \ \ \}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00235\ \ \ \}}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \textcolor{comment}{//\ Iterate\ over\ the\ list\ of\ candidates\ until\ a\ valid\ one\ is\ found.}}
\DoxyCodeLine{00238\ \ \ \textcolor{keywordtype}{void}\ iterate\_until\_valid\_candidate\_found(\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}\&\ current)}
\DoxyCodeLine{00239\ \ \ \{}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ current.harq\_it\ !=\ dl\_harq\_candidates.end();\ ++current.harq\_it)\ \{}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ HARQ\ candidate\ changed,\ generate\ new\ list\ of\ Search\ Spaces.}}
\DoxyCodeLine{00242\ \ \ \ \ \ \ generate\_ss\_candidates(current.harq\_it);}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ current.ss\_it\ !=\ ss\_candidate\_list.end();\ ++current.ss\_it)\ \{}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{not}\ ue\_cc.is\_in\_fallback\_mode()\ \textcolor{keyword}{and}\ current\_rnti\_type\ !=\ dci\_dl\_rnti\_config\_type::tc\_rnti\_f1\_0\ \textcolor{keyword}{and}}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ (*current.ss\_it)}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>get\_pdcch\_candidates(ue\_cc.get\_aggregation\_level(}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ue\_cc.channel\_state\_manager().get\_wideband\_cqi(),\ **current.ss\_it,\ \textcolor{keyword}{true}),}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pdcch\_slot)}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .empty())\ \{}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ the\ case\ when\ dedicated\ UE\ config\ is\ used,\ skip\ SearchSpaces\ without\ PDCCH\ candidates\ being\ monitored}}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ in\ this\ slot.}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ current.time\_res\ <\ (*current.ss\_it)-\/>pdsch\_time\_domain\_list.size();\ ++current.time\_res)\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_candidate\_valid(current))\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Valid\ candidate\ found.}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ current.time\_res\ =\ 0;}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ current.ss\_it\ =\ ss\_candidate\_list.begin();}
\DoxyCodeLine{00265\ \ \ \ \ \}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{comment}{//\ Iteration\ finished.}}
\DoxyCodeLine{00268\ \ \ \ \ ss\_candidate\_list.clear();}
\DoxyCodeLine{00269\ \ \ \ \ harq\_of\_ss\_list\ \ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00270\ \ \ \ \ current.ss\_it\ \ \ \ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00271\ \ \ \ \ current.time\_res\ =\ 0;}
\DoxyCodeLine{00272\ \ \ \}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \textcolor{comment}{//\ UE\ being\ allocated.}}
\DoxyCodeLine{00275\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1ue}{ue}}\&\ ue\_ref;}
\DoxyCodeLine{00276\ \ \ \textcolor{comment}{//\ UE\ cell\ being\ allocated.}}
\DoxyCodeLine{00277\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1ue__cell}{ue\_cell}}\&\ ue\_cc;}
\DoxyCodeLine{00278\ \ \ \textcolor{comment}{//\ Whether\ the\ current\ search\ is\ for\ a\ newTx\ or\ a\ reTx.}}
\DoxyCodeLine{00279\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_retx;}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \ \ \textcolor{comment}{//\ List\ of\ HARQ\ candidates\ considered\ for\ allocation.}}
\DoxyCodeLine{00282\ \ \ \mbox{\hyperlink{classsrsran_1_1static__vector}{static\_vector}}<\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\_harq\_process}}*,\ MAX\_NOF\_HARQS>\ dl\_harq\_candidates;}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \ \ \textcolor{comment}{//\ List\ of\ Search\ Space\ candidates\ for\ the\ current\ HARQ\ candidate\ being\ iterated\ over.}}
\DoxyCodeLine{00285\ \ \ search\_space\_candidate\_list\ ss\_candidate\_list;}
\DoxyCodeLine{00286\ \ \ \textcolor{comment}{//\ HARQ\ candidate\ for\ which\ the\ Search\ Space\ candidate\ list\ was\ generated.}}
\DoxyCodeLine{00287\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\_harq\_process}}*\ harq\_of\_ss\_list\ =\ \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00288\ \ \ \textcolor{comment}{//\ RNTI\ type\ used\ to\ generate\ ss\_candidate\_list.}}
\DoxyCodeLine{00289\ \ \ \mbox{\hyperlink{classsrsran_1_1optional}{optional}}<\mbox{\hyperlink{namespacesrsran_ac0a93d3e0aa8452e32308d5038bcad49}{dci\_dl\_rnti\_config\_type}}>\ current\_rnti\_type;}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \textcolor{comment}{//\ PDCCH\ slot\ point\ used\ to\ verify\ if\ the\ PDSCH\ fits\ a\ DL\ slot.}}
\DoxyCodeLine{00292\ \ \ \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ pdcch\_slot;}
\DoxyCodeLine{00293\ \};}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \}\ \textcolor{comment}{//\ namespace\ srsran}}

\end{DoxyCode}
