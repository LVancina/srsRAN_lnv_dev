\doxysection{config\+\_\+generators.\+h}
\hypertarget{config__generators_8h_source}{}\label{config__generators_8h_source}\index{tests/unittests/scheduler/test\_utils/config\_generators.h@{tests/unittests/scheduler/test\_utils/config\_generators.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ 2021-\/2024\ Software\ Radio\ Systems\ Limited}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ srsRAN.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ srsRAN\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ it\ under\ the\ terms\ of\ the\ GNU\ Affero\ General\ Public\ License\ as}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ published\ by\ the\ Free\ Software\ Foundation,\ either\ version\ 3\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ the\ License,\ or\ (at\ your\ option)\ any\ later\ version.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ srsRAN\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ GNU\ Affero\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ A\ copy\ of\ the\ GNU\ Affero\ General\ Public\ License\ can\ be\ found\ in}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ the\ LICENSE\ file\ in\ the\ top-\/level\ directory\ of\ this\ distribution}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ and\ at\ http://www.gnu.org/licenses/.}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}lib/du\_manager/converters/scheduler\_configuration\_helpers.h"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}srsran/du/du\_cell\_config\_helpers.h"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}srsran/ran/duplex\_mode.h"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}srsran/scheduler/config/csi\_helper.h"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}srsran/scheduler/config/logical\_channel\_config\_factory.h"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}srsran/scheduler/config/sched\_cell\_config\_helpers.h"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}srsran/scheduler/config/serving\_cell\_config.h"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}srsran/scheduler/config/serving\_cell\_config\_factory.h"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}srsran/scheduler/mac\_scheduler.h"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}srsran/support/test\_utils.h"{}}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesrsran}{srsran}}\ \{}
\DoxyCodeLine{00037\ \textcolor{keyword}{namespace\ }test\_helpers\ \{}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{inline}\ sched\_cell\_configuration\_request\_message}
\DoxyCodeLine{00040\ make\_default\_sched\_cell\_configuration\_request(\textcolor{keyword}{const}\ config\_helpers::cell\_config\_builder\_params\_extended\&\ \mbox{\hyperlink{structparams}{params}}\ =\ \{\})}
\DoxyCodeLine{00041\ \{}
\DoxyCodeLine{00042\ \ \ sched\_cell\_configuration\_request\_message\ sched\_req\{\};}
\DoxyCodeLine{00043\ \ \ sched\_req.cell\_index\ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a85fcbfef630498e3919ccc9d5d48b07c}{to\_du\_cell\_index}}(0);}
\DoxyCodeLine{00044\ \ \ sched\_req.pci\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{structparams}{params}}.pci;}
\DoxyCodeLine{00045\ \ \ sched\_req.scs\_common\ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{structparams}{params}}.scs\_common;}
\DoxyCodeLine{00046\ \ \ sched\_req.dl\_carrier\ \ \ \ \ \ \ \ \ \ \ =\ config\_helpers::make\_default\_dl\_carrier\_configuration(\mbox{\hyperlink{structparams}{params}});}
\DoxyCodeLine{00047\ \ \ sched\_req.ul\_carrier\ \ \ \ \ \ \ \ \ \ \ =\ config\_helpers::make\_default\_ul\_carrier\_configuration(\mbox{\hyperlink{structparams}{params}});}
\DoxyCodeLine{00048\ \ \ sched\_req.dl\_cfg\_common\ \ \ \ \ \ \ \ =\ config\_helpers::make\_default\_dl\_config\_common(\mbox{\hyperlink{structparams}{params}});}
\DoxyCodeLine{00049\ \ \ sched\_req.ul\_cfg\_common\ \ \ \ \ \ \ \ =\ config\_helpers::make\_default\_ul\_config\_common(\mbox{\hyperlink{structparams}{params}});}
\DoxyCodeLine{00050\ \ \ sched\_req.ssb\_config\ \ \ \ \ \ \ \ \ \ \ =\ config\_helpers::make\_default\_ssb\_config(\mbox{\hyperlink{structparams}{params}});}
\DoxyCodeLine{00051\ \ \ sched\_req.tdd\_ul\_dl\_cfg\_common\ =\ \mbox{\hyperlink{structparams}{params}}.tdd\_ul\_dl\_cfg\_common;}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \textcolor{comment}{//\ The\ CORESET\ duration\ of\ 3\ symbols\ is\ only\ permitted\ if\ dmrs-\/typeA-\/Position\ is\ set\ to\ 3.\ Refer\ TS\ 38.211,\ 7.3.2.2.}}
\DoxyCodeLine{00054\ \ \ \textcolor{keyword}{const}\ pdcch\_type0\_css\_coreset\_description\ coreset0\_desc\ =\ \mbox{\hyperlink{namespacesrsran_af4b37e7542d5a0c2bc229c1495f1c642}{pdcch\_type0\_css\_coreset\_get}}(}
\DoxyCodeLine{00055\ \ \ \ \ \ \ *\mbox{\hyperlink{structparams}{params}}.band,\ \mbox{\hyperlink{structparams}{params}}.ssb\_scs,\ \mbox{\hyperlink{structparams}{params}}.scs\_common,\ *\mbox{\hyperlink{structparams}{params}}.coreset0\_index,\ \mbox{\hyperlink{structparams}{params}}.k\_ssb-\/>value());}
\DoxyCodeLine{00056\ \ \ sched\_req.dmrs\_typeA\_pos\ =}
\DoxyCodeLine{00057\ \ \ \ \ \ \ coreset0\_desc.nof\_symb\_coreset\ ==\ 3U\ ?\ dmrs\_typeA\_position::pos3\ :\ dmrs\_typeA\_position::pos2;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ sched\_req.nof\_beams\ =\ 1;}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \textcolor{comment}{//\ SIB1\ parameters.}}
\DoxyCodeLine{00062\ \ \ sched\_req.coreset0\ \ \ \ \ \ \ \ \ \ =\ *\mbox{\hyperlink{structparams}{params}}.coreset0\_index;}
\DoxyCodeLine{00063\ \ \ sched\_req.searchspace0\ \ \ \ \ \ =\ \mbox{\hyperlink{structparams}{params}}.search\_space0\_index;}
\DoxyCodeLine{00064\ \ \ sched\_req.sib1\_payload\_size\ =\ 101;\ \textcolor{comment}{//\ Random\ size.}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ pucch\_builder\_params\ default\_pucch\_builder\_params\ \ \ \ \ =\ du\_cell\_config\{\}.pucch\_cfg;}
\DoxyCodeLine{00067\ \ \ default\_pucch\_builder\_params.nof\_ue\_pucch\_f1\_res\_harq\ =\ 3;}
\DoxyCodeLine{00068\ \ \ default\_pucch\_builder\_params.nof\_ue\_pucch\_f2\_res\_harq\ =\ 6;}
\DoxyCodeLine{00069\ \ \ default\_pucch\_builder\_params.nof\_sr\_resources\ \ \ \ \ \ \ \ \ =\ 2;}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ sched\_req.pucch\_guardbands\ =\ config\_helpers::build\_pucch\_guardbands\_list(}
\DoxyCodeLine{00072\ \ \ \ \ \ \ default\_pucch\_builder\_params,\ sched\_req.ul\_cfg\_common.init\_ul\_bwp.generic\_params.crbs.length());}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structparams}{params}}.csi\_rs\_enabled)\ \{}
\DoxyCodeLine{00075\ \ \ \ \ csi\_helper::csi\_builder\_params\ csi\_params\{\};}
\DoxyCodeLine{00076\ \ \ \ \ csi\_params.pci\ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{structparams}{params}}.pci;}
\DoxyCodeLine{00077\ \ \ \ \ csi\_params.nof\_rbs\ \ \ \ \ \ \ =\ sched\_req.dl\_cfg\_common.init\_dl\_bwp.generic\_params.crbs.length();}
\DoxyCodeLine{00078\ \ \ \ \ csi\_params.nof\_ports\ \ \ \ \ =\ \mbox{\hyperlink{structparams}{params}}.nof\_dl\_ports;}
\DoxyCodeLine{00079\ \ \ \ \ csi\_params.csi\_rs\_period\ =\ csi\_helper::get\_max\_csi\_rs\_period(\mbox{\hyperlink{structparams}{params}}.scs\_common);}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ sched\_req.zp\_csi\_rs\_list\ \ \ \ \ \ =\ csi\_helper::make\_periodic\_zp\_csi\_rs\_resource\_list(csi\_params);}
\DoxyCodeLine{00082\ \ \ \ \ sched\_req.nzp\_csi\_rs\_res\_list\ =\ csi\_helper::make\_nzp\_csi\_rs\_resource\_list(csi\_params);}
\DoxyCodeLine{00083\ \ \ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \textcolor{keywordflow}{return}\ sched\_req;}
\DoxyCodeLine{00086\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{keyword}{inline}\ cell\_config\_dedicated\ create\_test\_initial\_ue\_spcell\_cell\_config(\textcolor{keyword}{const}\ cell\_config\_builder\_params\&\ \mbox{\hyperlink{structparams}{params}}\ =\ \{\})}
\DoxyCodeLine{00089\ \{}
\DoxyCodeLine{00090\ \ \ cell\_config\_dedicated\ cfg;}
\DoxyCodeLine{00091\ \ \ cfg.serv\_cell\_idx\ =\ to\_serv\_cell\_index(0);}
\DoxyCodeLine{00092\ \ \ cfg.serv\_cell\_cfg\ =\ config\_helpers::create\_default\_initial\_ue\_serving\_cell\_config(\mbox{\hyperlink{structparams}{params}});}
\DoxyCodeLine{00093\ \ \ \textcolor{keywordflow}{return}\ cfg;}
\DoxyCodeLine{00094\ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \textcolor{keyword}{inline}\ sched\_ue\_creation\_request\_message}
\DoxyCodeLine{00097\ create\_default\_sched\_ue\_creation\_request(\textcolor{keyword}{const}\ cell\_config\_builder\_params\&\ \ \ \ \mbox{\hyperlink{structparams}{params}}\ \ \ \ \ \ =\ \{\},}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::initializer\_list<lcid\_t>\&\ lcid\_to\_cfg\ =\ \{\})}
\DoxyCodeLine{00099\ \{}
\DoxyCodeLine{00100\ \ \ sched\_ue\_creation\_request\_message\ msg\{\};}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ msg.ue\_index\ =\ \mbox{\hyperlink{namespacesrsran_a652cd3c03af6e027f63c65f3ab458577}{to\_du\_ue\_index}}(0);}
\DoxyCodeLine{00103\ \ \ msg.crnti\ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a19ba96c7ba2f370f5ffdf9d9cf28e0b0}{to\_rnti}}(0x4601);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ scheduling\_request\_to\_addmod\ sr\_0\{.sr\_id\ =\ scheduling\_request\_id::SR\_ID\_MIN,\ .max\_tx\ =\ sr\_max\_tx::n64\};}
\DoxyCodeLine{00106\ \ \ msg.cfg.sched\_request\_config\_list.emplace();}
\DoxyCodeLine{00107\ \ \ msg.cfg.sched\_request\_config\_list-\/>push\_back(sr\_0);}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ msg.cfg.cells.emplace();}
\DoxyCodeLine{00110\ \ \ msg.cfg.cells-\/>push\_back(create\_test\_initial\_ue\_spcell\_cell\_config(\mbox{\hyperlink{structparams}{params}}));}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ msg.cfg.lc\_config\_list.emplace();}
\DoxyCodeLine{00113\ \ \ msg.cfg.lc\_config\_list-\/>resize(2);}
\DoxyCodeLine{00114\ \ \ (*msg.cfg.lc\_config\_list)[0]\ =\ config\_helpers::create\_default\_logical\_channel\_config(lcid\_t::LCID\_SRB0);}
\DoxyCodeLine{00115\ \ \ (*msg.cfg.lc\_config\_list)[1]\ =\ config\_helpers::create\_default\_logical\_channel\_config(lcid\_t::LCID\_SRB1);}
\DoxyCodeLine{00116\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespacesrsran_a9fb768b4a14baadb9295634bcaf010bc}{lcid\_t}}\ lcid\ :\ lcid\_to\_cfg)\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordflow}{if}\ (lcid\ >=\ lcid\_t::LCID\_SRB2)\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ msg.cfg.lc\_config\_list-\/>push\_back(config\_helpers::create\_default\_logical\_channel\_config(lcid));}
\DoxyCodeLine{00119\ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \textcolor{keywordflow}{return}\ msg;}
\DoxyCodeLine{00123\ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \textcolor{keyword}{inline}\ rach\_indication\_message\ generate\_rach\_ind\_msg(slot\_point\ prach\_slot\_rx,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ temp\_crnti,\ \textcolor{keywordtype}{unsigned}\ rapid\ =\ 0)}
\DoxyCodeLine{00126\ \{}
\DoxyCodeLine{00127\ \ \ rach\_indication\_message\ msg\{\};}
\DoxyCodeLine{00128\ \ \ msg.cell\_index\ =\ \mbox{\hyperlink{namespacesrsran_a85fcbfef630498e3919ccc9d5d48b07c}{to\_du\_cell\_index}}(0);}
\DoxyCodeLine{00129\ \ \ msg.slot\_rx\ \ \ \ =\ prach\_slot\_rx;}
\DoxyCodeLine{00130\ \ \ msg.occasions.emplace\_back();}
\DoxyCodeLine{00131\ \ \ msg.occasions.back().frequency\_index\ =\ 0;}
\DoxyCodeLine{00132\ \ \ msg.occasions.back().start\_symbol\ \ \ \ =\ 0;}
\DoxyCodeLine{00133\ \ \ msg.occasions.back().preambles.emplace\_back();}
\DoxyCodeLine{00134\ \ \ msg.occasions.back().preambles.back().preamble\_id\ \ =\ rapid;}
\DoxyCodeLine{00135\ \ \ msg.occasions.back().preambles.back().tc\_rnti\ \ \ \ \ \ =\ temp\_crnti;}
\DoxyCodeLine{00136\ \ \ msg.occasions.back().preambles.back().time\_advance\ =\ \mbox{\hyperlink{classsrsran_1_1phy__time__unit_a9759195d4f33e9afbf1c790ab103af94}{phy\_time\_unit::from\_seconds}}(0);}
\DoxyCodeLine{00137\ \ \ \textcolor{keywordflow}{return}\ msg;}
\DoxyCodeLine{00138\ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \textcolor{keyword}{inline}\ uplink\_config\ make\_test\_ue\_uplink\_config(\textcolor{keyword}{const}\ config\_helpers::cell\_config\_builder\_params\_extended\&\ \mbox{\hyperlink{structparams}{params}})}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \{}
\DoxyCodeLine{00143\ \ \ \textcolor{comment}{//\ >\ UL\ Config.}}
\DoxyCodeLine{00144\ \ \ uplink\_config\ ul\_config\{\};}
\DoxyCodeLine{00145\ \ \ ul\_config.init\_ul\_bwp.pucch\_cfg.emplace();}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \textcolor{comment}{//\ >>\ PUCCH.}}
\DoxyCodeLine{00148\ \ \ \textcolor{keyword}{auto}\&\ pucch\_cfg\ =\ ul\_config.init\_ul\_bwp.pucch\_cfg.value();}
\DoxyCodeLine{00149\ \ \ \textcolor{comment}{//\ PUCCH\ Resource\ Set\ ID\ 0.}}
\DoxyCodeLine{00150\ \ \ \textcolor{keyword}{auto}\&\ pucch\_res\_set\_0\ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_cfg.pucch\_res\_set.emplace\_back();}
\DoxyCodeLine{00151\ \ \ pucch\_res\_set\_0.pucch\_res\_set\_id\ =\ 0;}
\DoxyCodeLine{00152\ \ \ pucch\_res\_set\_0.pucch\_res\_id\_list.emplace\_back(pucch\_res\_id\_t\{0,\ 0\});}
\DoxyCodeLine{00153\ \ \ pucch\_res\_set\_0.pucch\_res\_id\_list.emplace\_back(pucch\_res\_id\_t\{1,\ 1\});}
\DoxyCodeLine{00154\ \ \ pucch\_res\_set\_0.pucch\_res\_id\_list.emplace\_back(pucch\_res\_id\_t\{2,\ 2\});}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \textcolor{keyword}{auto}\&\ pucch\_res\_set\_1\ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_cfg.pucch\_res\_set.emplace\_back();}
\DoxyCodeLine{00157\ \ \ pucch\_res\_set\_1.pucch\_res\_set\_id\ =\ 1;}
\DoxyCodeLine{00158\ \ \ pucch\_res\_set\_1.pucch\_res\_id\_list.emplace\_back(pucch\_res\_id\_t\{3,\ 3\});}
\DoxyCodeLine{00159\ \ \ pucch\_res\_set\_1.pucch\_res\_id\_list.emplace\_back(pucch\_res\_id\_t\{4,\ 4\});}
\DoxyCodeLine{00160\ \ \ pucch\_res\_set\_1.pucch\_res\_id\_list.emplace\_back(pucch\_res\_id\_t\{5,\ 5\});}
\DoxyCodeLine{00161\ \ \ pucch\_res\_set\_1.pucch\_res\_id\_list.emplace\_back(pucch\_res\_id\_t\{6,\ 6\});}
\DoxyCodeLine{00162\ \ \ pucch\_res\_set\_1.pucch\_res\_id\_list.emplace\_back(pucch\_res\_id\_t\{7,\ 7\});}
\DoxyCodeLine{00163\ \ \ pucch\_res\_set\_1.pucch\_res\_id\_list.emplace\_back(pucch\_res\_id\_t\{8,\ 8\});}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \textcolor{keywordtype}{unsigned}\ nof\_rbs\ =\ \mbox{\hyperlink{structparams}{params}}.cell\_nof\_crbs;}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \textcolor{comment}{//\ PUCCH\ resource\ format\ 1,\ for\ HARQ-\/ACK.}}
\DoxyCodeLine{00168\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 0.}}
\DoxyCodeLine{00169\ \ \ pucch\_resource\ res\_basic\{}
\DoxyCodeLine{00170\ \ \ \ \ \ \ .res\_id\ =\ pucch\_res\_id\_t\{0,\ 0\},\ .starting\_prb\ =\ nof\_rbs\ -\/\ 1,\ .format\ =\ pucch\_format::FORMAT\_1\};}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ res\_basic.format\_params.emplace<pucch\_format\_1\_cfg>(}
\DoxyCodeLine{00173\ \ \ \ \ \ \ pucch\_format\_1\_cfg\{.initial\_cyclic\_shift\ =\ 0,\ .nof\_symbols\ =\ 14,\ .starting\_sym\_idx\ =\ 0,\ .time\_domain\_occ\ =\ 0\});}
\DoxyCodeLine{00174\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic);}
\DoxyCodeLine{00175\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 1.}}
\DoxyCodeLine{00176\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic);}
\DoxyCodeLine{00177\ \ \ pucch\_resource\&\ res1\ =\ pucch\_cfg.pucch\_res\_list.back();}
\DoxyCodeLine{00178\ \ \ res1.res\_id\ \ \ \ \ \ \ \ \ \ =\ pucch\_res\_id\_t\{1,\ 1\};}
\DoxyCodeLine{00179\ \ \ res1.starting\_prb\ \ \ \ =\ 1;}
\DoxyCodeLine{00180\ \ \ res1.second\_hop\_prb.emplace(nof\_rbs\ -\/\ res1.starting\_prb\ -\/\ 1);}
\DoxyCodeLine{00181\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 2.}}
\DoxyCodeLine{00182\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic);}
\DoxyCodeLine{00183\ \ \ pucch\_resource\&\ res2\ =\ pucch\_cfg.pucch\_res\_list.back();}
\DoxyCodeLine{00184\ \ \ res2.res\_id\ \ \ \ \ \ \ \ \ \ =\ pucch\_res\_id\_t\{2,\ 2\};}
\DoxyCodeLine{00185\ \ \ res2.second\_hop\_prb.emplace(1);}
\DoxyCodeLine{00186\ \ \ res2.starting\_prb\ =\ nof\_rbs\ -\/\ res2.second\_hop\_prb.value()\ -\/\ 1;}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \textcolor{comment}{//\ PUCCH\ resource\ format\ 2,\ for\ HARQ-\/ACK\ and\ CSI.}}
\DoxyCodeLine{00189\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 3.}}
\DoxyCodeLine{00190\ \ \ pucch\_resource\ res\_basic\_f2\{.starting\_prb\ =\ 2,\ .format\ =\ pucch\_format::FORMAT\_2\};}
\DoxyCodeLine{00191\ \ \ res\_basic\_f2.res\_id\ =\ pucch\_res\_id\_t\{3,\ 3\};}
\DoxyCodeLine{00192\ \ \ res\_basic\_f2.format\_params.emplace<pucch\_format\_2\_3\_cfg>(}
\DoxyCodeLine{00193\ \ \ \ \ \ \ pucch\_format\_2\_3\_cfg\{.nof\_prbs\ =\ 1,\ .nof\_symbols\ =\ 2,\ .starting\_sym\_idx\ =\ 0\});}
\DoxyCodeLine{00194\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic\_f2);}
\DoxyCodeLine{00195\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 4.}}
\DoxyCodeLine{00196\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic\_f2);}
\DoxyCodeLine{00197\ \ \ pucch\_resource\&\ res4\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_cfg.pucch\_res\_list.back();}
\DoxyCodeLine{00198\ \ \ res4.res\_id\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_res\_id\_t\{4,\ 4\};}
\DoxyCodeLine{00199\ \ \ variant\_get<pucch\_format\_2\_3\_cfg>(res4.format\_params).starting\_sym\_idx\ =\ 2;}
\DoxyCodeLine{00200\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 5.}}
\DoxyCodeLine{00201\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic\_f2);}
\DoxyCodeLine{00202\ \ \ pucch\_resource\&\ res5\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_cfg.pucch\_res\_list.back();}
\DoxyCodeLine{00203\ \ \ res5.res\_id\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_res\_id\_t\{5,\ 5\};}
\DoxyCodeLine{00204\ \ \ variant\_get<pucch\_format\_2\_3\_cfg>(res5.format\_params).starting\_sym\_idx\ =\ 4;}
\DoxyCodeLine{00205\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 6.}}
\DoxyCodeLine{00206\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic\_f2);}
\DoxyCodeLine{00207\ \ \ pucch\_resource\&\ res6\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_cfg.pucch\_res\_list.back();}
\DoxyCodeLine{00208\ \ \ res6.res\_id\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_res\_id\_t\{6,\ 6\};}
\DoxyCodeLine{00209\ \ \ variant\_get<pucch\_format\_2\_3\_cfg>(res6.format\_params).starting\_sym\_idx\ =\ 6;}
\DoxyCodeLine{00210\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 7.}}
\DoxyCodeLine{00211\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic\_f2);}
\DoxyCodeLine{00212\ \ \ pucch\_resource\&\ res7\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_cfg.pucch\_res\_list.back();}
\DoxyCodeLine{00213\ \ \ res7.res\_id\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_res\_id\_t\{7,\ 7\};}
\DoxyCodeLine{00214\ \ \ variant\_get<pucch\_format\_2\_3\_cfg>(res7.format\_params).starting\_sym\_idx\ =\ 8;}
\DoxyCodeLine{00215\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 8.}}
\DoxyCodeLine{00216\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic\_f2);}
\DoxyCodeLine{00217\ \ \ pucch\_resource\&\ res8\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_cfg.pucch\_res\_list.back();}
\DoxyCodeLine{00218\ \ \ res8.res\_id\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_res\_id\_t\{8,\ 8\};}
\DoxyCodeLine{00219\ \ \ variant\_get<pucch\_format\_2\_3\_cfg>(res8.format\_params).starting\_sym\_idx\ =\ 10;}
\DoxyCodeLine{00220\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 9.}}
\DoxyCodeLine{00221\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic\_f2);}
\DoxyCodeLine{00222\ \ \ pucch\_resource\&\ res9\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_cfg.pucch\_res\_list.back();}
\DoxyCodeLine{00223\ \ \ res9.res\_id\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pucch\_res\_id\_t\{9,\ 9\};}
\DoxyCodeLine{00224\ \ \ variant\_get<pucch\_format\_2\_3\_cfg>(res9.format\_params).starting\_sym\_idx\ =\ 12;}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 10.}}
\DoxyCodeLine{00227\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic);}
\DoxyCodeLine{00228\ \ \ pucch\_resource\&\ res10\ =\ pucch\_cfg.pucch\_res\_list.back();}
\DoxyCodeLine{00229\ \ \ res10.res\_id\ \ \ \ \ \ \ \ \ \ =\ pucch\_res\_id\_t\{10,\ 10\};}
\DoxyCodeLine{00230\ \ \ res10.starting\_prb\ \ \ \ =\ 0;}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \textcolor{comment}{//\ >>>\ PUCCH\ resource\ 11.}}
\DoxyCodeLine{00233\ \ \ pucch\_cfg.pucch\_res\_list.push\_back(res\_basic);}
\DoxyCodeLine{00234\ \ \ pucch\_resource\&\ res11\ =\ pucch\_cfg.pucch\_res\_list.back();}
\DoxyCodeLine{00235\ \ \ res11.res\_id\ \ \ \ \ \ \ \ \ \ =\ pucch\_res\_id\_t\{11,\ 11\};}
\DoxyCodeLine{00236\ \ \ res11.starting\_prb\ \ \ \ =\ nof\_rbs\ -\/\ 3;}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \textcolor{comment}{//\ TODO:\ add\ more\ PUCCH\ resources.}}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \textcolor{comment}{//\ >>>\ SR\ Resource.}}
\DoxyCodeLine{00241\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ pucch\_sr\_res\_id\ =\ pucch\_cfg.pucch\_res\_list.size()\ -\/\ 1;}
\DoxyCodeLine{00242\ \ \ pucch\_cfg.sr\_res\_list.push\_back(}
\DoxyCodeLine{00243\ \ \ \ \ \ \ scheduling\_request\_resource\_config\{.sr\_res\_id\ \ \ \ =\ 1,}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .sr\_id\ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a71509f48a0d24f21be4b62592d240ca0}{uint\_to\_sched\_req\_id}}(0),}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .period\ \ \ \ \ \ \ =\ sr\_periodicity::sl\_40,}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .offset\ \ \ \ \ \ \ =\ 0,}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .pucch\_res\_id\ =\ pucch\_res\_id\_t\{pucch\_sr\_res\_id,\ pucch\_sr\_res\_id\}\});}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ pucch\_cfg.format\_1\_common\_param.emplace();}
\DoxyCodeLine{00250\ \ \ pucch\_cfg.format\_2\_common\_param.emplace(}
\DoxyCodeLine{00251\ \ \ \ \ \ \ pucch\_common\_all\_formats\{.max\_c\_rate\ =\ max\_pucch\_code\_rate::dot\_25,\ .simultaneous\_harq\_ack\_csi\ =\ \textcolor{keyword}{true}\});}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \textcolor{comment}{//\ >>>\ dl-\/DataToUl-\/Ack}}
\DoxyCodeLine{00254\ \ \ \textcolor{comment}{//\ TS38.213,\ 9.1.2.1\ -\/\ "{}If\ a\ UE\ is\ provided\ dl-\/DataToUL-\/ACK,\ the\ UE\ does\ not\ expect\ to\ be\ indicated\ by\ DCI\ format\ 1\_0}}
\DoxyCodeLine{00255\ \ \ \textcolor{comment}{//\ a\ slot\ timing\ value\ for\ transmission\ of\ HARQ-\/ACK\ information\ that\ does\ not\ belong\ to\ the\ intersection\ of\ the\ set}}
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{//\ of\ slot\ timing\ values\ \{1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8\}\ and\ the\ set\ of\ slot\ timing\ values\ provided\ by\ dl-\/DataToUL-\/ACK\ for}}
\DoxyCodeLine{00257\ \ \ \textcolor{comment}{//\ the\ active\ DL\ BWP\ of\ a\ corresponding\ serving\ cell.}}
\DoxyCodeLine{00258\ \ \ \textcolor{comment}{//\ Inactive\ for\ format1\_0."{}}}
\DoxyCodeLine{00259\ \ \ \textcolor{comment}{//\ Note2:\ Only\ k1\ >=\ 4\ supported.}}
\DoxyCodeLine{00260\ \ \ \mbox{\hyperlink{namespacesrsran_a9e91de4bdf4fc6af2e4fba60dde4d0c5}{nr\_band}}\ band\ =\ \mbox{\hyperlink{structparams}{params}}.band.has\_value()\ ?\ \mbox{\hyperlink{structparams}{params}}.band.value()\ :\ band\_helper::get\_band\_from\_dl\_arfcn(\mbox{\hyperlink{structparams}{params}}.dl\_arfcn);}
\DoxyCodeLine{00261\ \ \ \textcolor{keywordflow}{if}\ (band\_helper::get\_duplex\_mode(band)\ ==\ \mbox{\hyperlink{namespacesrsran_a7c254965b53e3067931191bc7eda18acaeec6da44109af7259e81b505436583ff}{duplex\_mode::FDD}})\ \{}
\DoxyCodeLine{00262\ \ \ \ \ pucch\_cfg.dl\_data\_to\_ul\_ack\ =\ \{\mbox{\hyperlink{structparams}{params}}.min\_k1\};}
\DoxyCodeLine{00263\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \textcolor{comment}{//\ TDD}}
\DoxyCodeLine{00265\ \ \ \ \ pucch\_cfg.dl\_data\_to\_ul\_ack\ =\ config\_helpers::generate\_k1\_candidates(\mbox{\hyperlink{structparams}{params}}.tdd\_ul\_dl\_cfg\_common.value());}
\DoxyCodeLine{00266\ \ \ \}}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \textcolor{comment}{//\ >\ PUSCH\ config.}}
\DoxyCodeLine{00269\ \ \ ul\_config.init\_ul\_bwp.pusch\_cfg.emplace(config\_helpers::make\_default\_pusch\_config(\mbox{\hyperlink{structparams}{params}}));}
\DoxyCodeLine{00270\ \ \ \textcolor{keywordflow}{if}\ (band\_helper::get\_duplex\_mode(band)\ ==\ \mbox{\hyperlink{namespacesrsran_a7c254965b53e3067931191bc7eda18aca1ffd07437a30fba5785ce6557acca2b2}{duplex\_mode::TDD}})\ \{}
\DoxyCodeLine{00271\ \ \ \ \ ul\_config.init\_ul\_bwp.pusch\_cfg-\/>pusch\_td\_alloc\_list\ =}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ config\_helpers::generate\_k2\_candidates(\mbox{\hyperlink{classsrsran_1_1cyclic__prefix_adb112068f1eb62e47a74b63b90d92b65a464683a58c4e07f845370a0eb40a0b67}{cyclic\_prefix::NORMAL}},\ \mbox{\hyperlink{structparams}{params}}.tdd\_ul\_dl\_cfg\_common.value());}
\DoxyCodeLine{00273\ \ \ \}}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \textcolor{comment}{//\ >\ SRS\ config.}}
\DoxyCodeLine{00276\ \ \ ul\_config.init\_ul\_bwp.srs\_cfg.emplace(config\_helpers::make\_default\_srs\_config(\mbox{\hyperlink{structparams}{params}}));}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \textcolor{keywordflow}{return}\ ul\_config;}
\DoxyCodeLine{00279\ \}}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \textcolor{keyword}{inline}\ slot\_point\ generate\_random\_slot\_point(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs)}
\DoxyCodeLine{00282\ \{}
\DoxyCodeLine{00283\ \ \ \textcolor{keyword}{static}\ std::array<std::uniform\_int\_distribution<uint32\_t>,\ \mbox{\hyperlink{namespacesrsran_a93952a4d9109a2160fc7b5390df79b0a}{NOF\_NUMEROLOGIES}}>\ scs\_dists\ =\ \{}
\DoxyCodeLine{00284\ \ \ \ \ \ \ std::uniform\_int\_distribution<uint32\_t>\{0,\ (10240\ *\ \mbox{\hyperlink{namespacesrsran_a45b408115d2fba72e768ef375c59da19}{get\_nof\_slots\_per\_subframe}}(subcarrier\_spacing::kHz15))\ -\/\ 1\},}
\DoxyCodeLine{00285\ \ \ \ \ \ \ std::uniform\_int\_distribution<uint32\_t>\{0,\ (10240\ *\ \mbox{\hyperlink{namespacesrsran_a45b408115d2fba72e768ef375c59da19}{get\_nof\_slots\_per\_subframe}}(subcarrier\_spacing::kHz30))\ -\/\ 1\},}
\DoxyCodeLine{00286\ \ \ \ \ \ \ std::uniform\_int\_distribution<uint32\_t>\{0,\ (10240\ *\ \mbox{\hyperlink{namespacesrsran_a45b408115d2fba72e768ef375c59da19}{get\_nof\_slots\_per\_subframe}}(subcarrier\_spacing::kHz60))\ -\/\ 1\},}
\DoxyCodeLine{00287\ \ \ \ \ \ \ std::uniform\_int\_distribution<uint32\_t>\{0,\ (10240\ *\ \mbox{\hyperlink{namespacesrsran_a45b408115d2fba72e768ef375c59da19}{get\_nof\_slots\_per\_subframe}}(subcarrier\_spacing::kHz120))\ -\/\ 1\},}
\DoxyCodeLine{00288\ \ \ \ \ \ \ std::uniform\_int\_distribution<uint32\_t>\{0,\ (10240\ *\ \mbox{\hyperlink{namespacesrsran_a45b408115d2fba72e768ef375c59da19}{get\_nof\_slots\_per\_subframe}}(subcarrier\_spacing::kHz240))\ -\/\ 1\}\};}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ uint32\_t\ count\ =\ scs\_dists[\mbox{\hyperlink{namespacesrsran_a49263b0b0f5cf392435502b7a4338129}{to\_numerology\_value}}(scs)](\mbox{\hyperlink{classsrsran_1_1test__rgen_adb79a80d7aaee4a1ed79b2936f403a62}{test\_rgen::get}}());}
\DoxyCodeLine{00291\ \ \ \textcolor{keywordflow}{return}\ slot\_point\{scs,\ count\};}
\DoxyCodeLine{00292\ \}}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \}\ \textcolor{comment}{//\ namespace\ test\_helpers}}
\DoxyCodeLine{00295\ \}\ \textcolor{comment}{//\ namespace\ srsran}}

\end{DoxyCode}
