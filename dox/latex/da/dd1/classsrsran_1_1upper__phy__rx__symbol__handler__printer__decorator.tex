\doxysection{srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler\+\_\+printer\+\_\+decorator Class Reference}
\hypertarget{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator}{}\label{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator}\index{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator}}


Inheritance diagram for srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler\+\_\+printer\+\_\+decorator\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{d6/dad/classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler\+\_\+printer\+\_\+decorator\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{de/d3c/classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_ac5a042c970c902eb7165a6e46c1d3412}{upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler\+\_\+printer\+\_\+decorator}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1upper__phy__rx__symbol__handler}{upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler}} $>$ handler\+\_\+, \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\+\_\+}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} std\+::string \&filename, \mbox{\hyperlink{classunsigned}{unsigned}} nof\+\_\+rb, \mbox{\hyperlink{classsrsran_1_1interval}{interval}}$<$ \mbox{\hyperlink{classunsigned}{unsigned}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\+\_\+print\+\_\+ports}}, \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{print\+\_\+prach\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_a43bd5e7d9cf7c44b95d577d71a14c43d}{handle\+\_\+rx\+\_\+symbol}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1upper__phy__rx__symbol__context}{upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+context}} \&context, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1resource__grid__reader}{resource\+\_\+grid\+\_\+reader}} \&grid) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Handles the reception of an OFDM symbol. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_a616d5f94ce96659c7732d966274f2409}{handle\+\_\+rx\+\_\+prach\+\_\+window}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1prach__buffer__context}{prach\+\_\+buffer\+\_\+context}} \&context, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1prach__buffer}{prach\+\_\+buffer}} \&buffer) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Handles the arrival of PRACH sequences. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_abc3a74f7e5e3dd86562f172b58e6a959}{handle\+\_\+rx\+\_\+srs\+\_\+symbol}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1upper__phy__rx__symbol__context}{upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+context}} \&context) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Handles the arrival of SRS packets at a given symbol. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1upper__phy__rx__symbol__handler}{srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_ac5a042c970c902eb7165a6e46c1d3412}\label{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_ac5a042c970c902eb7165a6e46c1d3412} 
\index{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator}!upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{upper\_phy\_rx\_symbol\_handler\_printer\_decorator}}
\index{upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{upper\_phy\_rx\_symbol\_handler\_printer\_decorator}!srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator}}
\doxysubsubsection{\texorpdfstring{upper\_phy\_rx\_symbol\_handler\_printer\_decorator()}{upper\_phy\_rx\_symbol\_handler\_printer\_decorator()}}
{\footnotesize\ttfamily srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler\+\_\+printer\+\_\+decorator\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler\+\_\+printer\+\_\+decorator (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1upper__phy__rx__symbol__handler}{upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler}} $>$}]{handler\+\_\+,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger\+\_\+,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} std\+::string \&}]{filename,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{nof\+\_\+rb,  }\item[{\mbox{\hyperlink{classsrsran_1_1interval}{interval}}$<$ \mbox{\hyperlink{classunsigned}{unsigned}} $>$}]{ul\+\_\+print\+\_\+ports,  }\item[{\mbox{\hyperlink{classbool}{bool}}}]{print\+\_\+prach\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00042\ \ \ \ \ handler(std::move(handler\_)),}
\DoxyCodeLine{00043\ \ \ \ \ logger(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\_}}),}
\DoxyCodeLine{00044\ \ \ \ \ worker(\textcolor{stringliteral}{"{}rx\_symb\_print"{}},\ 40),}
\DoxyCodeLine{00045\ \ \ \ \ temp\_buffer(nof\_rb\ *\ NRE),}
\DoxyCodeLine{00046\ \ \ \ \ nof\_symbols(MAX\_NSYMB\_PER\_SLOT),}
\DoxyCodeLine{00047\ \ \ \ \ start\_port(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_print\_ports}}.start()),}
\DoxyCodeLine{00048\ \ \ \ \ end\_port(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_print\_ports}}.stop()),}
\DoxyCodeLine{00049\ \ \ \ \ print\_prach(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{print\_prach\_}})}
\DoxyCodeLine{00050\ \ \ \{}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{if}\ (!logger.info.enabled())\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Receive\ symbol\ enabled\ but\ logger\ level\ not\ enabled.\ No\ symbols\ will\ be\ printed."{}});}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ file\ =\ std::ofstream(filename,\ std::ios\_base::binary\ |\ std::ios\_base::trunc);}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordflow}{if}\ (!file.is\_open())\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}RX\_SYMBOL:\ failed\ to\ open\ file\ \{\}."{}},\ filename);}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{if}\ (end\_port\ <=\ start\_port)\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}End\ port\ \{\}\ is\ not\ larger\ than\ start\ port\ \{\}."{}},\ end\_port,\ start\_port);}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_a616d5f94ce96659c7732d966274f2409}\label{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_a616d5f94ce96659c7732d966274f2409} 
\index{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator}!handle\_rx\_prach\_window@{handle\_rx\_prach\_window}}
\index{handle\_rx\_prach\_window@{handle\_rx\_prach\_window}!srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator}}
\doxysubsubsection{\texorpdfstring{handle\_rx\_prach\_window()}{handle\_rx\_prach\_window()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler\+\_\+printer\+\_\+decorator\+::handle\+\_\+rx\+\_\+prach\+\_\+window (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1prach__buffer__context}{prach\+\_\+buffer\+\_\+context}} \&}]{context,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1prach__buffer}{prach\+\_\+buffer}} \&}]{buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Handles the arrival of PRACH sequences. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em context} & PRACH context\+: specifies sector, slot and window. \\
\hline
\mbox{\texttt{ in}}  & {\em buffer} & Read-\/only buffer containing the PRACH sequence. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1upper__phy__rx__symbol__handler_a28afa1b92541c3e55499f342b37459ce}{srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00105\ \ \ \{}
\DoxyCodeLine{00106\ \ \ \ \ handler-\/>handle\_rx\_prach\_window(context,\ buffer);}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{comment}{//\ Queue\ write\ request.}}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordflow}{if}\ (print\_prach\ \&\&\ !worker.push\_task([\textcolor{keyword}{this},\ context,\ \&buffer]()\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ unsigned\ nof\_replicas\ =\ buffer.get\_max\_nof\_symbols();}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ unsigned\ prach\_start\ \ =\ 0;}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ unsigned\ prach\_stop\ \ \ =\ buffer.get\_max\_nof\_ports();}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ for\ (unsigned\ i\_port\ =\ prach\_start;\ i\_port\ !=\ prach\_stop;\ ++i\_port)\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ for\ (unsigned\ i\_replica\ =\ 0;\ i\_replica\ !=\ nof\_replicas;\ ++i\_replica)\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ span<const\ cf\_t>\ samples\ =\ buffer.get\_symbol(i\_port,\ 0,\ 0,\ i\_replica);}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write(reinterpret\_cast<const\ char*>(samples.data()),\ samples.size()\ *\ sizeof(cf\_t));}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_complex\_floats}}\ =\ buffer.get\_sequence\_length()\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_replicas}}\ *\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prach\_stop}}\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prach\_start}});}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Log\ the\ resource\ grid\ information.}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ logger.info(context.slot.sfn(),}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ context.slot.slot\_index(),}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}RX\_PRACH:\ sector=\{\}\ offset=\{\}\ size=\{\}"{}},}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ context.sector,}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file\_offset,}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_complex\_floats}});}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Advance\ file\ offset.}}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ file\_offset\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_complex\_floats}};}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \}))\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ logger.warning(context.slot.sfn(),}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ context.slot.slot\_index(),}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}RX\_PRACH:\ Failed\ to\ write\ PRACH\ samples.\ Cause:\ task\ worker\ queue\ is\ full"{}});}
\DoxyCodeLine{00135\ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_abc3a74f7e5e3dd86562f172b58e6a959}\label{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_abc3a74f7e5e3dd86562f172b58e6a959} 
\index{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator}!handle\_rx\_srs\_symbol@{handle\_rx\_srs\_symbol}}
\index{handle\_rx\_srs\_symbol@{handle\_rx\_srs\_symbol}!srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator}}
\doxysubsubsection{\texorpdfstring{handle\_rx\_srs\_symbol()}{handle\_rx\_srs\_symbol()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler\+\_\+printer\+\_\+decorator\+::handle\+\_\+rx\+\_\+srs\+\_\+symbol (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1upper__phy__rx__symbol__context}{upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+context}} \&}]{context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Handles the arrival of SRS packets at a given symbol. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em context} & Notification context\+: specifies sector, slot and symbol. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1upper__phy__rx__symbol__handler_a3e9121340aa8e03b7cb0a57752ded61e}{srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00139\ \ \ \{}
\DoxyCodeLine{00140\ \ \ \ \ handler-\/>handle\_rx\_srs\_symbol(context);}
\DoxyCodeLine{00141\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_a43bd5e7d9cf7c44b95d577d71a14c43d}\label{classsrsran_1_1upper__phy__rx__symbol__handler__printer__decorator_a43bd5e7d9cf7c44b95d577d71a14c43d} 
\index{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator}!handle\_rx\_symbol@{handle\_rx\_symbol}}
\index{handle\_rx\_symbol@{handle\_rx\_symbol}!srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator@{srsran::upper\_phy\_rx\_symbol\_handler\_printer\_decorator}}
\doxysubsubsection{\texorpdfstring{handle\_rx\_symbol()}{handle\_rx\_symbol()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler\+\_\+printer\+\_\+decorator\+::handle\+\_\+rx\+\_\+symbol (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1upper__phy__rx__symbol__context}{upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+context}} \&}]{context,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1resource__grid__reader}{resource\+\_\+grid\+\_\+reader}} \&}]{grid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Handles the reception of an OFDM symbol. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em context} & Notification context\+: specifies sector, slot and symbol. \\
\hline
\mbox{\texttt{ in}}  & {\em grid} & Resource grid for the current slot (encompasses all receive antenna ports). \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1upper__phy__rx__symbol__handler_a1631459be0860f705b69d20ad7557659}{srsran\+::upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00067\ \ \ \{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ Handle\ Rx\ symbol.}}
\DoxyCodeLine{00069\ \ \ \ \ handler-\/>handle\_rx\_symbol(context,\ grid);}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ Early\ return\ if\ the\ number\ of\ symbols\ does\ not\ reach\ the\ configured\ one\ or\ the\ file\ is\ not\ open.}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordflow}{if}\ ((context.symbol\ !=\ (nof\_symbols\ -\/\ 1))\ ||\ !file.is\_open())\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//\ Queue\ write\ request.}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ worker.push\_task([\textcolor{keyword}{this},\ context,\ \&grid]()\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Save\ the\ resource\ grid.}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ for\ (unsigned\ i\_port\ =\ start\_port;\ i\_port\ !=\ end\_port;\ ++i\_port)\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ for\ (unsigned\ symbol\_idx\ =\ 0;\ symbol\_idx\ !=\ nof\_symbols;\ ++symbol\_idx)\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ grid.get(temp\_buffer,\ i\_port,\ symbol\_idx,\ 0);}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write(reinterpret\_cast<const\ char*>(temp\_buffer.data()),\ temp\_buffer.size()\ *\ sizeof(cf\_t));}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Log\ the\ resource\ grid\ information.}}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_complex\_floats}}\ =\ temp\_buffer.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}()\ *\ nof\_symbols\ *\ (end\_port\ -\/\ start\_port);}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ logger.info(context.slot.sfn(),}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ context.slot.slot\_index(),}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}RX\_SYMBOL:\ sector=\{\}\ offset=\{\}\ size=\{\}"{}},}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ context.sector,}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file\_offset,}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_complex\_floats}});}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Advance\ file\ offset.}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ file\_offset\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_complex\_floats}};}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \}))\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ logger.warning(context.slot.sfn(),}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ context.slot.slot\_index(),}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}RX\_SYMBOL:\ Failed\ to\ write\ UL\ samples.\ Cause:\ task\ worker\ queue\ is\ full"{}});}
\DoxyCodeLine{00101\ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/upper\+\_\+phy\+\_\+rx\+\_\+symbol\+\_\+handler\+\_\+printer\+\_\+decorator.\+h\end{DoxyCompactItemize}
