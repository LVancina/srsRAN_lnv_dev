\doxysection{srsran\+::e2\+\_\+indication\+\_\+procedure Class Reference}
\hypertarget{classsrsran_1_1e2__indication__procedure}{}\label{classsrsran_1_1e2__indication__procedure}\index{srsran::e2\_indication\_procedure@{srsran::e2\_indication\_procedure}}


E2 INDICATION procedure will be used to send the measurement data to the RIC in response to the E2 SUBSCRIPTION REQUEST, It will execute periodically until the E2 SUBSCRIPTION DELETE REQUEST is received.  




{\ttfamily \#include $<$e2\+\_\+indication\+\_\+procedure.\+h$>$}



Collaboration diagram for srsran\+::e2\+\_\+indication\+\_\+procedure\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d1/d8c/classsrsran_1_1e2__indication__procedure__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1e2__indication__procedure_a5069c40d9b1b840f6950e90c2c1cf13a}{e2\+\_\+indication\+\_\+procedure}} (\mbox{\hyperlink{classsrsran_1_1e2__message__notifier}{e2\+\_\+message\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{notif\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1e2__event__manager}{e2\+\_\+event\+\_\+manager}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ev\+\_\+mng\+\_\+}}, \mbox{\hyperlink{structsrsran_1_1e2__subscription__info__t}{e2\+\_\+subscription\+\_\+info\+\_\+t}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{subscription\+\_\+info\+\_\+}}, \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1e2__indication__procedure_a6609dc7e2da8d5bc2a8d147116be6b5d}{operator()}} (\mbox{\hyperlink{namespacesrsran_aadfca39572d46ed2a532ab91af40292e}{coro\+\_\+context}}$<$ \mbox{\hyperlink{classsrsran_1_1eager__async__task}{eager\+\_\+async\+\_\+task}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} $>$ $>$ \&ctx)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
E2 INDICATION procedure will be used to send the measurement data to the RIC in response to the E2 SUBSCRIPTION REQUEST, It will execute periodically until the E2 SUBSCRIPTION DELETE REQUEST is received. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1e2__indication__procedure_a5069c40d9b1b840f6950e90c2c1cf13a}\label{classsrsran_1_1e2__indication__procedure_a5069c40d9b1b840f6950e90c2c1cf13a} 
\index{srsran::e2\_indication\_procedure@{srsran::e2\_indication\_procedure}!e2\_indication\_procedure@{e2\_indication\_procedure}}
\index{e2\_indication\_procedure@{e2\_indication\_procedure}!srsran::e2\_indication\_procedure@{srsran::e2\_indication\_procedure}}
\doxysubsubsection{\texorpdfstring{e2\_indication\_procedure()}{e2\_indication\_procedure()}}
{\footnotesize\ttfamily e2\+\_\+indication\+\_\+procedure\+::e2\+\_\+indication\+\_\+procedure (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1e2__message__notifier}{e2\+\_\+message\+\_\+notifier}} \&}]{notif\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1e2__event__manager}{e2\+\_\+event\+\_\+manager}} \&}]{ev\+\_\+mng\+\_\+,  }\item[{\mbox{\hyperlink{structsrsran_1_1e2__subscription__info__t}{e2\+\_\+subscription\+\_\+info\+\_\+t}} \&}]{subscription\+\_\+info\+\_\+,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger\+\_\+ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00035\ \ \ notifier(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{notif\_}}),\ ev\_mng(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ev\_mng\_}}),\ subscription(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{subscription\_info\_}}),\ logger(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\_}})}
\DoxyCodeLine{00036\ \{}
\DoxyCodeLine{00037\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1e2__indication__procedure_a6609dc7e2da8d5bc2a8d147116be6b5d}\label{classsrsran_1_1e2__indication__procedure_a6609dc7e2da8d5bc2a8d147116be6b5d} 
\index{srsran::e2\_indication\_procedure@{srsran::e2\_indication\_procedure}!operator()@{operator()}}
\index{operator()@{operator()}!srsran::e2\_indication\_procedure@{srsran::e2\_indication\_procedure}}
\doxysubsubsection{\texorpdfstring{operator()()}{operator()()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} e2\+\_\+indication\+\_\+procedure\+::operator() (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_aadfca39572d46ed2a532ab91af40292e}{coro\+\_\+context}}$<$ \mbox{\hyperlink{classsrsran_1_1eager__async__task}{eager\+\_\+async\+\_\+task}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} $>$ $>$ \&}]{ctx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00040\ \{}
\DoxyCodeLine{00041\ \ \ CORO\_BEGIN(ctx);}
\DoxyCodeLine{00042\ \ \ \textcolor{keywordflow}{while}\ (running)\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordflow}{if}\ (!ev\_mng.sub\_del\_reqs.count(subscription.request\_id.ric\_requestor\_id))\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}No\ subscription\ delete\ request\ found\ for\ RIC\ instance\ ID\ \{\}"{}},}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ subscription.request\_id.ric\_requestor\_id);}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00047\ \ \ \ \ \}}
\DoxyCodeLine{00048\ \ \ \ \ transaction\_sink.subscribe\_to(*ev\_mng.sub\_del\_reqs[subscription.request\_id.ric\_requestor\_id].get(),}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (std::chrono::milliseconds)1000);}
\DoxyCodeLine{00050\ \ \ \ \ CORO\_AWAIT(transaction\_sink);}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{if}\ (!transaction\_sink.timeout\_expired())\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ logger.info(\textcolor{stringliteral}{"{}Subscription\ deleted"{}});}
\DoxyCodeLine{00053\ \ \ \ \ \ \ running\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ action\ :\ subscription.action\_list)\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1e2__indication__message}{e2\_indication\_message}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \{\};}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_cind\_msg.crit\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ asn1::crit\_opts::reject;}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.request\_id\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ subscription.request\_id;}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ra\_nfunction\_id.value\ \ \ \ \ \ \ \ \ \ \ \ =\ subscription.ran\_function\_id;}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_caction\_id.value\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ action.ric\_action\_id;}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_ccall\_process\_id\_present\ \ \ \ \ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_cind\_sn\_present\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_crequest\_id-\/>ric\_instance\_id\ \ =\ subscription.request\_id.ric\_instance\_id;}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_crequest\_id-\/>ric\_requestor\_id\ =\ subscription.request\_id.ric\_requestor\_id;}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ind\_msg\_bytes}};}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\_buffer}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ind\_hdr\_bytes}};}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (action.ric\_action\_type)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ri\_caction\_type\_e::ri\_caction\_type\_opts::report:}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_cind\_type.value\ =\ ri\_cind\_type\_e::ri\_cind\_type\_opts::report;}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Trigger\ measurement\ collection.}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ action.report\_service-\/>collect\_measurements();}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (action.report\_service-\/>is\_ind\_msg\_ready())\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ RIC\ indication\ msg\ content.}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ind\_msg\_bytes}}\ =\ action.report\_service-\/>get\_indication\_message();}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ind\_hdr\_bytes}}\ =\ action.report\_service-\/>get\_indication\_header();}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ri\_caction\_type\_e::ri\_caction\_type\_opts::insert:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_cind\_type.value\ =\ ri\_cind\_type\_e::ri\_cind\_type\_opts::insert;}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Unknown\ action\ type"{}});}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \ \ \textcolor{comment}{//\ Put\ RIC\ indication\ content\ into\ message.}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_cind\_msg.value.resize(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ind\_msg\_bytes}}.length());}
\DoxyCodeLine{00091\ \ \ \ \ \ \ std::copy(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ind\_msg\_bytes}}.begin(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ind\_msg\_bytes}}.end(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_cind\_msg.value.begin());}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_cind\_hdr.value.resize(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ind\_hdr\_bytes}}.length());}
\DoxyCodeLine{00093\ \ \ \ \ \ \ std::copy(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ind\_hdr\_bytes}}.begin(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ind\_hdr\_bytes}}.end(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}}.indication-\/>ri\_cind\_hdr.value.begin());}
\DoxyCodeLine{00094\ \ \ \ \ \ \ logger.info(\textcolor{stringliteral}{"{}Sending\ E2\ indication"{}});}
\DoxyCodeLine{00095\ \ \ \ \ \ \ send\_e2\_indication(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2\_ind}});}
\DoxyCodeLine{00096\ \ \ \ \ \}}
\DoxyCodeLine{00097\ \ \ \}}
\DoxyCodeLine{00098\ \ \ CORO\_RETURN();}
\DoxyCodeLine{00099\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/e2/procedures/e2\+\_\+indication\+\_\+procedure.\+h\item 
lib/e2/procedures/e2\+\_\+indication\+\_\+procedure.\+cpp\end{DoxyCompactItemize}
