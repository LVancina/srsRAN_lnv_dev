\doxysection{srsran\+::rlc\+\_\+am\+\_\+status\+\_\+pdu Class Reference}
\hypertarget{classsrsran_1_1rlc__am__status__pdu}{}\label{classsrsran_1_1rlc__am__status__pdu}\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}


AM Status PDU.  




{\ttfamily \#include $<$rlc\+\_\+am\+\_\+pdu.\+h$>$}



Collaboration diagram for srsran\+::rlc\+\_\+am\+\_\+status\+\_\+pdu\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=268pt]{d0/df6/classsrsran_1_1rlc__am__status__pdu__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_a6cb6f060b10b4e2434461867d3f209c5}{rlc\+\_\+am\+\_\+status\+\_\+pdu}} (\mbox{\hyperlink{namespacesrsran_a8b7450158a751f78ab498cc921d3eae7}{rlc\+\_\+am\+\_\+sn\+\_\+size}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sn\+\_\+size\+\_\+}})
\item 
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a703c43a95f7122f1f7598cd3964b928e}\label{classsrsran_1_1rlc__am__status__pdu_a703c43a95f7122f1f7598cd3964b928e} 
{\bfseries rlc\+\_\+am\+\_\+status\+\_\+pdu} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu}{rlc\+\_\+am\+\_\+status\+\_\+pdu}} \&\mbox{\hyperlink{namespacesrsran_aaf684a2cfa98b7f333de7041525a5b29a795f3202b17cb6bc3d4b771d8c6c9eaf}{other}})=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Explicit copy ctor to avoid implicit copies. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a379aaad52e1b47b019783369daf15bcb}\label{classsrsran_1_1rlc__am__status__pdu_a379aaad52e1b47b019783369daf15bcb} 
{\bfseries rlc\+\_\+am\+\_\+status\+\_\+pdu} (\mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu}{rlc\+\_\+am\+\_\+status\+\_\+pdu}} \&\&\mbox{\hyperlink{namespacesrsran_aaf684a2cfa98b7f333de7041525a5b29a795f3202b17cb6bc3d4b771d8c6c9eaf}{other}})=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default move ctor. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a28229d5a8b8d699f3df985d71726342f}\label{classsrsran_1_1rlc__am__status__pdu_a28229d5a8b8d699f3df985d71726342f} 
\mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu}{rlc\+\_\+am\+\_\+status\+\_\+pdu}} \& {\bfseries operator=} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu}{rlc\+\_\+am\+\_\+status\+\_\+pdu}} \&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\begin{DoxyCompactList}\small\item\em Copy assignment is disabled. Use std\+::move, or explicit copy instead. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a8625b2afd7cefbfb3ea09ebc1c1a09ca}\label{classsrsran_1_1rlc__am__status__pdu_a8625b2afd7cefbfb3ea09ebc1c1a09ca} 
\mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu}{rlc\+\_\+am\+\_\+status\+\_\+pdu}} \& {\bfseries operator=} (\mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu}{rlc\+\_\+am\+\_\+status\+\_\+pdu}} \&\&\mbox{\hyperlink{namespacesrsran_aaf684a2cfa98b7f333de7041525a5b29a795f3202b17cb6bc3d4b771d8c6c9eaf}{other}})=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Move assignment of \doxylink{classsrsran_1_1byte__buffer}{byte\+\_\+buffer}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_a471c5e19378de502e508df2c395c268f}{reset}} ()
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_ad5bbad1d56acc4a609de25ea87a6b3d3}{can\+\_\+be\+\_\+merged}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack}{rlc\+\_\+am\+\_\+status\+\_\+nack}} \&left, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack}{rlc\+\_\+am\+\_\+status\+\_\+nack}} \&right) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Checks whether the two NACKs can be merged into one NACK. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_a93423f1e5cff76adbb8d7d0800fd15b2}{push\+\_\+nack}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack}{rlc\+\_\+am\+\_\+status\+\_\+nack}} \&nack)
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} std\+::vector$<$ \mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack}{rlc\+\_\+am\+\_\+status\+\_\+nack}} $>$ \& \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_a192457d9dc95e75e7ec8ceedc7144506}{get\+\_\+nacks}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_a86593ce01f3c59cd27c635197d0f95e2}{get\+\_\+packed\+\_\+size}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_ae58a10fe745890072bbfd7a681a54f1b}{trim}} (uint32\+\_\+t \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\+\_\+packed\+\_\+size}})
\item 
size\+\_\+t \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_a8a69c48f9b9cd65d11763c8e0d3cbdd1}{pack}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ buf) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Write the RLC AM status PDU to a PDU buffer and meets the length of the generate PDU accordingly. \end{DoxyCompactList}\item 
\mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\+\_\+\+NODISCARD}} \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_a4cc55fea54432697292f41bc90b79c96}{unpack}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\+\_\+buffer\+\_\+view}} \&pdu)
\begin{DoxyCompactList}\small\item\em Read a RLC AM status PDU from a PDU buffer view. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_a3856f1c6ccdedec7edef5d69f65b57b6}{is\+\_\+control\+\_\+pdu}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\+\_\+buffer\+\_\+view}} \&pdu)
\begin{DoxyCompactList}\small\item\em Checks if a PDU buffer view contains a control PDU. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a8c2510a05a5e310bb55202ea6e663314}\label{classsrsran_1_1rlc__am__status__pdu_a8c2510a05a5e310bb55202ea6e663314} 
rlc\+\_\+control\+\_\+pdu\+\_\+type {\bfseries cpt} = rlc\+\_\+control\+\_\+pdu\+\_\+type\+::status\+\_\+pdu
\begin{DoxyCompactList}\small\item\em Control PDU type. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_ad3b2d218987b1572b94d31649ecfa119}\label{classsrsran_1_1rlc__am__status__pdu_ad3b2d218987b1572b94d31649ecfa119} 
\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} {\bfseries ack\+\_\+sn} = \mbox{\hyperlink{namespacesrsran_a7330c0b829cb3d3717bb70ab14ec3e3c}{INVALID\+\_\+\+RLC\+\_\+\+SN}}
\begin{DoxyCompactList}\small\item\em SN of the next not received RLC Data PDU. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
AM Status PDU. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a6cb6f060b10b4e2434461867d3f209c5}\label{classsrsran_1_1rlc__am__status__pdu_a6cb6f060b10b4e2434461867d3f209c5} 
\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}!rlc\_am\_status\_pdu@{rlc\_am\_status\_pdu}}
\index{rlc\_am\_status\_pdu@{rlc\_am\_status\_pdu}!srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}
\doxysubsubsection{\texorpdfstring{rlc\_am\_status\_pdu()}{rlc\_am\_status\_pdu()}}
{\footnotesize\ttfamily rlc\+\_\+am\+\_\+status\+\_\+pdu\+::rlc\+\_\+am\+\_\+status\+\_\+pdu (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a8b7450158a751f78ab498cc921d3eae7}{rlc\+\_\+am\+\_\+sn\+\_\+size}}}]{sn\+\_\+size\+\_\+ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00034\ \ \ sn\_size(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sn\_size\_}}),\ mod\_nr(\mbox{\hyperlink{namespacesrsran_abcf66419637f2dc1494305c3b8d7aaf5}{cardinality}}(to\_number(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sn\_size\_}})))}
\DoxyCodeLine{00035\ \{}
\DoxyCodeLine{00036\ \ \ nacks.reserve(\mbox{\hyperlink{namespacesrsran_a544c2ef2a6cd14f6c823e9200f1c419a}{RLC\_AM\_NR\_TYP\_NACKS}});}
\DoxyCodeLine{00037\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_ad5bbad1d56acc4a609de25ea87a6b3d3}\label{classsrsran_1_1rlc__am__status__pdu_ad5bbad1d56acc4a609de25ea87a6b3d3} 
\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}!can\_be\_merged@{can\_be\_merged}}
\index{can\_be\_merged@{can\_be\_merged}!srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}
\doxysubsubsection{\texorpdfstring{can\_be\_merged()}{can\_be\_merged()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} rlc\+\_\+am\+\_\+status\+\_\+pdu\+::can\+\_\+be\+\_\+merged (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack}{rlc\+\_\+am\+\_\+status\+\_\+nack}} \&}]{left,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack}{rlc\+\_\+am\+\_\+status\+\_\+nack}} \&}]{right }\end{DoxyParamCaption}) const}



Checks whether the two NACKs can be merged into one NACK. 

This first checks whether both NACKs form as continuous sequence and then also validates that the resulting range does not exceed the maximum length of a NACK range (which is 255).


\begin{DoxyParams}{Parameters}
{\em left} & The NACK on the left-\/hand side. \\
\hline
{\em right} & The NACK on the right-\/hand side. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if both NACKs can be merged into one. False if not. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00048\ \{}
\DoxyCodeLine{00049\ \ \ \textcolor{comment}{//\ SN\ must\ be\ continuous}}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{if}\ (right.nack\_sn\ !=\ ((left.has\_nack\_range\ ?\ left.nack\_sn\ +\ left.nack\_range\ :\ (left.nack\_sn\ +\ 1))\ \%\ mod\_nr))\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00052\ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \textcolor{comment}{//\ Segments\ on\ left\ side\ (if\ present)\ must\ reach\ the\ end\ of\ sdu}}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{if}\ (left.has\_so\ \&\&\ left.so\_end\ !=\ rlc\_am\_status\_nack::so\_end\_of\_sdu)\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00057\ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \textcolor{comment}{//\ Segments\ on\ right\ side\ (if\ present)\ must\ start\ from\ the\ beginning}}
\DoxyCodeLine{00060\ \ \ \textcolor{keywordflow}{if}\ (right.has\_so\ \&\&\ right.so\_start\ !=\ 0)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00062\ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \textcolor{comment}{//\ cumulated\ NACK\ range\ must\ not\ exceed\ 255}}
\DoxyCodeLine{00065\ \ \ uint16\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{left\_range}}\ \ =\ (left.has\_nack\_range\ ?\ left.nack\_range\ :\ 1);}
\DoxyCodeLine{00066\ \ \ uint16\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{right\_range}}\ =\ (right.has\_nack\_range\ ?\ right.nack\_range\ :\ 1);}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{left\_range}}\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{right\_range}}\ <=\ 255;}
\DoxyCodeLine{00068\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a192457d9dc95e75e7ec8ceedc7144506}\label{classsrsran_1_1rlc__am__status__pdu_a192457d9dc95e75e7ec8ceedc7144506} 
\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}!get\_nacks@{get\_nacks}}
\index{get\_nacks@{get\_nacks}!srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}
\doxysubsubsection{\texorpdfstring{get\_nacks()}{get\_nacks()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} std\+::vector$<$ \mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack}{rlc\+\_\+am\+\_\+status\+\_\+nack}} $>$ \& srsran\+::rlc\+\_\+am\+\_\+status\+\_\+pdu\+::get\+\_\+nacks (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00166\ \{\ \textcolor{keywordflow}{return}\ nacks;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a86593ce01f3c59cd27c635197d0f95e2}\label{classsrsran_1_1rlc__am__status__pdu_a86593ce01f3c59cd27c635197d0f95e2} 
\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}!get\_packed\_size@{get\_packed\_size}}
\index{get\_packed\_size@{get\_packed\_size}!srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}
\doxysubsubsection{\texorpdfstring{get\_packed\_size()}{get\_packed\_size()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} srsran\+::rlc\+\_\+am\+\_\+status\+\_\+pdu\+::get\+\_\+packed\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00167\ \{\ \textcolor{keywordflow}{return}\ packed\_size;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a3856f1c6ccdedec7edef5d69f65b57b6}\label{classsrsran_1_1rlc__am__status__pdu_a3856f1c6ccdedec7edef5d69f65b57b6} 
\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}!is\_control\_pdu@{is\_control\_pdu}}
\index{is\_control\_pdu@{is\_control\_pdu}!srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}
\doxysubsubsection{\texorpdfstring{is\_control\_pdu()}{is\_control\_pdu()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} rlc\+\_\+am\+\_\+status\+\_\+pdu\+::is\+\_\+control\+\_\+pdu (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\+\_\+buffer\+\_\+view}} \&}]{pdu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Checks if a PDU buffer view contains a control PDU. 


\begin{DoxyParams}{Parameters}
{\em pdu} & A reference to a \doxylink{classsrsran_1_1byte__buffer__view}{byte\+\_\+buffer\+\_\+view} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the byte buffer contains a control PDU, false otherwise 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00189\ \{}
\DoxyCodeLine{00190\ \ \ \textcolor{keywordflow}{return}\ ((*(pdu.\mbox{\hyperlink{classsrsran_1_1byte__buffer__view_a6878ab1403493852ca6edd1b91a87ab6}{begin}}())\ >>\ 7U)\ \&\ 0x01U)\ ==\ to\_number(rlc\_dc\_field::control);}
\DoxyCodeLine{00191\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a8a69c48f9b9cd65d11763c8e0d3cbdd1}\label{classsrsran_1_1rlc__am__status__pdu_a8a69c48f9b9cd65d11763c8e0d3cbdd1} 
\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}!pack@{pack}}
\index{pack@{pack}!srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}
\doxysubsubsection{\texorpdfstring{pack()}{pack()}}
{\footnotesize\ttfamily size\+\_\+t rlc\+\_\+am\+\_\+status\+\_\+pdu\+::pack (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{buf }\end{DoxyParamCaption}) const}



Write the RLC AM status PDU to a PDU buffer and meets the length of the generate PDU accordingly. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em buf} & Buffer where to encode the status PDU. The encoded PDU size cannot exceed the size of the buffer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of bytes taken by the written status PDU. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00546\ \{}
\DoxyCodeLine{00547\ \ \ \textcolor{keywordflow}{switch}\ (sn\_size)\ \{}
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{keywordflow}{case}\ rlc\_am\_sn\_size::size12bits:}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pack\_12bit(buf);}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00551\ \ \ \ \ \textcolor{keywordflow}{case}\ rlc\_am\_sn\_size::size18bits:}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pack\_18bit(buf);}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00554\ \ \ \}}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00557\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a93423f1e5cff76adbb8d7d0800fd15b2}\label{classsrsran_1_1rlc__am__status__pdu_a93423f1e5cff76adbb8d7d0800fd15b2} 
\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}!push\_nack@{push\_nack}}
\index{push\_nack@{push\_nack}!srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}
\doxysubsubsection{\texorpdfstring{push\_nack()}{push\_nack()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} rlc\+\_\+am\+\_\+status\+\_\+pdu\+::push\+\_\+nack (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack}{rlc\+\_\+am\+\_\+status\+\_\+nack}} \&}]{nack }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00071\ \{}
\DoxyCodeLine{00072\ \ \ \textcolor{keywordflow}{if}\ (nacks.empty())\ \{}
\DoxyCodeLine{00073\ \ \ \ \ nacks.push\_back(nack);}
\DoxyCodeLine{00074\ \ \ \ \ packed\_size\ +=\ nack\_size(nack);}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00076\ \ \ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack}{rlc\_am\_status\_nack}}\&\ prev\ =\ nacks.back();}
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_ad5bbad1d56acc4a609de25ea87a6b3d3}{can\_be\_merged}}(prev,\ nack))\ \{}
\DoxyCodeLine{00080\ \ \ \ \ nacks.push\_back(nack);}
\DoxyCodeLine{00081\ \ \ \ \ packed\_size\ +=\ nack\_size(nack);}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00083\ \ \ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \textcolor{comment}{//\ expand\ previous\ NACK}}
\DoxyCodeLine{00086\ \ \ \textcolor{comment}{//\ subtract\ size\ of\ previous\ NACK\ (add\ updated\ size\ later)}}
\DoxyCodeLine{00087\ \ \ packed\_size\ -\/=\ nack\_size(prev);}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \textcolor{comment}{//\ enable\ and\ update\ NACK\ range}}
\DoxyCodeLine{00090\ \ \ \textcolor{keywordflow}{if}\ (nack.has\_nack\_range)\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordflow}{if}\ (prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a8933ace877935c4c28d7eb991e7b37f1}{has\_nack\_range}})\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \textcolor{comment}{//\ [NACK\ range][NACK\ range]}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a1e841e48e62b859402b71fec24bc5cfa}{nack\_range}}\ +=\ nack.nack\_range;}
\DoxyCodeLine{00094\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \textcolor{comment}{//\ [NACK\ SDU][NACK\ range]}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a1e841e48e62b859402b71fec24bc5cfa}{nack\_range}}\ \ \ \ \ =\ nack.nack\_range\ +\ 1;}
\DoxyCodeLine{00097\ \ \ \ \ \ \ prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a8933ace877935c4c28d7eb991e7b37f1}{has\_nack\_range}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordflow}{if}\ (prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a8933ace877935c4c28d7eb991e7b37f1}{has\_nack\_range}})\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \textcolor{comment}{//\ [NACK\ range][NACK\ SDU]}}
\DoxyCodeLine{00102\ \ \ \ \ \ \ prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a1e841e48e62b859402b71fec24bc5cfa}{nack\_range}}++;}
\DoxyCodeLine{00103\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \textcolor{comment}{//\ [NACK\ SDU][NACK\ SDU]}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a1e841e48e62b859402b71fec24bc5cfa}{nack\_range}}\ \ \ \ \ =\ 2;}
\DoxyCodeLine{00106\ \ \ \ \ \ \ prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a8933ace877935c4c28d7eb991e7b37f1}{has\_nack\_range}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00107\ \ \ \ \ \}}
\DoxyCodeLine{00108\ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \textcolor{comment}{//\ enable\ and\ update\ segment\ offsets\ (if\ required)}}
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{if}\ (nack.has\_so)\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordflow}{if}\ (!prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a17e600cb1df3965162fdf72e65d6d028}{has\_so}})\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \textcolor{comment}{//\ [NACK\ SDU][NACK\ segm]}}
\DoxyCodeLine{00114\ \ \ \ \ \ \ prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a17e600cb1df3965162fdf72e65d6d028}{has\_so}}\ \ \ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00115\ \ \ \ \ \ \ prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a83376ddf02f54d87cb287df28a97583a}{so\_start}}\ =\ 0;}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{comment}{//\ [NACK\ SDU][NACK\ segm]\ or\ [NACK\ segm][NACK\ segm]}}
\DoxyCodeLine{00118\ \ \ \ \ prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_aaf7b641365a57599fea78ca7699dc80e}{so\_end}}\ =\ nack.so\_end;}
\DoxyCodeLine{00119\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{if}\ (prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_a17e600cb1df3965162fdf72e65d6d028}{has\_so}})\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \textcolor{comment}{//\ [NACK\ segm][NACK\ SDU]}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ prev.\mbox{\hyperlink{structsrsran_1_1rlc__am__status__nack_aaf7b641365a57599fea78ca7699dc80e}{so\_end}}\ =\ rlc\_am\_status\_nack::so\_end\_of\_sdu;}
\DoxyCodeLine{00123\ \ \ \ \ \}}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{comment}{//\ [NACK\ segm][NACK\ SDU]\ or\ [NACK\ SDU][NACK\ SDU]}}
\DoxyCodeLine{00125\ \ \ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \textcolor{comment}{//\ add\ updated\ size}}
\DoxyCodeLine{00128\ \ \ packed\_size\ +=\ nack\_size(prev);}
\DoxyCodeLine{00129\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a471c5e19378de502e508df2c395c268f}\label{classsrsran_1_1rlc__am__status__pdu_a471c5e19378de502e508df2c395c268f} 
\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}!reset@{reset}}
\index{reset@{reset}!srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} rlc\+\_\+am\+\_\+status\+\_\+pdu\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00040\ \{}
\DoxyCodeLine{00041\ \ \ \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_a8c2510a05a5e310bb55202ea6e663314}{cpt}}\ \ \ \ =\ rlc\_control\_pdu\_type::status\_pdu;}
\DoxyCodeLine{00042\ \ \ \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_ad3b2d218987b1572b94d31649ecfa119}{ack\_sn}}\ =\ \mbox{\hyperlink{namespacesrsran_a7330c0b829cb3d3717bb70ab14ec3e3c}{INVALID\_RLC\_SN}};}
\DoxyCodeLine{00043\ \ \ nacks.clear();}
\DoxyCodeLine{00044\ \ \ packed\_size\ =\ \mbox{\hyperlink{namespacesrsran_a60ec2718dd93ef76fd902eb9199dd841}{rlc\_am\_nr\_status\_pdu\_sizeof\_header\_ack\_sn}};}
\DoxyCodeLine{00045\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_ae58a10fe745890072bbfd7a681a54f1b}\label{classsrsran_1_1rlc__am__status__pdu_ae58a10fe745890072bbfd7a681a54f1b} 
\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}!trim@{trim}}
\index{trim@{trim}!srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}
\doxysubsubsection{\texorpdfstring{trim()}{trim()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} rlc\+\_\+am\+\_\+status\+\_\+pdu\+::trim (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{max\+\_\+packed\+\_\+size }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00132\ \{}
\DoxyCodeLine{00133\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_packed\_size}}\ >=\ packed\_size)\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{comment}{//\ no\ trimming\ required}}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00136\ \ \ \}}
\DoxyCodeLine{00137\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_packed\_size}}\ <\ \mbox{\hyperlink{namespacesrsran_a60ec2718dd93ef76fd902eb9199dd841}{rlc\_am\_nr\_status\_pdu\_sizeof\_header\_ack\_sn}})\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{comment}{//\ too\ little\ space\ for\ smallest\ possible\ status\ PDU\ (only\ header\ +\ ACK).}}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00140\ \ \ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \textcolor{comment}{//\ remove\ NACKs\ (starting\ from\ the\ back)\ until\ it\ fits\ into\ given\ space}}
\DoxyCodeLine{00143\ \ \ \textcolor{comment}{//\ note:\ when\ removing\ a\ NACK\ for\ a\ segment,\ we\ have\ to\ remove\ all\ other\ NACKs\ with\ the\ same\ SN\ as\ well,}}
\DoxyCodeLine{00144\ \ \ \textcolor{comment}{//\ see\ TS\ 38.322\ Sec.\ 5.3.4:}}
\DoxyCodeLine{00145\ \ \ \textcolor{comment}{//\ \ \ "{}set\ the\ ACK\_SN\ to\ the\ SN\ of\ the\ next\ not\ received\ RLC\ SDU}}
\DoxyCodeLine{00146\ \ \ \textcolor{comment}{//\ \ \ which\ is\ not\ indicated\ as\ missing\ in\ the\ resulting\ STATUS\ PDU."{}}}
\DoxyCodeLine{00147\ \ \ \textcolor{keywordflow}{while}\ (!nacks.empty()\ \&\&\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_packed\_size}}\ <\ packed\_size\ ||\ nacks.back().nack\_sn\ ==\ \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_ad3b2d218987b1572b94d31649ecfa119}{ack\_sn}}))\ \{}
\DoxyCodeLine{00148\ \ \ \ \ packed\_size\ -\/=\ nack\_size(nacks.back());}
\DoxyCodeLine{00149\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1rlc__am__status__pdu_ad3b2d218987b1572b94d31649ecfa119}{ack\_sn}}\ =\ nacks.back().nack\_sn;}
\DoxyCodeLine{00150\ \ \ \ \ nacks.pop\_back();}
\DoxyCodeLine{00151\ \ \ \}}
\DoxyCodeLine{00152\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00153\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__am__status__pdu_a4cc55fea54432697292f41bc90b79c96}\label{classsrsran_1_1rlc__am__status__pdu_a4cc55fea54432697292f41bc90b79c96} 
\index{srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}!unpack@{unpack}}
\index{unpack@{unpack}!srsran::rlc\_am\_status\_pdu@{srsran::rlc\_am\_status\_pdu}}
\doxysubsubsection{\texorpdfstring{unpack()}{unpack()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} rlc\+\_\+am\+\_\+status\+\_\+pdu\+::unpack (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{byte\+\_\+buffer\+\_\+view}} \&}]{pdu }\end{DoxyParamCaption})}



Read a RLC AM status PDU from a PDU buffer view. 


\begin{DoxyParams}{Parameters}
{\em pdu} & A reference to a \doxylink{classsrsran_1_1byte__buffer__view}{byte\+\_\+buffer\+\_\+view} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if PDU was read successfully, false otherwise 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00417\ \{}
\DoxyCodeLine{00418\ \ \ \textcolor{keywordflow}{switch}\ (sn\_size)\ \{}
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{keywordflow}{case}\ rlc\_am\_sn\_size::size12bits:}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ unpack\_12bit(pdu);}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keywordflow}{case}\ rlc\_am\_sn\_size::size18bits:}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ unpack\_18bit(pdu);}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00425\ \ \ \}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00428\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/rlc/rlc\+\_\+am\+\_\+pdu.\+h\item 
lib/rlc/rlc\+\_\+am\+\_\+pdu.\+cpp\end{DoxyCompactItemize}
