\doxysection{mac\+\_\+test\+\_\+mode\+\_\+adapter.\+h}
\hypertarget{mac__test__mode__adapter_8h_source}{}\label{mac__test__mode__adapter_8h_source}\index{lib/du\_high/adapters/mac\_test\_mode\_adapter.h@{lib/du\_high/adapters/mac\_test\_mode\_adapter.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ 2021-\/2024\ Software\ Radio\ Systems\ Limited}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ srsRAN.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ srsRAN\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ it\ under\ the\ terms\ of\ the\ GNU\ Affero\ General\ Public\ License\ as}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ published\ by\ the\ Free\ Software\ Foundation,\ either\ version\ 3\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ the\ License,\ or\ (at\ your\ option)\ any\ later\ version.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ srsRAN\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ GNU\ Affero\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ A\ copy\ of\ the\ GNU\ Affero\ General\ Public\ License\ can\ be\ found\ in}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ the\ LICENSE\ file\ in\ the\ top-\/level\ directory\ of\ this\ distribution}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ and\ at\ http://www.gnu.org/licenses/.}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}srsran/du/du\_test\_config.h"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}srsran/mac/mac.h"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}srsran/mac/mac\_cell\_result.h"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <unordered\_map>}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesrsran}{srsran}}\ \{}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrsran_1_1phy__test__mode__adapter}{phy\_test\_mode\_adapter}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1mac__result__notifier}{mac\_result\_notifier}}}
\DoxyCodeLine{00033\ \{}
\DoxyCodeLine{00034\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00035\ \ \ \mbox{\hyperlink{classsrsran_1_1phy__test__mode__adapter}{phy\_test\_mode\_adapter}}(\mbox{\hyperlink{classsrsran_1_1mac__result__notifier}{mac\_result\_notifier}}\&\ phy\_notifier\_)\ :\ adapted\_phy(phy\_notifier\_),\ cells(MAX\_NOF\_DU\_CELLS)\ \{\}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier}{mac\_cell\_result\_notifier}}\&\ get\_cell(\mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\_cell\_index\_t}}\ cell\_index)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \textcolor{keywordtype}{void}\ connect(\mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\_cell\_index\_t}}\ cell\_index,\ \mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier}{mac\_cell\_result\_notifier}}\&\ test\_mode\_cell\_notifier);}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{keywordtype}{void}\ disconnect(\mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\_cell\_index\_t}}\ cell\_index);}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__result__notifier}{mac\_result\_notifier}}\&\ adapted\_phy;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00046\ \ \ \textcolor{keyword}{class\ }phy\_cell\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier}{mac\_cell\_result\_notifier}}}
\DoxyCodeLine{00047\ \ \ \{}
\DoxyCodeLine{00048\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier}{mac\_cell\_result\_notifier}}*\ ptr\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{void}\ on\_new\_downlink\_scheduler\_results(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1mac__dl__sched__result}{mac\_dl\_sched\_result}}\&\ dl\_res)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordtype}{void}\ on\_new\_downlink\_data(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1mac__dl__data__result}{mac\_dl\_data\_result}}\&\ dl\_data)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordtype}{void}\ on\_new\_uplink\_scheduler\_results(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1mac__ul__sched__result}{mac\_ul\_sched\_result}}\&\ ul\_res)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{void}\ on\_cell\_results\_completion(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}})\ \textcolor{keyword}{override};}
\DoxyCodeLine{00055\ \ \ \};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ std::vector<phy\_cell>\ cells;}
\DoxyCodeLine{00058\ \};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00061\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrsran_1_1test__ue__info__manager}{test\_ue\_info\_manager}}}
\DoxyCodeLine{00062\ \{}
\DoxyCodeLine{00063\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00064\ \ \ \mbox{\hyperlink{classsrsran_1_1test__ue__info__manager}{test\_ue\_info\_manager}}(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ rnti\_start\_,\ uint16\_t\ nof\_ues\_)\ :\ rnti\_start(rnti\_start\_),\ nof\_ues(nof\_ues\_)\ \{\}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{namespacesrsran_a511ed22603607d4a784c0f1807648b47}{du\_ue\_index\_t}}\ rnti\_to\_du\_ue\_idx(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ rnti)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00067\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{if}\ (rnti\_to\_ue\_info\_lookup.count(rnti)\ ==\ 0)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ INVALID\_DU\_UE\_INDEX;}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{return}\ rnti\_to\_ue\_info\_lookup.at(rnti).ue\_idx;}
\DoxyCodeLine{00072\ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \textcolor{keywordtype}{bool}\ is\_test\_ue(\mbox{\hyperlink{namespacesrsran_a511ed22603607d4a784c0f1807648b47}{du\_ue\_index\_t}}\ ue\_idx)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ ue\_idx\ <\ nof\_ues;\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{keywordtype}{bool}\ is\_test\_ue(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ rnti)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00077\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{return}\ (rnti\ >=\ rnti\_start)\ and\ (rnti\ <\ \mbox{\hyperlink{namespacesrsran_a19ba96c7ba2f370f5ffdf9d9cf28e0b0}{to\_rnti}}(\mbox{\hyperlink{namespacesrsran_a7c1de1f75dd2aabbf557bc8713f3da98}{to\_value}}(rnti\_start)\ +\ nof\_ues));}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{keywordtype}{void}\ add\_ue(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ rnti,\ \mbox{\hyperlink{namespacesrsran_a511ed22603607d4a784c0f1807648b47}{du\_ue\_index\_t}}\ ue\_idx\_,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1sched__ue__config__request}{sched\_ue\_config\_request}}\&\ sched\_ue\_cfg\_req\_)}
\DoxyCodeLine{00082\ \ \ \{}
\DoxyCodeLine{00083\ \ \ \ \ rnti\_to\_ue\_info\_lookup[rnti]\ =}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ test\_ue\_info\{.ue\_idx\ =\ ue\_idx\_,\ .sched\_ue\_cfg\_req\ =\ sched\_ue\_cfg\_req\_,\ .msg4\_rx\_flag\ =\ \textcolor{keyword}{false}\};}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \textcolor{keywordtype}{void}\ remove\_ue(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ rnti)}
\DoxyCodeLine{00088\ \ \ \{}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordflow}{if}\ (rnti\_to\_ue\_info\_lookup.count(rnti)\ >\ 0)\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ rnti\_to\_ue\_info\_lookup.erase(rnti);}
\DoxyCodeLine{00091\ \ \ \ \ \}}
\DoxyCodeLine{00092\ \ \ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \mbox{\hyperlink{structsrsran_1_1sched__ue__config__request}{sched\_ue\_config\_request}}\ get\_sched\_ue\_cfg\_request(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ rnti)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00095\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordflow}{return}\ rnti\_to\_ue\_info\_lookup.at(rnti).sched\_ue\_cfg\_req;}
\DoxyCodeLine{00097\ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \textcolor{keywordtype}{bool}\ is\_msg4\_rxed(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ rnti)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00100\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{if}\ (rnti\_to\_ue\_info\_lookup.count(rnti)\ >\ 0)\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rnti\_to\_ue\_info\_lookup.at(rnti).msg4\_rx\_flag;}
\DoxyCodeLine{00103\ \ \ \ \ \}}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00105\ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \textcolor{keywordtype}{void}\ msg4\_rxed(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ rnti,\ \textcolor{keywordtype}{bool}\ msg4\_rx\_flag\_)}
\DoxyCodeLine{00108\ \ \ \{}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordflow}{if}\ (rnti\_to\_ue\_info\_lookup.count(rnti)\ >\ 0)\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ rnti\_to\_ue\_info\_lookup.at(rnti).msg4\_rx\_flag\ =\ msg4\_rx\_flag\_;}
\DoxyCodeLine{00111\ \ \ \ \ \}}
\DoxyCodeLine{00112\ \ \ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00115\ \ \ \textcolor{keyword}{struct\ }test\_ue\_info\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a511ed22603607d4a784c0f1807648b47}{du\_ue\_index\_t}}\ \ \ \ \ \ \ \ \ \ \ ue\_idx;}
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1sched__ue__config__request}{sched\_ue\_config\_request}}\ sched\_ue\_cfg\_req;}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg4\_rx\_flag;}
\DoxyCodeLine{00119\ \ \ \};}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00122\ \ \ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ \ \ rnti\_start;}
\DoxyCodeLine{00123\ \ \ uint16\_t\ nof\_ues;}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00126\ \ \ std::unordered\_map<rnti\_t,\ test\_ue\_info>\ rnti\_to\_ue\_info\_lookup;}
\DoxyCodeLine{00127\ \};}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00130\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrsran_1_1mac__test__mode__cell__adapter}{mac\_test\_mode\_cell\_adapter}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1mac__cell__control__information__handler}{mac\_cell\_control\_information\_handler}},}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier}{mac\_cell\_result\_notifier}},}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1mac__cell__slot__handler}{mac\_cell\_slot\_handler}}}
\DoxyCodeLine{00133\ \{}
\DoxyCodeLine{00134\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00135\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__cell__adapter}{mac\_test\_mode\_cell\_adapter}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__du_1_1du__test__config_1_1test__ue__config}{srs\_du::du\_test\_config::test\_ue\_config}}\&\ test\_ue\_cfg\_,}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1mac__cell__creation__request}{mac\_cell\_creation\_request}}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ cell\_cfg,}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1mac__cell__control__information__handler}{mac\_cell\_control\_information\_handler}}\&\ \ \ \ \ \ \ \ \ adapted\_,}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1mac__pdu__handler}{mac\_pdu\_handler}}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pdu\_handler\_,}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1mac__cell__slot__handler}{mac\_cell\_slot\_handler}}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ slot\_handler\_,}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier}{mac\_cell\_result\_notifier}}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\_notifier\_,}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::function<\textcolor{keywordtype}{void}(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}})>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dl\_bs\_notifier\_,}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1test__ue__info__manager}{test\_ue\_info\_manager}}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ue\_info\_mgr\_);}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__cell__adapter_aa1c58fbf1c517349e00ecd6fb8825e5b}{on\_new\_downlink\_scheduler\_results}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1mac__dl__sched__result}{mac\_dl\_sched\_result}}\&\ dl\_res)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00145\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00146\ \ \ \ \ result\_notifier.\mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier_a455b4a208bbff1b8d0d49c13743b4155}{on\_new\_downlink\_scheduler\_results}}(dl\_res);}
\DoxyCodeLine{00147\ \ \ \}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__cell__adapter_a0a01aedc921bc7a68f5beefcc5e76f29}{on\_new\_downlink\_data}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1mac__dl__data__result}{mac\_dl\_data\_result}}\&\ dl\_data)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00150\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00151\ \ \ \ \ result\_notifier.\mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier_a7529a2aecae2b5d5fe40fcc0a085692a}{on\_new\_downlink\_data}}(dl\_data);}
\DoxyCodeLine{00152\ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \textcolor{comment}{//\ Intercepts\ the\ UL\ results\ coming\ from\ the\ MAC.}}
\DoxyCodeLine{00155\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__cell__adapter_a9594cedc871ddddf8e96d47093c13d56}{on\_new\_uplink\_scheduler\_results}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1mac__ul__sched__result}{mac\_ul\_sched\_result}}\&\ ul\_res)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__cell__adapter_afbc088f2868aff0f69d4f2ddd75353b2}{on\_cell\_results\_completion}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}})\textcolor{keyword}{\ override\ }\{\ result\_notifier.\mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier_aa2aafc4fdfc432b920631112a36e25b7}{on\_cell\_results\_completion}}(\mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}});\ \}}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__cell__adapter_a7ffada545fb6fe7078f42fadd6e3f7a6}{handle\_slot\_indication}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ sl\_tx)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00160\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__cell__adapter_aba8599bce233a71aa757fd1890e14e42}{handle\_error\_indication}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ sl\_tx,\ error\_event\ event)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__cell__adapter_a41ca3a5c149b3235a84da283aa4a02c0}{handle\_crc}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1mac__crc__indication__message}{mac\_crc\_indication\_message}}\&\ msg)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__cell__adapter_a6364a2abaaa12aad993569ecf8f53086}{handle\_uci}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1mac__uci__indication__message}{mac\_uci\_indication\_message}}\&\ msg)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00167\ \ \ \textcolor{keyword}{struct\ }slot\_descision\_history\ \{}
\DoxyCodeLine{00168\ \ \ \ \ std::vector<pucch\_info>\ \ \ \ pucchs;}
\DoxyCodeLine{00169\ \ \ \ \ std::vector<ul\_sched\_info>\ puschs;}
\DoxyCodeLine{00170\ \ \ \};}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \textcolor{keywordtype}{void}\ fill\_csi\_bits(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ rnti,\ bounded\_bitset<uci\_constants::MAX\_NOF\_CSI\_PART1\_OR\_PART2\_BITS>\&\ payload)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00173\ \ \ \textcolor{keywordtype}{void}\ fill\_uci\_pdu(mac\_uci\_pdu::pucch\_f0\_or\_f1\_type\&\ pucch\_ind,\ \textcolor{keyword}{const}\ pucch\_info\&\ pucch)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordtype}{void}\ fill\_uci\_pdu(mac\_uci\_pdu::pucch\_f2\_or\_f3\_or\_f4\_type\&\ pucch\_ind,\ \textcolor{keyword}{const}\ pucch\_info\&\ pucch)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00175\ \ \ \textcolor{keywordtype}{void}\ fill\_uci\_pdu(mac\_uci\_pdu::pusch\_type\&\ pusch\_ind,\ \textcolor{keyword}{const}\ ul\_sched\_info\&\ ul\_grant)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00176\ \ \ \textcolor{keywordtype}{void}\ forward\_uci\_ind\_to\_mac(\textcolor{keyword}{const}\ mac\_uci\_indication\_message\&\ uci\_msg);}
\DoxyCodeLine{00177\ \ \ \textcolor{keywordtype}{void}\ forward\_crc\_ind\_to\_mac(\textcolor{keyword}{const}\ mac\_crc\_indication\_message\&\ crc\_msg);}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \textcolor{keyword}{const}\ srs\_du::du\_test\_config::test\_ue\_config\&\ test\_ue\_cfg;}
\DoxyCodeLine{00180\ \ \ mac\_cell\_control\_information\_handler\&\ \ \ \ \ \ \ \ \ adapted;}
\DoxyCodeLine{00181\ \ \ mac\_pdu\_handler\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pdu\_handler;}
\DoxyCodeLine{00182\ \ \ mac\_cell\_slot\_handler\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ slot\_handler;}
\DoxyCodeLine{00183\ \ \ mac\_cell\_result\_notifier\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\_notifier;}
\DoxyCodeLine{00184\ \ \ std::function<void(\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}})>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dl\_bs\_notifier;}
\DoxyCodeLine{00185\ \ \ \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog::basic\_logger}}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ logger;}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ std::vector<slot\_descision\_history>\ sched\_decision\_history;}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ test\_ue\_info\_manager\&\ ue\_info\_mgr;}
\DoxyCodeLine{00190\ \};}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter}{mac\_test\_mode\_adapter}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1mac__interface}{mac\_interface}},}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1mac__ue__control__information__handler}{mac\_ue\_control\_information\_handler}},}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1mac__ue__configurator}{mac\_ue\_configurator}},}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1mac__cell__manager}{mac\_cell\_manager}}}
\DoxyCodeLine{00196\ \{}
\DoxyCodeLine{00197\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00198\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter}{mac\_test\_mode\_adapter}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__du_1_1du__test__config_1_1test__ue__config}{srs\_du::du\_test\_config::test\_ue\_config}}\&\ test\_ue\_cfg,}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1mac__result__notifier}{mac\_result\_notifier}}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ phy\_notifier\_);}
\DoxyCodeLine{00200\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter}{\string~mac\_test\_mode\_adapter}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \textcolor{keywordtype}{void}\ connect(std::unique\_ptr<mac\_interface>\ mac\_ptr);}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \textcolor{comment}{//\ mac\_cell\_manager}}
\DoxyCodeLine{00205\ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ add\_cell(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1mac__cell__creation__request}{mac\_cell\_creation\_request}}\&\ cell\_cfg)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00206\ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remove\_cell(\mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\_cell\_index\_t}}\ cell\_index)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00207\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__cell__controller}{mac\_cell\_controller}}\&\ get\_cell\_controller(\mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\_cell\_index\_t}}\ cell\_index)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__cell__rach__handler}{mac\_cell\_rach\_handler}}\&\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter_a2821777888aeb6e2775dd9461580feb1}{get\_rach\_handler}}(\mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\_cell\_index\_t}}\ cell\_index)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00210\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordflow}{return}\ mac\_adapted-\/>get\_rach\_handler(cell\_index);}
\DoxyCodeLine{00212\ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__cell__slot__handler}{mac\_cell\_slot\_handler}}\&\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter_a817c7dc25cd311523e854e8dfe0260e6}{get\_slot\_handler}}(\mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\_cell\_index\_t}}\ cell\_index)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00215\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordflow}{return}\ *cell\_info\_handler[cell\_index];}
\DoxyCodeLine{00217\ \ \ \}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__cell__manager}{mac\_cell\_manager}}\&\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter_abc36084f8c333c68aa15b4f55e33ee3b}{get\_cell\_manager}}()\textcolor{keyword}{\ override\ }\{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__ue__control__information__handler}{mac\_ue\_control\_information\_handler}}\&\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter_a54c852c079f9613cb97dfdc8046c45c2}{get\_ue\_control\_info\_handler}}()\textcolor{keyword}{\ override\ }\{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__pdu__handler}{mac\_pdu\_handler}}\&\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter_a6eb3ec60476a49987dd9491a24698ab2}{get\_pdu\_handler}}()\textcolor{keyword}{\ override\ }\{\ \textcolor{keywordflow}{return}\ mac\_adapted-\/>get\_pdu\_handler();\ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__paging__information__handler}{mac\_paging\_information\_handler}}\&\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter_ab1c2c082337ae8e34e753b0aa522e07c}{get\_cell\_paging\_info\_handler}}()\textcolor{keyword}{\ override}}
\DoxyCodeLine{00226\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keywordflow}{return}\ mac\_adapted-\/>get\_cell\_paging\_info\_handler();}
\DoxyCodeLine{00228\ \ \ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__ue__configurator}{mac\_ue\_configurator}}\&\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter_a8fdea534e77222dbcc8bb66bdf931b41}{get\_ue\_configurator}}()\textcolor{keyword}{\ override\ }\{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__cell__control__information__handler}{mac\_cell\_control\_information\_handler}}\&\ \mbox{\hyperlink{classsrsran_1_1mac__test__mode__adapter_ab4a7724503a9003a1da8ed1783fd23c6}{get\_control\_info\_handler}}(\mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\_cell\_index\_t}}\ cell\_index)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \mbox{\hyperlink{classsrsran_1_1mac__result__notifier}{mac\_result\_notifier}}\&\ get\_phy\_notifier()\ \{\ \textcolor{keywordflow}{return}\ *phy\_notifier;\ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00237\ \ \ \textcolor{keywordtype}{void}\ handle\_dl\_buffer\_state\_update(\textcolor{keyword}{const}\ mac\_dl\_buffer\_state\_indication\_message\&\ dl\_bs)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \textcolor{comment}{//\ mac\_ue\_configurator\ interface.}}
\DoxyCodeLine{00240\ \ \ async\_task<mac\_ue\_create\_response>\ handle\_ue\_create\_request(\textcolor{keyword}{const}\ mac\_ue\_create\_request\&\ cfg)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00241\ \ \ async\_task<mac\_ue\_reconfiguration\_response>}
\DoxyCodeLine{00242\ \ \ handle\_ue\_reconfiguration\_request(\textcolor{keyword}{const}\ mac\_ue\_reconfiguration\_request\&\ cfg)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00243\ \ \ async\_task<mac\_ue\_delete\_response>\ handle\_ue\_delete\_request(\textcolor{keyword}{const}\ mac\_ue\_delete\_request\&\ cfg)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00244\ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ handle\_ul\_ccch\_msg(\mbox{\hyperlink{namespacesrsran_a511ed22603607d4a784c0f1807648b47}{du\_ue\_index\_t}}\ ue\_index,\ byte\_buffer\ pdu)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ std::vector<mac\_logical\_channel\_config>\ adapt\_bearers(\textcolor{keyword}{const}\ std::vector<mac\_logical\_channel\_config>\&\ orig\_bearers);}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ srs\_du::du\_test\_config::test\_ue\_config\ test\_ue;}
\DoxyCodeLine{00249\ \ \ std::unique\_ptr<mac\_interface>\ \ \ \ \ \ \ \ \ mac\_adapted;}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ std::unique\_ptr<phy\_test\_mode\_adapter>\ phy\_notifier;}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ std::vector<std::unique\_ptr<mac\_test\_mode\_cell\_adapter>>\ cell\_info\_handler;}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ test\_ue\_info\_manager\ ue\_info\_mgr;}
\DoxyCodeLine{00256\ \};}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \}\ \textcolor{comment}{//\ namespace\ srsran}}

\end{DoxyCode}
