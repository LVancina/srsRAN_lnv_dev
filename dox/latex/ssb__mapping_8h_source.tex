\doxysection{ssb\+\_\+mapping.\+h}
\hypertarget{ssb__mapping_8h_source}{}\label{ssb__mapping_8h_source}\index{include/srsran/ran/ssb\_mapping.h@{include/srsran/ran/ssb\_mapping.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ 2021-\/2024\ Software\ Radio\ Systems\ Limited}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ srsRAN.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ srsRAN\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ it\ under\ the\ terms\ of\ the\ GNU\ Affero\ General\ Public\ License\ as}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ published\ by\ the\ Free\ Software\ Foundation,\ either\ version\ 3\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ the\ License,\ or\ (at\ your\ option)\ any\ later\ version.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ srsRAN\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ GNU\ Affero\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ A\ copy\ of\ the\ GNU\ Affero\ General\ Public\ License\ can\ be\ found\ in}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ the\ LICENSE\ file\ in\ the\ top-\/level\ directory\ of\ this\ distribution}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ and\ at\ http://www.gnu.org/licenses/.}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}band\_helper.h"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}srsran/phy/constants.h"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}srsran/ran/frequency\_range.h"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}srsran/ran/resource\_allocation/rb\_interval.h"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}srsran/ran/slot\_point.h"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}srsran/ran/ssb\_properties.h"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}srsran/ran/subcarrier\_spacing.h"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{math__utils_8h}{srsran/support/math\_utils.h}}"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ <array>}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ <cassert>}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesrsran}{srsran}}\ \{}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_af3ecd82986081a12142b41ea23496694}{ssb\_get\_l\_first}}(\mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3e}{ssb\_pattern\_case}}\ pattern\_case,\ \textcolor{keywordtype}{unsigned}\ ssb\_idx)}
\DoxyCodeLine{00043\ \{}
\DoxyCodeLine{00044\ \ \ \textcolor{comment}{//\ Case\ A\ -\/\ 15\ kHz\ SCS:\ the\ first\ symbols\ of\ the\ candidate\ SS/PBCH\ blocks\ have\ indexes\ of\ \{\ 2\ ,\ 8\ \}\ +\ 14\ ⋅\ n\ .\ For}}
\DoxyCodeLine{00045\ \ \ \textcolor{comment}{//\ carrier\ frequencies\ smaller\ than\ or\ equal\ to\ 3\ GHz,\ n\ =\ 0\ ,\ 1\ .\ For\ carrier\ frequencies\ within\ FR1\ larger\ than\ 3}}
\DoxyCodeLine{00046\ \ \ \textcolor{comment}{//\ GHz,\ n\ =\ 0\ ,\ 1\ ,\ 2\ ,\ 3\ .}}
\DoxyCodeLine{00047\ \ \ \textcolor{keywordflow}{if}\ (pattern\_case\ ==\ \mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3ea7fc56270e7a70fa81a5935b72eacbe29}{ssb\_pattern\_case::A}})\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{constexpr}\ std::array<unsigned,\ 2>\ first\_symbols\ =\ \{2,\ 8\};}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{return}\ first\_symbols[ssb\_idx\ \%\ first\_symbols.size()]\ +\ 14\ *\ (ssb\_idx\ /\ first\_symbols.size());}
\DoxyCodeLine{00050\ \ \ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{comment}{//\ Case\ B\ -\/\ 30\ kHz\ SCS:\ the\ first\ symbols\ of\ the\ candidate\ SS/PBCH\ blocks\ have\ indexes\ \{\ 4\ ,\ 8\ ,\ 16\ ,\ 20\ \}\ +\ 28\ ⋅\ n\ .}}
\DoxyCodeLine{00053\ \ \ \textcolor{comment}{//\ For\ carrier\ frequencies\ smaller\ than\ or\ equal\ to\ 3\ GHz,\ n\ =\ 0\ .\ For\ carrier\ frequencies\ within\ FR1\ larger\ than\ 3}}
\DoxyCodeLine{00054\ \ \ \textcolor{comment}{//\ GHz,\ n\ =\ 0\ ,\ 1\ .}}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{if}\ (pattern\_case\ ==\ \mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3ea9d5ed678fe57bcca610140957afab571}{ssb\_pattern\_case::B}})\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{constexpr}\ std::array<unsigned,\ 4>\ first\_symbols\ =\ \{4,\ 8,\ 16,\ 20\};}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordflow}{return}\ first\_symbols[ssb\_idx\ \%\ first\_symbols.size()]\ +\ 28\ *\ (ssb\_idx\ /\ first\_symbols.size());}
\DoxyCodeLine{00058\ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \textcolor{comment}{//\ Case\ C\ -\/\ 30\ kHz\ SCS:\ the\ first\ symbols\ of\ the\ candidate\ SS/PBCH\ blocks\ have\ indexes\ \{\ 2\ ,\ 8\ \}\ +\ 14\ ⋅\ n\ .}}
\DoxyCodeLine{00061\ \ \ \textcolor{comment}{//\ -\/\ For\ paired\ spectrum\ operation}}
\DoxyCodeLine{00062\ \ \ \textcolor{comment}{//\ For\ carrier\ frequencies\ smaller\ than\ or\ equal\ to\ 3\ GHz,\ n\ =\ 0\ ,\ 1\ .\ For\ carrier\ frequencies\ within\ FR1\ larger}}
\DoxyCodeLine{00063\ \ \ \textcolor{comment}{//\ than\ 3\ GHz,\ n\ =\ 0\ ,\ 1\ ,\ 2\ ,\ 3\ .}}
\DoxyCodeLine{00064\ \ \ \textcolor{comment}{//\ -\/\ For\ unpaired\ spectrum\ operation}}
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ For\ carrier\ frequencies\ smaller\ than\ 1.88\ GHz,\ n\ =\ 0\ ,\ 1\ .\ For\ carrier\ frequencies\ within\ FR1\ equal\ to\ or}}
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{//\ larger\ than\ 1.88\ GHz,\ n\ =\ 0\ ,\ 1\ ,\ 2\ ,\ 3\ .}}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordflow}{if}\ (pattern\_case\ ==\ \mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3ea0d61f8370cad1d412f80b84d143e1257}{ssb\_pattern\_case::C}})\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keyword}{constexpr}\ std::array<unsigned,\ 2>\ first\_symbols\ =\ \{2,\ 8\};}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{return}\ first\_symbols[ssb\_idx\ \%\ first\_symbols.size()]\ +\ 14\ *\ (ssb\_idx\ /\ first\_symbols.size());}
\DoxyCodeLine{00070\ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{//\ Case\ D\ -\/\ 120\ kHz\ SCS:\ the\ first\ symbols\ of\ the\ candidate\ SS/PBCH\ blocks\ have\ indexes\ \{\ 4\ ,\ 8\ ,\ 16\ ,\ 20\ \}\ +\ 28\ ⋅\ n\ .}}
\DoxyCodeLine{00073\ \ \ \textcolor{comment}{//\ For\ carrier\ frequencies\ within\ FR2,\ n\ =\ 0\ ,\ 1\ ,\ 2\ ,\ 3\ ,\ 5\ ,\ 6\ ,\ 7\ ,\ 8\ ,\ 10\ ,\ 11\ ,\ 12\ ,\ 13\ ,\ 15\ ,\ 16\ ,\ 17\ ,\ 18\ .}}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{if}\ (pattern\_case\ ==\ \mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3eaf623e75af30e62bbd73d6df5b50bb7b5}{ssb\_pattern\_case::D}})\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{constexpr}\ std::array<unsigned,\ 4>\ \ first\_symbols\ =\ \{4,\ 8,\ 16,\ 20\};}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{constexpr}\ std::array<unsigned,\ 16>\ n\ \ \ \ \ \ \ \ \ \ \ \ \ =\ \{0,\ 1,\ 2,\ 3,\ 5,\ 6,\ 7,\ 8,\ 10,\ 11,\ 12,\ 13,\ 15,\ 16,\ 17,\ 18\};}
\DoxyCodeLine{00077\ \ \ \ \ srsran\_assert(ssb\_idx\ <\ first\_symbols.size()\ *\ n.size(),\ \textcolor{stringliteral}{"{}SSB\ index\ out\ of\ range."{}});}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{return}\ first\_symbols[ssb\_idx\ \%\ first\_symbols.size()]\ +\ 28\ *\ n[ssb\_idx\ /\ first\_symbols.size()];}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{comment}{//\ Case\ E\ -\/\ 240\ kHz\ SCS:\ the\ first\ symbols\ of\ the\ candidate\ SS/PBCH\ blocks\ have\ indexes}}
\DoxyCodeLine{00082\ \ \ \textcolor{comment}{//\{\ 8\ ,\ 12\ ,\ 16\ ,\ 20\ ,\ 32\ ,\ 36\ ,\ 40\ ,\ 44\ \}\ +\ 56\ ⋅\ n\ .\ For\ carrier\ frequencies\ within\ FR2,\ n\ =\ 0\ ,\ 1\ ,\ 2\ ,\ 3\ ,\ 5\ ,\ 6\ ,}}
\DoxyCodeLine{00083\ \ \ \textcolor{comment}{//\ 7\ ,\ 8\ .}}
\DoxyCodeLine{00084\ \ \ \textcolor{keywordflow}{if}\ (pattern\_case\ ==\ \mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3ea3a3ea00cfc35332cedf6e5e9a32e94da}{ssb\_pattern\_case::E}})\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keyword}{constexpr}\ std::array<unsigned,\ 8>\ \ first\_symbols\ =\ \{8,\ 12,\ 16,\ 20,\ 32,\ 36,\ 40,\ 44\};}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keyword}{constexpr}\ std::array<unsigned,\ 16>\ n\ \ \ \ \ \ \ \ \ \ \ \ \ =\ \{0,\ 1,\ 2,\ 3,\ 5,\ 6,\ 7,\ 8,\ 10,\ 11,\ 12,\ 13,\ 15,\ 16,\ 17,\ 18\};}
\DoxyCodeLine{00087\ \ \ \ \ srsran\_assert(ssb\_idx\ <\ first\_symbols.size()\ *\ n.size(),\ \textcolor{stringliteral}{"{}SSB\ index\ out\ of\ range."{}});}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{return}\ first\_symbols[ssb\_idx\ \%\ first\_symbols.size()]\ +\ 56\ *\ n[ssb\_idx\ /\ first\_symbols.size()];}
\DoxyCodeLine{00089\ \ \ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{//\ Impossible!}}
\DoxyCodeLine{00092\ \ \ srsran\_assert(\textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}Invalid\ SSB\ pattern\ case"{}});}
\DoxyCodeLine{00093\ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00094\ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00116\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a43f6bb66ce6ef238e439f0beaee7002c}{ssb\_get\_k\_first}}(\mbox{\hyperlink{namespacesrsran_afa6be91e79cbb8c64c2a280ddad608b5}{frequency\_range}}\ \ \ \ \ \ \ fr,}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ \ \ \ ssb\_scs,}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ \ \ \ common\_scs,}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1ssb__offset__to__pointA}{ssb\_offset\_to\_pointA}}\ \ offset\_to\_pointA,}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1ssb__subcarrier__offset}{ssb\_subcarrier\_offset}}\ subcarrier\_offset)}
\DoxyCodeLine{00121\ \{}
\DoxyCodeLine{00122\ \ \ \textcolor{comment}{//\ Verify\ the\ SCS\ are\ valid\ for\ the\ frequency\ range.}}
\DoxyCodeLine{00123\ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a7212c4d5ee2440a158520b0bd557c38a}{is\_scs\_valid}}(ssb\_scs,\ fr),}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Unsupported\ combination\ of\ FR\{\}\ and\ SSB\ SCS\ \{\}kHz."{}},}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fr\ ==\ \mbox{\hyperlink{namespacesrsran_afa6be91e79cbb8c64c2a280ddad608b5a34d1cf1496d544eb35e3461a5235f7e9}{frequency\_range::FR1}}\ ?\ 1\ :\ 2,}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}(ssb\_scs));}
\DoxyCodeLine{00127\ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a7212c4d5ee2440a158520b0bd557c38a}{is\_scs\_valid}}(common\_scs,\ fr),}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Unsupported\ combination\ of\ FR\{\}\ and\ \ Common\ SCS\ \{\}kHz."{}},}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fr\ ==\ \mbox{\hyperlink{namespacesrsran_afa6be91e79cbb8c64c2a280ddad608b5a34d1cf1496d544eb35e3461a5235f7e9}{frequency\_range::FR1}}\ ?\ 1\ :\ 2,}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}(common\_scs));}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \textcolor{comment}{//\ Verify\ the\ offset\ to\ Point\ A\ and\ the\ subcarrier\ offset\ are\ valid.}}
\DoxyCodeLine{00133\ \ \ srsran\_assert(offset\_to\_pointA.\mbox{\hyperlink{classsrsran_1_1bounded__integer_a146a3755987bef080dbd04ecdfdb6f39}{valid}}(),}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ offset\ to\ Point\ A\ \{\}\ (max\ \{\})"{}},}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ offset\_to\_pointA.\mbox{\hyperlink{classsrsran_1_1bounded__integer_a538a1728080ec0e1e715583a942435c7}{to\_uint}}(),}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ssb\_offset\_to\_pointA::max());}
\DoxyCodeLine{00137\ \ \ srsran\_assert(subcarrier\_offset.\mbox{\hyperlink{classsrsran_1_1ssb__subcarrier__offset_a4a03a73d183ca782d7633e3d341fd74c}{is\_valid}}(fr),}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ subcarrier\ offset\ \{\}\ for\ FR\{\}\ (max\ \{\})"{}},}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ subcarrier\_offset.\mbox{\hyperlink{classsrsran_1_1bounded__integer_a538a1728080ec0e1e715583a942435c7}{to\_uint}}(),}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fr\ ==\ \mbox{\hyperlink{namespacesrsran_afa6be91e79cbb8c64c2a280ddad608b5a34d1cf1496d544eb35e3461a5235f7e9}{frequency\_range::FR1}}\ ?\ 1\ :\ 2,}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ssb\_subcarrier\_offset::max(fr));}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \textcolor{comment}{//\ Select\ Point\ A\ offset\ SCS\ depending\ on\ the\ frequency\ range\ and\ convert\ SCS\ to\ kHz.}}
\DoxyCodeLine{00144\ \ \ \textcolor{keywordtype}{unsigned}\ pointA\_offset\_scs\_kHz\ =}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}((fr\ ==\ \mbox{\hyperlink{namespacesrsran_afa6be91e79cbb8c64c2a280ddad608b5a34d1cf1496d544eb35e3461a5235f7e9}{frequency\_range::FR1}})\ ?\ subcarrier\_spacing::kHz15\ :\ subcarrier\_spacing::kHz60);}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \textcolor{comment}{//\ Select\ the\ subcarrier\ offset\ SCS\ depending\ on\ the\ frequency\ range\ and\ convert\ it\ to\ kHz.}}
\DoxyCodeLine{00148\ \ \ \textcolor{keywordtype}{unsigned}\ subcarrier\_offset\_scs\_kHz\ =}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}((fr\ ==\ \mbox{\hyperlink{namespacesrsran_afa6be91e79cbb8c64c2a280ddad608b5a34d1cf1496d544eb35e3461a5235f7e9}{frequency\_range::FR1}})\ ?\ subcarrier\_spacing::kHz15\ :\ common\_scs);}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \textcolor{comment}{//\ SS/PBCH\ block\ SCS\ in\ kHz.}}
\DoxyCodeLine{00152\ \ \ \textcolor{keywordtype}{unsigned}\ ssb\_scs\_kHz\ =\ \mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}(ssb\_scs);}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \textcolor{comment}{//\ Calculate\ the\ number\ of\ 15kHz\ subcarriers\ from\ point\ A\ to\ the\ first\ subcarrier\ of\ the\ SS/PBCH\ block.}}
\DoxyCodeLine{00155\ \ \ \textcolor{keywordtype}{unsigned}\ k\_first\_15kHz\ =\ (offset\_to\_pointA.\mbox{\hyperlink{classsrsran_1_1bounded__integer_a538a1728080ec0e1e715583a942435c7}{to\_uint}}()\ *\ NRE\ *\ pointA\_offset\_scs\_kHz\ +}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ subcarrier\_offset.\mbox{\hyperlink{classsrsran_1_1bounded__integer_a538a1728080ec0e1e715583a942435c7}{to\_uint}}()\ *\ subcarrier\_offset\_scs\_kHz)\ /}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 15;}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \textcolor{comment}{//\ Make\ sure\ the\ above\ conversion\ is\ exact\ and\ has\ no\ remainder.}}
\DoxyCodeLine{00160\ \ \ srsran\_assert((k\_first\_15kHz\ *\ 15)\ \%\ ssb\_scs\_kHz\ ==\ 0,}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Unsupported\ combination\ of\ FR\{\},\ SSB\ SCS\ \{\}kHz,\ Common\ SCS\ \{\}kHz,\ offsetToPointA\ \{\}\ and\ "{}}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}ssb-\/SubcarrierOffset\ \{\}."{}},}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fr\ ==\ \mbox{\hyperlink{namespacesrsran_afa6be91e79cbb8c64c2a280ddad608b5a34d1cf1496d544eb35e3461a5235f7e9}{frequency\_range::FR1}}\ ?\ 1\ :\ 2,}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ssb\_scs\_kHz,}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}(common\_scs),}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ offset\_to\_pointA.\mbox{\hyperlink{classsrsran_1_1bounded__integer_a538a1728080ec0e1e715583a942435c7}{to\_uint}}(),}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ subcarrier\_offset.\mbox{\hyperlink{classsrsran_1_1bounded__integer_a538a1728080ec0e1e715583a942435c7}{to\_uint}}());}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \textcolor{comment}{//\ Calculate\ actual\ result.}}
\DoxyCodeLine{00170\ \ \ \textcolor{keywordflow}{return}\ (k\_first\_15kHz\ *\ 15)\ /\ ssb\_scs\_kHz;}
\DoxyCodeLine{00171\ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00174\ \mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3e}{ssb\_pattern\_case}}\ \mbox{\hyperlink{namespacesrsran_aaae2f3752469d0800c1e06a3fd3b9c46}{ssb\_get\_ssb\_pattern}}(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ ssb\_scs,\ \textcolor{keywordtype}{unsigned}\ dl\_arfcn);}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00182\ uint8\_t\ \mbox{\hyperlink{namespacesrsran_a215b4e6138c8014a679643e272ad5d42}{ssb\_get\_L\_max}}(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ ssb\_scs,\ \textcolor{keywordtype}{unsigned}\ dl\_arfcn,\ optional<nr\_band>\ band\ =\ \{\});}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00190\ crb\_interval\ \mbox{\hyperlink{namespacesrsran_a05018072e9a80490ba7792ab0543e908}{get\_ssb\_crbs}}(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ \ \ \ ssb\_scs,}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ \ \ \ scs\_common,}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ssb\_offset\_to\_pointA\ \ offset\_to\_pA,}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ssb\_subcarrier\_offset\ k\_ssb);}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \}\ \textcolor{comment}{//\ namespace\ srsran}}

\end{DoxyCode}
