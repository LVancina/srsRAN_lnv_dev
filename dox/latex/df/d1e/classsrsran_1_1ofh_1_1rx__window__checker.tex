\doxysection{srsran\+::ofh\+::rx\+\_\+window\+\_\+checker Class Reference}
\hypertarget{classsrsran_1_1ofh_1_1rx__window__checker}{}\label{classsrsran_1_1ofh_1_1rx__window__checker}\index{srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}}


Open Fronthaul reception window checker.  




{\ttfamily \#include $<$ofh\+\_\+rx\+\_\+window\+\_\+checker.\+h$>$}



Inheritance diagram for srsran\+::ofh\+::rx\+\_\+window\+\_\+checker\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=250pt]{db/da1/classsrsran_1_1ofh_1_1rx__window__checker__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::ofh\+::rx\+\_\+window\+\_\+checker\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=250pt]{d2/dc9/classsrsran_1_1ofh_1_1rx__window__checker__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ofh_1_1rx__window__checker_af5a8d16be9fcc3845054783fe8e59277}{rx\+\_\+window\+\_\+checker}} (\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\+\_\+}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ofh_1_1du__rx__window__timing__parameters}{du\+\_\+rx\+\_\+window\+\_\+timing\+\_\+parameters}} \&params, std\+::chrono\+::duration$<$ \mbox{\hyperlink{classdouble}{double}}, std\+::nano $>$ symbol\+\_\+duration)
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1rx__window__checker_a5e4db29f7d416d5a71a0521c97d7f41d}{on\+\_\+new\+\_\+symbol}} (\mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point}{slot\+\_\+symbol\+\_\+point}} symbol\+\_\+point) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Notifies a new OTA symbol boundary event. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1rx__window__checker_aa8cf70e279e2e33b27778db0795dec4f}{update\+\_\+rx\+\_\+window\+\_\+statistics}} (\mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point}{slot\+\_\+symbol\+\_\+point}} symbol\+\_\+point)
\begin{DoxyCompactList}\small\item\em Returns true if the given symbol point is within the reception window, otherwise false. \end{DoxyCompactList}\item 
uint64\+\_\+t \mbox{\hyperlink{classsrsran_1_1ofh_1_1rx__window__checker_ac0103c1f6e245cbd579922ae56966e5b}{nof\+\_\+on\+\_\+time\+\_\+messages}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Getters to the number of messages. \end{DoxyCompactList}\item 
uint64\+\_\+t \mbox{\hyperlink{classsrsran_1_1ofh_1_1rx__window__checker_a48f7835e578ead0cc7bd5782d8fadeb5}{nof\+\_\+early\+\_\+messages}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
uint64\+\_\+t \mbox{\hyperlink{classsrsran_1_1ofh_1_1rx__window__checker_a8fc6046396f4f2a393d774321834c9bd}{nof\+\_\+late\+\_\+messages}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Open Fronthaul reception window checker. 

Checks if the given slot and symbol is within the reception window or not. The window checker also collects statistics and prints them every second. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1rx__window__checker_af5a8d16be9fcc3845054783fe8e59277}\label{classsrsran_1_1ofh_1_1rx__window__checker_af5a8d16be9fcc3845054783fe8e59277} 
\index{srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}!rx\_window\_checker@{rx\_window\_checker}}
\index{rx\_window\_checker@{rx\_window\_checker}!srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}}
\doxysubsubsection{\texorpdfstring{rx\_window\_checker()}{rx\_window\_checker()}}
{\footnotesize\ttfamily rx\+\_\+window\+\_\+checker\+::rx\+\_\+window\+\_\+checker (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger\+\_\+,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ofh_1_1du__rx__window__timing__parameters}{du\+\_\+rx\+\_\+window\+\_\+timing\+\_\+parameters}} \&}]{params,  }\item[{std\+::chrono\+::duration$<$ \mbox{\hyperlink{classdouble}{double}}, std\+::nano $>$}]{symbol\+\_\+duration }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00033\ \ \ timing\_parameters(params,\ symbol\_duration),}
\DoxyCodeLine{00034\ \ \ nof\_symbols\_in\_one\_second(std::ceil(std::chrono::seconds(1)\ /\ symbol\_duration)),}
\DoxyCodeLine{00035\ \ \ nof\_symbols(0),}
\DoxyCodeLine{00036\ \ \ statistics(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\_}})}
\DoxyCodeLine{00037\ \{}
\DoxyCodeLine{00038\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1rx__window__checker_a48f7835e578ead0cc7bd5782d8fadeb5}\label{classsrsran_1_1ofh_1_1rx__window__checker_a48f7835e578ead0cc7bd5782d8fadeb5} 
\index{srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}!nof\_early\_messages@{nof\_early\_messages}}
\index{nof\_early\_messages@{nof\_early\_messages}!srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}}
\doxysubsubsection{\texorpdfstring{nof\_early\_messages()}{nof\_early\_messages()}}
{\footnotesize\ttfamily uint64\+\_\+t srsran\+::ofh\+::rx\+\_\+window\+\_\+checker\+::nof\+\_\+early\+\_\+messages (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00097\ \{\ \textcolor{keywordflow}{return}\ statistics.nof\_early\_messages();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1rx__window__checker_a8fc6046396f4f2a393d774321834c9bd}\label{classsrsran_1_1ofh_1_1rx__window__checker_a8fc6046396f4f2a393d774321834c9bd} 
\index{srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}!nof\_late\_messages@{nof\_late\_messages}}
\index{nof\_late\_messages@{nof\_late\_messages}!srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}}
\doxysubsubsection{\texorpdfstring{nof\_late\_messages()}{nof\_late\_messages()}}
{\footnotesize\ttfamily uint64\+\_\+t srsran\+::ofh\+::rx\+\_\+window\+\_\+checker\+::nof\+\_\+late\+\_\+messages (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098\ \{\ \textcolor{keywordflow}{return}\ statistics.nof\_late\_messages();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1rx__window__checker_ac0103c1f6e245cbd579922ae56966e5b}\label{classsrsran_1_1ofh_1_1rx__window__checker_ac0103c1f6e245cbd579922ae56966e5b} 
\index{srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}!nof\_on\_time\_messages@{nof\_on\_time\_messages}}
\index{nof\_on\_time\_messages@{nof\_on\_time\_messages}!srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}}
\doxysubsubsection{\texorpdfstring{nof\_on\_time\_messages()}{nof\_on\_time\_messages()}}
{\footnotesize\ttfamily uint64\+\_\+t srsran\+::ofh\+::rx\+\_\+window\+\_\+checker\+::nof\+\_\+on\+\_\+time\+\_\+messages (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Getters to the number of messages. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00096\ \{\ \textcolor{keywordflow}{return}\ statistics.nof\_on\_time\_messages();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1rx__window__checker_a5e4db29f7d416d5a71a0521c97d7f41d}\label{classsrsran_1_1ofh_1_1rx__window__checker_a5e4db29f7d416d5a71a0521c97d7f41d} 
\index{srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}!on\_new\_symbol@{on\_new\_symbol}}
\index{on\_new\_symbol@{on\_new\_symbol}!srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}}
\doxysubsubsection{\texorpdfstring{on\_new\_symbol()}{on\_new\_symbol()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} rx\+\_\+window\+\_\+checker\+::on\+\_\+new\+\_\+symbol (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point}{slot\+\_\+symbol\+\_\+point}}}]{symbol\+\_\+point }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Notifies a new OTA symbol boundary event. 

Notifies that the beginning of a new OTA symbol has started.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em symbol\+\_\+point} & Current slot and symbol point. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1ofh_1_1ota__symbol__boundary__notifier_a57f7ccf94069e8ec298940203ea825e4}{srsran\+::ofh\+::ota\+\_\+symbol\+\_\+boundary\+\_\+notifier}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00074\ \{}
\DoxyCodeLine{00075\ \ \ \textcolor{comment}{//\ Build\ a\ new\ slot\ symbol\ point\ that\ manages\ that\ the\ SFN\ values\ in\ OFH\ is\ 1\ byte.}}
\DoxyCodeLine{00076\ \ \ \mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point}{slot\_symbol\_point}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ota\_symbol\_point}}\ =\ calculate\_ofh\_slot\_symbol\_point(symbol\_point);}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \textcolor{comment}{//\ Update\ the\ stored\ slot\ symbol\ point\ as\ system\ value.}}
\DoxyCodeLine{00079\ \ \ count\_val.store(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ota\_symbol\_point}}.system\_slot(),\ std::memory\_order\_release);}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{comment}{//\ Print\ the\ statistics.}}
\DoxyCodeLine{00082\ \ \ print\_statistics();}
\DoxyCodeLine{00083\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1rx__window__checker_aa8cf70e279e2e33b27778db0795dec4f}\label{classsrsran_1_1ofh_1_1rx__window__checker_aa8cf70e279e2e33b27778db0795dec4f} 
\index{srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}!update\_rx\_window\_statistics@{update\_rx\_window\_statistics}}
\index{update\_rx\_window\_statistics@{update\_rx\_window\_statistics}!srsran::ofh::rx\_window\_checker@{srsran::ofh::rx\_window\_checker}}
\doxysubsubsection{\texorpdfstring{update\_rx\_window\_statistics()}{update\_rx\_window\_statistics()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} rx\+\_\+window\+\_\+checker\+::update\+\_\+rx\+\_\+window\+\_\+statistics (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point}{slot\+\_\+symbol\+\_\+point}}}]{symbol\+\_\+point }\end{DoxyParamCaption})}



Returns true if the given symbol point is within the reception window, otherwise false. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00086\ \{}
\DoxyCodeLine{00087\ \ \ \textcolor{comment}{//\ Store\ the\ ota\ symbol\ point\ to\ use\ the\ same\ value\ for\ the\ early\ and\ late\ points.}}
\DoxyCodeLine{00088\ \ \ \mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point}{slot\_symbol\_point}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ota\_point}}(}
\DoxyCodeLine{00089\ \ \ \ \ \ \ symbol\_point.\mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point_a43d5408c35c6ac1eb6ba977717a0148b}{get\_numerology}}(),\ count\_val.load(std::memory\_order\_acquire),\ symbol\_point.\mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point_ad5b8b22dc61e2d904266a3ea2f6b2035}{get\_nof\_symbols}}());}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{//\ Calculate\ the\ distance\ between\ the\ 2\ slot\ symbol\ points\ in\ symbols.}}
\DoxyCodeLine{00092\ \ \ \textcolor{keywordtype}{int}\ diff\ =\ calculate\_slot\_symbol\_point\_distance(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ota\_point}},\ symbol\_point);}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \textcolor{comment}{//\ Late\ detected.}}
\DoxyCodeLine{00095\ \ \ \textcolor{keywordflow}{if}\ (diff\ >\ timing\_parameters.sym\_end)\ \{}
\DoxyCodeLine{00096\ \ \ \ \ statistics.increment\_late\_counter();}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00099\ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{//\ Early\ detected.}}
\DoxyCodeLine{00102\ \ \ \textcolor{keywordflow}{if}\ (diff\ <\ timing\_parameters.sym\_start)\ \{}
\DoxyCodeLine{00103\ \ \ \ \ statistics.increment\_early\_counter();}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00106\ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \textcolor{comment}{//\ On\ time\ detected.}}
\DoxyCodeLine{00109\ \ \ statistics.increment\_on\_time\_counter();}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00112\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/ofh/receiver/ofh\+\_\+rx\+\_\+window\+\_\+checker.\+h\item 
lib/ofh/receiver/ofh\+\_\+rx\+\_\+window\+\_\+checker.\+cpp\end{DoxyCompactItemize}
