\doxysection{srsran\+::srs\+\_\+cu\+\_\+cp\+::inter\+\_\+du\+\_\+handover\+\_\+routine Class Reference}
\hypertarget{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine}{}\label{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine}\index{srsran::srs\_cu\_cp::inter\_du\_handover\_routine@{srsran::srs\_cu\_cp::inter\_du\_handover\_routine}}


Handles the handover of a UE between two different DUs. TODO Add seqdiag.  




{\ttfamily \#include $<$inter\+\_\+du\+\_\+handover\+\_\+routine.\+h$>$}



Collaboration diagram for srsran\+::srs\+\_\+cu\+\_\+cp\+::inter\+\_\+du\+\_\+handover\+\_\+routine\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{d5/d13/classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine_aeae0b2417a1df5f86a28ec1a34e32fa3}{inter\+\_\+du\+\_\+handover\+\_\+routine}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1cu__cp__inter__du__handover__request}{cu\+\_\+cp\+\_\+inter\+\_\+du\+\_\+handover\+\_\+request}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{command\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__cu__cp__notifier}{du\+\_\+processor\+\_\+cu\+\_\+cp\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cu\+\_\+cp\+\_\+notifier\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__f1ap__ue__context__notifier}{du\+\_\+processor\+\_\+f1ap\+\_\+ue\+\_\+context\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{target\+\_\+du\+\_\+f1ap\+\_\+ue\+\_\+ctxt\+\_\+notif\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__e1ap__control__notifier}{du\+\_\+processor\+\_\+e1ap\+\_\+control\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e1ap\+\_\+ctrl\+\_\+notif\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__ue__context__notifier}{du\+\_\+processor\+\_\+ue\+\_\+context\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{source\+\_\+du\+\_\+processor\+\_\+notifier\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__ue__context__notifier}{du\+\_\+processor\+\_\+ue\+\_\+context\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{target\+\_\+du\+\_\+processor\+\_\+notifier\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__ue__manager}{du\+\_\+processor\+\_\+ue\+\_\+manager}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\+\_\+manager\+\_\+}}, \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine_a5ebd1a8fa88a62a9db3b140ec79bc2c9}{operator()}} (\mbox{\hyperlink{namespacesrsran_aadfca39572d46ed2a532ab91af40292e}{coro\+\_\+context}}$<$ \mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1cu__cp__inter__du__handover__response}{cu\+\_\+cp\+\_\+inter\+\_\+du\+\_\+handover\+\_\+response}} $>$ $>$ \&ctx)
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine_a7ae9c294df5e797c355270df213db512}{name}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Handles the handover of a UE between two different DUs. TODO Add seqdiag. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine_aeae0b2417a1df5f86a28ec1a34e32fa3}\label{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine_aeae0b2417a1df5f86a28ec1a34e32fa3} 
\index{srsran::srs\_cu\_cp::inter\_du\_handover\_routine@{srsran::srs\_cu\_cp::inter\_du\_handover\_routine}!inter\_du\_handover\_routine@{inter\_du\_handover\_routine}}
\index{inter\_du\_handover\_routine@{inter\_du\_handover\_routine}!srsran::srs\_cu\_cp::inter\_du\_handover\_routine@{srsran::srs\_cu\_cp::inter\_du\_handover\_routine}}
\doxysubsubsection{\texorpdfstring{inter\_du\_handover\_routine()}{inter\_du\_handover\_routine()}}
{\footnotesize\ttfamily inter\+\_\+du\+\_\+handover\+\_\+routine\+::inter\+\_\+du\+\_\+handover\+\_\+routine (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1cu__cp__inter__du__handover__request}{cu\+\_\+cp\+\_\+inter\+\_\+du\+\_\+handover\+\_\+request}} \&}]{command\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__cu__cp__notifier}{du\+\_\+processor\+\_\+cu\+\_\+cp\+\_\+notifier}} \&}]{cu\+\_\+cp\+\_\+notifier\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__f1ap__ue__context__notifier}{du\+\_\+processor\+\_\+f1ap\+\_\+ue\+\_\+context\+\_\+notifier}} \&}]{target\+\_\+du\+\_\+f1ap\+\_\+ue\+\_\+ctxt\+\_\+notif\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__e1ap__control__notifier}{du\+\_\+processor\+\_\+e1ap\+\_\+control\+\_\+notifier}} \&}]{e1ap\+\_\+ctrl\+\_\+notif\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__ue__context__notifier}{du\+\_\+processor\+\_\+ue\+\_\+context\+\_\+notifier}} \&}]{source\+\_\+du\+\_\+processor\+\_\+notifier\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__ue__context__notifier}{du\+\_\+processor\+\_\+ue\+\_\+context\+\_\+notifier}} \&}]{target\+\_\+du\+\_\+processor\+\_\+notifier\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__ue__manager}{du\+\_\+processor\+\_\+ue\+\_\+manager}} \&}]{ue\+\_\+manager\+\_\+,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger\+\_\+ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00069\ \ \ command(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{command\_}}),}
\DoxyCodeLine{00070\ \ \ cu\_cp\_notifier(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cu\_cp\_notifier\_}}),}
\DoxyCodeLine{00071\ \ \ target\_du\_f1ap\_ue\_ctxt\_notifier(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{target\_du\_f1ap\_ue\_ctxt\_notif\_}}),}
\DoxyCodeLine{00072\ \ \ e1ap\_ctrl\_notifier(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e1ap\_ctrl\_notif\_}}),}
\DoxyCodeLine{00073\ \ \ source\_du\_processor\_notifier(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{source\_du\_processor\_notifier\_}}),}
\DoxyCodeLine{00074\ \ \ target\_du\_processor\_notifier(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{target\_du\_processor\_notifier\_}}),}
\DoxyCodeLine{00075\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager}{ue\_manager}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_manager\_}}),}
\DoxyCodeLine{00076\ \ \ logger(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\_}})}
\DoxyCodeLine{00077\ \{}
\DoxyCodeLine{00078\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine_a7ae9c294df5e797c355270df213db512}\label{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine_a7ae9c294df5e797c355270df213db512} 
\index{srsran::srs\_cu\_cp::inter\_du\_handover\_routine@{srsran::srs\_cu\_cp::inter\_du\_handover\_routine}!name@{name}}
\index{name@{name}!srsran::srs\_cu\_cp::inter\_du\_handover\_routine@{srsran::srs\_cu\_cp::inter\_du\_handover\_routine}}
\doxysubsubsection{\texorpdfstring{name()}{name()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*} srsran\+::srs\+\_\+cu\+\_\+cp\+::inter\+\_\+du\+\_\+handover\+\_\+routine\+::name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00049\ \{\ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Inter\ DU\ Handover\ Routine"{}};\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine_a5ebd1a8fa88a62a9db3b140ec79bc2c9}\label{classsrsran_1_1srs__cu__cp_1_1inter__du__handover__routine_a5ebd1a8fa88a62a9db3b140ec79bc2c9} 
\index{srsran::srs\_cu\_cp::inter\_du\_handover\_routine@{srsran::srs\_cu\_cp::inter\_du\_handover\_routine}!operator()@{operator()}}
\index{operator()@{operator()}!srsran::srs\_cu\_cp::inter\_du\_handover\_routine@{srsran::srs\_cu\_cp::inter\_du\_handover\_routine}}
\doxysubsubsection{\texorpdfstring{operator()()}{operator()()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} inter\+\_\+du\+\_\+handover\+\_\+routine\+::operator() (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_aadfca39572d46ed2a532ab91af40292e}{coro\+\_\+context}}$<$ \mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1cu__cp__inter__du__handover__response}{cu\+\_\+cp\+\_\+inter\+\_\+du\+\_\+handover\+\_\+response}} $>$ $>$ \&}]{ctx }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00081\ \{}
\DoxyCodeLine{00082\ \ \ CORO\_BEGIN(ctx);}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \{}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{comment}{//\ Verify\ input.}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordflow}{if}\ (!verify\_ho\_command(command,\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager}{ue\_manager}},\ logger))\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ -\/\ invalid\ input\ parameters"{}},\ command.source\_ue\_index,\ name());}
\DoxyCodeLine{00088\ \ \ \ \ \ \ CORO\_EARLY\_RETURN(response\_msg);}
\DoxyCodeLine{00089\ \ \ \ \ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//\ Retrieve\ source\ UE\ context.}}
\DoxyCodeLine{00092\ \ \ \ \ source\_ue\ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager}{ue\_manager}}.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ae2398ec164174300ad8d7723ce13793c}{find\_du\_ue}}(command.source\_ue\_index);}
\DoxyCodeLine{00093\ \ \ \ \ source\_rrc\_context\ =\ source\_ue-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__ue_ae814179eaf73a5adfc96cd423d946539}{get\_rrc\_ue\_notifier}}().\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__rrc__ue__control__message__notifier_a556ba455309a635dbc650b9ce82555f0}{get\_transfer\_context}}();}
\DoxyCodeLine{00094\ \ \ \ \ next\_config\ \ \ \ \ \ \ \ =\ to\_config\_update(source\_rrc\_context.up\_ctx);}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ logger.debug(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ initialized"{}},\ command.source\_ue\_index,\ name());}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \{}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ Allocate\ UE\ index\ at\ target\ DU}}
\DoxyCodeLine{00101\ \ \ \ \ target\_ue\_context\_setup\_request.ue\_index\ =\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager}{ue\_manager}}.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_a1257d9a11efdab93e0e0cf2e9cc518d6}{add\_ue}}(command.target\_du\_index);}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordflow}{if}\ (target\_ue\_context\_setup\_request.ue\_index\ ==\ ue\_index\_t::invalid)\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ failed\ to\ allocate\ UE\ index\ at\ target\ DU"{}},\ command.source\_ue\_index,\ name());}
\DoxyCodeLine{00104\ \ \ \ \ \ \ CORO\_EARLY\_RETURN(response\_msg);}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{comment}{//\ prepare\ F1AP\ UE\ Context\ Setup\ Command\ and\ call\ F1AP\ notifier\ of\ target\ DU}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordflow}{if}\ (!generate\_ue\_context\_setup\_request(}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ target\_ue\_context\_setup\_request,\ source\_ue-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__ue_afc68d411a513735ed1925d3281410378}{get\_rrc\_ue\_srb\_notifier}}().\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__rrc__ue__srb__control__notifier_af4b44a529a5f6dd6dcf98813c3845ad2}{get\_srbs}}(),\ source\_rrc\_context))\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ failed\ to\ generate\ UeContextSetupRequest"{}},\ command.source\_ue\_index,\ name());}
\DoxyCodeLine{00111\ \ \ \ \ \ \ CORO\_EARLY\_RETURN(response\_msg);}
\DoxyCodeLine{00112\ \ \ \ \ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ CORO\_AWAIT\_VALUE(target\_ue\_context\_setup\_response,}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ target\_du\_f1ap\_ue\_ctxt\_notifier.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__f1ap__ue__context__notifier_a55aeedac8b5b7d79621fcaa0e33dc3ce}{on\_ue\_context\_setup\_request}}(target\_ue\_context\_setup\_request,}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ source\_rrc\_context));}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{comment}{//\ Handle\ UE\ Context\ Setup\ Response}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{if}\ (!handle\_context\_setup\_response(response\_msg,}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bearer\_context\_modification\_request,}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ target\_ue\_context\_setup\_response,}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ next\_config,}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ logger,}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{false}))\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ failed\ to\ create\ UE\ context\ at\ target\ DU"{}},\ command.source\_ue\_index,\ name());}
\DoxyCodeLine{00126\ \ \ \ \ \ \ cu\_cp\_notifier.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__cu__cp__notifier_a2c3db8f6fdcab44a5a9e21980d91e623}{on\_ue\_removal\_required}}(target\_ue\_context\_setup\_request.ue\_index);}
\DoxyCodeLine{00127\ \ \ \ \ \ \ CORO\_EARLY\_RETURN(response\_msg);}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \textcolor{comment}{//\ Target\ UE\ object\ exists\ from\ this\ point\ on.}}
\DoxyCodeLine{00132\ \ \ target\_ue\ =\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager}{ue\_manager}}.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ae2398ec164174300ad8d7723ce13793c}{find\_du\_ue}}(target\_ue\_context\_setup\_response.ue\_index);}
\DoxyCodeLine{00133\ \ \ srsran\_assert(target\_ue\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}Couldn't\ find\ ue=\{\}\ in\ target\ DU"{}},\ target\_ue\_context\_setup\_response.ue\_index);}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \textcolor{comment}{//\ Setup\ SRB1\ and\ initialize\ security\ context\ in\ RRC}}
\DoxyCodeLine{00136\ \ \ \{}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ srb\_id\ :\ source\_rrc\_context.srbs)\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ create\_srb(target\_ue,\ srb\_id);}
\DoxyCodeLine{00139\ \ \ \ \ \}}
\DoxyCodeLine{00140\ \ \ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \textcolor{comment}{//\ Inform\ CU-\/UP\ about\ new\ DL\ tunnels.}}
\DoxyCodeLine{00143\ \ \ \{}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{comment}{//\ \ prepare\ Bearer\ Context\ Release\ Command\ and\ call\ E1AP\ notifier}}
\DoxyCodeLine{00145\ \ \ \ \ bearer\_context\_modification\_request.ue\_index\ =\ command.source\_ue\_index;}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{comment}{//\ call\ E1AP\ procedure\ and\ wait\ for\ BearerContextModificationResponse}}
\DoxyCodeLine{00148\ \ \ \ \ CORO\_AWAIT\_VALUE(bearer\_context\_modification\_response,}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e1ap\_ctrl\_notifier.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__e1ap__control__notifier_a76a7320c1207f5791ec81f4f1c3fffa7}{on\_bearer\_context\_modification\_request}}(bearer\_context\_modification\_request));}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{comment}{//\ Handle\ Bearer\ Context\ Modification\ Response}}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordflow}{if}\ (!handle\_bearer\_context\_modification\_response(}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ response\_msg,\ source\_ue\_context\_mod\_request,\ bearer\_context\_modification\_response,\ next\_config,\ logger))\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ failed\ to\ modify\ bearer\ context\ at\ target\ CU-\/UP"{}},\ command.source\_ue\_index,\ name());}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Remove\ target\ UE\ context\ if\ Bearer\ Context\ Modification\ failed.}}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ ue\_context\_release\_command.ue\_index\ =\ target\_ue\_context\_setup\_response.ue\_index;}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ ue\_context\_release\_command.cause\ \ \ \ =\ cause\_radio\_network\_t::unspecified;}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ CORO\_AWAIT(target\_du\_processor\_notifier.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__ue__context__notifier_a6c385132c7d688cad61e6876608971f1}{handle\_ue\_context\_release\_command}}(ue\_context\_release\_command));}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ removed\ target\ UE\ context"{}},\ command.source\_ue\_index,\ name());}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \ \ CORO\_EARLY\_RETURN(response\_msg);}
\DoxyCodeLine{00168\ \ \ \ \ \}}
\DoxyCodeLine{00169\ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \{}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{comment}{//\ prepare\ RRC\ Reconfiguration\ and\ call\ RRC\ UE\ notifier}}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{comment}{//\ if\ default\ DRB\ is\ being\ setup,\ SRB2\ needs\ to\ be\ setup\ as\ well}}
\DoxyCodeLine{00174\ \ \ \ \ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!fill\_rrc\_reconfig\_args(rrc\_reconfig\_args,}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ target\_ue\_context\_setup\_request.srbs\_to\_be\_setup\_list,}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ next\_config.pdu\_sessions\_to\_setup\_list,}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ target\_ue\_context\_setup\_response.du\_to\_cu\_rrc\_info,}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\}\ \textcolor{comment}{/*\ No\ NAS\ PDUs\ required\ */},}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ target\_ue-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__ue_ae814179eaf73a5adfc96cd423d946539}{get\_rrc\_ue\_notifier}}().\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__rrc__ue__control__message__notifier_a755c20386e0215e023ac94bc028bf42b}{generate\_meas\_config}}(source\_rrc\_context.meas\_cfg),}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{true},\ \textcolor{comment}{/*\ Reestablish\ SRBs\ */}}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{false}\ \textcolor{comment}{/*\ do\ not\ reestablish\ DRBs\ */},}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{true},\ \textcolor{comment}{/*\ Update\ keys\ */}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ logger))\ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ Failed\ to\ fill\ RrcReconfiguration"{}},\ command.source\_ue\_index,\ name());}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ CORO\_EARLY\_RETURN(response\_msg);}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \ \ \}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ target\_ue\ =\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager}{ue\_manager}}.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__manager_ae2398ec164174300ad8d7723ce13793c}{find\_du\_ue}}(target\_ue\_context\_setup\_response.ue\_index);}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{comment}{//\ Trigger\ RRC\ Reconfiguration}}
\DoxyCodeLine{00192\ \ \ \ \ CORO\_AWAIT\_VALUE(reconf\_result,}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{launch\_async<handover\_reconfiguration\_routine>}}(rrc\_reconfig\_args,\ *source\_ue,\ *target\_ue,\ logger));}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{if}\ (!reconf\_result)\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ RRC\ reconfiguration\ failed"{}},\ command.source\_ue\_index,\ name());}
\DoxyCodeLine{00197\ \ \ \ \ \ \ CORO\_EARLY\_RETURN(response\_msg);}
\DoxyCodeLine{00198\ \ \ \ \ \}}
\DoxyCodeLine{00199\ \ \ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \{}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{comment}{//\ Prepare\ update\ for\ UP\ resource\ manager.}}
\DoxyCodeLine{00203\ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1up__config__update__result}{up\_config\_update\_result}}\ result;}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdu\_session\_to\_add}}\ :\ next\_config.pdu\_sessions\_to\_setup\_list)\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ result.pdu\_sessions\_added\_list.push\_back(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdu\_session\_to\_add}}.second);}
\DoxyCodeLine{00206\ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \ \ target\_ue-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__base_a5cc5075e5ceee16461766656640d9dfa}{get\_up\_resource\_manager}}().\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1up__resource__manager_ad586c1d66779923ad4547c7134f3af95}{apply\_config\_update}}(result);}
\DoxyCodeLine{00208\ \ \ \}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \{}
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{comment}{//\ Transfer\ old\ UE\ context\ (NGAP\ and\ E1AP)\ to\ new\ UE\ context\ and\ remove\ old\ UE\ context.}}
\DoxyCodeLine{00212\ \ \ \ \ cu\_cp\_notifier.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__cu__cp__notifier_aa1c4679002f0e5143b861e00fb9ac53a}{on\_handover\_ue\_context\_push}}(command.source\_ue\_index,\ target\_ue-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__base_ad947828312bef90bf2294b1ebf596915}{get\_ue\_index}}());}
\DoxyCodeLine{00213\ \ \ \}}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \textcolor{comment}{//\ Remove\ source\ UE\ context.}}
\DoxyCodeLine{00216\ \ \ \{}
\DoxyCodeLine{00217\ \ \ \ \ ue\_context\_release\_command.ue\_index\ =\ source\_ue-\/>\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__base_ad947828312bef90bf2294b1ebf596915}{get\_ue\_index}}();}
\DoxyCodeLine{00218\ \ \ \ \ ue\_context\_release\_command.cause\ \ \ \ =\ cause\_radio\_network\_t::unspecified;}
\DoxyCodeLine{00219\ \ \ \ \ CORO\_AWAIT(source\_du\_processor\_notifier.\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__ue__context__notifier_a6c385132c7d688cad61e6876608971f1}{handle\_ue\_context\_release\_command}}(ue\_context\_release\_command));}
\DoxyCodeLine{00220\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ removed\ source\ UE\ context"{}},\ ue\_context\_release\_command.ue\_index,\ name());}
\DoxyCodeLine{00221\ \ \ \}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ logger.debug(\textcolor{stringliteral}{"{}ue=\{\}:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\ finalized"{}},\ command.source\_ue\_index,\ name());}
\DoxyCodeLine{00224\ \ \ response\_msg.success\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ CORO\_RETURN(response\_msg);}
\DoxyCodeLine{00227\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/cu\+\_\+cp/routines/mobility/inter\+\_\+du\+\_\+handover\+\_\+routine.\+h\item 
lib/cu\+\_\+cp/routines/mobility/inter\+\_\+du\+\_\+handover\+\_\+routine.\+cpp\end{DoxyCompactItemize}
