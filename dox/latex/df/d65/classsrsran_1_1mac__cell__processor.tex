\doxysection{srsran\+::mac\+\_\+cell\+\_\+processor Class Reference}
\hypertarget{classsrsran_1_1mac__cell__processor}{}\label{classsrsran_1_1mac__cell__processor}\index{srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}}


Inheritance diagram for srsran\+::mac\+\_\+cell\+\_\+processor\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/d32/classsrsran_1_1mac__cell__processor__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::mac\+\_\+cell\+\_\+processor\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/db0/classsrsran_1_1mac__cell__processor__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1mac__cell__processor_a439fe563873dc0b07d335047ce9d68ba}{mac\+\_\+cell\+\_\+processor}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1mac__cell__creation__request}{mac\+\_\+cell\+\_\+creation\+\_\+request}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\+\_\+cfg\+\_\+req}}, \mbox{\hyperlink{classsrsran_1_1mac__scheduler__cell__info__handler}{mac\+\_\+scheduler\+\_\+cell\+\_\+info\+\_\+handler}} \&sched, \mbox{\hyperlink{classsrsran_1_1mac__dl__ue__manager}{mac\+\_\+dl\+\_\+ue\+\_\+manager}} \&ue\+\_\+mng, \mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier}{mac\+\_\+cell\+\_\+result\+\_\+notifier}} \&phy\+\_\+notifier, \mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&cell\+\_\+exec, \mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&slot\+\_\+exec, \mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&err\+\_\+ind\+\_\+exec, \mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&ctrl\+\_\+exec, \mbox{\hyperlink{classsrsran_1_1mac__pcap}{mac\+\_\+pcap}} \&pcap)
\item 
\mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} $>$ \mbox{\hyperlink{classsrsran_1_1mac__cell__processor_a7be137b2bec8a087a10b821cc1d6b899}{start}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Starts configured cell. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} $>$ \mbox{\hyperlink{classsrsran_1_1mac__cell__processor_a932de6bc92cded74d4a97a2478b8d631}{stop}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Stops configured cell. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1mac__cell__processor_a8d3d3976aee75f20521c008287437ab2}{handle\+\_\+slot\+\_\+indication}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} sl\+\_\+tx) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Processing of a new Slot Indication. This operation involves the following sub-\/tasks\+: \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1mac__cell__processor_ad70ecc1f71fee21e111b722103deb954}{handle\+\_\+error\+\_\+indication}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} sl\+\_\+tx, \mbox{\hyperlink{structsrsran_1_1mac__cell__slot__handler_1_1error__event}{error\+\_\+event}} event) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Handles an error indication sent by the lower layers for a given slot. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1mac__cell__processor_a439fe563873dc0b07d335047ce9d68ba}\label{classsrsran_1_1mac__cell__processor_a439fe563873dc0b07d335047ce9d68ba} 
\index{srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}!mac\_cell\_processor@{mac\_cell\_processor}}
\index{mac\_cell\_processor@{mac\_cell\_processor}!srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}}
\doxysubsubsection{\texorpdfstring{mac\_cell\_processor()}{mac\_cell\_processor()}}
{\footnotesize\ttfamily mac\+\_\+cell\+\_\+processor\+::mac\+\_\+cell\+\_\+processor (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1mac__cell__creation__request}{mac\+\_\+cell\+\_\+creation\+\_\+request}} \&}]{cell\+\_\+cfg\+\_\+req,  }\item[{\mbox{\hyperlink{classsrsran_1_1mac__scheduler__cell__info__handler}{mac\+\_\+scheduler\+\_\+cell\+\_\+info\+\_\+handler}} \&}]{sched,  }\item[{\mbox{\hyperlink{classsrsran_1_1mac__dl__ue__manager}{mac\+\_\+dl\+\_\+ue\+\_\+manager}} \&}]{ue\+\_\+mng,  }\item[{\mbox{\hyperlink{classsrsran_1_1mac__cell__result__notifier}{mac\+\_\+cell\+\_\+result\+\_\+notifier}} \&}]{phy\+\_\+notifier,  }\item[{\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&}]{cell\+\_\+exec,  }\item[{\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&}]{slot\+\_\+exec,  }\item[{\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&}]{err\+\_\+ind\+\_\+exec,  }\item[{\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&}]{ctrl\+\_\+exec,  }\item[{\mbox{\hyperlink{classsrsran_1_1mac__pcap}{mac\+\_\+pcap}} \&}]{pcap }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00043\ \ \ logger(srslog::fetch\_basic\_logger(\textcolor{stringliteral}{"{}MAC"{}})),}
\DoxyCodeLine{00044\ \ \ cell\_cfg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\_cfg\_req\_}}),}
\DoxyCodeLine{00045\ \ \ cell\_exec(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\_exec\_}}),}
\DoxyCodeLine{00046\ \ \ slot\_exec(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_exec\_}}),}
\DoxyCodeLine{00047\ \ \ err\_ind\_exec(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{err\_ind\_exec\_}}),}
\DoxyCodeLine{00048\ \ \ ctrl\_exec(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ctrl\_exec\_}}),}
\DoxyCodeLine{00049\ \ \ phy\_cell(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{phy\_notifier\_}}),}
\DoxyCodeLine{00050\ \ \ \textcolor{comment}{//\ The\ PDU\ pool\ has\ to\ be\ large\ enough\ to\ fit\ the\ maximum\ number\ of\ RARs\ and\ Paging\ PDUs\ per\ slot\ for\ all\ possible\ K0}}
\DoxyCodeLine{00051\ \ \ \textcolor{comment}{//\ values.}}
\DoxyCodeLine{00052\ \ \ pdu\_pool(MAX\_DL\_PDU\_LENGTH,}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ MAX\_K0\_DELAY,}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a45b408115d2fba72e768ef375c59da19}{get\_nof\_slots\_per\_subframe}}(cell\_cfg.\mbox{\hyperlink{structsrsran_1_1mac__cell__creation__request_ad1e42912c540594bf89e565978eebb26}{scs\_common}})\ *\ \mbox{\hyperlink{namespacesrsran_a660ccd3cc382442fdadac290341f1524}{NOF\_SFNS}}\ *\ \mbox{\hyperlink{namespacesrsran_afe120c5fa59fc13e75fa47b6161f3ad3}{NOF\_SUBFRAMES\_PER\_FRAME}}),}
\DoxyCodeLine{00055\ \ \ ssb\_helper(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\_cfg\_req\_}}),}
\DoxyCodeLine{00056\ \ \ sib\_assembler(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\_cfg\_req\_}}.bcch\_dl\_sch\_payloads),}
\DoxyCodeLine{00057\ \ \ rar\_assembler(pdu\_pool),}
\DoxyCodeLine{00058\ \ \ dlsch\_assembler(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_mng\_}}),}
\DoxyCodeLine{00059\ \ \ paging\_assembler(pdu\_pool),}
\DoxyCodeLine{00060\ \ \ sched(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sched\_}}),}
\DoxyCodeLine{00061\ \ \ ue\_mng(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_mng\_}}),}
\DoxyCodeLine{00062\ \ \ pcap(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pcap\_}})}
\DoxyCodeLine{00063\ \{}
\DoxyCodeLine{00064\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1mac__cell__processor_ad70ecc1f71fee21e111b722103deb954}\label{classsrsran_1_1mac__cell__processor_ad70ecc1f71fee21e111b722103deb954} 
\index{srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}!handle\_error\_indication@{handle\_error\_indication}}
\index{handle\_error\_indication@{handle\_error\_indication}!srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}}
\doxysubsubsection{\texorpdfstring{handle\_error\_indication()}{handle\_error\_indication()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} mac\+\_\+cell\+\_\+processor\+::handle\+\_\+error\+\_\+indication (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{sl\+\_\+tx,  }\item[{\mbox{\hyperlink{structsrsran_1_1mac__cell__slot__handler_1_1error__event}{error\+\_\+event}}}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Handles an error indication sent by the lower layers for a given slot. 

This indication may occur when the MAC took too long to send its slot result to the lower layers or when the lower layers were not able to process that slot result. 

Implements \mbox{\hyperlink{classsrsran_1_1mac__cell__slot__handler_a81bc4df807a2ffdb8fd3de5d521b74f7}{srsran\+::mac\+\_\+cell\+\_\+slot\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00089\ \{}
\DoxyCodeLine{00090\ \ \ \textcolor{comment}{//\ Change\ execution\ context\ to\ slot\ indication\ executor.}}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ err\_ind\_exec.\mbox{\hyperlink{classsrsran_1_1task__executor_a7ce182401ef2d2b419bfbed5b5e488f7}{execute}}(}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{this},\ sl\_tx,\ event]()\ \{\ sched.handle\_error\_indication(sl\_tx,\ cell\_cfg.cell\_index,\ event);\ \}))\ \{}
\DoxyCodeLine{00093\ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}slot=\{\}:\ Skipped\ error\ indication.\ Cause:\ DL\ task\ queue\ is\ full."{}},\ sl\_tx);}
\DoxyCodeLine{00094\ \ \ \}}
\DoxyCodeLine{00095\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1mac__cell__processor_a8d3d3976aee75f20521c008287437ab2}\label{classsrsran_1_1mac__cell__processor_a8d3d3976aee75f20521c008287437ab2} 
\index{srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}!handle\_slot\_indication@{handle\_slot\_indication}}
\index{handle\_slot\_indication@{handle\_slot\_indication}!srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}}
\doxysubsubsection{\texorpdfstring{handle\_slot\_indication()}{handle\_slot\_indication()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} mac\+\_\+cell\+\_\+processor\+::handle\+\_\+slot\+\_\+indication (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{sl\+\_\+tx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Processing of a new Slot Indication. This operation involves the following sub-\/tasks\+: 


\begin{DoxyItemize}
\item The scheduler generates the scheduling grants for the provided slot and cell.
\item The scheduling grants are passed to the PHY.
\item The MAC DL PDUs are generated and passed to the PHY as well. 
\end{DoxyItemize}

Implements \mbox{\hyperlink{classsrsran_1_1mac__cell__slot__handler_ad1341fb0a9c70072b3ccda82148534da}{srsran\+::mac\+\_\+cell\+\_\+slot\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00077\ \{}
\DoxyCodeLine{00078\ \ \ trace\_point\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_ind\_enqueue\_tp}}\ =\ \mbox{\hyperlink{namespacesrsran_a5a81707cbe1f17f0d69414f9c7acb227}{l2\_tracer}}.now();}
\DoxyCodeLine{00079\ \ \ \textcolor{comment}{//\ Change\ execution\ context\ to\ slot\ indication\ executor.}}
\DoxyCodeLine{00080\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ slot\_exec.\mbox{\hyperlink{classsrsran_1_1task__executor_a7ce182401ef2d2b419bfbed5b5e488f7}{execute}}([\textcolor{keyword}{this},\ sl\_tx,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_ind\_enqueue\_tp}}]()\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ l2\_tracer\ <<\ trace\_event\{\textcolor{stringliteral}{"{}mac\_slot\_ind\_enqueue"{}},\ slot\_ind\_enqueue\_tp\};}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ handle\_slot\_indication\_impl(sl\_tx);}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \}))\ \{}
\DoxyCodeLine{00084\ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}Skipped\ slot\ indication=\{\}.\ Cause:\ DL\ task\ queue\ is\ full."{}},\ sl\_tx);}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1mac__cell__processor_a7be137b2bec8a087a10b821cc1d6b899}\label{classsrsran_1_1mac__cell__processor_a7be137b2bec8a087a10b821cc1d6b899} 
\index{srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}!start@{start}}
\index{start@{start}!srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} $>$ mac\+\_\+cell\+\_\+processor\+::start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Starts configured cell. 



Implements \mbox{\hyperlink{classsrsran_1_1mac__cell__controller}{srsran\+::mac\+\_\+cell\+\_\+controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00067\ \{}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordflow}{return}\ dispatch\_and\_resume\_on(cell\_exec,\ ctrl\_exec,\ [\textcolor{keyword}{this}]()\ \{\ state\ =\ cell\_state::active;\ \});}
\DoxyCodeLine{00069\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1mac__cell__processor_a932de6bc92cded74d4a97a2478b8d631}\label{classsrsran_1_1mac__cell__processor_a932de6bc92cded74d4a97a2478b8d631} 
\index{srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}!stop@{stop}}
\index{stop@{stop}!srsran::mac\_cell\_processor@{srsran::mac\_cell\_processor}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} $>$ mac\+\_\+cell\+\_\+processor\+::stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Stops configured cell. 



Implements \mbox{\hyperlink{classsrsran_1_1mac__cell__controller}{srsran\+::mac\+\_\+cell\+\_\+controller}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00072\ \{}
\DoxyCodeLine{00073\ \ \ \textcolor{keywordflow}{return}\ dispatch\_and\_resume\_on(cell\_exec,\ ctrl\_exec,\ [\textcolor{keyword}{this}]()\ \{\ state\ =\ cell\_state::inactive;\ \});}
\DoxyCodeLine{00074\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/mac/mac\+\_\+dl/mac\+\_\+cell\+\_\+processor.\+h\item 
lib/mac/mac\+\_\+dl/mac\+\_\+cell\+\_\+processor.\+cpp\end{DoxyCompactItemize}
