\doxysection{srsran\+::cell\+\_\+resource\+\_\+allocator Struct Reference}
\hypertarget{structsrsran_1_1cell__resource__allocator}{}\label{structsrsran_1_1cell__resource__allocator}\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}


{\ttfamily \#include $<$resource\+\_\+grid.\+h$>$}



Collaboration diagram for srsran\+::cell\+\_\+resource\+\_\+allocator\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/d6a/structsrsran_1_1cell__resource__allocator__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a880fe84633c3f9be6bc60cc0503b1eb6}{cell\+\_\+resource\+\_\+allocator}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\+\_\+configuration}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cfg\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_aaabf70a4007c1e2983668e0351824d57}{slot\+\_\+indication}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} sl\+\_\+tx)
\begin{DoxyCompactList}\small\item\em Indicate the processing of a new slot in the scheduler. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\+\_\+cell\+\_\+index\+\_\+t}} \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_addc74787adfe7cfbdda0c4950c6d30a5}{cell\+\_\+index}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Cell index of the resource grid. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_aa52169b8647ed214277cbc027f52f4bc}{slot\+\_\+tx}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Last slot indicated to the scheduler. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \& \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22}{operator\mbox{[}$\,$\mbox{]}}} (\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\+\_\+delay}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \& \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a92fa8b333bb59835ce8056df12f4db26}{operator\mbox{[}$\,$\mbox{]}}} (\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\+\_\+delay}})
\item 
\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \& \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a2593ba71d67eca2c4a792104bad7fab5}{operator\mbox{[}$\,$\mbox{]}}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \& \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a976570aaa8994dff6722e42122f90710}{operator\mbox{[}$\,$\mbox{]}}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a434d6098dddce06653de45a28cc00395}{get\+\_\+history}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Access a past slot decision made by the scheduler for the given cell. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}\label{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\+\_\+configuration}} \& {\bfseries cfg}
\begin{DoxyCompactList}\small\item\em Cell configuration. \end{DoxyCompactList}\item 
\Hypertarget{structsrsran_1_1cell__resource__allocator_aed683391a2bae8e68dbdc7e30e4c44d2}\label{structsrsran_1_1cell__resource__allocator_aed683391a2bae8e68dbdc7e30e4c44d2} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classunsigned}{unsigned}} {\bfseries max\+\_\+dl\+\_\+slot\+\_\+alloc\+\_\+delay}
\begin{DoxyCompactList}\small\item\em Maximum number of slots that can be allocated in advance. \end{DoxyCompactList}\item 
\Hypertarget{structsrsran_1_1cell__resource__allocator_abfad8447bf2bf4a4e40e44fa3161f031}\label{structsrsran_1_1cell__resource__allocator_abfad8447bf2bf4a4e40e44fa3161f031} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classunsigned}{unsigned}} {\bfseries max\+\_\+ul\+\_\+slot\+\_\+alloc\+\_\+delay}
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} size\+\_\+t \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a40acefe0eb9a1c554528c93b918b2cfe}{RING\+\_\+\+MAX\+\_\+\+HISTORY\+\_\+\+SIZE}} = 8
\begin{DoxyCompactList}\small\item\em Number of previous slot results to keep in history before they get deleted. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} size\+\_\+t \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_adffdab4241fadee23e242a52bf498e9b}{RING\+\_\+\+ALLOCATOR\+\_\+\+SIZE}}
\begin{DoxyCompactList}\small\item\em Number of slots managed by this container. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Circular Ring of \doxylink{classsrsran_1_1cell__slot__resource__grid}{cell\+\_\+slot\+\_\+resource\+\_\+grid} objects. This class manages the automatic resetting of \doxylink{classsrsran_1_1cell__slot__resource__grid}{cell\+\_\+slot\+\_\+resource\+\_\+grid} objects, once they become old. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{structsrsran_1_1cell__resource__allocator_a880fe84633c3f9be6bc60cc0503b1eb6}\label{structsrsran_1_1cell__resource__allocator_a880fe84633c3f9be6bc60cc0503b1eb6} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!cell\_resource\_allocator@{cell\_resource\_allocator}}
\index{cell\_resource\_allocator@{cell\_resource\_allocator}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{cell\_resource\_allocator()}{cell\_resource\_allocator()}}
{\footnotesize\ttfamily cell\+\_\+resource\+\_\+allocator\+::cell\+\_\+resource\+\_\+allocator (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\+\_\+configuration}} \&}]{cfg\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00282\ \ \ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cfg\_}}),}
\DoxyCodeLine{00283\ \ \ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_aed683391a2bae8e68dbdc7e30e4c44d2}{max\_dl\_slot\_alloc\_delay}}(\mbox{\hyperlink{namespacesrsran_ac83603de1e14db5c764c24bcfb2f5337}{SCHEDULER\_MAX\_K0}}),}
\DoxyCodeLine{00284\ \ \ max\_ul\_slot\_alloc\_delay(\mbox{\hyperlink{namespacesrsran_ac83603de1e14db5c764c24bcfb2f5337}{SCHEDULER\_MAX\_K0}}\ +\ std::max(\mbox{\hyperlink{namespacesrsran_a81a833c51571a69a53d4648e56b5702c}{SCHEDULER\_MAX\_K1}},\ \mbox{\hyperlink{namespacesrsran_ac80b8be5581653f0d3058e1027b7698b}{SCHEDULER\_MAX\_K2}}\ +\ \mbox{\hyperlink{namespacesrsran_a301eaa955cee78e4b30ff1cc82c684c4}{MAX\_MSG3\_DELTA}})\ +}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}}.ntn\_cs\_koffset)}
\DoxyCodeLine{00286\ \{}
\DoxyCodeLine{00287\ \ \ \textcolor{comment}{//\ Create\ cell\_slot\_resource\_allocator\ objects.}}
\DoxyCodeLine{00288\ \ \ std::vector<scs\_specific\_carrier>\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_scs\_carriers}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_scs\_carriers}};}
\DoxyCodeLine{00289\ \ \ \mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_scs}}\ =\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}}.dl\_cfg\_common.freq\_info\_dl.\mbox{\hyperlink{structsrsran_1_1frequency__info__dl_a4c044c1b75277d8b9a5057e8b17bfa62}{scs\_carrier\_list}}.back().scs;}
\DoxyCodeLine{00290\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_scs}}\ =\ std::max(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_scs}},\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}}.ul\_cfg\_common.freq\_info\_ul.\mbox{\hyperlink{structsrsran_1_1frequency__info__ul_a6a89f9d6dee82748895ab998d06c47b8}{scs\_carrier\_list}}.back().scs);}
\DoxyCodeLine{00291\ \ \ slots.resize(\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_adffdab4241fadee23e242a52bf498e9b}{RING\_ALLOCATOR\_SIZE}});}
\DoxyCodeLine{00292\ \ \ \textcolor{keywordtype}{unsigned}\ nof\_slots\_per\_subframe\ =\ \mbox{\hyperlink{namespacesrsran_a45b408115d2fba72e768ef375c59da19}{get\_nof\_slots\_per\_subframe}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_scs}});}
\DoxyCodeLine{00293\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ slots.size();\ ++i)\ \{}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ carrier\ :\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}}.dl\_cfg\_common.freq\_info\_dl.scs\_carrier\_list)\ \{}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{current\_slot\_dur}}\ =\ nof\_slots\_per\_subframe\ /\ \mbox{\hyperlink{namespacesrsran_a45b408115d2fba72e768ef375c59da19}{get\_nof\_slots\_per\_subframe}}(carrier.scs);}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ \%\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{current\_slot\_dur}}\ ==\ 0)\ \{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_scs\_carriers}}.emplace\_back(carrier);}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00299\ \ \ \ \ \}}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ carrier\ :\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}}.ul\_cfg\_common.freq\_info\_ul.scs\_carrier\_list)\ \{}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{current\_slot\_dur}}\ =\ nof\_slots\_per\_subframe\ /\ \mbox{\hyperlink{namespacesrsran_a45b408115d2fba72e768ef375c59da19}{get\_nof\_slots\_per\_subframe}}(carrier.scs);}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ \%\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{current\_slot\_dur}}\ ==\ 0)\ \{}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_scs\_carriers}}.emplace\_back(carrier);}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00305\ \ \ \ \ \}}
\DoxyCodeLine{00306\ \ \ \ \ slots[i]\ =\ std::make\_unique<cell\_slot\_resource\_allocator>(\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_scs\_carriers}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_scs\_carriers}});}
\DoxyCodeLine{00307\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dl\_scs\_carriers}}.clear();}
\DoxyCodeLine{00308\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_scs\_carriers}}.clear();}
\DoxyCodeLine{00309\ \ \ \}}
\DoxyCodeLine{00310\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{structsrsran_1_1cell__resource__allocator_addc74787adfe7cfbdda0c4950c6d30a5}\label{structsrsran_1_1cell__resource__allocator_addc74787adfe7cfbdda0c4950c6d30a5} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!cell\_index@{cell\_index}}
\index{cell\_index@{cell\_index}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{cell\_index()}{cell\_index()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\+\_\+cell\+\_\+index\+\_\+t}} srsran\+::cell\+\_\+resource\+\_\+allocator\+::cell\+\_\+index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Cell index of the resource grid. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00270\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}}.cell\_index;\ \}}

\end{DoxyCode}
\Hypertarget{structsrsran_1_1cell__resource__allocator_a434d6098dddce06653de45a28cc00395}\label{structsrsran_1_1cell__resource__allocator_a434d6098dddce06653de45a28cc00395} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!get\_history@{get\_history}}
\index{get\_history@{get\_history}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{get\_history()}{get\_history()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \texorpdfstring{$\ast$}{*} srsran\+::cell\+\_\+resource\+\_\+allocator\+::get\+\_\+history (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{slot }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Access a past slot decision made by the scheduler for the given cell. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00305\ \ \ \{}
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keywordtype}{int}\ diff\ =\ last\_slot\_ind\ -\/\ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}};}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{diff\ <\ 0\ or\ diff\ >}}=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a40acefe0eb9a1c554528c93b918b2cfe}{RING\_MAX\_HISTORY\_SIZE}}))\ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00309\ \ \ \ \ \}}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{keyword}{const}\ cell\_slot\_resource\_allocator\&\ r\ =\ *slots[\mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}}.to\_uint()\ \%\ slots.size()];}
\DoxyCodeLine{00311\ \ \ \ \ srsran\_assert(r.slot\ ==\ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}},\ \textcolor{stringliteral}{"{}Bad\ access\ to\ uninitialized\ cell\_resource\_grid"{}});}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordflow}{return}\ \&r;}
\DoxyCodeLine{00313\ \ \ \}}

\end{DoxyCode}
\Hypertarget{structsrsran_1_1cell__resource__allocator_a2593ba71d67eca2c4a792104bad7fab5}\label{structsrsran_1_1cell__resource__allocator_a2593ba71d67eca2c4a792104bad7fab5} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!operator\mbox{[}\mbox{]}@{operator[]}}
\index{operator\mbox{[}\mbox{]}@{operator[]}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{operator[]()}{operator[]()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \& srsran\+::cell\+\_\+resource\+\_\+allocator\+::operator\mbox{[}$\,$\mbox{]} (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{slot }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00297\ \{\ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22}{operator[]}}(\mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}}\ -\/\ last\_slot\_ind);\ \}}

\end{DoxyCode}
\Hypertarget{structsrsran_1_1cell__resource__allocator_a976570aaa8994dff6722e42122f90710}\label{structsrsran_1_1cell__resource__allocator_a976570aaa8994dff6722e42122f90710} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!operator\mbox{[}\mbox{]}@{operator[]}}
\index{operator\mbox{[}\mbox{]}@{operator[]}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{operator[]()}{operator[]()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \& srsran\+::cell\+\_\+resource\+\_\+allocator\+::operator\mbox{[}$\,$\mbox{]} (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{slot }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00299\ \ \ \{}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22}{operator[]}}(\mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}}\ -\/\ last\_slot\_ind);}
\DoxyCodeLine{00301\ \ \ \}}

\end{DoxyCode}
\Hypertarget{structsrsran_1_1cell__resource__allocator_a92fa8b333bb59835ce8056df12f4db26}\label{structsrsran_1_1cell__resource__allocator_a92fa8b333bb59835ce8056df12f4db26} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!operator\mbox{[}\mbox{]}@{operator[]}}
\index{operator\mbox{[}\mbox{]}@{operator[]}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{operator[]()}{operator[]()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \& srsran\+::cell\+\_\+resource\+\_\+allocator\+::operator\mbox{[}$\,$\mbox{]} (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{slot\+\_\+delay }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00289\ \ \ \{}
\DoxyCodeLine{00290\ \ \ \ \ assert\_valid\_sl(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_delay}});}
\DoxyCodeLine{00291\ \ \ \ \ slot\_point\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sl\_tx\ =\ last\_slot\_ind\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_delay}};}
\DoxyCodeLine{00292\ \ \ \ \ cell\_slot\_resource\_allocator\&\ r\ \ \ \ \ =\ *slots[sl\_tx.to\_uint()\ \%\ slots.size()];}
\DoxyCodeLine{00293\ \ \ \ \ srsran\_assert(r.slot\ ==\ sl\_tx,\ \textcolor{stringliteral}{"{}Bad\ access\ to\ uninitialized\ cell\_resource\_grid"{}});}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{00295\ \ \ \}}

\end{DoxyCode}
\Hypertarget{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22}\label{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!operator\mbox{[}\mbox{]}@{operator[]}}
\index{operator\mbox{[}\mbox{]}@{operator[]}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{operator[]()}{operator[]()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \& srsran\+::cell\+\_\+resource\+\_\+allocator\+::operator\mbox{[}$\,$\mbox{]} (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{slot\+\_\+delay }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Access resource allocator for a given \{slot, cell\}. The accessed slot corresponds to the latest slot indication provided to the cell\+\_\+resource\+\_\+grid\+\_\+manager + slot\+\_\+delay provided as argument. Given that slot\+\_\+delay is unsigned, this class can only access the present and future slots. 
\begin{DoxyParams}{Parameters}
{\em slot\+\_\+delay} & delay in slots added to the last slot indication value. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the cell resource grid corresponding to the accessed slot. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00281\ \ \ \{}
\DoxyCodeLine{00282\ \ \ \ \ assert\_valid\_sl(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_delay}});}
\DoxyCodeLine{00283\ \ \ \ \ slot\_point\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sl\_tx\ =\ last\_slot\_ind\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_delay}};}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keyword}{const}\ cell\_slot\_resource\_allocator\&\ r\ \ \ \ \ =\ *slots[sl\_tx.to\_uint()\ \%\ slots.size()];}
\DoxyCodeLine{00285\ \ \ \ \ srsran\_assert(r.slot\ ==\ sl\_tx,\ \textcolor{stringliteral}{"{}Bad\ access\ to\ uninitialized\ cell\_resource\_grid"{}});}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{00287\ \ \ \}}

\end{DoxyCode}
\Hypertarget{structsrsran_1_1cell__resource__allocator_aaabf70a4007c1e2983668e0351824d57}\label{structsrsran_1_1cell__resource__allocator_aaabf70a4007c1e2983668e0351824d57} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!slot\_indication@{slot\_indication}}
\index{slot\_indication@{slot\_indication}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{slot\_indication()}{slot\_indication()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} cell\+\_\+resource\+\_\+allocator\+::slot\+\_\+indication (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{sl\+\_\+tx }\end{DoxyParamCaption})}



Indicate the processing of a new slot in the scheduler. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00313\ \{}
\DoxyCodeLine{00314\ \ \ srsran\_sanity\_check(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ last\_slot\_ind.\mbox{\hyperlink{classsrsran_1_1slot__point_a988d40945efc785f48725c857852c922}{valid}}()\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}\ last\_slot\_ind\ +\ 1\ ==\ sl\_tx,\ \textcolor{stringliteral}{"{}Slot\ indication\ was\ skipped"{}});}
\DoxyCodeLine{00315\ \ \ srsran\_sanity\_check(sl\_tx.\mbox{\hyperlink{classsrsran_1_1slot__point_a6f661d08d0210402eeb539bddbb7a8d0}{numerology}}()\ ==\ \mbox{\hyperlink{namespacesrsran_a226e52de355262a1ad4e998b4cedefd7}{to\_numerology\_value}}(get\_max\_scs(\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}}.dl\_cfg\_common)),}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ slot\ numerology"{}});}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler_8h_a1bdfef20c1237666a841b5c9b9c8e69b}{SRSRAN\_UNLIKELY}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ last\_slot\_ind.\mbox{\hyperlink{classsrsran_1_1slot__point_a988d40945efc785f48725c857852c922}{valid}}()))\ \{}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{comment}{//\ First\ call\ to\ slot\_indication.\ Set\ slot\ of\ all\ slot\ cell\ resource\ grids.}}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ slots.size();\ ++i)\ \{}
\DoxyCodeLine{00321\ \ \ \ \ \ \ slots[(sl\_tx\ +\ i).to\_uint()\ \%\ slots.size()]-\/>slot\_indication(sl\_tx\ +\ i);}
\DoxyCodeLine{00322\ \ \ \ \ \}}
\DoxyCodeLine{00323\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{comment}{//\ Reset\ old\ slot\ state\ and\ set\ its\ new\ future\ slot.}}
\DoxyCodeLine{00325\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_to\_reset}}\ =\ sl\_tx\ -\/\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a40acefe0eb9a1c554528c93b918b2cfe}{RING\_MAX\_HISTORY\_SIZE}});}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keyword}{auto}\&\ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{old\_slot\_res}}\ \ =\ slots[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_to\_reset}}.to\_uint()\ \%\ slots.size()];}
\DoxyCodeLine{00327\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{old\_slot\_res}}-\/>slot\_indication(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{slot\_to\_reset}}\ +\ slots.size());}
\DoxyCodeLine{00328\ \ \ \}}
\DoxyCodeLine{00329\ \ \ last\_slot\_ind\ =\ sl\_tx;}
\DoxyCodeLine{00330\ \}}

\end{DoxyCode}
\Hypertarget{structsrsran_1_1cell__resource__allocator_aa52169b8647ed214277cbc027f52f4bc}\label{structsrsran_1_1cell__resource__allocator_aa52169b8647ed214277cbc027f52f4bc} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!slot\_tx@{slot\_tx}}
\index{slot\_tx@{slot\_tx}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{slot\_tx()}{slot\_tx()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} srsran\+::cell\+\_\+resource\+\_\+allocator\+::slot\+\_\+tx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Last slot indicated to the scheduler. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00273\ \{\ \textcolor{keywordflow}{return}\ last\_slot\_ind;\ \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\Hypertarget{structsrsran_1_1cell__resource__allocator_adffdab4241fadee23e242a52bf498e9b}\label{structsrsran_1_1cell__resource__allocator_adffdab4241fadee23e242a52bf498e9b} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!RING\_ALLOCATOR\_SIZE@{RING\_ALLOCATOR\_SIZE}}
\index{RING\_ALLOCATOR\_SIZE@{RING\_ALLOCATOR\_SIZE}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{RING\_ALLOCATOR\_SIZE}{RING\_ALLOCATOR\_SIZE}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} size\+\_\+t srsran\+::cell\+\_\+resource\+\_\+allocator\+::\+RING\+\_\+\+ALLOCATOR\+\_\+\+SIZE\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a323833d342c4c58e3aabad5c5af05b08}{get\_allocator\_ring\_size\_gt\_min}}(\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a40acefe0eb9a1c554528c93b918b2cfe}{RING\_MAX\_HISTORY\_SIZE}}\ +\ \mbox{\hyperlink{namespacesrsran_ac83603de1e14db5c764c24bcfb2f5337}{SCHEDULER\_MAX\_K0}}\ +\ \mbox{\hyperlink{namespacesrsran_ab89d255a54f2f19864708c171ae14610}{NTN\_CELL\_SPECIFIC\_KOFFSET\_MAX}}\ +}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::max(\mbox{\hyperlink{namespacesrsran_a81a833c51571a69a53d4648e56b5702c}{SCHEDULER\_MAX\_K1}},\ \mbox{\hyperlink{namespacesrsran_ac80b8be5581653f0d3058e1027b7698b}{SCHEDULER\_MAX\_K2}}\ +\ \mbox{\hyperlink{namespacesrsran_a301eaa955cee78e4b30ff1cc82c684c4}{MAX\_MSG3\_DELTA}}))}

\end{DoxyCode}


Number of slots managed by this container. 

\Hypertarget{structsrsran_1_1cell__resource__allocator_a40acefe0eb9a1c554528c93b918b2cfe}\label{structsrsran_1_1cell__resource__allocator_a40acefe0eb9a1c554528c93b918b2cfe} 
\index{srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}!RING\_MAX\_HISTORY\_SIZE@{RING\_MAX\_HISTORY\_SIZE}}
\index{RING\_MAX\_HISTORY\_SIZE@{RING\_MAX\_HISTORY\_SIZE}!srsran::cell\_resource\_allocator@{srsran::cell\_resource\_allocator}}
\doxysubsubsection{\texorpdfstring{RING\_MAX\_HISTORY\_SIZE}{RING\_MAX\_HISTORY\_SIZE}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} size\+\_\+t srsran\+::cell\+\_\+resource\+\_\+allocator\+::\+RING\+\_\+\+MAX\+\_\+\+HISTORY\+\_\+\+SIZE = 8\hspace{0.3cm}{\ttfamily [static]}}



Number of previous slot results to keep in history before they get deleted. 

Having access to past decisions is useful during the handling of error indications. 

The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/cell/resource\+\_\+grid.\+h\item 
lib/scheduler/cell/resource\+\_\+grid.\+cpp\end{DoxyCompactItemize}
