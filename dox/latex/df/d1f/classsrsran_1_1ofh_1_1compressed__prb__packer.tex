\doxysection{srsran\+::ofh\+::compressed\+\_\+prb\+\_\+packer Class Reference}
\hypertarget{classsrsran_1_1ofh_1_1compressed__prb__packer}{}\label{classsrsran_1_1ofh_1_1compressed__prb__packer}\index{srsran::ofh::compressed\_prb\_packer@{srsran::ofh::compressed\_prb\_packer}}


Provides methods to pack compressed IQ samples into the underlying {\ttfamily \doxylink{classsrsran_1_1ofh_1_1compressed__prb}{compressed\+\_\+prb}} object.  




{\ttfamily \#include $<$compressed\+\_\+prb\+\_\+packer.\+h$>$}



Collaboration diagram for srsran\+::ofh\+::compressed\+\_\+prb\+\_\+packer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=227pt]{d9/d97/classsrsran_1_1ofh_1_1compressed__prb__packer__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ofh_1_1compressed__prb__packer_a9e5b26a5e546c4ae7b295fb96bcee6fc}{compressed\+\_\+prb\+\_\+packer}} (\mbox{\hyperlink{classsrsran_1_1ofh_1_1compressed__prb}{compressed\+\_\+prb}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prb\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1compressed__prb__packer_a7cdee30198125a0834b146477903027f}{pack}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} int16\+\_\+t $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{compressed\+\_\+iq}}, \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iq\+\_\+width}})
\begin{DoxyCompactList}\small\item\em Packs the given IQ samples into the underlying object. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Provides methods to pack compressed IQ samples into the underlying {\ttfamily \doxylink{classsrsran_1_1ofh_1_1compressed__prb}{compressed\+\_\+prb}} object. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1compressed__prb__packer_a9e5b26a5e546c4ae7b295fb96bcee6fc}\label{classsrsran_1_1ofh_1_1compressed__prb__packer_a9e5b26a5e546c4ae7b295fb96bcee6fc} 
\index{srsran::ofh::compressed\_prb\_packer@{srsran::ofh::compressed\_prb\_packer}!compressed\_prb\_packer@{compressed\_prb\_packer}}
\index{compressed\_prb\_packer@{compressed\_prb\_packer}!srsran::ofh::compressed\_prb\_packer@{srsran::ofh::compressed\_prb\_packer}}
\doxysubsubsection{\texorpdfstring{compressed\_prb\_packer()}{compressed\_prb\_packer()}}
{\footnotesize\ttfamily srsran\+::ofh\+::compressed\+\_\+prb\+\_\+packer\+::compressed\+\_\+prb\+\_\+packer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1ofh_1_1compressed__prb}{compressed\+\_\+prb}} \&}]{prb\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00037\ :\ prb(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prb\_}})\ \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1compressed__prb__packer_a7cdee30198125a0834b146477903027f}\label{classsrsran_1_1ofh_1_1compressed__prb__packer_a7cdee30198125a0834b146477903027f} 
\index{srsran::ofh::compressed\_prb\_packer@{srsran::ofh::compressed\_prb\_packer}!pack@{pack}}
\index{pack@{pack}!srsran::ofh::compressed\_prb\_packer@{srsran::ofh::compressed\_prb\_packer}}
\doxysubsubsection{\texorpdfstring{pack()}{pack()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} compressed\+\_\+prb\+\_\+packer\+::pack (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} int16\+\_\+t $>$}]{compressed\+\_\+iq,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{iq\+\_\+width }\end{DoxyParamCaption})}



Packs the given IQ samples into the underlying object. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{compressed\_iq}}.size()\ ==\ \mbox{\hyperlink{namespacesrsran_a1d73f866251b700d7747204655a84500}{NOF\_SUBCARRIERS\_PER\_RB}}\ *\ 2,\ \textcolor{stringliteral}{"{}Compressed\ data\ must\ contain\ 12\ IQ\ samples"{}});}
\DoxyCodeLine{00032\ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iq\_width}}\ <=\ MAX\_IQ\_WIDTH,\ \textcolor{stringliteral}{"{}Requested\ width\ can\ not\ exceed\ 16"{}});}
\DoxyCodeLine{00033\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NUM\_BITS\_IN\_BYTE}}\ =\ \mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units::bytes}}(1).\mbox{\hyperlink{classsrsran_1_1units_1_1bytes_a3633d6a80fc41a40f08be27a32e04acf}{to\_bits}}().\mbox{\hyperlink{classsrsran_1_1strong__type_a1a71ac48ba41b4a070b32e296c177db0}{value}}();}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\_buffer}}\ =\ prb.\mbox{\hyperlink{classsrsran_1_1ofh_1_1compressed__prb_a98721bc334866e40ca98b4b077ad59aa}{get\_bit\_buffer}}();}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \textcolor{keywordtype}{unsigned}\ start\_pos\ =\ 0;}
\DoxyCodeLine{00038\ \ \ \textcolor{keywordflow}{for}\ (int16\_t\ sample\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{compressed\_iq}})\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{left\_to\_pack}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iq\_width}};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{left\_to\_pack}}\ !=\ 0)\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbits}}\ \ =\ std::min(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NUM\_BITS\_IN\_BYTE}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{left\_to\_pack}});}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \mbox{\hyperlink{classuint8__t}{uint8\_t}}\ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{masked}}\ =\ sample;}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{left\_to\_pack}}\ >\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NUM\_BITS\_IN\_BYTE}})\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{masked}}\ =\ sample\ >>\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{left\_to\_pack}}\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NUM\_BITS\_IN\_BYTE}});}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ sample\ \&=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mask\_lsb\_ones<uint16\_t>}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{left\_to\_pack}}\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NUM\_BITS\_IN\_BYTE}});}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\_buffer}}.\mbox{\hyperlink{classsrsran_1_1bit__buffer_a6a4cc3c118ab69642f23eaed6aa6868c}{insert}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{masked}},\ start\_pos,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbits}});}
\DoxyCodeLine{00049\ \ \ \ \ \ \ start\_pos\ +=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbits}};}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{left\_to\_pack}}\ -\/=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbits}};}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \textcolor{comment}{//\ Clear\ tail\ bits\ of\ the\ last\ used\ byte.}}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{if}\ (start\_pos\ \%\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NUM\_BITS\_IN\_BYTE}})\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbits}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NUM\_BITS\_IN\_BYTE}}\ -\/\ start\_pos\ \%\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NUM\_BITS\_IN\_BYTE}};}
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\_buffer}}.\mbox{\hyperlink{classsrsran_1_1bit__buffer_a6a4cc3c118ab69642f23eaed6aa6868c}{insert}}(\mbox{\hyperlink{classuint8__t}{uint8\_t}}(0),\ start\_pos,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbits}});}
\DoxyCodeLine{00058\ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ prb.\mbox{\hyperlink{classsrsran_1_1ofh_1_1compressed__prb_acfc4752479cdc30c02a73724cf8d239d}{set\_stored\_size}}((\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{compressed\_iq}}.size()\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iq\_width}}\ /\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NUM\_BITS\_IN\_BYTE}})\ +}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{compressed\_iq}}.size()\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{iq\_width}}\ \%\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{NUM\_BITS\_IN\_BYTE}})\ ?\ 1U\ :\ 0));}
\DoxyCodeLine{00062\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/ofh/compression/compressed\+\_\+prb\+\_\+packer.\+h\item 
lib/ofh/compression/compressed\+\_\+prb\+\_\+packer.\+cpp\end{DoxyCompactItemize}
