\chapter{README}
\hypertarget{md_docker_2open5gs_2README}{}\label{md_docker_2open5gs_2README}\index{README@{README}}
This is a all-\/in-\/one Docker container for Open5\+GS. At build, the container will use the specified version of the open5gs repository (default v2.\+6.\+1 ). To run the latest tag of the open5gs repository (\href{https://github.com/open5gs/open5gs/tags}{\texttt{ https\+://github.\+com/open5gs/open5gs/tags}}), line 51 and 52 in .Dockerfile 
\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ get\ latest\ open5gs\ tag\ (must\ be\ stored\ in\ a\ file,\ because\ docker\ does\ not\ allow\ to\ use\ the\ return\ value\ directly)}
\DoxyCodeLine{\#\ RUN\ git\ ls-\/remote\ -\/-\/tags\ https://github.com/open5gs/open5gs\ |\ sort\ -\/t\ '/'\ -\/k\ 3\ -\/V\ |\ awk\ -\/F/\ '\{\ print\ \$3\ \}'\ |\ awk\ '!/\(\backslash\)\string^\(\backslash\)\{\(\backslash\)\}/'\ |\ tail\ -\/n\ 1\ >\ ./open5gsversion}

\end{DoxyCode}
 must be uncommented.\hypertarget{md_docker_2open5gs_2README_autotoc_md6}{}\doxysection{\texorpdfstring{Container Parameters}{Container Parameters}}\label{md_docker_2open5gs_2README_autotoc_md6}
In \href{open5gs.env}{\texttt{ open5gs.\+env}} the following parameters can be set\+:


\begin{DoxyItemize}
\item MONGODB\+\_\+\+IP (default\+: 127.\+0.\+0.\+1)\+: This is the IP of the mongodb to use. 127.\+0.\+0.\+1 is the mongodb that runs inside this container.
\item SUBSCRIBER\+\_\+\+DB (default\+: "{}001010123456780,00112233445566778899aabbccddeeff,opc,63bfa50ee6523365ff14c1f45f88737d,8000,10.\+45.\+1.\+2"{})\+: This adds subscriber data for a single or multiple users to the Open5\+GS mongodb. It contains either\+:
\begin{DoxyItemize}
\item Comma separated string with information to define a subscriber
\item {\ttfamily subscriber\+\_\+db.\+csv}. This is a csv file that contains entries to add to open5gs mongodb. Each entry will represent a subscriber. It must be stored in {\ttfamily srsgnb/docker/open5gs/}
\end{DoxyItemize}
\item OPEN5\+GS\+\_\+\+IP\+: This must be set to the IP of the container (here\+: 10.\+53.\+1.\+2).
\item UE\+\_\+\+IP\+\_\+\+BASE\+: Defines the IP base used for connected UEs (here\+: 10.\+45.\+0).
\item DEBUG (default\+: false)\+: This can be set to true to run Open5\+GS in debug mode.
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ Kept\ in\ the\ following\ format:\ "{}Name,IMSI,Key,OP\_Type,OP/OPc,AMF,QCI,IP\_alloc"{}}
\DoxyCodeLine{\#}
\DoxyCodeLine{\#\ Name:\ \ \ \ \ Human\ readable\ name\ to\ help\ distinguish\ UE's.\ Ignored\ by\ the\ HSS}
\DoxyCodeLine{\#\ IMSI:\ \ \ \ \ UE's\ IMSI\ value}
\DoxyCodeLine{\#\ Key:\ \ \ \ \ \ UE's\ key,\ where\ other\ keys\ are\ derived\ from.\ Stored\ in\ hexadecimal}
\DoxyCodeLine{\#\ OP\_Type:\ \ Operator's\ code\ type,\ either\ OP\ or\ OPc}
\DoxyCodeLine{\#\ OP/OPc:\ \ \ Operator\ Code/Cyphered\ Operator\ Code,\ stored\ in\ hexadecimal}
\DoxyCodeLine{\#\ AMF:\ \ \ \ \ \ Authentication\ management\ field,\ stored\ in\ hexadecimal}
\DoxyCodeLine{\#\ QCI:\ \ \ \ \ \ QoS\ Class\ Identifier\ for\ the\ UE's\ default\ bearer.}
\DoxyCodeLine{\#\ IP\_alloc:\ IP\ allocation\ stratagy\ for\ the\ SPGW.}
\DoxyCodeLine{\#\ \ \ \ \ \ \ \ \ \ \ With\ 'dynamic'\ the\ SPGW\ will\ automatically\ allocate\ IPs}
\DoxyCodeLine{\#\ \ \ \ \ \ \ \ \ \ \ With\ a\ valid\ IPv4\ (e.g.\ '10.45.0.2')\ the\ UE\ will\ have\ a\ statically\ assigned\ IP.}
\DoxyCodeLine{\#}
\DoxyCodeLine{\#\ Note:\ Lines\ starting\ by\ '\#'\ are\ ignored\ and\ will\ be\ overwritten}
\DoxyCodeLine{\#\ List\ of\ UEs\ with\ IMSI,\ and\ key\ increasing\ by\ one\ for\ each\ new\ UE.\ Useful\ for\ testing\ with\ AmariUE\ simulator\ and\ ue\_count\ option}
\DoxyCodeLine{ue01,001010123456789,00112233445566778899aabbccddeeff,opc,63bfa50ee6523365ff14c1f45f88737d,9001,9,10.45.1.2}
\DoxyCodeLine{ue02,001010123456790,00112233445566778899aabbccddef00,opc,63bfa50ee6523365ff14c1f45f88737d,9001,9,10.45.2.2}
\DoxyCodeLine{ue03,001010123456791,00112233445566778899aabbccddef01,opc,63bfa50ee6523365ff14c1f45f88737d,9001,9,10.45.3.2}

\end{DoxyCode}
\hypertarget{md_docker_2open5gs_2README_autotoc_md7}{}\doxysection{\texorpdfstring{Open5\+GS Parameters}{Open5\+GS Parameters}}\label{md_docker_2open5gs_2README_autotoc_md7}
Open5\+GS can be setup using \href{open5gs-5gc.yml}{\texttt{ open5gs-\/5gc.\+yml}}.\hypertarget{md_docker_2open5gs_2README_autotoc_md8}{}\doxysection{\texorpdfstring{Usage}{Usage}}\label{md_docker_2open5gs_2README_autotoc_md8}
Create a Docker network to assign a specified IP to the Open5\+GS conainer (here\+: 10.\+53.\+1.\+2)\+:

{\ttfamily docker network create -\/-\/subnet=10.\+53.\+1.\+0/16 open5gsnet}

Build the Docker container using\+:

{\ttfamily docker build -\/-\/target open5gs -\/t open5gs-\/docker .}

You can overwrite open5gs version by adding {\ttfamily -\/-\/build-\/arg OPEN5\+GS\+\_\+\+VERSION=v2.\+6.\+1}

Then run the docker container with\+:

{\ttfamily docker run -\/-\/net open5gsnet -\/-\/ip 10.\+53.\+1.\+2 -\/-\/env-\/file open5gs.\+env -\/-\/privileged -\/-\/publish 3000\+:3000 open5gs-\/docker ./build/tests/app/5gc -\/c open5gs-\/5gc.\+yml}

To use this container with srsgnb, the {\ttfamily addr} option under {\ttfamily amf} section in gnb configuration must be set OPEN5\+GS\+\_\+\+IP (here\+: 10.\+53.\+1.\+2). It could also be required to modify {\ttfamily bind\+\_\+addr} option under {\ttfamily amf} section in gnb configuration to the local ethernet/wifi IP address for the host or container where gnb is running, not a localhost IP.

To ping a connected UE setup the necessary route to the UE\+\_\+\+IP\+\_\+\+BASE + "{}.\+0/24"{} (here\+: 10.\+45.\+0) via the OPEN5\+GS\+\_\+\+IP (here\+: 10.\+53.\+1.\+2) using\+:

{\ttfamily sudo ip ro add 10.\+45.\+0.\+0/16 via 10.\+53.\+1.\+2}\hypertarget{md_docker_2open5gs_2README_autotoc_md9}{}\doxysubsection{\texorpdfstring{Note}{Note}}\label{md_docker_2open5gs_2README_autotoc_md9}
The Open5\+GS Web\+UI to manually add/change UEs to the mongodb can be accessed at \mbox{[}localhost\+:3000\mbox{]}(localhost\+:3000). 