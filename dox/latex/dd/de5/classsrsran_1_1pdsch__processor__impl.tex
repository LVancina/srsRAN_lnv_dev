\doxysection{srsran\+::pdsch\+\_\+processor\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1pdsch__processor__impl}{}\label{classsrsran_1_1pdsch__processor__impl}\index{srsran::pdsch\_processor\_impl@{srsran::pdsch\_processor\_impl}}


Implements a generic PDSCH processor.  




{\ttfamily \#include $<$pdsch\+\_\+processor\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::pdsch\+\_\+processor\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=258pt]{d0/d5b/classsrsran_1_1pdsch__processor__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::pdsch\+\_\+processor\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=282pt]{de/d69/classsrsran_1_1pdsch__processor__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1pdsch__processor__impl_aa7ef2f2df2e8127e2b1ad7758752861d}{pdsch\+\_\+processor\+\_\+impl}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pdsch__encoder}{pdsch\+\_\+encoder}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{encoder\+\_\+}}, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pdsch__modulator}{pdsch\+\_\+modulator}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{modulator\+\_\+}}, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1dmrs__pdsch__processor}{dmrs\+\_\+pdsch\+\_\+processor}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dmrs\+\_\+}})
\begin{DoxyCompactList}\small\item\em Creates a generic PDSCH processor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1pdsch__processor__impl_a587e08c1b58424a8f15ec7eb412002b1}{process}} (\mbox{\hyperlink{classsrsran_1_1resource__grid__mapper}{resource\+\_\+grid\+\_\+mapper}} \&mapper, \mbox{\hyperlink{classsrsran_1_1pdsch__processor__notifier}{pdsch\+\_\+processor\+\_\+notifier}} \&notifier, \mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$, \mbox{\hyperlink{classsrsran_1_1pdsch__processor_a6c6105b34bc5b25ffb234eddcbfe3f71}{MAX\+\_\+\+NOF\+\_\+\+TRANSPORT\+\_\+\+BLOCKS}} $>$ data, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pdsch__processor_1_1pdu__t}{pdu\+\_\+t}} \&pdu) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Processes a PDSCH transmission. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1pdsch__processor}{srsran\+::pdsch\+\_\+processor}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}pdsch\+\_\+processor} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Static Public Attributes inherited from \mbox{\hyperlink{classsrsran_1_1pdsch__processor}{srsran\+::pdsch\+\_\+processor}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{constexpr}} \mbox{\hyperlink{classunsigned}{unsigned}} {\bfseries MAX\+\_\+\+NOF\+\_\+\+TRANSPORT\+\_\+\+BLOCKS} = 2
\begin{DoxyCompactList}\small\item\em Defines the maximum number of codewords that can be encoded in a PDSCH transmission. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implements a generic PDSCH processor. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1pdsch__processor__impl_aa7ef2f2df2e8127e2b1ad7758752861d}\label{classsrsran_1_1pdsch__processor__impl_aa7ef2f2df2e8127e2b1ad7758752861d} 
\index{srsran::pdsch\_processor\_impl@{srsran::pdsch\_processor\_impl}!pdsch\_processor\_impl@{pdsch\_processor\_impl}}
\index{pdsch\_processor\_impl@{pdsch\_processor\_impl}!srsran::pdsch\_processor\_impl@{srsran::pdsch\_processor\_impl}}
\doxysubsubsection{\texorpdfstring{pdsch\_processor\_impl()}{pdsch\_processor\_impl()}}
{\footnotesize\ttfamily srsran\+::pdsch\+\_\+processor\+\_\+impl\+::pdsch\+\_\+processor\+\_\+impl (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pdsch__encoder}{pdsch\+\_\+encoder}} $>$}]{encoder\+\_\+,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pdsch__modulator}{pdsch\+\_\+modulator}} $>$}]{modulator\+\_\+,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1dmrs__pdsch__processor}{dmrs\+\_\+pdsch\+\_\+processor}} $>$}]{dmrs\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Creates a generic PDSCH processor. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em config} & Provides the necessary configuration. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00041\ \ \ \ \ encoder(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{encoder\_}})),\ modulator(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{modulator\_}})),\ dmrs(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dmrs\_}}))}
\DoxyCodeLine{00042\ \ \ \{}
\DoxyCodeLine{00043\ \ \ \ \ srsran\_assert(encoder\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}Invalid\ encoder\ pointer."{}});}
\DoxyCodeLine{00044\ \ \ \ \ srsran\_assert(modulator\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}Invalid\ modulator\ pointer."{}});}
\DoxyCodeLine{00045\ \ \ \ \ srsran\_assert(dmrs\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}Invalid\ dmrs\ pointer."{}});}
\DoxyCodeLine{00046\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1pdsch__processor__impl_a587e08c1b58424a8f15ec7eb412002b1}\label{classsrsran_1_1pdsch__processor__impl_a587e08c1b58424a8f15ec7eb412002b1} 
\index{srsran::pdsch\_processor\_impl@{srsran::pdsch\_processor\_impl}!process@{process}}
\index{process@{process}!srsran::pdsch\_processor\_impl@{srsran::pdsch\_processor\_impl}}
\doxysubsubsection{\texorpdfstring{process()}{process()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} pdsch\+\_\+processor\+\_\+impl\+::process (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1resource__grid__mapper}{resource\+\_\+grid\+\_\+mapper}} \&}]{mapper,  }\item[{\mbox{\hyperlink{classsrsran_1_1pdsch__processor__notifier}{pdsch\+\_\+processor\+\_\+notifier}} \&}]{notifier,  }\item[{\mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$, \mbox{\hyperlink{classsrsran_1_1pdsch__processor_a6c6105b34bc5b25ffb234eddcbfe3f71}{MAX\+\_\+\+NOF\+\_\+\+TRANSPORT\+\_\+\+BLOCKS}} $>$}]{data,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pdsch__processor_1_1pdu__t}{pdu\+\_\+t}} \&}]{pdu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Processes a PDSCH transmission. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em mapper} & Resource grid mapper interface. \\
\hline
\mbox{\texttt{ out}}  & {\em notifier} & PDSCH processor notifier. \\
\hline
\mbox{\texttt{ in}}  & {\em data} & The codewords to transmit. \\
\hline
\mbox{\texttt{ in}}  & {\em pdu} & Necessary parameters to process the PDSCH transmission. \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
The number of transport blocks must be equal to the number of codewords in {\ttfamily pdu}. 

The size of each transport block is determined by {\ttfamily  data\mbox{[}TB index\mbox{]}.size() } 
\end{DoxyRemark}


Implements \mbox{\hyperlink{classsrsran_1_1pdsch__processor_a2717e90debaecd5e8dd5c3f27b1da387}{srsran\+::pdsch\+\_\+processor}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00034\ \{}
\DoxyCodeLine{00035\ \ \ \mbox{\hyperlink{classsrsran_1_1pdsch__processor__validator__impl_a256b4cf840b7151c03757d9d30b076ad}{pdsch\_processor\_validator\_impl::assert\_pdu}}(pdu);}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \textcolor{comment}{//\ Number\ of\ layers\ from\ the\ precoding\ configuration.}}
\DoxyCodeLine{00038\ \ \ \textcolor{keywordtype}{unsigned}\ nof\_layers\ =\ pdu.precoding.get\_nof\_layers();}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \textcolor{comment}{//\ Number\ of\ codewords.}}
\DoxyCodeLine{00041\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_codewords}}\ =\ (nof\_layers\ >\ 4)\ ?\ 2\ :\ 1;}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \textcolor{comment}{//\ Calculate\ the\ number\ of\ layers\ codeword\ 0\ is\ mapped\ to.\ It\ is\ the\ number\ of\ layers\ divided\ by\ the\ number\ of}}
\DoxyCodeLine{00044\ \ \ \textcolor{comment}{//\ codewords,\ rounding\ down\ (floor).}}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_layers\_cw0}}\ =\ nof\_layers\ /\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_codewords}};}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \textcolor{comment}{//\ Calculate\ the\ number\ of\ layers\ codeword\ 1\ is\ mapped\ to.\ It\ is\ the\ unused\ number\ of\ layers\ from\ the\ previous}}
\DoxyCodeLine{00048\ \ \ \textcolor{comment}{//\ codeword.}}
\DoxyCodeLine{00049\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_layers\_cw1}}\ =\ nof\_layers\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_layers\_cw0}};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \textcolor{comment}{//\ Calculate\ the\ number\ of\ resource\ elements\ used\ to\ map\ PDSCH\ on\ the\ grid.\ Common\ for\ all\ codewords.}}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_re\_pdsch}}\ =\ compute\_nof\_data\_re(pdu);}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \textcolor{comment}{//\ Prepare\ encoded\ codewords.}}
\DoxyCodeLine{00055\ \ \ \mbox{\hyperlink{classsrsran_1_1static__vector}{static\_vector<bit\_buffer,\ pdsch\_constants::MAX\_NOF\_CODEWORDS>}}\ codewords;}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \textcolor{comment}{//\ Encode\ each\ codeword.}}
\DoxyCodeLine{00058\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{codeword\_id}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{codeword\_id}}\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_codewords}};\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{codeword\_id}})\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_layers\_cw}}\ =\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{codeword\_id}}\ ==\ 0)\ ?\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_layers\_cw0}}\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_layers\_cw1}};}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\_buffer}}\&\ codeword\ \ \ \ \ \ =\ encode(data[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{codeword\_id}}],\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{codeword\_id}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_layers\_cw}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_re\_pdsch}},\ pdu);}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ codewords.emplace\_back(codeword);}
\DoxyCodeLine{00063\ \ \ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ Modulate\ codewords.}}
\DoxyCodeLine{00066\ \ \ modulate(mapper,\ codewords,\ pdu);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \textcolor{comment}{//\ Prepare\ DM-\/RS\ configuration\ and\ generate.}}
\DoxyCodeLine{00069\ \ \ put\_dmrs(mapper,\ pdu);}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \textcolor{comment}{//\ Notify\ the\ end\ of\ the\ processing.}}
\DoxyCodeLine{00072\ \ \ notifier.on\_finish\_processing();}
\DoxyCodeLine{00073\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/channel\+\_\+processors/pdsch\+\_\+processor\+\_\+impl.\+h\item 
lib/phy/upper/channel\+\_\+processors/pdsch\+\_\+processor\+\_\+impl.\+cpp\end{DoxyCompactItemize}
