\doxysection{srsran\+::ether\+::dpdk\+\_\+receiver\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1ether_1_1dpdk__receiver__impl}{}\label{classsrsran_1_1ether_1_1dpdk__receiver__impl}\index{srsran::ether::dpdk\_receiver\_impl@{srsran::ether::dpdk\_receiver\_impl}}


DPDK Ethernet receiver implementation.  




{\ttfamily \#include $<$dpdk\+\_\+ethernet\+\_\+receiver.\+h$>$}



Inheritance diagram for srsran\+::ether\+::dpdk\+\_\+receiver\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{dc/dc6/classsrsran_1_1ether_1_1dpdk__receiver__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::ether\+::dpdk\+\_\+receiver\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{df/d5f/classsrsran_1_1ether_1_1dpdk__receiver__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ether_1_1dpdk__receiver__impl_a331deb08b0f96ba9d7401e75f812b45e}{dpdk\+\_\+receiver\+\_\+impl}} (\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{executor\+\_\+}}, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1ether_1_1dpdk__port__context}{dpdk\+\_\+port\+\_\+context}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\+\_\+ctx\+\_\+ptr\+\_\+}}, \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ether_1_1dpdk__receiver__impl_ae1d150d171d78cd22e8d185a57a98442}{start}} (\mbox{\hyperlink{classsrsran_1_1ether_1_1frame__notifier}{frame\+\_\+notifier}} \&notifier) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Starts the Ethernet receiver operation. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ether_1_1dpdk__receiver__impl_ab343de471d8ceb2df7d738c7bdb44615}{stop}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Stops the Ethernet receiver operation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1ether_1_1receiver}{srsran\+::ether\+::receiver}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}receiver} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
DPDK Ethernet receiver implementation. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ether_1_1dpdk__receiver__impl_a331deb08b0f96ba9d7401e75f812b45e}\label{classsrsran_1_1ether_1_1dpdk__receiver__impl_a331deb08b0f96ba9d7401e75f812b45e} 
\index{srsran::ether::dpdk\_receiver\_impl@{srsran::ether::dpdk\_receiver\_impl}!dpdk\_receiver\_impl@{dpdk\_receiver\_impl}}
\index{dpdk\_receiver\_impl@{dpdk\_receiver\_impl}!srsran::ether::dpdk\_receiver\_impl@{srsran::ether::dpdk\_receiver\_impl}}
\doxysubsubsection{\texorpdfstring{dpdk\_receiver\_impl()}{dpdk\_receiver\_impl()}}
{\footnotesize\ttfamily dpdk\+\_\+receiver\+\_\+impl\+::dpdk\+\_\+receiver\+\_\+impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&}]{executor\+\_\+,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1ether_1_1dpdk__port__context}{dpdk\+\_\+port\+\_\+context}} $>$}]{port\+\_\+ctx\+\_\+ptr\+\_\+,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger\+\_\+ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00050\ \ \ logger(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\_}}),}
\DoxyCodeLine{00051\ \ \ executor(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{executor\_}}),}
\DoxyCodeLine{00052\ \ \ notifier(dummy\_notifier),}
\DoxyCodeLine{00053\ \ \ port\_ctx\_ptr(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{port\_ctx\_ptr\_}})),}
\DoxyCodeLine{00054\ \ \ port\_ctx(*port\_ctx\_ptr)}
\DoxyCodeLine{00055\ \{}
\DoxyCodeLine{00056\ \ \ srsran\_assert(port\_ctx\_ptr,\ \textcolor{stringliteral}{"{}Invalid\ port\ context"{}});}
\DoxyCodeLine{00057\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ether_1_1dpdk__receiver__impl_ae1d150d171d78cd22e8d185a57a98442}\label{classsrsran_1_1ether_1_1dpdk__receiver__impl_ae1d150d171d78cd22e8d185a57a98442} 
\index{srsran::ether::dpdk\_receiver\_impl@{srsran::ether::dpdk\_receiver\_impl}!start@{start}}
\index{start@{start}!srsran::ether::dpdk\_receiver\_impl@{srsran::ether::dpdk\_receiver\_impl}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} dpdk\+\_\+receiver\+\_\+impl\+::start (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1ether_1_1frame__notifier}{frame\+\_\+notifier}} \&}]{notifier }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Starts the Ethernet receiver operation. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em notifier} & Ethernet frames reception notifier. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Caller will be blocked until the receiver is fully started. 
\end{DoxyNote}


Implements \mbox{\hyperlink{classsrsran_1_1ether_1_1receiver_a63a9cd717d0862a26e1daf12efcc5984}{srsran\+::ether\+::receiver}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00060\ \{}
\DoxyCodeLine{00061\ \ \ notifier\ =\ std::ref(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{notifier\_}});}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ std::promise<void>\ p;}
\DoxyCodeLine{00064\ \ \ std::future<void>\ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fut}}\ =\ p.get\_future();}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \textcolor{keywordflow}{if}\ (!executor.\mbox{\hyperlink{classsrsran_1_1task__executor_a296e1c4285dafdbfcbc912c3006690a4}{defer}}([\textcolor{keyword}{this},\ \&p]()\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ rx\_status.store(receiver\_status::running,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Signal\ start()\ caller\ thread\ that\ the\ operation\ is\ complete.}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ p.set\_value();}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ receive\_loop();}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \}))\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a355eafe8d872b8f555172fa7bcd1482f}{report\_error}}(\textcolor{stringliteral}{"{}Unable\ to\ start\ the\ DPDK\ ethernet\ frame\ receiver"{}});}
\DoxyCodeLine{00073\ \ \ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \textcolor{comment}{//\ Block\ waiting\ for\ timing\ executor\ to\ start.}}
\DoxyCodeLine{00076\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fut}}.wait();}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ logger.info(\textcolor{stringliteral}{"{}Started\ the\ DPDK\ ethernet\ frame\ receiver"{}});}
\DoxyCodeLine{00079\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ether_1_1dpdk__receiver__impl_ab343de471d8ceb2df7d738c7bdb44615}\label{classsrsran_1_1ether_1_1dpdk__receiver__impl_ab343de471d8ceb2df7d738c7bdb44615} 
\index{srsran::ether::dpdk\_receiver\_impl@{srsran::ether::dpdk\_receiver\_impl}!stop@{stop}}
\index{stop@{stop}!srsran::ether::dpdk\_receiver\_impl@{srsran::ether::dpdk\_receiver\_impl}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} dpdk\+\_\+receiver\+\_\+impl\+::stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Stops the Ethernet receiver operation. 

\begin{DoxyNote}{Note}
Caller will be blocked until the receiver is fully stopped. 
\end{DoxyNote}


Implements \mbox{\hyperlink{classsrsran_1_1ether_1_1receiver_a2a2a1c749e76f397c7926a5cc0b38cec}{srsran\+::ether\+::receiver}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00082\ \{}
\DoxyCodeLine{00083\ \ \ logger.info(\textcolor{stringliteral}{"{}Requesting\ stop\ of\ the\ DPDK\ ethernet\ frame\ receiver"{}});}
\DoxyCodeLine{00084\ \ \ rx\_status.store(receiver\_status::stop\_requested,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \textcolor{comment}{//\ Wait\ for\ the\ receiver\ thread\ to\ stop.}}
\DoxyCodeLine{00087\ \ \ \textcolor{keywordflow}{while}\ (rx\_status.load(std::memory\_order\_acquire)\ !=\ receiver\_status::stopped)\ \{}
\DoxyCodeLine{00088\ \ \ \ \ std::this\_thread::sleep\_for(std::chrono::milliseconds(1));}
\DoxyCodeLine{00089\ \ \ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ logger.info(\textcolor{stringliteral}{"{}Stopped\ the\ DPDK\ ethernet\ frame\ receiver"{}});}
\DoxyCodeLine{00092\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/ofh/ethernet/dpdk/dpdk\+\_\+ethernet\+\_\+receiver.\+h\item 
lib/ofh/ethernet/dpdk/dpdk\+\_\+ethernet\+\_\+receiver.\+cpp\end{DoxyCompactItemize}
