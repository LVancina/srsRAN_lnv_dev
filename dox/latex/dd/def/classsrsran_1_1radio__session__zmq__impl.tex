\doxysection{srsran\+::radio\+\_\+session\+\_\+zmq\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1radio__session__zmq__impl}{}\label{classsrsran_1_1radio__session__zmq__impl}\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}


Describes a Zero\+MQ radio based session.  




{\ttfamily \#include $<$radio\+\_\+session\+\_\+zmq\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::radio\+\_\+session\+\_\+zmq\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/dec/classsrsran_1_1radio__session__zmq__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::radio\+\_\+session\+\_\+zmq\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d3b/classsrsran_1_1radio__session__zmq__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1radio__session__zmq__impl_a84a38e4a7352a27f5b04534dd30a9775}{radio\+\_\+session\+\_\+zmq\+\_\+impl}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio}{radio\+\_\+configuration\+::radio}} \&config, \mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&async\+\_\+task\+\_\+executor, \mbox{\hyperlink{classsrsran_1_1radio__notification__handler}{radio\+\_\+notification\+\_\+handler}} \&notification\+\_\+handler)
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1radio__session__zmq__impl_a7419b683d32c847c39fc4d42a1154d63}{\texorpdfstring{$\sim$}{\string~}radio\+\_\+session\+\_\+zmq\+\_\+impl}} ()
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1radio__session__zmq__impl_abf69318dd3b1fa6f9242b6c53efa0967}{is\+\_\+successful}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Indicates if the instance was successfully initialized. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1radio__management__plane}{radio\+\_\+management\+\_\+plane}} \& \mbox{\hyperlink{classsrsran_1_1radio__session__zmq__impl_a1b574388cbb56e1419b4dca71ab9cff8}{get\+\_\+management\+\_\+plane}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Gets the management plane. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1baseband__gateway}{baseband\+\_\+gateway}} \& \mbox{\hyperlink{classsrsran_1_1radio__session__zmq__impl_a085aa4b29363078be9251fa678f67ff5}{get\+\_\+baseband\+\_\+gateway}} (\mbox{\hyperlink{classunsigned}{unsigned}} stream\+\_\+id) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Gets the data plane. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a4057ba65348ba48e6202d60aea8e6235}{baseband\+\_\+gateway\+\_\+timestamp}} \mbox{\hyperlink{classsrsran_1_1radio__session__zmq__impl_ad5652ec80a1894bf436089b3a552696e}{read\+\_\+current\+\_\+time}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Gets the current time. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1radio__session__zmq__impl_aa6dc17d963348f977908e94d91744131}{start}} (\mbox{\hyperlink{namespacesrsran_a4057ba65348ba48e6202d60aea8e6235}{baseband\+\_\+gateway\+\_\+timestamp}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{init\+\_\+time}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Starts the radio operation. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1radio__session__zmq__impl_a712a51bf9c23dd1f212747593e074930}{stop}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Stops the radio session operation. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1radio__session__zmq__impl_a5a3071ec7d3d11c7bb070542467257e5}{set\+\_\+tx\+\_\+gain}} (\mbox{\hyperlink{classunsigned}{unsigned}} port\+\_\+id, \mbox{\hyperlink{classdouble}{double}} gain\+\_\+dB) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Set the transmission gain of a given port in runtime. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1radio__session__zmq__impl_a3d5b7a088e6e51879164afd52e8a97da}{set\+\_\+rx\+\_\+gain}} (\mbox{\hyperlink{classunsigned}{unsigned}} port\+\_\+id, \mbox{\hyperlink{classdouble}{double}} gain\+\_\+dB) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Set the reception gain of a given port in runtime. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Describes a Zero\+MQ radio based session. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1radio__session__zmq__impl_a84a38e4a7352a27f5b04534dd30a9775}\label{classsrsran_1_1radio__session__zmq__impl_a84a38e4a7352a27f5b04534dd30a9775} 
\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}!radio\_session\_zmq\_impl@{radio\_session\_zmq\_impl}}
\index{radio\_session\_zmq\_impl@{radio\_session\_zmq\_impl}!srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}
\doxysubsubsection{\texorpdfstring{radio\_session\_zmq\_impl()}{radio\_session\_zmq\_impl()}}
{\footnotesize\ttfamily radio\+\_\+session\+\_\+zmq\+\_\+impl\+::radio\+\_\+session\+\_\+zmq\+\_\+impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio}{radio\+\_\+configuration\+::radio}} \&}]{config,  }\item[{\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&}]{async\+\_\+task\+\_\+executor,  }\item[{\mbox{\hyperlink{classsrsran_1_1radio__notification__handler}{radio\+\_\+notification\+\_\+handler}} \&}]{notification\+\_\+handler }\end{DoxyParamCaption})}



Default constructor. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em config} & Provides the required parameters to start a ZMQ radio based session. \\
\hline
\mbox{\texttt{ in}}  & {\em async\+\_\+task\+\_\+executor} & Provides a task executor to perform asynchronous tasks. \\
\hline
\mbox{\texttt{ in}}  & {\em notification\+\_\+handler} & Provides a radio event notification handler. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Use \doxylink{classsrsran_1_1radio__session__zmq__impl_abf69318dd3b1fa6f9242b6c53efa0967}{is\+\_\+successful()} to check that the instance was successfully initialized. 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00030\ \ \ logger(srslog::fetch\_basic\_logger(\textcolor{stringliteral}{"{}RF"{}},\ \textcolor{keyword}{false}))}
\DoxyCodeLine{00031\ \{}
\DoxyCodeLine{00032\ \ \ \textcolor{comment}{//\ Make\ sure\ the\ number\ of\ streams\ are\ equal.}}
\DoxyCodeLine{00033\ \ \ srsran\_assert(config.\mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio_ac1fd3bf6b73c6e21f7d5dac645e7d8b5}{tx\_streams}}.size()\ ==\ config.\mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio_a1b0fcc5284e6480f1dd1431818303f75}{rx\_streams}}.size(),}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ number\ of\ transmit\ streams\ (i.e.,\ \{\})\ must\ be\ equal\ to\ the\ number\ of\ receive\ streams\ (i.e.,\ \{\})."{}},}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.\mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio_ac1fd3bf6b73c6e21f7d5dac645e7d8b5}{tx\_streams}}.size(),}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.\mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio_a1b0fcc5284e6480f1dd1431818303f75}{rx\_streams}}.size());}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \textcolor{comment}{//\ Make\ ZMQ\ context.}}
\DoxyCodeLine{00039\ \ \ zmq\_context\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_ctx\_new}}();}
\DoxyCodeLine{00040\ \ \ \textcolor{keywordflow}{if}\ (zmq\_context\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00041\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ create\ ZMQ\ context.\ \{\}."{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_errno}}()));}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00043\ \ \ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_streams}}\ =\ config.\mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio_ac1fd3bf6b73c6e21f7d5dac645e7d8b5}{tx\_streams}}.size();}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \textcolor{comment}{//\ Debug\ log\ level\ is\ only\ available\ if\ verbose\ keyword\ is\ in\ the\ device\ arguments.}}
\DoxyCodeLine{00048\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{allow\_log\_level\_debug}}\ =\ (config.\mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio_a571871adffcbbb61f0a1fffba78322d5}{args}}.find(\textcolor{stringliteral}{"{}verbose"{}})\ !=\ std::string::npos);}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{comment}{//\ ZMQ\ logging\ in\ debug\ is\ extremely\ verbose.\ The\ following\ lines\ avoid\ debug\ level\ unless\ set\ to\ paranoid.}}
\DoxyCodeLine{00051\ \ \ srslog::basic\_levels\ log\_level\ =\ srslog::str\_to\_basic\_level(config.\mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio_a781c58687460759bf8b3880d60242ebd}{log\_level}});}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{allow\_log\_level\_debug}}\ \&\&\ (log\_level\ >=\ srslog::basic\_levels::debug))\ \{}
\DoxyCodeLine{00053\ \ \ \ \ log\_level\ =\ srslog::basic\_levels::info;}
\DoxyCodeLine{00054\ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{comment}{//\ Iterate\ for\ each\ transmission\ and\ reception\ stream.}}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ stream\_id\ =\ 0;\ stream\_id\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_streams}};\ ++stream\_id)\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1stream}{radio\_configuration::stream}}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_radio\_stream\_config}}\ =\ config.\mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio_ac1fd3bf6b73c6e21f7d5dac645e7d8b5}{tx\_streams}}[stream\_id];}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ Prepare\ transmit\ stream\ configuration.}}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1radio__zmq__tx__stream_1_1stream__description}{radio\_zmq\_tx\_stream::stream\_description}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_stream\_config}};}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_stream\_config}}.\mbox{\hyperlink{structsrsran_1_1radio__zmq__tx__stream_1_1stream__description_af73994a92687c941f589d6ce720752a9}{socket\_type}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ZMQ\_REP}};}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ channel\_id\ =\ 0;\ channel\_id\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_radio\_stream\_config}}.channels.size();\ ++channel\_id)\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_stream\_config}}.address.push\_back(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_radio\_stream\_config}}.channels[channel\_id].args);}
\DoxyCodeLine{00065\ \ \ \ \ \}}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_stream\_config}}.stream\_id\ \ \ \ \ \ \ \ \ =\ stream\_id;}
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_stream\_config}}.stream\_id\_str\ \ \ \ \ =\ \textcolor{stringliteral}{"{}zmq:tx:"{}}\ +\ std::to\_string(stream\_id);}
\DoxyCodeLine{00068\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_stream\_config}}.log\_level\ \ \ \ \ \ \ \ \ =\ log\_level;}
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_stream\_config}}.trx\_timeout\_ms\ \ \ \ =\ DEFAULT\_TRX\_TIMEOUT\_MS;}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_stream\_config}}.linger\_timeout\_ms\ =\ DEFAULT\_LINGER\_TIMEOUT\_MS;}
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_stream\_config}}.buffer\_size\ \ \ \ \ \ \ =\ DEFAULT\_STREAM\_BUFFER\_SIZE;}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1stream}{radio\_configuration::stream}}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_radio\_stream\_config}}\ =\ config.\mbox{\hyperlink{structsrsran_1_1radio__configuration_1_1radio_a1b0fcc5284e6480f1dd1431818303f75}{rx\_streams}}[stream\_id];}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{comment}{//\ Prepare\ transmit\ stream\ configuration.}}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1radio__zmq__rx__stream_1_1stream__description}{radio\_zmq\_rx\_stream::stream\_description}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_stream\_config}};}
\DoxyCodeLine{00077\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_stream\_config}}.\mbox{\hyperlink{structsrsran_1_1radio__zmq__rx__stream_1_1stream__description_abd6bbdf4077a13a511ec9398d92013b5}{socket\_type}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ZMQ\_REQ}};}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ channel\_id\ =\ 0;\ channel\_id\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_radio\_stream\_config}}.channels.size();\ ++channel\_id)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_stream\_config}}.address.push\_back(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_radio\_stream\_config}}.channels[channel\_id].args);}
\DoxyCodeLine{00080\ \ \ \ \ \}}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_stream\_config}}.stream\_id\ \ \ \ \ \ \ \ \ =\ stream\_id;}
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_stream\_config}}.stream\_id\_str\ \ \ \ \ =\ \textcolor{stringliteral}{"{}zmq:rx:"{}}\ +\ std::to\_string(stream\_id);}
\DoxyCodeLine{00083\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_stream\_config}}.log\_level\ \ \ \ \ \ \ \ \ =\ log\_level;}
\DoxyCodeLine{00084\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_stream\_config}}.trx\_timeout\_ms\ \ \ \ =\ DEFAULT\_TRX\_TIMEOUT\_MS;}
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_stream\_config}}.linger\_timeout\_ms\ =\ DEFAULT\_LINGER\_TIMEOUT\_MS;}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_stream\_config}}.buffer\_size\ \ \ \ \ \ \ =\ DEFAULT\_STREAM\_BUFFER\_SIZE;}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ Create\ baseband\ gateway.}}
\DoxyCodeLine{00089\ \ \ \ \ bb\_gateways.emplace\_back(std::make\_unique<radio\_zmq\_baseband\_gateway>(}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ zmq\_context,\ async\_task\_executor,\ notifier,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tx\_stream\_config}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rx\_stream\_config}}));}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{comment}{//\ Make\ sure\ streams\ are\ created\ successfully.}}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordflow}{if}\ (!bb\_gateways.back()-\/>get\_tx\_stream().is\_successful()\ ||\ !bb\_gateways.back()-\/>get\_rx\_stream().is\_successful())\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00095\ \ \ \ \ \}}
\DoxyCodeLine{00096\ \ \ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ successful\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00099\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__session__zmq__impl_a7419b683d32c847c39fc4d42a1154d63}\label{classsrsran_1_1radio__session__zmq__impl_a7419b683d32c847c39fc4d42a1154d63} 
\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}!````~radio\_session\_zmq\_impl@{\texorpdfstring{$\sim$}{\string~}radio\_session\_zmq\_impl}}
\index{````~radio\_session\_zmq\_impl@{\texorpdfstring{$\sim$}{\string~}radio\_session\_zmq\_impl}!srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}radio\_session\_zmq\_impl()}{\string~radio\_session\_zmq\_impl()}}
{\footnotesize\ttfamily radio\+\_\+session\+\_\+zmq\+\_\+impl\+::\texorpdfstring{$\sim$}{\string~}radio\+\_\+session\+\_\+zmq\+\_\+impl (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Default destructor. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00102\ \{}
\DoxyCodeLine{00103\ \ \ \textcolor{comment}{//\ Destroy\ transmit\ and\ receive\ streams\ prior\ to\ ZMQ\ context\ destruction.}}
\DoxyCodeLine{00104\ \ \ bb\_gateways.clear();}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \textcolor{comment}{//\ Destroy\ ZMQ\ context.}}
\DoxyCodeLine{00107\ \ \ \textcolor{keywordflow}{if}\ (zmq\_context\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_ctx\_shutdown}}(zmq\_context);}
\DoxyCodeLine{00109\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{zmq\_ctx\_destroy}}(zmq\_context);}
\DoxyCodeLine{00110\ \ \ \ \ zmq\_context\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00111\ \ \ \}}
\DoxyCodeLine{00112\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1radio__session__zmq__impl_a085aa4b29363078be9251fa678f67ff5}\label{classsrsran_1_1radio__session__zmq__impl_a085aa4b29363078be9251fa678f67ff5} 
\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}!get\_baseband\_gateway@{get\_baseband\_gateway}}
\index{get\_baseband\_gateway@{get\_baseband\_gateway}!srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}
\doxysubsubsection{\texorpdfstring{get\_baseband\_gateway()}{get\_baseband\_gateway()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1baseband__gateway}{baseband\+\_\+gateway}} \& srsran\+::radio\+\_\+session\+\_\+zmq\+\_\+impl\+::get\+\_\+baseband\+\_\+gateway (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{stream\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Gets the data plane. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em stream\+\_\+id} & Stream identifier. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The reference to the data plane for this radio session. 
\end{DoxyReturn}
\begin{DoxyRemark}{Remarks}
An assertion is triggered if the stream identifier is invalid. 
\end{DoxyRemark}


Implements \mbox{\hyperlink{classsrsran_1_1radio__session_a49553db2d5fb97c4126ab0b8013bb663}{srsran\+::radio\+\_\+session}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00075\ \ \ \{}
\DoxyCodeLine{00076\ \ \ \ \ srsran\_assert(stream\_id\ <\ bb\_gateways.size(),}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Stream\ identifier\ (i.e.,\ \{\})\ exceeds\ the\ number\ of\ baseband\ gateways\ (i.e.,\ \{\})"{}},}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stream\_id,}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bb\_gateways.size());}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{return}\ *bb\_gateways[stream\_id];}
\DoxyCodeLine{00081\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__session__zmq__impl_a1b574388cbb56e1419b4dca71ab9cff8}\label{classsrsran_1_1radio__session__zmq__impl_a1b574388cbb56e1419b4dca71ab9cff8} 
\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}!get\_management\_plane@{get\_management\_plane}}
\index{get\_management\_plane@{get\_management\_plane}!srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}
\doxysubsubsection{\texorpdfstring{get\_management\_plane()}{get\_management\_plane()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1radio__management__plane}{radio\+\_\+management\+\_\+plane}} \& srsran\+::radio\+\_\+session\+\_\+zmq\+\_\+impl\+::get\+\_\+management\+\_\+plane (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Gets the management plane. 

\begin{DoxyReturn}{Returns}
The reference to the management plane for this radio session. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classsrsran_1_1radio__session_a8f181b7c4b8f967d44b2f25515ceede0}{srsran\+::radio\+\_\+session}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00071\ \{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ \};}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__session__zmq__impl_abf69318dd3b1fa6f9242b6c53efa0967}\label{classsrsran_1_1radio__session__zmq__impl_abf69318dd3b1fa6f9242b6c53efa0967} 
\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}!is\_successful@{is\_successful}}
\index{is\_successful@{is\_successful}!srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}
\doxysubsubsection{\texorpdfstring{is\_successful()}{is\_successful()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::radio\+\_\+session\+\_\+zmq\+\_\+impl\+::is\+\_\+successful (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Indicates if the instance was successfully initialized. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00068\ \{\ \textcolor{keywordflow}{return}\ successful;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__session__zmq__impl_ad5652ec80a1894bf436089b3a552696e}\label{classsrsran_1_1radio__session__zmq__impl_ad5652ec80a1894bf436089b3a552696e} 
\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}!read\_current\_time@{read\_current\_time}}
\index{read\_current\_time@{read\_current\_time}!srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}
\doxysubsubsection{\texorpdfstring{read\_current\_time()}{read\_current\_time()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a4057ba65348ba48e6202d60aea8e6235}{baseband\+\_\+gateway\+\_\+timestamp}} radio\+\_\+session\+\_\+zmq\+\_\+impl\+::read\+\_\+current\+\_\+time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Gets the current time. 



Implements \mbox{\hyperlink{classsrsran_1_1radio__session_a0994b4d52fda9184950ef2b941ef1a7b}{srsran\+::radio\+\_\+session}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00154\ \{}
\DoxyCodeLine{00155\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00156\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__session__zmq__impl_a3d5b7a088e6e51879164afd52e8a97da}\label{classsrsran_1_1radio__session__zmq__impl_a3d5b7a088e6e51879164afd52e8a97da} 
\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}!set\_rx\_gain@{set\_rx\_gain}}
\index{set\_rx\_gain@{set\_rx\_gain}!srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}
\doxysubsubsection{\texorpdfstring{set\_rx\_gain()}{set\_rx\_gain()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} radio\+\_\+session\+\_\+zmq\+\_\+impl\+::set\+\_\+rx\+\_\+gain (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{port\+\_\+id,  }\item[{\mbox{\hyperlink{classdouble}{double}}}]{gain\+\_\+dB }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Set the reception gain of a given port in runtime. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em port\+\_\+id} & Indicates the port identifier. \\
\hline
\mbox{\texttt{ in}}  & {\em gain\+\_\+dB} & Indicates the new gain. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the operation is successful. Otherwise, false. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
The port identifier is indexed from stream ascending order and then port. 
\end{DoxyNote}


Implements \mbox{\hyperlink{classsrsran_1_1radio__management__plane_a640cbb0f0dad3ee3c383987c60ce3e71}{srsran\+::radio\+\_\+management\+\_\+plane}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00139\ \{}
\DoxyCodeLine{00140\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00141\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__session__zmq__impl_a5a3071ec7d3d11c7bb070542467257e5}\label{classsrsran_1_1radio__session__zmq__impl_a5a3071ec7d3d11c7bb070542467257e5} 
\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}!set\_tx\_gain@{set\_tx\_gain}}
\index{set\_tx\_gain@{set\_tx\_gain}!srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}
\doxysubsubsection{\texorpdfstring{set\_tx\_gain()}{set\_tx\_gain()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} radio\+\_\+session\+\_\+zmq\+\_\+impl\+::set\+\_\+tx\+\_\+gain (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{port\+\_\+id,  }\item[{\mbox{\hyperlink{classdouble}{double}}}]{gain\+\_\+dB }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Set the transmission gain of a given port in runtime. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em port\+\_\+id} & Indicates the port identifier. \\
\hline
\mbox{\texttt{ in}}  & {\em gain\+\_\+dB} & Indicates the new gain. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the operation is successful. Otherwise, false. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
The port identifier is indexed from stream ascending order and then port. 
\end{DoxyNote}


Implements \mbox{\hyperlink{classsrsran_1_1radio__management__plane_ac0a8bb664019e6637372a92d78cea99a}{srsran\+::radio\+\_\+management\+\_\+plane}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00134\ \{}
\DoxyCodeLine{00135\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00136\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__session__zmq__impl_aa6dc17d963348f977908e94d91744131}\label{classsrsran_1_1radio__session__zmq__impl_aa6dc17d963348f977908e94d91744131} 
\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}!start@{start}}
\index{start@{start}!srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} radio\+\_\+session\+\_\+zmq\+\_\+impl\+::start (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a4057ba65348ba48e6202d60aea8e6235}{baseband\+\_\+gateway\+\_\+timestamp}}}]{init\+\_\+time }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Starts the radio operation. 

It requests all radio streams to start simultaneously.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em init\+\_\+time} & Initial time in which streaming shall start. \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
Radio streams run until halted by a call of the \doxylink{classsrsran_1_1radio__session__zmq__impl_a712a51bf9c23dd1f212747593e074930}{stop()} method. 

Calling \doxylink{classsrsran_1_1radio__session__zmq__impl_aa6dc17d963348f977908e94d91744131}{start()} more than once results in undefined behavior, even after calling \doxylink{classsrsran_1_1radio__session__zmq__impl_a712a51bf9c23dd1f212747593e074930}{stop()}. 
\end{DoxyRemark}


Implements \mbox{\hyperlink{classsrsran_1_1radio__session_a793081cb27d4a66be880959af97fa9ea}{srsran\+::radio\+\_\+session}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00144\ \{}
\DoxyCodeLine{00145\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ gateway\ :\ bb\_gateways)\ \{}
\DoxyCodeLine{00146\ \ \ \ \ gateway-\/>get\_rx\_stream().start(start\_time);}
\DoxyCodeLine{00147\ \ \ \}}
\DoxyCodeLine{00148\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ gateway\ :\ bb\_gateways)\ \{}
\DoxyCodeLine{00149\ \ \ \ \ gateway-\/>get\_tx\_stream().start(start\_time);}
\DoxyCodeLine{00150\ \ \ \}}
\DoxyCodeLine{00151\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1radio__session__zmq__impl_a712a51bf9c23dd1f212747593e074930}\label{classsrsran_1_1radio__session__zmq__impl_a712a51bf9c23dd1f212747593e074930} 
\index{srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}!stop@{stop}}
\index{stop@{stop}!srsran::radio\_session\_zmq\_impl@{srsran::radio\_session\_zmq\_impl}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} radio\+\_\+session\+\_\+zmq\+\_\+impl\+::stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Stops the radio session operation. 

Any call to radio operation after calling \doxylink{classsrsran_1_1radio__session__zmq__impl_a712a51bf9c23dd1f212747593e074930}{stop()} will return instantly without interacting with the physical radio.

\begin{DoxyRemark}{Remarks}
Calling \doxylink{classsrsran_1_1radio__session__zmq__impl_a712a51bf9c23dd1f212747593e074930}{stop()} without having called \doxylink{classsrsran_1_1radio__session__zmq__impl_aa6dc17d963348f977908e94d91744131}{start()} results in undefined behavior. 

Calling \doxylink{classsrsran_1_1radio__session__zmq__impl_aa6dc17d963348f977908e94d91744131}{start()} after \doxylink{classsrsran_1_1radio__session__zmq__impl_a712a51bf9c23dd1f212747593e074930}{stop()} results in undefined behavior. 
\end{DoxyRemark}


Implements \mbox{\hyperlink{classsrsran_1_1radio__session_aeb7baacf9aa88b71e9968d8e46d970c2}{srsran\+::radio\+\_\+session}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00115\ \{}
\DoxyCodeLine{00116\ \ \ \textcolor{comment}{//\ Signal\ stop\ for\ each\ transmit\ stream.}}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ gateway\ :\ bb\_gateways)\ \{}
\DoxyCodeLine{00118\ \ \ \ \ gateway-\/>get\_tx\_stream().stop();}
\DoxyCodeLine{00119\ \ \ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \textcolor{comment}{//\ Signal\ stop\ for\ each\ receive\ stream.}}
\DoxyCodeLine{00122\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ gateway\ :\ bb\_gateways)\ \{}
\DoxyCodeLine{00123\ \ \ \ \ gateway-\/>get\_rx\_stream().stop();}
\DoxyCodeLine{00124\ \ \ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \textcolor{comment}{//\ Wait\ for\ streams\ to\ join.}}
\DoxyCodeLine{00127\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ gateway\ :\ bb\_gateways)\ \{}
\DoxyCodeLine{00128\ \ \ \ \ gateway-\/>get\_tx\_stream().wait\_stop();}
\DoxyCodeLine{00129\ \ \ \ \ gateway-\/>get\_rx\_stream().wait\_stop();}
\DoxyCodeLine{00130\ \ \ \}}
\DoxyCodeLine{00131\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/radio/zmq/radio\+\_\+session\+\_\+zmq\+\_\+impl.\+h\item 
lib/radio/zmq/radio\+\_\+session\+\_\+zmq\+\_\+impl.\+cpp\end{DoxyCompactItemize}
