\doxysection{srsran\+::phase\+\_\+compensation\+\_\+lut Class Reference}
\hypertarget{classsrsran_1_1phase__compensation__lut}{}\label{classsrsran_1_1phase__compensation__lut}\index{srsran::phase\_compensation\_lut@{srsran::phase\_compensation\_lut}}


Phase compensation as per TS38.\+211 Section 5.\+4.  




{\ttfamily \#include $<$phase\+\_\+compensation\+\_\+lut.\+h$>$}



Collaboration diagram for srsran\+::phase\+\_\+compensation\+\_\+lut\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=248pt]{d3/d98/classsrsran_1_1phase__compensation__lut__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1phase__compensation__lut_ae76a1f17846ff0a65a294f1b4a80016c}{phase\+\_\+compensation\+\_\+lut}} (\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\+\_\+spacing}} scs, \mbox{\hyperlink{classsrsran_1_1cyclic__prefix}{cyclic\+\_\+prefix}} cp, \mbox{\hyperlink{classunsigned}{unsigned}} dft\+\_\+size, \mbox{\hyperlink{classdouble}{double}} center\+\_\+frequency\+\_\+\+Hz, \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\+\_\+tx}})
\begin{DoxyCompactList}\small\item\em Constructs the phase compensation look-\/up table. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1phase__compensation__lut_a767c0755e3324729c5737b9c38112efc}{get\+\_\+coefficient}} (\mbox{\hyperlink{classunsigned}{unsigned}} symbol\+\_\+index) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Get the phase compensation for a symbol. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Phase compensation as per TS38.\+211 Section 5.\+4. 

Implements the phase compensation for OFDM modulation and demodulation as described in TS38.\+211 Section 5.\+4. The phase compensation is implemented as a look-\/up table populated at construction time. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1phase__compensation__lut_ae76a1f17846ff0a65a294f1b4a80016c}\label{classsrsran_1_1phase__compensation__lut_ae76a1f17846ff0a65a294f1b4a80016c} 
\index{srsran::phase\_compensation\_lut@{srsran::phase\_compensation\_lut}!phase\_compensation\_lut@{phase\_compensation\_lut}}
\index{phase\_compensation\_lut@{phase\_compensation\_lut}!srsran::phase\_compensation\_lut@{srsran::phase\_compensation\_lut}}
\doxysubsubsection{\texorpdfstring{phase\_compensation\_lut()}{phase\_compensation\_lut()}}
{\footnotesize\ttfamily srsran\+::phase\+\_\+compensation\+\_\+lut\+::phase\+\_\+compensation\+\_\+lut (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\+\_\+spacing}}}]{scs,  }\item[{\mbox{\hyperlink{classsrsran_1_1cyclic__prefix}{cyclic\+\_\+prefix}}}]{cp,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{dft\+\_\+size,  }\item[{\mbox{\hyperlink{classdouble}{double}}}]{center\+\_\+frequency\+\_\+\+Hz,  }\item[{\mbox{\hyperlink{classbool}{bool}}}]{is\+\_\+tx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructs the phase compensation look-\/up table. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em scs} & Subcarrier spacing. \\
\hline
\mbox{\texttt{ in}}  & {\em cp} & Cyclic Prefix. \\
\hline
\mbox{\texttt{ in}}  & {\em dft\+\_\+size} & DFT size. \\
\hline
\mbox{\texttt{ in}}  & {\em center\+\_\+frequency\+\_\+\+Hz} & Center frequency in Hz. \\
\hline
\mbox{\texttt{ in}}  & {\em is\+\_\+tx} & Set to true if the phase correction table is for transmission. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00054\ \ \ \{}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{double}\ sampling\_rate\_Hz\ =\ \mbox{\hyperlink{namespacesrsran_af7e1cfa828177b067334574244a06c8f}{to\_sampling\_rate\_Hz}}(scs,\ dft\_size);}
\DoxyCodeLine{00056\ \ \ \ \ srsran\_assert(std::isnormal(sampling\_rate\_Hz),}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ sampling\ rate\ from\ SCS\ \{\}\ kHz\ and\ DFT\ size\ \{\}."{}},}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}(scs),}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dft\_size);}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nslot\_per\_subframe}}\ =\ \mbox{\hyperlink{namespacesrsran_a45b408115d2fba72e768ef375c59da19}{get\_nof\_slots\_per\_subframe}}(scs);}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nsymb\_per\_slot}}\ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_aa1d2bd5d3008afda19c0949d241a73f7}{get\_nsymb\_per\_slot}}(cp);}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{double}\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sign\_two\_pi}}\ \ \ \ \ \ \ \ =\ ((\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_tx}})\ ?\ -\/1\ :\ 1)\ *\ 2.0\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{M\_PI}};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//\ For\ each\ symbol\ in\ a\ subframe.}}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ symbol\ =\ 0,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbol\_offset}}\ =\ 0;\ symbol\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nslot\_per\_subframe}}\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nsymb\_per\_slot}};\ ++symbol)\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \textcolor{comment}{//\ Add\ cyclic\ prefix\ length\ to\ the\ symbol\ offset.}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbol\_offset}}\ +=\ cp.get\_length(symbol,\ scs).to\_samples(sampling\_rate\_Hz);}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ time\ between\ the\ start\ of\ the\ subframe\ and\ the\ start\ of\ the\ symbol.}}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{start\_time\_s}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbol\_offset}})\ /\ sampling\_rate\_Hz;}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ phase\ in\ radians.}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbol\_phase}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sign\_two\_pi}}\ *\ center\_frequency\_Hz\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{start\_time\_s}};}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ phase\ compensation.}}
\DoxyCodeLine{00077\ \ \ \ \ \ \ coefficients.emplace\_back(\textcolor{keyword}{static\_cast<}cf\_t\textcolor{keyword}{>}(std::polar(1.0,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbol\_phase}})));}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \textcolor{comment}{//\ Advance\ the\ symbol\ size.}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbol\_offset}}\ +=\ dft\_size;}
\DoxyCodeLine{00081\ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1phase__compensation__lut_a767c0755e3324729c5737b9c38112efc}\label{classsrsran_1_1phase__compensation__lut_a767c0755e3324729c5737b9c38112efc} 
\index{srsran::phase\_compensation\_lut@{srsran::phase\_compensation\_lut}!get\_coefficient@{get\_coefficient}}
\index{get\_coefficient@{get\_coefficient}!srsran::phase\_compensation\_lut@{srsran::phase\_compensation\_lut}}
\doxysubsubsection{\texorpdfstring{get\_coefficient()}{get\_coefficient()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} srsran\+::phase\+\_\+compensation\+\_\+lut\+::get\+\_\+coefficient (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{symbol\+\_\+index }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Get the phase compensation for a symbol. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em symbol\+\_\+index} & Symbol index within a subframe. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The phase compensation coefficient for a given symbol within a subframe. 
\end{DoxyReturn}
\begin{DoxyRemark}{Remarks}
An assertion is triggered if the symbol index exceeds the number of symbols in a subframe. 
\end{DoxyRemark}

\begin{DoxyCode}{0}
\DoxyCodeLine{00089\ \ \ \{}
\DoxyCodeLine{00090\ \ \ \ \ srsran\_assert(symbol\_index\ <\ coefficients.size(),}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ symbol\ index\ within\ a\ subframe\ \{\}\ exceeds\ the\ number\ of\ symbols\ in\ the\ subframe\ \{\}."{}},}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ symbol\_index,}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients.size());}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return}\ coefficients[symbol\_index];}
\DoxyCodeLine{00095\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/phy/lower/modulation/phase\+\_\+compensation\+\_\+lut.\+h\end{DoxyCompactItemize}
