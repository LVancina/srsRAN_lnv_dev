\doxysection{srsran\+::srs\+\_\+cu\+\_\+cp\+::du\+\_\+processor\+\_\+repository Class Reference}
\hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository}{}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository}\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}


Inheritance diagram for srsran\+::srs\+\_\+cu\+\_\+cp\+::du\+\_\+processor\+\_\+repository\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dc/def/classsrsran_1_1srs__cu__cp_1_1du__processor__repository__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::srs\+\_\+cu\+\_\+cp\+::du\+\_\+processor\+\_\+repository\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d8/dcf/classsrsran_1_1srs__cu__cp_1_1du__processor__repository__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_af13ac9eed4926ffce6adc7a8284b7e15}{du\+\_\+processor\+\_\+repository}} (\mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1du__repository__config}{du\+\_\+repository\+\_\+config}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cfg\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_af2215466364233c1929c104565f7558e}{stop}} ()
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1f1ap__message__notifier}{f1ap\+\_\+message\+\_\+notifier}} $>$ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a3768e6b994c1d1405e423739b33b239d}{handle\+\_\+new\+\_\+du\+\_\+connection}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1f1ap__message__notifier}{f1ap\+\_\+message\+\_\+notifier}} $>$ f1ap\+\_\+tx\+\_\+pdu\+\_\+notifier) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Handles the start of a new DU connection. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a2d2159fe5eda98e8702888a09ce0b7c8}{handle\+\_\+du\+\_\+remove\+\_\+request}} (du\+\_\+index\+\_\+t du\+\_\+index) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Handles a remove request. The corresponding DU processor object will be removed. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__handler}{du\+\_\+handler}} \& \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_ad076f14797dafcd8c20ad7380329948b}{get\+\_\+du}} (du\+\_\+index\+\_\+t du\+\_\+index) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Get handler to a DU connected to the CU-\/\+CP. \end{DoxyCompactList}\item 
du\+\_\+index\+\_\+t \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a0bb419cce3d3153bedad41a557d64ba3}{find\+\_\+du}} (\mbox{\hyperlink{namespacesrsran_ae2a7787d776e7d6ee8959beb6b368286}{pci\+\_\+t}} pci) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Checks whether a cell with the specified PCI is served by any of the connected DUs. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_aeb95c4251a25226b15fe5ffb66242c8d}{handle\+\_\+paging\+\_\+message}} (\mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1cu__cp__paging__message}{cu\+\_\+cp\+\_\+paging\+\_\+message}} \&msg) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Handles a Paging message notification. \end{DoxyCompactList}\item 
ue\+\_\+index\+\_\+t \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a4420cbeced89a46fc984b558e44ed8b6}{handle\+\_\+ue\+\_\+index\+\_\+allocation\+\_\+request}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1nr__cell__global__id__t}{nr\+\_\+cell\+\_\+global\+\_\+id\+\_\+t}} \&nci) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Handles UE index allocation request for N2 handover at target g\+NB. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ngap__handover__resource__allocation__response}{ngap\+\_\+handover\+\_\+resource\+\_\+allocation\+\_\+response}} $>$ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a8f630f5c6c38bfe59b05e8c7f8ea80a8}{handle\+\_\+ngap\+\_\+handover\+\_\+request}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ngap__handover__request}{ngap\+\_\+handover\+\_\+request}} \&request) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Handles a handover request to start the ngap handover routine at the target CU. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a727acfde1c503bed67559223b54d2eac}{handle\+\_\+inactivity\+\_\+notification}} (du\+\_\+index\+\_\+t du\+\_\+index, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1cu__cp__inactivity__notification}{cu\+\_\+cp\+\_\+inactivity\+\_\+notification}} \&msg)
\item 
std\+::vector$<$ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1metrics__report_1_1du__info}{metrics\+\_\+report\+::du\+\_\+info}} $>$ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_affb2f82c359d08d04ad7c69947a3a01f}{handle\+\_\+du\+\_\+metrics\+\_\+report\+\_\+request}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Handle new metrics request for all the DU nodes connected to the CU-\/\+CP. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_af13ac9eed4926ffce6adc7a8284b7e15}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_af13ac9eed4926ffce6adc7a8284b7e15} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!du\_processor\_repository@{du\_processor\_repository}}
\index{du\_processor\_repository@{du\_processor\_repository}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{du\_processor\_repository()}{du\_processor\_repository()}}
{\footnotesize\ttfamily du\+\_\+processor\+\_\+repository\+::du\+\_\+processor\+\_\+repository (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1du__repository__config}{du\+\_\+repository\+\_\+config}}}]{cfg\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ cfg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cfg\_}}),\ logger(cfg.logger)}
\DoxyCodeLine{00061\ \{}
\DoxyCodeLine{00062\ \ \ f1ap\_ev\_notifier.connect\_du\_repository(*\textcolor{keyword}{this});}
\DoxyCodeLine{00063\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a0bb419cce3d3153bedad41a557d64ba3}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a0bb419cce3d3153bedad41a557d64ba3} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!find\_du@{find\_du}}
\index{find\_du@{find\_du}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{find\_du()}{find\_du()}}
{\footnotesize\ttfamily du\+\_\+index\+\_\+t du\+\_\+processor\+\_\+repository\+::find\+\_\+du (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_ae2a7787d776e7d6ee8959beb6b368286}{pci\+\_\+t}}}]{pci }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Checks whether a cell with the specified PCI is served by any of the connected DUs. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em The} & index of the DU serving the given PCI. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__f1c__handler_a35b974f3839743685f842f3b879d7311}{srsran\+::srs\+\_\+cu\+\_\+cp\+::cu\+\_\+cp\+\_\+f1c\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00185\ \{}
\DoxyCodeLine{00186\ \ \ du\_index\_t\ index\ =\ du\_index\_t::invalid;}
\DoxyCodeLine{00187\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classsrsran_1_1du}{du}}\ :\ du\_db)\ \{}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsrsran_1_1du}{du}}.second.du\_processor-\/>has\_cell(pci))}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsrsran_1_1du}{du}}.first;}
\DoxyCodeLine{00190\ \ \ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \textcolor{keywordflow}{return}\ index;}
\DoxyCodeLine{00193\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_ad076f14797dafcd8c20ad7380329948b}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_ad076f14797dafcd8c20ad7380329948b} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!get\_du@{get\_du}}
\index{get\_du@{get\_du}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{get\_du()}{get\_du()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__handler}{du\+\_\+handler}} \& du\+\_\+processor\+\_\+repository\+::get\+\_\+du (\begin{DoxyParamCaption}\item[{du\+\_\+index\+\_\+t}]{du\+\_\+index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Get handler to a DU connected to the CU-\/\+CP. 



Implements \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__f1c__handler_a413b9c9e7edf1e833fd4666247563807}{srsran\+::srs\+\_\+cu\+\_\+cp\+::cu\+\_\+cp\+\_\+f1c\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00196\ \{}
\DoxyCodeLine{00197\ \ \ srsran\_assert(du\_index\ !=\ du\_index\_t::invalid,\ \textcolor{stringliteral}{"{}Invalid\ du\_index=\{\}"{}},\ du\_index);}
\DoxyCodeLine{00198\ \ \ srsran\_assert(du\_db.find(du\_index)\ !=\ du\_db.end(),\ \textcolor{stringliteral}{"{}DU\ not\ found\ du\_index=\{\}"{}},\ du\_index);}
\DoxyCodeLine{00199\ \ \ \textcolor{keywordflow}{return}\ du\_db.at(du\_index);}
\DoxyCodeLine{00200\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_affb2f82c359d08d04ad7c69947a3a01f}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_affb2f82c359d08d04ad7c69947a3a01f} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!handle\_du\_metrics\_report\_request@{handle\_du\_metrics\_report\_request}}
\index{handle\_du\_metrics\_report\_request@{handle\_du\_metrics\_report\_request}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{handle\_du\_metrics\_report\_request()}{handle\_du\_metrics\_report\_request()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1metrics__report_1_1du__info}{metrics\+\_\+report\+::du\+\_\+info}} $>$ du\+\_\+processor\+\_\+repository\+::handle\+\_\+du\+\_\+metrics\+\_\+report\+\_\+request (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Handle new metrics request for all the DU nodes connected to the CU-\/\+CP. 



Implements \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__repository__metrics__handler_a31dd28befe6d7118ec7693ea3038cf24}{srsran\+::srs\+\_\+cu\+\_\+cp\+::du\+\_\+repository\+\_\+metrics\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00264\ \{}
\DoxyCodeLine{00265\ \ \ std::vector<metrics\_report::du\_info>\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\_reports}};}
\DoxyCodeLine{00266\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classsrsran_1_1du}{du}}\ :\ du\_db)\ \{}
\DoxyCodeLine{00267\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\_reports}}.emplace\_back(\mbox{\hyperlink{classsrsran_1_1du}{du}}.second.du\_processor-\/>get\_metrics\_handler().handle\_du\_metrics\_report\_request());}
\DoxyCodeLine{00268\ \ \ \}}
\DoxyCodeLine{00269\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\_reports}};}
\DoxyCodeLine{00270\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a2d2159fe5eda98e8702888a09ce0b7c8}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a2d2159fe5eda98e8702888a09ce0b7c8} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!handle\_du\_remove\_request@{handle\_du\_remove\_request}}
\index{handle\_du\_remove\_request@{handle\_du\_remove\_request}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{handle\_du\_remove\_request()}{handle\_du\_remove\_request()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} du\+\_\+processor\+\_\+repository\+::handle\+\_\+du\+\_\+remove\+\_\+request (\begin{DoxyParamCaption}\item[{du\+\_\+index\+\_\+t}]{du\+\_\+index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Handles a remove request. The corresponding DU processor object will be removed. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em du\+\_\+index} & The index of the DU processor object to delete. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__f1c__handler_a2c5ea14672ee6e964757a7e240114678}{srsran\+::srs\+\_\+cu\+\_\+cp\+::cu\+\_\+cp\+\_\+f1c\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00090\ \{}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ running.load(std::memory\_order\_acquire))\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00093\ \ \ \}}
\DoxyCodeLine{00094\ \ \ \mbox{\hyperlink{namespacesrsran_a7b1865b527be10b8c856e60871d2e2fe}{force\_blocking\_execute}}(}
\DoxyCodeLine{00095\ \ \ \ \ \ \ *cfg.cu\_cp.cu\_cp\_executor,}
\DoxyCodeLine{00096\ \ \ \ \ \ \ [\textcolor{keyword}{this},\ du\_index]()\ \{\ remove\_du\_impl(du\_index);\ \},}
\DoxyCodeLine{00097\ \ \ \ \ \ \ [\&]()\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}Failed\ to\ schedule\ DU\ removal\ task.\ Retrying..."{}});}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ std::this\_thread::sleep\_for(std::chrono::milliseconds(100));}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \});}
\DoxyCodeLine{00101\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a727acfde1c503bed67559223b54d2eac}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a727acfde1c503bed67559223b54d2eac} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!handle\_inactivity\_notification@{handle\_inactivity\_notification}}
\index{handle\_inactivity\_notification@{handle\_inactivity\_notification}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{handle\_inactivity\_notification()}{handle\_inactivity\_notification()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} du\+\_\+processor\+\_\+repository\+::handle\+\_\+inactivity\+\_\+notification (\begin{DoxyParamCaption}\item[{du\+\_\+index\+\_\+t}]{du\+\_\+index,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1cu__cp__inactivity__notification}{cu\+\_\+cp\+\_\+inactivity\+\_\+notification}} \&}]{msg }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00258\ \{}
\DoxyCodeLine{00259\ \ \ \textcolor{comment}{//\ Forward\ message\ to\ DU\ processor}}
\DoxyCodeLine{00260\ \ \ du\_db.at(du\_index).du\_processor-\/>handle\_inactivity\_notification(msg);}
\DoxyCodeLine{00261\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a3768e6b994c1d1405e423739b33b239d}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a3768e6b994c1d1405e423739b33b239d} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!handle\_new\_du\_connection@{handle\_new\_du\_connection}}
\index{handle\_new\_du\_connection@{handle\_new\_du\_connection}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{handle\_new\_du\_connection()}{handle\_new\_du\_connection()}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1f1ap__message__notifier}{f1ap\+\_\+message\+\_\+notifier}} $>$ du\+\_\+processor\+\_\+repository\+::handle\+\_\+new\+\_\+du\+\_\+connection (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1f1ap__message__notifier}{f1ap\+\_\+message\+\_\+notifier}} $>$}]{f1ap\+\_\+tx\+\_\+pdu\+\_\+notifier }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Handles the start of a new DU connection. 


\begin{DoxyParams}{Parameters}
{\em f1ap\+\_\+tx\+\_\+pdu\+\_\+notifier} & Notifier that the CU-\/\+CP will use to push F1\+AP Tx messages to the DU. Once this object goes out of scope, the DU connection will be closed. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Notifier that the F1-\/C will use to forward to the CU-\/\+CP received F1\+AP messages from the DU via F1-\/C. If the caller lets the returned object go out of scope, the DU connection will be closed. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1cu__cp__f1c__handler_a82c567a12c35ccfe00037cada3cdb2fa}{srsran\+::srs\+\_\+cu\+\_\+cp\+::cu\+\_\+cp\+\_\+f1c\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00078\ \{}
\DoxyCodeLine{00079\ \ \ du\_index\_t\ du\_index\ =\ add\_du(std::move(f1ap\_tx\_pdu\_notifier));}
\DoxyCodeLine{00080\ \ \ \textcolor{keywordflow}{if}\ (du\_index\ ==\ du\_index\_t::invalid)\ \{}
\DoxyCodeLine{00081\ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}Rejecting\ new\ DU\ connection.\ Cause:\ Failed\ to\ create\ a\ new\ DU."{}});}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00083\ \ \ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ logger.info(\textcolor{stringliteral}{"{}Added\ TNL\ connection\ to\ DU\ \{\}"{}},\ du\_index);}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{return}\ std::make\_unique<f1ap\_rx\_pdu\_notifier>(*\textcolor{keyword}{this},\ du\_index);}
\DoxyCodeLine{00087\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a8f630f5c6c38bfe59b05e8c7f8ea80a8}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a8f630f5c6c38bfe59b05e8c7f8ea80a8} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!handle\_ngap\_handover\_request@{handle\_ngap\_handover\_request}}
\index{handle\_ngap\_handover\_request@{handle\_ngap\_handover\_request}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{handle\_ngap\_handover\_request()}{handle\_ngap\_handover\_request()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1async__task}{async\+\_\+task}}$<$ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ngap__handover__resource__allocation__response}{ngap\+\_\+handover\+\_\+resource\+\_\+allocation\+\_\+response}} $>$ du\+\_\+processor\+\_\+repository\+::handle\+\_\+ngap\+\_\+handover\+\_\+request (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1ngap__handover__request}{ngap\+\_\+handover\+\_\+request}} \&}]{request }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Handles a handover request to start the ngap handover routine at the target CU. 



Implements \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__repository__ngap__handler_a37398506a571e6958896be1f4ad7c0b6}{srsran\+::srs\+\_\+cu\+\_\+cp\+::du\+\_\+repository\+\_\+ngap\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00248\ \{}
\DoxyCodeLine{00249\ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classsrsran_1_1du}{du}}\ =\ du\_db.at(get\_du\_index\_from\_ue\_index(request.ue\_index));}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__processor__mobility__handler}{du\_processor\_mobility\_handler}}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mob}}\ =\ \mbox{\hyperlink{classsrsran_1_1du}{du}}.get\_mobility\_handler();}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mob}}.handle\_ngap\_handover\_request(request);}
\DoxyCodeLine{00254\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_aeb95c4251a25226b15fe5ffb66242c8d}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_aeb95c4251a25226b15fe5ffb66242c8d} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!handle\_paging\_message@{handle\_paging\_message}}
\index{handle\_paging\_message@{handle\_paging\_message}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{handle\_paging\_message()}{handle\_paging\_message()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} du\+\_\+processor\+\_\+repository\+::handle\+\_\+paging\+\_\+message (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1cu__cp__paging__message}{cu\+\_\+cp\+\_\+paging\+\_\+message}} \&}]{msg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Handles a Paging message notification. 



Implements \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__repository__ngap__handler_a22ab317e5da27609140d5a88b5f172fc}{srsran\+::srs\+\_\+cu\+\_\+cp\+::du\+\_\+repository\+\_\+ngap\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00228\ \{}
\DoxyCodeLine{00229\ \ \ \textcolor{comment}{//\ Forward\ paging\ message\ to\ all\ DU\ processors}}
\DoxyCodeLine{00230\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classsrsran_1_1du}{du}}\ :\ du\_db)\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1du}{du}}.second.du\_processor-\/>get\_du\_processor\_paging\_handler().handle\_paging\_message(msg);}
\DoxyCodeLine{00232\ \ \ \}}
\DoxyCodeLine{00233\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a4420cbeced89a46fc984b558e44ed8b6}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_a4420cbeced89a46fc984b558e44ed8b6} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!handle\_ue\_index\_allocation\_request@{handle\_ue\_index\_allocation\_request}}
\index{handle\_ue\_index\_allocation\_request@{handle\_ue\_index\_allocation\_request}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{handle\_ue\_index\_allocation\_request()}{handle\_ue\_index\_allocation\_request()}}
{\footnotesize\ttfamily ue\+\_\+index\+\_\+t du\+\_\+processor\+\_\+repository\+::handle\+\_\+ue\+\_\+index\+\_\+allocation\+\_\+request (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1nr__cell__global__id__t}{nr\+\_\+cell\+\_\+global\+\_\+id\+\_\+t}} \&}]{cgi }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Handles UE index allocation request for N2 handover at target g\+NB. 



Implements \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__repository__ngap__handler_ad9c2f9149745106d344c5b5e20f5f07e}{srsran\+::srs\+\_\+cu\+\_\+cp\+::du\+\_\+repository\+\_\+ngap\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00236\ \{}
\DoxyCodeLine{00237\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classsrsran_1_1du}{du}}\ :\ du\_db)\ \{}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsrsran_1_1du}{du}}.second.du\_processor-\/>has\_cell(cgi))\ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsrsran_1_1du}{du}}.second.du\_processor-\/>get\_du\_processor\_ngap\_interface().allocate\_new\_ue\_index();}
\DoxyCodeLine{00240\ \ \ \ \ \}}
\DoxyCodeLine{00241\ \ \ \}}
\DoxyCodeLine{00242\ \ \ logger.debug(\textcolor{stringliteral}{"{}No\ DU\ with\ plmn=\{\}\ and\ cell\_id=\{\}\ found."{}},\ cgi.\mbox{\hyperlink{structsrsran_1_1nr__cell__global__id__t_af16f1d50512a75ccb02e83eed0d74ad6}{plmn}},\ cgi.\mbox{\hyperlink{structsrsran_1_1nr__cell__global__id__t_a9bc83a983c3060bc5cebb4d8d616a6f4}{nci}});}
\DoxyCodeLine{00243\ \ \ \textcolor{keywordflow}{return}\ ue\_index\_t::invalid;}
\DoxyCodeLine{00244\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_af2215466364233c1929c104565f7558e}\label{classsrsran_1_1srs__cu__cp_1_1du__processor__repository_af2215466364233c1929c104565f7558e} 
\index{srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}!stop@{stop}}
\index{stop@{stop}!srsran::srs\_cu\_cp::du\_processor\_repository@{srsran::srs\_cu\_cp::du\_processor\_repository}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} du\+\_\+processor\+\_\+repository\+::stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00066\ \{}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordflow}{if}\ (running.exchange(\textcolor{keyword}{false},\ std::memory\_order\_acq\_rel))\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00069\ \ \ \}}
\DoxyCodeLine{00070\ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ du\_db.empty())\ \{}
\DoxyCodeLine{00071\ \ \ \ \ du\_index\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\_idx}}\ =\ du\_db.begin()-\/>first;}
\DoxyCodeLine{00072\ \ \ \ \ remove\_du\_impl(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\_idx}});}
\DoxyCodeLine{00073\ \ \ \}}
\DoxyCodeLine{00074\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/cu\+\_\+cp/du\+\_\+processor/du\+\_\+processor\+\_\+repository.\+h\item 
lib/cu\+\_\+cp/du\+\_\+processor/du\+\_\+processor\+\_\+repository.\+cpp\end{DoxyCompactItemize}
