\doxysection{srsran\+::fapi\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder Class Reference}
\hypertarget{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{}\label{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}\index{srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}}


Helper class to fill in the DL SSB PDU parameters specified in SCF-\/222 v4.\+0 section 3.\+4.\+2.\+4.  




{\ttfamily \#include $<$message\+\_\+builders.\+h$>$}



Collaboration diagram for srsran\+::fapi\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=243pt]{d0/df8/classsrsran_1_1fapi_1_1dl__ssb__pdu__builder__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_ae2ac53870eaff9b93f836342e1abfcc4}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} (\mbox{\hyperlink{structsrsran_1_1fapi_1_1dl__ssb__pdu}{dl\+\_\+ssb\+\_\+pdu}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdu\+\_\+}})
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_aa57fed0eded0b8a5106c145628bc3ccf}{set\+\_\+basic\+\_\+parameters}} (\mbox{\hyperlink{namespacesrsran_ae2a7787d776e7d6ee8959beb6b368286}{pci\+\_\+t}} phys\+\_\+cell\+\_\+id, beta\+\_\+pss\+\_\+profile\+\_\+type beta\+\_\+pss\+\_\+profile\+\_\+nr, \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} ssb\+\_\+block\+\_\+index, \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1ssb__subcarrier__offset}{ssb\+\_\+subcarrier\+\_\+offset}}, \mbox{\hyperlink{classsrsran_1_1ssb__offset__to__pointA}{ssb\+\_\+offset\+\_\+to\+\_\+pointA}} ssb\+\_\+offset\+\_\+pointA)
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_aa73b39ea335a74644d7dfb2572b36b48}{set\+\_\+bch\+\_\+payload\+\_\+mac\+\_\+full}} (\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} bch\+\_\+payload)
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_a7b3e0a6d5690635f9a4de1f8d3930fcf}{set\+\_\+bch\+\_\+payload\+\_\+phy\+\_\+timing\+\_\+info}} (\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} bch\+\_\+payload)
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_a04136dc2bfdeb84b7b047463ad2458ea}{set\+\_\+bch\+\_\+payload\+\_\+phy\+\_\+full}} (\mbox{\hyperlink{namespacesrsran_a3c5416bf7ff59c183bb2047d936b55ef}{dmrs\+\_\+type\+A\+\_\+position}} dmrs\+\_\+type\+\_\+a\+\_\+position, \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} pdcch\+\_\+config\+\_\+sib1, \mbox{\hyperlink{classbool}{bool}} cell\+\_\+barred, \mbox{\hyperlink{classbool}{bool}} intra\+\_\+freq\+\_\+reselection)
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_ac34c73b33f3facaf8cc9e6065a56f985}{set\+\_\+maintenance\+\_\+v3\+\_\+basic\+\_\+parameters}} (\mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3e}{ssb\+\_\+pattern\+\_\+case}} case\+\_\+type, \mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\+\_\+spacing}} scs, \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} L\+\_\+max)
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_aa497f6bc4a634426a624c46821a598e5}{set\+\_\+maintenance\+\_\+v3\+\_\+tx\+\_\+power\+\_\+info}} (\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{power\+\_\+scaling\+\_\+ss\+\_\+pbch\+\_\+dB}}, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pss\+\_\+to\+\_\+sss\+\_\+ratio\+\_\+dB}})
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1tx__precoding__and__beamforming__pdu__builder}{tx\+\_\+precoding\+\_\+and\+\_\+beamforming\+\_\+pdu\+\_\+builder}} \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_acf71e96ec452adb36b317f554e4eb52c}{get\+\_\+tx\+\_\+precoding\+\_\+and\+\_\+beamforming\+\_\+pdu\+\_\+builder}} ()
\begin{DoxyCompactList}\small\item\em Returns a transmission precoding and beamforming PDU builder of this SSB PDU. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Helper class to fill in the DL SSB PDU parameters specified in SCF-\/222 v4.\+0 section 3.\+4.\+2.\+4. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_ae2ac53870eaff9b93f836342e1abfcc4}\label{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_ae2ac53870eaff9b93f836342e1abfcc4} 
\index{srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}!dl\_ssb\_pdu\_builder@{dl\_ssb\_pdu\_builder}}
\index{dl\_ssb\_pdu\_builder@{dl\_ssb\_pdu\_builder}!srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}}
\doxysubsubsection{\texorpdfstring{dl\_ssb\_pdu\_builder()}{dl\_ssb\_pdu\_builder()}}
{\footnotesize\ttfamily srsran\+::fapi\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1fapi_1_1dl__ssb__pdu}{dl\+\_\+ssb\+\_\+pdu}} \&}]{pdu\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ pdu(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdu\_}}),\ v3(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdu\_}}.ssb\_maintenance\_v3)}
\DoxyCodeLine{00088\ \ \ \{}
\DoxyCodeLine{00089\ \ \ \ \ v3.ss\_pbch\_block\_power\_scaling\ =\ std::numeric\_limits<\textcolor{keyword}{decltype}(v3.ss\_pbch\_block\_power\_scaling)>::min();}
\DoxyCodeLine{00090\ \ \ \ \ v3.beta\_pss\_profile\_sss\ \ \ \ \ \ \ \ =\ std::numeric\_limits<\textcolor{keyword}{decltype}(v3.beta\_pss\_profile\_sss)>::min();}
\DoxyCodeLine{00091\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_acf71e96ec452adb36b317f554e4eb52c}\label{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_acf71e96ec452adb36b317f554e4eb52c} 
\index{srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}!get\_tx\_precoding\_and\_beamforming\_pdu\_builder@{get\_tx\_precoding\_and\_beamforming\_pdu\_builder}}
\index{get\_tx\_precoding\_and\_beamforming\_pdu\_builder@{get\_tx\_precoding\_and\_beamforming\_pdu\_builder}!srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}}
\doxysubsubsection{\texorpdfstring{get\_tx\_precoding\_and\_beamforming\_pdu\_builder()}{get\_tx\_precoding\_and\_beamforming\_pdu\_builder()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1fapi_1_1tx__precoding__and__beamforming__pdu__builder}{tx\+\_\+precoding\+\_\+and\+\_\+beamforming\+\_\+pdu\+\_\+builder}} srsran\+::fapi\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder\+::get\+\_\+tx\+\_\+precoding\+\_\+and\+\_\+beamforming\+\_\+pdu\+\_\+builder (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Returns a transmission precoding and beamforming PDU builder of this SSB PDU. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00208\ \ \ \{}
\DoxyCodeLine{00209\ \ \ \ \ tx\_precoding\_and\_beamforming\_pdu\_builder\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{builder}}(pdu.precoding\_and\_beamforming);}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{builder}};}
\DoxyCodeLine{00212\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_aa57fed0eded0b8a5106c145628bc3ccf}\label{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_aa57fed0eded0b8a5106c145628bc3ccf} 
\index{srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}!set\_basic\_parameters@{set\_basic\_parameters}}
\index{set\_basic\_parameters@{set\_basic\_parameters}!srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}}
\doxysubsubsection{\texorpdfstring{set\_basic\_parameters()}{set\_basic\_parameters()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& srsran\+::fapi\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder\+::set\+\_\+basic\+\_\+parameters (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_ae2a7787d776e7d6ee8959beb6b368286}{pci\+\_\+t}}}]{phys\+\_\+cell\+\_\+id,  }\item[{beta\+\_\+pss\+\_\+profile\+\_\+type}]{beta\+\_\+pss\+\_\+profile\+\_\+nr,  }\item[{\mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}}}]{ssb\+\_\+block\+\_\+index,  }\item[{\mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}}}]{ssb\+\_\+subcarrier\+\_\+offset,  }\item[{\mbox{\hyperlink{classsrsran_1_1ssb__offset__to__pointA}{ssb\+\_\+offset\+\_\+to\+\_\+pointA}}}]{ssb\+\_\+offset\+\_\+pointA }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the basic parameters for the fields of the SSB/\+PBCH PDU. \begin{DoxyNote}{Note}
These parameters are specified in SCF-\/222 v4.\+0 section 3.\+4.\+2.\+4, in table SSB/\+PBCH PDU. 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{00100\ \ \ \{}
\DoxyCodeLine{00101\ \ \ \ \ pdu.phys\_cell\_id\ \ \ \ \ \ \ \ \ \ =\ phys\_cell\_id;}
\DoxyCodeLine{00102\ \ \ \ \ pdu.beta\_pss\_profile\_nr\ \ \ =\ beta\_pss\_profile\_nr;}
\DoxyCodeLine{00103\ \ \ \ \ pdu.ssb\_block\_index\ \ \ \ \ \ \ =\ ssb\_block\_index;}
\DoxyCodeLine{00104\ \ \ \ \ pdu.ssb\_subcarrier\_offset\ =\ ssb\_subcarrier\_offset;}
\DoxyCodeLine{00105\ \ \ \ \ pdu.ssb\_offset\_pointA\ \ \ \ \ =\ ssb\_offset\_pointA;}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00108\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_aa73b39ea335a74644d7dfb2572b36b48}\label{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_aa73b39ea335a74644d7dfb2572b36b48} 
\index{srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}!set\_bch\_payload\_mac\_full@{set\_bch\_payload\_mac\_full}}
\index{set\_bch\_payload\_mac\_full@{set\_bch\_payload\_mac\_full}!srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}}
\doxysubsubsection{\texorpdfstring{set\_bch\_payload\_mac\_full()}{set\_bch\_payload\_mac\_full()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& srsran\+::fapi\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder\+::set\+\_\+bch\+\_\+payload\+\_\+mac\+\_\+full (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}}}]{bch\+\_\+payload }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the BCH payload configured by the MAC and returns a reference to the builder. \begin{DoxyNote}{Note}
Use this function when the MAC generates the full PBCH payload. 

These parameters are specified in SCF-\/222 v4.\+0 section 3.\+4.\+2.\+4, in table MAC generated MIB PDU. 

This function assumes that given bch\+\_\+payload value is codified as\+: a0,a1,a2,...,a29,a30,a31, with the most significant bit being the leftmost (in this case a0 in position 31 of the uint32\+\_\+t). 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{00116\ \ \ \{}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{comment}{//\ Configure\ the\ BCH\ payload\ as\ fully\ generated\ by\ the\ MAC.}}
\DoxyCodeLine{00118\ \ \ \ \ pdu.bch\_payload\_flag\ \ \ \ \ \ \ \ =\ bch\_payload\_type::mac\_full;}
\DoxyCodeLine{00119\ \ \ \ \ pdu.bch\_payload.bch\_payload\ =\ bch\_payload;}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00122\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_a04136dc2bfdeb84b7b047463ad2458ea}\label{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_a04136dc2bfdeb84b7b047463ad2458ea} 
\index{srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}!set\_bch\_payload\_phy\_full@{set\_bch\_payload\_phy\_full}}
\index{set\_bch\_payload\_phy\_full@{set\_bch\_payload\_phy\_full}!srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}}
\doxysubsubsection{\texorpdfstring{set\_bch\_payload\_phy\_full()}{set\_bch\_payload\_phy\_full()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& srsran\+::fapi\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder\+::set\+\_\+bch\+\_\+payload\+\_\+phy\+\_\+full (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a3c5416bf7ff59c183bb2047d936b55ef}{dmrs\+\_\+type\+A\+\_\+position}}}]{dmrs\+\_\+type\+\_\+a\+\_\+position,  }\item[{\mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}}}]{pdcch\+\_\+config\+\_\+sib1,  }\item[{\mbox{\hyperlink{classbool}{bool}}}]{cell\+\_\+barred,  }\item[{\mbox{\hyperlink{classbool}{bool}}}]{intra\+\_\+freq\+\_\+reselection }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the BCH payload configured by the PHY and returns a reference to the builder. \begin{DoxyNote}{Note}
Use this function when the PHY generates the full PBCH payload. 

These parameters are specified in SCF-\/222 v4.\+0 section 3.\+4.\+2.\+4, in table PHY generated MIB PDU. 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{00149\ \ \ \{}
\DoxyCodeLine{00150\ \ \ \ \ pdu.bch\_payload\_flag\ =\ bch\_payload\_type::phy\_full;}
\DoxyCodeLine{00151\ \ \ \ \ pdu.bch\_payload.phy\_mib\_pdu.dmrs\_typeA\_position\ =}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ (dmrs\_type\_a\_position\ ==\ dmrs\_typeA\_position::pos2)\ ?\ dmrs\_typeA\_pos::pos2\ :\ dmrs\_typeA\_pos::pos3;}
\DoxyCodeLine{00153\ \ \ \ \ pdu.bch\_payload.phy\_mib\_pdu.pdcch\_config\_sib1\ \ \ \ \ =\ pdcch\_config\_sib1;}
\DoxyCodeLine{00154\ \ \ \ \ pdu.bch\_payload.phy\_mib\_pdu.cell\_barred\ \ \ \ \ \ \ \ \ \ \ =\ cell\_barred;}
\DoxyCodeLine{00155\ \ \ \ \ pdu.bch\_payload.phy\_mib\_pdu.intrafreq\_reselection\ =\ intra\_freq\_reselection;}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00158\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_a7b3e0a6d5690635f9a4de1f8d3930fcf}\label{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_a7b3e0a6d5690635f9a4de1f8d3930fcf} 
\index{srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}!set\_bch\_payload\_phy\_timing\_info@{set\_bch\_payload\_phy\_timing\_info}}
\index{set\_bch\_payload\_phy\_timing\_info@{set\_bch\_payload\_phy\_timing\_info}!srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}}
\doxysubsubsection{\texorpdfstring{set\_bch\_payload\_phy\_timing\_info()}{set\_bch\_payload\_phy\_timing\_info()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& srsran\+::fapi\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder\+::set\+\_\+bch\+\_\+payload\+\_\+phy\+\_\+timing\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}}}]{bch\+\_\+payload }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the BCH payload and returns a reference to the builder. PHY configures the timing PBCH bits. \begin{DoxyNote}{Note}
Use this function when the PHY generates the timing PBCH information. 

These parameters are specified in SCF-\/222 v4.\+0 section 3.\+4.\+2.\+4, in table MAC generated MIB PDU. 

This function assumes that given bch\+\_\+payload value is codified as\+: 0,0,0,0,0,0,0,0,a0,a1,a2,...,a21,a22,a23, with the most significant bit being the leftmost (in this case a0 in position 24 of the uint32\+\_\+t). 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{00130\ \ \ \{}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{MAX\_SIZE}}\ =\ (1U\ <<\ 24U);}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ srsran\_assert(bch\_payload\ <\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{MAX\_SIZE}},\ \textcolor{stringliteral}{"{}BCH\ payload\ value\ out\ of\ bounds"{}});}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ pdu.bch\_payload\_flag\ =\ bch\_payload\_type::phy\_timing\_info;}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{comment}{//\ Clear\ unused\ bits\ in\ the\ high\ part\ of\ the\ payload.}}
\DoxyCodeLine{00137\ \ \ \ \ pdu.bch\_payload.bch\_payload\ =\ bch\_payload\ \&\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{MAX\_SIZE}}\ -\/\ 1);}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00140\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_ac34c73b33f3facaf8cc9e6065a56f985}\label{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_ac34c73b33f3facaf8cc9e6065a56f985} 
\index{srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}!set\_maintenance\_v3\_basic\_parameters@{set\_maintenance\_v3\_basic\_parameters}}
\index{set\_maintenance\_v3\_basic\_parameters@{set\_maintenance\_v3\_basic\_parameters}!srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}}
\doxysubsubsection{\texorpdfstring{set\_maintenance\_v3\_basic\_parameters()}{set\_maintenance\_v3\_basic\_parameters()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& srsran\+::fapi\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder\+::set\+\_\+maintenance\+\_\+v3\+\_\+basic\+\_\+parameters (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a4b8eb97251264b1aee7123a8765e1d3e}{ssb\+\_\+pattern\+\_\+case}}}]{case\+\_\+type,  }\item[{\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\+\_\+spacing}}}]{scs,  }\item[{\mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}}}]{L\+\_\+max }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the maintenance v3 basic parameters and returns a reference to the builder. \begin{DoxyNote}{Note}
These parameters are specified in SCF-\/222 v4.\+0 section 3.\+4.\+2.\+4, in table SSB/\+PBCH PDU maintenance FAPIv3. 

ssb\+Pdu\+Index field is automatically filled when adding a new SSB PDU to the DL TTI request message. 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{00165\ \ \ \{}
\DoxyCodeLine{00166\ \ \ \ \ v3.case\_type\ =\ case\_type;}
\DoxyCodeLine{00167\ \ \ \ \ v3.scs\ \ \ \ \ \ \ =\ scs;}
\DoxyCodeLine{00168\ \ \ \ \ v3.L\_max\ \ \ \ \ =\ L\_max;}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00171\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_aa497f6bc4a634426a624c46821a598e5}\label{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder_aa497f6bc4a634426a624c46821a598e5} 
\index{srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}!set\_maintenance\_v3\_tx\_power\_info@{set\_maintenance\_v3\_tx\_power\_info}}
\index{set\_maintenance\_v3\_tx\_power\_info@{set\_maintenance\_v3\_tx\_power\_info}!srsran::fapi::dl\_ssb\_pdu\_builder@{srsran::fapi::dl\_ssb\_pdu\_builder}}
\doxysubsubsection{\texorpdfstring{set\_maintenance\_v3\_tx\_power\_info()}{set\_maintenance\_v3\_tx\_power\_info()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1fapi_1_1dl__ssb__pdu__builder}{dl\+\_\+ssb\+\_\+pdu\+\_\+builder}} \& srsran\+::fapi\+::dl\+\_\+ssb\+\_\+pdu\+\_\+builder\+::set\+\_\+maintenance\+\_\+v3\+\_\+tx\+\_\+power\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$}]{power\+\_\+scaling\+\_\+ss\+\_\+pbch\+\_\+dB,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$}]{pss\+\_\+to\+\_\+sss\+\_\+ratio\+\_\+dB }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the SSB power information and returns a reference to the builder. \begin{DoxyNote}{Note}
These parameters are specified in SCF-\/222 v4.\+0 section 3.\+4.\+2.\+4, in table SSB/\+PBCH PDU maintenance FAPIv3. 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{00177\ \ \ \{}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{comment}{//\ Power\ scaling\ in\ SS-\/PBCH\ in\ hundredths\ of\ dBs.}}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_block\_power}}\ =\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{power\_scaling\_ss\_pbch\_dB}})\ ?\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{power\_scaling\_ss\_pbch\_dB}}.value()\ *\ 100)\ :\ -\/32768;}
\DoxyCodeLine{00180\ \ \ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_block\_power}}\ <=\ std::numeric\_limits<\textcolor{keyword}{decltype}(v3.ss\_pbch\_block\_power\_scaling)>::max(),}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SS\ PBCH\ block\ power\ scaling\ (\{\})\ exceeds\ the\ maximum\ (\{\})."{}},}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_block\_power}},}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<\textcolor{keyword}{decltype}(v3.ss\_pbch\_block\_power\_scaling)>::max());}
\DoxyCodeLine{00184\ \ \ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_block\_power}}\ >=\ std::numeric\_limits<\textcolor{keyword}{decltype}(v3.ss\_pbch\_block\_power\_scaling)>::min(),}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SS\ PBCH\ block\ power\ scaling\ (\{\})\ does\ not\ reach\ the\ minimum\ (\{\})."{}},}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_block\_power}},}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<\textcolor{keyword}{decltype}(v3.ss\_pbch\_block\_power\_scaling)>::min());}
\DoxyCodeLine{00188\ \ \ \ \ v3.ss\_pbch\_block\_power\_scaling\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{decltype}}(v3.ss\_pbch\_block\_power\_scaling)\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_block\_power}});}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{comment}{//\ SSS\ to\ PSS\ ratio\ in\ thousandths\ of\ dBs.}}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordtype}{int}\ beta\_pss\ =\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pss\_to\_sss\_ratio\_dB}})\ ?\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pss\_to\_sss\_ratio\_dB}}.value()\ *\ 1000)\ :\ -\/32768;}
\DoxyCodeLine{00192\ \ \ \ \ srsran\_assert(beta\_pss\ <=\ std::numeric\_limits<\textcolor{keyword}{decltype}(v3.beta\_pss\_profile\_sss)>::max(),}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}PSS\ to\ SSS\ ratio\ (\{\})\ exceeds\ the\ maximum\ (\{\})."{}},}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ beta\_pss,}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<\textcolor{keyword}{decltype}(v3.beta\_pss\_profile\_sss)>::max());}
\DoxyCodeLine{00196\ \ \ \ \ srsran\_assert(beta\_pss\ >=\ std::numeric\_limits<\textcolor{keyword}{decltype}(v3.beta\_pss\_profile\_sss)>::min(),}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}PSS\ to\ SSS\ ratio\ (\{\})\ does\ not\ reach\ the\ minimum\ (\{\})."{}},}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ beta\_pss,}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<\textcolor{keyword}{decltype}(v3.beta\_pss\_profile\_sss)>::min());}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ v3.beta\_pss\_profile\_sss\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{decltype}}(v3.beta\_pss\_profile\_sss)\textcolor{keyword}{>}(beta\_pss);}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00204\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/srsran/fapi/message\+\_\+builders.\+h\end{DoxyCompactItemize}
