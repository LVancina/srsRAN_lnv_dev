\doxysection{srsran\+::ldpc\+\_\+encoder\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1ldpc__encoder__impl}{}\label{classsrsran_1_1ldpc__encoder__impl}\index{srsran::ldpc\_encoder\_impl@{srsran::ldpc\_encoder\_impl}}


Template LDPC encoder.  




{\ttfamily \#include $<$ldpc\+\_\+encoder\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::ldpc\+\_\+encoder\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/d22/classsrsran_1_1ldpc__encoder__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::ldpc\+\_\+encoder\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d5d/classsrsran_1_1ldpc__encoder__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_aa11bd104dace935acc6e43295a5fe56f}{encode}} (\mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\+\_\+buffer}} \&output, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\+\_\+buffer}} \&input, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1codeblock__metadata_1_1tb__common__metadata}{codeblock\+\_\+metadata\+::tb\+\_\+common\+\_\+metadata}} \&cfg) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Encodes a message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1ldpc__encoder}{srsran\+::ldpc\+\_\+encoder}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}ldpc\+\_\+encoder} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1ldpc__encoder__impl_a459fc063f64bd9f8b9f8e1d42c301f5c}\label{classsrsran_1_1ldpc__encoder__impl_a459fc063f64bd9f8b9f8e1d42c301f5c} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ldpc__graph__impl}{ldpc\+\_\+graph\+\_\+impl}} \texorpdfstring{$\ast$}{*} {\bfseries current\+\_\+graph} = \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nullptr}}
\begin{DoxyCompactList}\small\item\em Pointer to the Tanner graph (\texorpdfstring{$\sim$}{\string~} parity check matrix) used by the encoding algorithm. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1ldpc__encoder__impl_aececcf8a4093ab21ecafe1d6f71e0024}\label{classsrsran_1_1ldpc__encoder__impl_aececcf8a4093ab21ecafe1d6f71e0024} 
uint16\+\_\+t {\bfseries lifting\+\_\+size} = 2
\begin{DoxyCompactList}\small\item\em Lifting size as a natural number (as opposed to an element from \doxylink{namespacesrsran_1_1ldpc_aa8225b08a82fdb2faf7642e2a292f85f}{srsran\+::ldpc\+::lifting\+\_\+size\+\_\+t}). \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1ldpc__encoder__impl_a84d42ba12feb80b775ba2a4f53edc102}\label{classsrsran_1_1ldpc__encoder__impl_a84d42ba12feb80b775ba2a4f53edc102} 
uint16\+\_\+t {\bfseries bg\+\_\+\+N\+\_\+full} = 68
\begin{DoxyCompactList}\small\item\em Total number of base graph variable nodes in the current graph. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1ldpc__encoder__impl_aebcd72f8fea59570625e93e24a43ca81}\label{classsrsran_1_1ldpc__encoder__impl_aebcd72f8fea59570625e93e24a43ca81} 
uint16\+\_\+t {\bfseries bg\+\_\+\+N\+\_\+short} = 66
\begin{DoxyCompactList}\small\item\em Number of base graph variable nodes after shortening. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1ldpc__encoder__impl_ae71685d046e81e1980293263d255dc12}\label{classsrsran_1_1ldpc__encoder__impl_ae71685d046e81e1980293263d255dc12} 
uint16\+\_\+t {\bfseries bg\+\_\+M} = 46
\begin{DoxyCompactList}\small\item\em Number of base graph check nodes. \end{DoxyCompactList}\item 
\Hypertarget{classsrsran_1_1ldpc__encoder__impl_a80f31bd630c05fc2105a8836f761aed6}\label{classsrsran_1_1ldpc__encoder__impl_a80f31bd630c05fc2105a8836f761aed6} 
uint16\+\_\+t {\bfseries bg\+\_\+K} = 22
\begin{DoxyCompactList}\small\item\em Number of base graph variable nodes corresponding to information bits. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_a1001c4f739bafd34ddd925cb148665cf}{codeblock\+\_\+length}} = 52
\begin{DoxyCompactList}\small\item\em Number of encoded bits needed to fill the output vector. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1ldpc__encoder__impl_a2a66846209c2a5033bcb1aa9c8d4f84f}\label{classsrsran_1_1ldpc__encoder__impl_a2a66846209c2a5033bcb1aa9c8d4f84f} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{constexpr}} \mbox{\hyperlink{classunsigned}{unsigned}} {\bfseries bg\+\_\+hr\+\_\+parity\+\_\+nodes} = 4
\begin{DoxyCompactList}\small\item\em Number of base graph parity nodes in the high-\/rate region. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Template LDPC encoder. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ldpc__encoder__impl_aa11bd104dace935acc6e43295a5fe56f}\label{classsrsran_1_1ldpc__encoder__impl_aa11bd104dace935acc6e43295a5fe56f} 
\index{srsran::ldpc\_encoder\_impl@{srsran::ldpc\_encoder\_impl}!encode@{encode}}
\index{encode@{encode}!srsran::ldpc\_encoder\_impl@{srsran::ldpc\_encoder\_impl}}
\doxysubsubsection{\texorpdfstring{encode()}{encode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} ldpc\+\_\+encoder\+\_\+impl\+::encode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\+\_\+buffer}} \&}]{output,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\+\_\+buffer}} \&}]{input,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1codeblock__metadata_1_1tb__common__metadata}{codeblock\+\_\+metadata\+::tb\+\_\+common\+\_\+metadata}} \&}]{cfg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Encodes a message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em output} & Resulting codeblock. \\
\hline
\mbox{\texttt{ in}}  & {\em input} & Message\+: original information bits, with the filler bits (if any) set to zero. \\
\hline
\mbox{\texttt{ in}}  & {\em cfg} & Encoder configuration for the current codeblock. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
The length of the output codeblock is deduced from the size of parameter {\ttfamily output}. 
\end{DoxyNote}


Implements \mbox{\hyperlink{classsrsran_1_1ldpc__encoder_a5f161e93900a1774f87fa4037cadfb72}{srsran\+::ldpc\+\_\+encoder}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00047\ \{}
\DoxyCodeLine{00048\ \ \ init(cfg);}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ uint16\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{message\_length}}\ \ \ \ =\ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_a80f31bd630c05fc2105a8836f761aed6}{bg\_K}}\ *\ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_aececcf8a4093ab21ecafe1d6f71e0024}{lifting\_size}};}
\DoxyCodeLine{00051\ \ \ uint16\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_output\_length}}\ =\ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_aebcd72f8fea59570625e93e24a43ca81}{bg\_N\_short}}\ *\ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_aececcf8a4093ab21ecafe1d6f71e0024}{lifting\_size}};}
\DoxyCodeLine{00052\ \ \ srsran\_assert(input.\mbox{\hyperlink{classsrsran_1_1bit__buffer_a1fb9f58eca152546267cb24e18f9b6f0}{size}}()\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{message\_length}},}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Input\ size\ (\{\})\ and\ message\ length\ (\{\})\ must\ be\ equal"{}},}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ input.\mbox{\hyperlink{classsrsran_1_1bit__buffer_a1fb9f58eca152546267cb24e18f9b6f0}{size}}(),}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{message\_length}});}
\DoxyCodeLine{00056\ \ \ srsran\_assert(output.\mbox{\hyperlink{classsrsran_1_1bit__buffer_a1fb9f58eca152546267cb24e18f9b6f0}{size}}()\ <=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_output\_length}},}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Output\ size\ (\{\})\ must\ be\ equal\ to\ or\ greater\ than\ \{\}"{}},}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output.\mbox{\hyperlink{classsrsran_1_1bit__buffer_a1fb9f58eca152546267cb24e18f9b6f0}{size}}(),}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_output\_length}});}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \textcolor{comment}{//\ The\ minimum\ codeblock\ length\ is\ message\_length\ +\ four\ times\ the\ lifting\ size}}
\DoxyCodeLine{00062\ \ \ \textcolor{comment}{//\ (that\ is,\ the\ length\ of\ the\ high-\/rate\ region).}}
\DoxyCodeLine{00063\ \ \ uint16\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{min\_codeblock\_length}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{message\_length}}\ +\ 4\ *\ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_aececcf8a4093ab21ecafe1d6f71e0024}{lifting\_size}};}
\DoxyCodeLine{00064\ \ \ \textcolor{comment}{//\ The\ encoder\ works\ with\ at\ least\ min\_codeblock\_length\ bits.\ Recall\ that\ the\ encoder\ also\ shortens}}
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ the\ codeblock\ by\ 2\ *\ lifting\ size\ before\ returning\ it\ as\ output.}}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_a1001c4f739bafd34ddd925cb148665cf}{codeblock\_length}}\ =\ std::max(output.\mbox{\hyperlink{classsrsran_1_1bit__buffer_a1fb9f58eca152546267cb24e18f9b6f0}{size}}()\ +\ 2UL\ *\ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_aececcf8a4093ab21ecafe1d6f71e0024}{lifting\_size}},\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{min\_codeblock\_length}}));}
\DoxyCodeLine{00067\ \ \ \textcolor{comment}{//\ The\ encoder\ works\ with\ a\ codeblock\ length\ that\ is\ a\ multiple\ of\ the\ lifting\ size.}}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_a1001c4f739bafd34ddd925cb148665cf}{codeblock\_length}}\ \%\ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_aececcf8a4093ab21ecafe1d6f71e0024}{lifting\_size}}\ !=\ 0)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_a1001c4f739bafd34ddd925cb148665cf}{codeblock\_length}}\ =\ (\mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_a1001c4f739bafd34ddd925cb148665cf}{codeblock\_length}}\ /\ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_aececcf8a4093ab21ecafe1d6f71e0024}{lifting\_size}}\ +\ 1)\ *\ \mbox{\hyperlink{classsrsran_1_1ldpc__encoder__impl_aececcf8a4093ab21ecafe1d6f71e0024}{lifting\_size}};}
\DoxyCodeLine{00070\ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ load\_input(input);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ preprocess\_systematic\_bits();}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ encode\_high\_rate();}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ encode\_ext\_region();}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ write\_codeblock(output);}
\DoxyCodeLine{00081\ \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\Hypertarget{classsrsran_1_1ldpc__encoder__impl_a1001c4f739bafd34ddd925cb148665cf}\label{classsrsran_1_1ldpc__encoder__impl_a1001c4f739bafd34ddd925cb148665cf} 
\index{srsran::ldpc\_encoder\_impl@{srsran::ldpc\_encoder\_impl}!codeblock\_length@{codeblock\_length}}
\index{codeblock\_length@{codeblock\_length}!srsran::ldpc\_encoder\_impl@{srsran::ldpc\_encoder\_impl}}
\doxysubsubsection{\texorpdfstring{codeblock\_length}{codeblock\_length}}
{\footnotesize\ttfamily uint16\+\_\+t srsran\+::ldpc\+\_\+encoder\+\_\+impl\+::codeblock\+\_\+length = 52\hspace{0.3cm}{\ttfamily [protected]}}



Number of encoded bits needed to fill the output vector. 

Instead of computing all the variable nodes, the encoder can work with just enough bits to fill the vector returned by the \doxylink{classsrsran_1_1ldpc__encoder__impl_aa11bd104dace935acc6e43295a5fe56f}{ldpc\+\_\+encoder\+\_\+impl\+::encode} function. It is a multiple of the lifting size. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/channel\+\_\+coding/ldpc/\mbox{\hyperlink{ldpc__encoder__impl_8h}{ldpc\+\_\+encoder\+\_\+impl.\+h}}\item 
lib/phy/upper/channel\+\_\+coding/ldpc/ldpc\+\_\+encoder\+\_\+impl.\+cpp\end{DoxyCompactItemize}
