\doxysection{srsran\+::rx\+\_\+buffer\+\_\+codeblock\+\_\+pool Class Reference}
\hypertarget{classsrsran_1_1rx__buffer__codeblock__pool}{}\label{classsrsran_1_1rx__buffer__codeblock__pool}\index{srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}}


Manages a codeblock buffer pool.  




{\ttfamily \#include $<$rx\+\_\+buffer\+\_\+codeblock\+\_\+pool.\+h$>$}



Collaboration diagram for srsran\+::rx\+\_\+buffer\+\_\+codeblock\+\_\+pool\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=251pt]{d9/d9a/classsrsran_1_1rx__buffer__codeblock__pool__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1rx__buffer__codeblock__pool_a9b1ebc3487275ad00de3bd6f7ab5632c}{rx\+\_\+buffer\+\_\+codeblock\+\_\+pool}} (\mbox{\hyperlink{classunsigned}{unsigned}} nof\+\_\+codeblocks, \mbox{\hyperlink{classunsigned}{unsigned}} max\+\_\+codeblock\+\_\+size, \mbox{\hyperlink{classbool}{bool}} external\+\_\+soft\+\_\+bits)
\begin{DoxyCompactList}\small\item\em Creates a receive buffer codeblock pool. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classunsigned}{unsigned}} $>$ \mbox{\hyperlink{classsrsran_1_1rx__buffer__codeblock__pool_a9b6fc3bd98517618c82ca8adc38e0fba}{reserve}} ()
\begin{DoxyCompactList}\small\item\em Reserves a codeblock buffer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1rx__buffer__codeblock__pool_a609138db98a64e30bd8e6645e1100ef4}{free}} (\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\+\_\+id}})
\begin{DoxyCompactList}\small\item\em Frees a codeblock buffer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1log__likelihood__ratio}{log\+\_\+likelihood\+\_\+ratio}} $>$ \mbox{\hyperlink{classsrsran_1_1rx__buffer__codeblock__pool_acf5bd088e8b50a6480da3d5b2ae86133}{get\+\_\+soft\+\_\+bits}} (\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\+\_\+id}})
\begin{DoxyCompactList}\small\item\em Gets a codeblock soft-\/bit buffer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\+\_\+buffer}} \& \mbox{\hyperlink{classsrsran_1_1rx__buffer__codeblock__pool_ada07935e5406d44d4c2ac26b1718f20a}{get\+\_\+data\+\_\+bits}} (\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\+\_\+id}})
\begin{DoxyCompactList}\small\item\em Gets a codeblock data-\/bit buffer. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Manages a codeblock buffer pool. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1rx__buffer__codeblock__pool_a9b1ebc3487275ad00de3bd6f7ab5632c}\label{classsrsran_1_1rx__buffer__codeblock__pool_a9b1ebc3487275ad00de3bd6f7ab5632c} 
\index{srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}!rx\_buffer\_codeblock\_pool@{rx\_buffer\_codeblock\_pool}}
\index{rx\_buffer\_codeblock\_pool@{rx\_buffer\_codeblock\_pool}!srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}}
\doxysubsubsection{\texorpdfstring{rx\_buffer\_codeblock\_pool()}{rx\_buffer\_codeblock\_pool()}}
{\footnotesize\ttfamily srsran\+::rx\+\_\+buffer\+\_\+codeblock\+\_\+pool\+::rx\+\_\+buffer\+\_\+codeblock\+\_\+pool (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{nof\+\_\+codeblocks,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{max\+\_\+codeblock\+\_\+size,  }\item[{\mbox{\hyperlink{classbool}{bool}}}]{external\+\_\+soft\+\_\+bits }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Creates a receive buffer codeblock pool. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em nof\+\_\+codeblocks} & Indicates the maximum number of codeblocks. \\
\hline
\mbox{\texttt{ in}}  & {\em max\+\_\+codeblock\+\_\+size} & Indicates the maximum codeblock size. \\
\hline
\mbox{\texttt{ in}}  & {\em external\+\_\+soft\+\_\+bits} & Set to true to indicate that soft bits are not stored in the buffer. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00064\ \ \ \ \ free\_list(nof\_codeblocks)}
\DoxyCodeLine{00065\ \ \ \{}
\DoxyCodeLine{00066\ \ \ \ \ entries.resize(nof\_codeblocks);}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_id}}\ =\ 0;}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{for}\ (entry\&\ e\ :\ entries)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ e.soft\_bits.resize(external\_soft\_bits\ ?\ 0\ :\ max\_codeblock\_size);}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ maximum\ number\ of\ data\ bits\ is}}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \textcolor{comment}{//\ max\_codeblock\_size\ *\ max(BG\ coding\ rate)\ =\ max\_codeblock\_size\ *\ (1/3)}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ e.data\_bits.resize(\mbox{\hyperlink{namespacesrsran_a6e5aee1d553dc6e825017842e4059adb}{divide\_ceil}}(max\_codeblock\_size,\ 3));}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \textcolor{comment}{//\ Push\ codeblock\ identifier\ into\ the\ free\ list.}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!free\_list.\mbox{\hyperlink{classsrsran_1_1concurrent__queue_a83c3ee3074579631ed08e3414377a541}{try\_push}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_id}}++))\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00076\ \ \ \ \ \}}
\DoxyCodeLine{00077\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1rx__buffer__codeblock__pool_a609138db98a64e30bd8e6645e1100ef4}\label{classsrsran_1_1rx__buffer__codeblock__pool_a609138db98a64e30bd8e6645e1100ef4} 
\index{srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}!free@{free}}
\index{free@{free}!srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}}
\doxysubsubsection{\texorpdfstring{free()}{free()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::rx\+\_\+buffer\+\_\+codeblock\+\_\+pool\+::free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{cb\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Frees a codeblock buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cb\+\_\+id} & Indicates the codeblock identifier in the pool. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00090\ \ \ \{}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//\ Push\ codeblock\ identifier\ back\ in\ the\ pool.}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordflow}{while}\ (!free\_list.\mbox{\hyperlink{classsrsran_1_1concurrent__queue_a83c3ee3074579631ed08e3414377a541}{try\_push}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_id}}))\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rx__buffer__codeblock__pool_ada07935e5406d44d4c2ac26b1718f20a}\label{classsrsran_1_1rx__buffer__codeblock__pool_ada07935e5406d44d4c2ac26b1718f20a} 
\index{srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}!get\_data\_bits@{get\_data\_bits}}
\index{get\_data\_bits@{get\_data\_bits}!srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}}
\doxysubsubsection{\texorpdfstring{get\_data\_bits()}{get\_data\_bits()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\+\_\+buffer}} \& srsran\+::rx\+\_\+buffer\+\_\+codeblock\+\_\+pool\+::get\+\_\+data\+\_\+bits (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{cb\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Gets a codeblock data-\/bit buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cb\+\_\+id} & Indicates the codeblock identifier. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A view to the codeblock data-\/bit buffer. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00109\ \ \ \{}
\DoxyCodeLine{00110\ \ \ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_id}}\ <\ entries.size(),\ \textcolor{stringliteral}{"{}Codeblock\ index\ (\{\})\ is\ out\ of\ range\ (\{\})."{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_id}},\ entries.size());}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordflow}{return}\ entries[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_id}}].data\_bits;}
\DoxyCodeLine{00112\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rx__buffer__codeblock__pool_acf5bd088e8b50a6480da3d5b2ae86133}\label{classsrsran_1_1rx__buffer__codeblock__pool_acf5bd088e8b50a6480da3d5b2ae86133} 
\index{srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}!get\_soft\_bits@{get\_soft\_bits}}
\index{get\_soft\_bits@{get\_soft\_bits}!srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}}
\doxysubsubsection{\texorpdfstring{get\_soft\_bits()}{get\_soft\_bits()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1log__likelihood__ratio}{log\+\_\+likelihood\+\_\+ratio}} $>$ srsran\+::rx\+\_\+buffer\+\_\+codeblock\+\_\+pool\+::get\+\_\+soft\+\_\+bits (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{cb\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Gets a codeblock soft-\/bit buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cb\+\_\+id} & Indicates the codeblock identifier. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A view to the codeblock soft-\/bit buffer. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00100\ \ \ \{}
\DoxyCodeLine{00101\ \ \ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_id}}\ <\ entries.size(),\ \textcolor{stringliteral}{"{}Codeblock\ index\ (\{\})\ is\ out\ of\ range\ (\{\})."{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_id}},\ entries.size());}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordflow}{return}\ entries[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cb\_id}}].soft\_bits;}
\DoxyCodeLine{00103\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rx__buffer__codeblock__pool_a9b6fc3bd98517618c82ca8adc38e0fba}\label{classsrsran_1_1rx__buffer__codeblock__pool_a9b6fc3bd98517618c82ca8adc38e0fba} 
\index{srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}!reserve@{reserve}}
\index{reserve@{reserve}!srsran::rx\_buffer\_codeblock\_pool@{srsran::rx\_buffer\_codeblock\_pool}}
\doxysubsubsection{\texorpdfstring{reserve()}{reserve()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classunsigned}{unsigned}} $>$ srsran\+::rx\+\_\+buffer\+\_\+codeblock\+\_\+pool\+::reserve (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Reserves a codeblock buffer. 

\begin{DoxyReturn}{Returns}
The codeblock identifier in the pool if it is reserved successfully. Otherwise, {\ttfamily nullopt} 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00082\ \ \ \{}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{//\ Try\ to\ get\ an\ available\ codeblock.}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordflow}{return}\ free\_list.\mbox{\hyperlink{classsrsran_1_1concurrent__queue_af92570524955aa703c2946900d7741b2}{try\_pop}}();}
\DoxyCodeLine{00085\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/rx\+\_\+buffer\+\_\+codeblock\+\_\+pool.\+h\end{DoxyCompactItemize}
