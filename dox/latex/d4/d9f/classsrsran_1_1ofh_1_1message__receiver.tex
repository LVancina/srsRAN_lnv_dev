\doxysection{srsran\+::ofh\+::message\+\_\+receiver Class Reference}
\hypertarget{classsrsran_1_1ofh_1_1message__receiver}{}\label{classsrsran_1_1ofh_1_1message__receiver}\index{srsran::ofh::message\_receiver@{srsran::ofh::message\_receiver}}


{\ttfamily \#include $<$ofh\+\_\+message\+\_\+receiver.\+h$>$}



Inheritance diagram for srsran\+::ofh\+::message\+\_\+receiver\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=216pt]{d8/dd7/classsrsran_1_1ofh_1_1message__receiver__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::ofh\+::message\+\_\+receiver\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=216pt]{d7/d38/classsrsran_1_1ofh_1_1message__receiver__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ofh_1_1message__receiver_a0f9daba721d9e58eda2199b9935f03df}{message\+\_\+receiver}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ofh_1_1message__receiver__config}{message\+\_\+receiver\+\_\+config}} \&config, \mbox{\hyperlink{structsrsran_1_1ofh_1_1message__receiver__dependencies}{message\+\_\+receiver\+\_\+dependencies}} \&\&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dependencies}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1message__receiver_ad308e3c23708a0ea34b2e4659facc86e}{on\+\_\+new\+\_\+frame}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ payload) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Notifies the reception of an Ethernet frame coming from the underlying Ethernet link. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1ether_1_1receiver}{ether\+::receiver}} \& \mbox{\hyperlink{classsrsran_1_1ofh_1_1message__receiver_a45d81305b33a59ac54e369cae3ddd0ac}{get\+\_\+ethernet\+\_\+receiver}} ()
\begin{DoxyCompactList}\small\item\em Returns the Ethernet receiver of this Open Fronthaul message receiver. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__notifier}{srsran\+::ether\+::frame\+\_\+notifier}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}frame\+\_\+notifier} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Open Fronthaul message receiver.

This class listens to incoming Ethernet frames and decodes them as Open Fronthaul messages. Once a new message is detected, is it handled to the corresponding data flow for further processing. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1message__receiver_a0f9daba721d9e58eda2199b9935f03df}\label{classsrsran_1_1ofh_1_1message__receiver_a0f9daba721d9e58eda2199b9935f03df} 
\index{srsran::ofh::message\_receiver@{srsran::ofh::message\_receiver}!message\_receiver@{message\_receiver}}
\index{message\_receiver@{message\_receiver}!srsran::ofh::message\_receiver@{srsran::ofh::message\_receiver}}
\doxysubsubsection{\texorpdfstring{message\_receiver()}{message\_receiver()}}
{\footnotesize\ttfamily message\+\_\+receiver\+::message\+\_\+receiver (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ofh_1_1message__receiver__config}{message\+\_\+receiver\+\_\+config}} \&}]{config,  }\item[{\mbox{\hyperlink{structsrsran_1_1ofh_1_1message__receiver__dependencies}{message\+\_\+receiver\+\_\+dependencies}} \&\&}]{dependencies }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00031\ \ \ logger(*\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dependencies}}.logger),}
\DoxyCodeLine{00032\ \ \ vlan\_params(config.\mbox{\hyperlink{structsrsran_1_1ofh_1_1message__receiver__config_a3db675e4fbbf833fffec76b4528a5662}{vlan\_params}}),}
\DoxyCodeLine{00033\ \ \ ul\_prach\_eaxc(config.\mbox{\hyperlink{structsrsran_1_1ofh_1_1message__receiver__config_adc5cc39cfe7e3153aedb2939f92eca83}{prach\_eaxc}}),}
\DoxyCodeLine{00034\ \ \ ul\_eaxc(config.\mbox{\hyperlink{structsrsran_1_1ofh_1_1message__receiver__config_ada451d13295ab6dda69bfdd7803f516a}{ul\_eaxc}}),}
\DoxyCodeLine{00035\ \ \ window\_checker(*\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dependencies}}.window\_checker),}
\DoxyCodeLine{00036\ \ \ seq\_id\_checker(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dependencies}}.seq\_id\_checker)),}
\DoxyCodeLine{00037\ \ \ vlan\_decoder(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dependencies}}.eth\_frame\_decoder)),}
\DoxyCodeLine{00038\ \ \ ecpri\_decoder(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dependencies}}.ecpri\_decoder)),}
\DoxyCodeLine{00039\ \ \ uplane\_decoder(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dependencies}}.uplane\_decoder)),}
\DoxyCodeLine{00040\ \ \ data\_flow\_uplink(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dependencies}}.data\_flow\_uplink)),}
\DoxyCodeLine{00041\ \ \ data\_flow\_prach(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dependencies}}.data\_flow\_prach)),}
\DoxyCodeLine{00042\ \ \ eth\_receiver(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dependencies}}.eth\_receiver))}
\DoxyCodeLine{00043\ \{}
\DoxyCodeLine{00044\ \ \ srsran\_assert(vlan\_decoder,\ \textcolor{stringliteral}{"{}Invalid\ VLAN\ decoder"{}});}
\DoxyCodeLine{00045\ \ \ srsran\_assert(ecpri\_decoder,\ \textcolor{stringliteral}{"{}Invalid\ eCPRI\ decoder"{}});}
\DoxyCodeLine{00046\ \ \ srsran\_assert(uplane\_decoder,\ \textcolor{stringliteral}{"{}Invalid\ User-\/Plane\ decoder"{}});}
\DoxyCodeLine{00047\ \ \ srsran\_assert(data\_flow\_uplink,\ \textcolor{stringliteral}{"{}Invalid\ uplink\ IQ\ data\ flow"{}});}
\DoxyCodeLine{00048\ \ \ srsran\_assert(data\_flow\_prach,\ \textcolor{stringliteral}{"{}Invalid\ uplink\ PRACH\ IQ\ data\ flow"{}});}
\DoxyCodeLine{00049\ \ \ srsran\_assert(seq\_id\_checker,\ \textcolor{stringliteral}{"{}Invalid\ sequence\ id\ checker"{}});}
\DoxyCodeLine{00050\ \ \ srsran\_assert(eth\_receiver,\ \textcolor{stringliteral}{"{}Invalid\ Ethernet\ receiver"{}});}
\DoxyCodeLine{00051\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1message__receiver_a45d81305b33a59ac54e369cae3ddd0ac}\label{classsrsran_1_1ofh_1_1message__receiver_a45d81305b33a59ac54e369cae3ddd0ac} 
\index{srsran::ofh::message\_receiver@{srsran::ofh::message\_receiver}!get\_ethernet\_receiver@{get\_ethernet\_receiver}}
\index{get\_ethernet\_receiver@{get\_ethernet\_receiver}!srsran::ofh::message\_receiver@{srsran::ofh::message\_receiver}}
\doxysubsubsection{\texorpdfstring{get\_ethernet\_receiver()}{get\_ethernet\_receiver()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1ether_1_1receiver}{ether\+::receiver}} \& srsran\+::ofh\+::message\+\_\+receiver\+::get\+\_\+ethernet\+\_\+receiver (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Returns the Ethernet receiver of this Open Fronthaul message receiver. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00088\ \{\ \textcolor{keywordflow}{return}\ *eth\_receiver;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ofh_1_1message__receiver_ad308e3c23708a0ea34b2e4659facc86e}\label{classsrsran_1_1ofh_1_1message__receiver_ad308e3c23708a0ea34b2e4659facc86e} 
\index{srsran::ofh::message\_receiver@{srsran::ofh::message\_receiver}!on\_new\_frame@{on\_new\_frame}}
\index{on\_new\_frame@{on\_new\_frame}!srsran::ofh::message\_receiver@{srsran::ofh::message\_receiver}}
\doxysubsubsection{\texorpdfstring{on\_new\_frame()}{on\_new\_frame()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} message\+\_\+receiver\+::on\+\_\+new\+\_\+frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{payload }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Notifies the reception of an Ethernet frame coming from the underlying Ethernet link. 



Implements \mbox{\hyperlink{classsrsran_1_1ether_1_1frame__notifier_a890868ad74aec6a61d6b72715af3e9cc}{srsran\+::ether\+::frame\+\_\+notifier}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00054\ \{}
\DoxyCodeLine{00055\ \ \ \mbox{\hyperlink{structsrsran_1_1ether_1_1vlan__frame__params}{ether::vlan\_frame\_params}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{eth\_params}};}
\DoxyCodeLine{00056\ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ uint8\_t>}}\ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ecpri\_pdu}}\ =\ vlan\_decoder-\/>decode(payload,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{eth\_params}});}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ecpri\_pdu}}.empty()\ ||\ should\_ethernet\_frame\_be\_filtered(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{eth\_params}}))\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00059\ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \mbox{\hyperlink{structsrsran_1_1ecpri_1_1packet__parameters}{ecpri::packet\_parameters}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ecpri\_params}};}
\DoxyCodeLine{00062\ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ uint8\_t>}}\ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ofh\_pdu}}\ =\ ecpri\_decoder-\/>decode(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ecpri\_pdu}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ecpri\_params}});}
\DoxyCodeLine{00063\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ofh\_pdu}}.empty()\ ||\ should\_ecpri\_packet\_be\_filtered(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ecpri\_params}}))\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00065\ \ \ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \textcolor{comment}{//\ Verify\ the\ sequence\ identifier.}}
\DoxyCodeLine{00068\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1ecpri_1_1iq__data__parameters}{ecpri::iq\_data\_parameters}}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ecpri\_iq\_params}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{variant\_get<ecpri::iq\_data\_parameters>}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ecpri\_params}}.type\_params);}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ eaxc\ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ecpri\_iq\_params}}.pc\_id;}
\DoxyCodeLine{00070\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_skipped\_seq\_id}}\ =\ seq\_id\_checker-\/>update\_and\_compare\_seq\_id(eaxc,\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ecpri\_iq\_params}}.seq\_id\ >>\ 8));}
\DoxyCodeLine{00071\ \ \ \textcolor{comment}{//\ Drop\ the\ message\ when\ it\ is\ from\ the\ past.}}
\DoxyCodeLine{00072\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_skipped\_seq\_id}}\ <\ 0)\ \{}
\DoxyCodeLine{00073\ \ \ \ \ logger.info(\textcolor{stringliteral}{"{}Dropped\ received\ Open\ Fronthaul\ User-\/Plane\ packet\ as\ sequence\ identifier\ field\ is\ from\ the\ past"{}});}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00076\ \ \ \}}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_skipped\_seq\_id}}\ >\ 0)\ \{}
\DoxyCodeLine{00078\ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}Potentially\ lost\ '\{\}'\ messages\ sent\ by\ the\ RU"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_skipped\_seq\_id}});}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \mbox{\hyperlink{classsrsran_1_1ofh_1_1slot__symbol__point}{slot\_symbol\_point}}\ \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ =\ uplane\_decoder-\/>peek\_slot\_symbol\_point(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ofh\_pdu}});}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}.get\_slot().\mbox{\hyperlink{classsrsran_1_1slot__point_a988d40945efc785f48725c857852c922}{valid}}())\ \{}
\DoxyCodeLine{00083\ \ \ \ \ logger.info(\textcolor{stringliteral}{"{}Dropped\ received\ Open\ Fronthaul\ User-\/Plane\ packet\ as\ the\ slot\ field\ is\ invalid"{}});}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00086\ \ \ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \textcolor{comment}{//\ Fill\ the\ reception\ window\ statistics.}}
\DoxyCodeLine{00089\ \ \ window\_checker.\mbox{\hyperlink{classsrsran_1_1ofh_1_1rx__window__checker_aa8cf70e279e2e33b27778db0795dec4f}{update\_rx\_window\_statistics}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}});}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{keywordflow}{if}\ (is\_a\_prach\_message(uplane\_decoder-\/>peek\_filter\_index(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ofh\_pdu}})))\ \{}
\DoxyCodeLine{00092\ \ \ \ \ data\_flow\_prach-\/>decode\_type1\_message(eaxc,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ofh\_pdu}});}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ data\_flow\_uplink-\/>decode\_type1\_message(eaxc,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ofh\_pdu}});}
\DoxyCodeLine{00098\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/ofh/receiver/ofh\+\_\+message\+\_\+receiver.\+h\item 
lib/ofh/receiver/ofh\+\_\+message\+\_\+receiver.\+cpp\end{DoxyCompactItemize}
