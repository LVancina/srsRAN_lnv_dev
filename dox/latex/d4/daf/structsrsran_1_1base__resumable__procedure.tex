\doxysection{srsran\+::base\+\_\+resumable\+\_\+procedure\texorpdfstring{$<$}{<} Future\+Type \texorpdfstring{$>$}{>} Struct Template Reference}
\hypertarget{structsrsran_1_1base__resumable__procedure}{}\label{structsrsran_1_1base__resumable__procedure}\index{srsran::base\_resumable\_procedure$<$ FutureType $>$@{srsran::base\_resumable\_procedure$<$ FutureType $>$}}


\doxylink{classBase}{Base} class for resumable tasks that are not coroutines.  




{\ttfamily \#include $<$async\+\_\+procedure.\+h$>$}



Collaboration diagram for srsran\+::base\+\_\+resumable\+\_\+procedure\texorpdfstring{$<$}{<} Future\+Type \texorpdfstring{$>$}{>}\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=252pt]{df/d81/structsrsran_1_1base__resumable__procedure__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{structsrsran_1_1base__resumable__procedure_ad671dff9f0c56fbc8e09cacf544e0bb1}\label{structsrsran_1_1base__resumable__procedure_ad671dff9f0c56fbc8e09cacf544e0bb1} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{using}} {\bfseries future\+\_\+type} = \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Future\+Type}}
\item 
\Hypertarget{structsrsran_1_1base__resumable__procedure_a3a2a509234684136cb9a0b6514fa1c9e}\label{structsrsran_1_1base__resumable__procedure_a3a2a509234684136cb9a0b6514fa1c9e} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{using}} {\bfseries promise\+\_\+type} = \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} Future\+Type\+::promise\+\_\+type
\item 
\Hypertarget{structsrsran_1_1base__resumable__procedure_a034fe80b1a57ba0d20f2c44022d8c043}\label{structsrsran_1_1base__resumable__procedure_a034fe80b1a57ba0d20f2c44022d8c043} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{using}} {\bfseries result\+\_\+type} = \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} Future\+Type\+::result\+\_\+type
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{structsrsran_1_1base__resumable__procedure_af7026e79427665c7b4c971213c18197b}\label{structsrsran_1_1base__resumable__procedure_af7026e79427665c7b4c971213c18197b} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} {\bfseries start} ()=0
\begin{DoxyCompactList}\small\item\em Initiation of the resumable task. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{structsrsran_1_1base__resumable__procedure_a5edcb6deccebfa485b8ae4b85397f93c}{operator()}} (\mbox{\hyperlink{structsrsran_1_1detail_1_1base__coro__frame}{detail\+::base\+\_\+coro\+\_\+frame}}$<$ promise\+\_\+type $>$ \&ctx)
\begin{DoxyCompactList}\small\item\em Resume method. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} Awaitable , \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Derived}} , typename... Args$>$ }\\\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{structsrsran_1_1base__resumable__procedure_a4d1aac5a935fcee5058c68ed47668194}{async\+\_\+await}} (Awaitable \&\&a, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}}(Derived\+::\texorpdfstring{$\ast$}{*}action)(Args...))
\begin{DoxyCompactList}\small\item\em Called by resumable task to await Awaitable object to finish. \end{DoxyCompactList}\item 
{\footnotesize template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{R}}  = result\+\_\+type$>$ }\\detail\+::enable\+\_\+if\+\_\+void$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{R}} $>$ \mbox{\hyperlink{structsrsran_1_1base__resumable__procedure_aedbf92241f9f959ee20427895b9f1a88}{async\+\_\+return}} ()
\begin{DoxyCompactList}\small\item\em Called on resumable task completion. \end{DoxyCompactList}\item 
{\footnotesize template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} U , \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{R}}  = result\+\_\+type$>$ }\\detail\+::enable\+\_\+if\+\_\+nonvoid$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{R}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} $>$ \mbox{\hyperlink{structsrsran_1_1base__resumable__procedure_a1087ee646f5b6cf69b225f3edbc936cc}{async\+\_\+return}} (U \&\&r)
\begin{DoxyCompactList}\small\item\em Called on resumable task completion with non-\/void return. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Future\+Type}}$>$\newline
struct srsran\+::base\+\_\+resumable\+\_\+procedure$<$ Future\+Type $>$}
\doxylink{classBase}{Base} class for resumable tasks that are not coroutines. 

\doxysubsection{Member Function Documentation}
\Hypertarget{structsrsran_1_1base__resumable__procedure_a4d1aac5a935fcee5058c68ed47668194}\label{structsrsran_1_1base__resumable__procedure_a4d1aac5a935fcee5058c68ed47668194} 
\index{srsran::base\_resumable\_procedure$<$ FutureType $>$@{srsran::base\_resumable\_procedure$<$ FutureType $>$}!async\_await@{async\_await}}
\index{async\_await@{async\_await}!srsran::base\_resumable\_procedure$<$ FutureType $>$@{srsran::base\_resumable\_procedure$<$ FutureType $>$}}
\doxysubsubsection{\texorpdfstring{async\_await()}{async\_await()}}
{\footnotesize\ttfamily template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Future\+Type}} $>$ \\
template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} Awaitable , \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Derived}} , typename... Args$>$ \\
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{structsrsran_1_1base__resumable__procedure}{srsran\+::base\+\_\+resumable\+\_\+procedure}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Future\+Type}} $>$\+::async\+\_\+await (\begin{DoxyParamCaption}\item[{Awaitable \&\&}]{a,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}}(Derived\+::\texorpdfstring{$\ast$}{*})(Args...)}]{action }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}



Called by resumable task to await Awaitable object to finish. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00057\ \ \ \{}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{resume\_func}}\ =\ [\textcolor{keyword}{this},\ action]()\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>frame\_ptr-\/>state\_index\ >\ 0)\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{await\_resume\_helper<Awaitable>}}(action);}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ srsran\_sanity\_check(frame\_ptr-\/>state\_index\ !=\ detail::coro\_state\_tag\_t::tag\_cancelled,}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Calling\ resume\ on\ cancelled\ task"{}});}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ srsran\_sanity\_check(frame\_ptr-\/>state\_index\ !=\ detail::coro\_state\_tag\_t::tag\_final\_suspend,}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Calling\ on\ task\ on\ suspended\ point"{}});}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ cancelled}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ frame\_ptr-\/>template\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{on\_await\_cancel<Awaitable>}}();}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ frame\_ptr-\/>state\_index\ =\ detail::coro\_state\_tag\_t::tag\_cancelled;}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ frame\_ptr-\/>on\_return();}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note:\ Do\ not\ touch\ any\ member\ at\ this\ point}}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00072\ \ \ \ \ \};}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ Note:\ we\ have\ to\ store\ the\ resume\ point\ before,\ in\ case\ the\ coroutine\ changes\ execution\ context\ and\ calls\ resume}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{comment}{//\ before\ on\_await\_call\ is\ complete}}
\DoxyCodeLine{00076\ \ \ \ \ resume\_method\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{resume\_func}};}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordflow}{if}\ (frame\_ptr-\/>\mbox{\hyperlink{structsrsran_1_1detail_1_1base__coro__frame_aa8cad528feb1aa1a1b0ea106949932eb}{on\_await\_call}}(std::forward<Awaitable>(a)))\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{resume\_func}}();}
\DoxyCodeLine{00079\ \ \ \ \ \}}
\DoxyCodeLine{00080\ \ \ \}}

\end{DoxyCode}
\Hypertarget{structsrsran_1_1base__resumable__procedure_aedbf92241f9f959ee20427895b9f1a88}\label{structsrsran_1_1base__resumable__procedure_aedbf92241f9f959ee20427895b9f1a88} 
\index{srsran::base\_resumable\_procedure$<$ FutureType $>$@{srsran::base\_resumable\_procedure$<$ FutureType $>$}!async\_return@{async\_return}}
\index{async\_return@{async\_return}!srsran::base\_resumable\_procedure$<$ FutureType $>$@{srsran::base\_resumable\_procedure$<$ FutureType $>$}}
\doxysubsubsection{\texorpdfstring{async\_return()}{async\_return()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Future\+Type}} $>$ \\
template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{R}}  = result\+\_\+type$>$ \\
detail\+::enable\+\_\+if\+\_\+void$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{R}} $>$ \mbox{\hyperlink{structsrsran_1_1base__resumable__procedure}{srsran\+::base\+\_\+resumable\+\_\+procedure}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Future\+Type}} $>$\+::async\+\_\+return (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}



Called on resumable task completion. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00085\ \ \ \{}
\DoxyCodeLine{00086\ \ \ \ \ frame\_ptr-\/>\mbox{\hyperlink{structsrsran_1_1detail_1_1base__coro__frame_aba31882f71cf0cc8c5357313b4425aff}{promise}}().return\_value();}
\DoxyCodeLine{00087\ \ \ \ \ final\_await();}
\DoxyCodeLine{00088\ \ \ \}}

\end{DoxyCode}
\Hypertarget{structsrsran_1_1base__resumable__procedure_a1087ee646f5b6cf69b225f3edbc936cc}\label{structsrsran_1_1base__resumable__procedure_a1087ee646f5b6cf69b225f3edbc936cc} 
\index{srsran::base\_resumable\_procedure$<$ FutureType $>$@{srsran::base\_resumable\_procedure$<$ FutureType $>$}!async\_return@{async\_return}}
\index{async\_return@{async\_return}!srsran::base\_resumable\_procedure$<$ FutureType $>$@{srsran::base\_resumable\_procedure$<$ FutureType $>$}}
\doxysubsubsection{\texorpdfstring{async\_return()}{async\_return()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Future\+Type}} $>$ \\
template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} U , \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{R}}  = result\+\_\+type$>$ \\
detail\+::enable\+\_\+if\+\_\+nonvoid$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{R}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} $>$ \mbox{\hyperlink{structsrsran_1_1base__resumable__procedure}{srsran\+::base\+\_\+resumable\+\_\+procedure}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Future\+Type}} $>$\+::async\+\_\+return (\begin{DoxyParamCaption}\item[{U \&\&}]{r }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}



Called on resumable task completion with non-\/void return. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00093\ \ \ \{}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_convertible<U,\ result\_type>::value,\ \textcolor{stringliteral}{"{}Invalid\ value\ returned\ in\ async\_return(R)"{}});}
\DoxyCodeLine{00095\ \ \ \ \ frame\_ptr-\/>\mbox{\hyperlink{structsrsran_1_1detail_1_1base__coro__frame_aba31882f71cf0cc8c5357313b4425aff}{promise}}().return\_value(std::forward<U>(r));}
\DoxyCodeLine{00096\ \ \ \ \ final\_await();}
\DoxyCodeLine{00097\ \ \ \}}

\end{DoxyCode}
\Hypertarget{structsrsran_1_1base__resumable__procedure_a5edcb6deccebfa485b8ae4b85397f93c}\label{structsrsran_1_1base__resumable__procedure_a5edcb6deccebfa485b8ae4b85397f93c} 
\index{srsran::base\_resumable\_procedure$<$ FutureType $>$@{srsran::base\_resumable\_procedure$<$ FutureType $>$}!operator()@{operator()}}
\index{operator()@{operator()}!srsran::base\_resumable\_procedure$<$ FutureType $>$@{srsran::base\_resumable\_procedure$<$ FutureType $>$}}
\doxysubsubsection{\texorpdfstring{operator()()}{operator()()}}
{\footnotesize\ttfamily template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Future\+Type}} $>$ \\
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{structsrsran_1_1base__resumable__procedure}{srsran\+::base\+\_\+resumable\+\_\+procedure}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Future\+Type}} $>$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{\+::operator}}() (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1detail_1_1base__coro__frame}{detail\+::base\+\_\+coro\+\_\+frame}}$<$ promise\+\_\+type $>$ \&}]{ctx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Resume method. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00042\ \ \ \{}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordflow}{if}\ (frame\_ptr\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ srsran\_sanity\_check(ctx.state\_index\ ==\ detail::tag\_init,\ \textcolor{stringliteral}{"{}Invalid\ coro\ state"{}});}
\DoxyCodeLine{00045\ \ \ \ \ \ \ ctx.state\_index\ =\ 10;}
\DoxyCodeLine{00046\ \ \ \ \ \ \ frame\_ptr\ \ \ \ \ \ \ =\ \&ctx;}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1base__resumable__procedure_a4d1aac5a935fcee5058c68ed47668194}{async\_await}}(suspend\_always\{\},\ \&\mbox{\hyperlink{structsrsran_1_1base__resumable__procedure_af7026e79427665c7b4c971213c18197b}{base\_resumable\_procedure<FutureType>::start}});}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00049\ \ \ \ \ \}}
\DoxyCodeLine{00050\ \ \ \ \ resume\_method();}
\DoxyCodeLine{00051\ \ \ \}}

\end{DoxyCode}


The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/srsran/support/async/async\+\_\+procedure.\+h\end{DoxyCompactItemize}
