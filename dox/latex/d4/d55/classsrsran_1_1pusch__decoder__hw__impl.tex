\doxysection{srsran\+::pusch\+\_\+decoder\+\_\+hw\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1pusch__decoder__hw__impl}{}\label{classsrsran_1_1pusch__decoder__hw__impl}\index{srsran::pusch\_decoder\_hw\_impl@{srsran::pusch\_decoder\_hw\_impl}}


Generic hardware-\/accelerated implementation of the PUSCH decoder.  




{\ttfamily \#include $<$pusch\+\_\+decoder\+\_\+hw\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::pusch\+\_\+decoder\+\_\+hw\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d0b/classsrsran_1_1pusch__decoder__hw__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::pusch\+\_\+decoder\+\_\+hw\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d16/classsrsran_1_1pusch__decoder__hw__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsrsran_1_1pusch__decoder__hw__impl_1_1sch__crc}{sch\+\_\+crc}}
\begin{DoxyCompactList}\small\item\em CRC calculators used in shared channels. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1pusch__decoder__hw__impl_a280a86d13e98b6adab62643758d87449}{pusch\+\_\+decoder\+\_\+hw\+\_\+impl}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1ldpc__segmenter__rx}{ldpc\+\_\+segmenter\+\_\+rx}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{seg}}, \mbox{\hyperlink{structsrsran_1_1pusch__decoder__hw__impl_1_1sch__crc}{sch\+\_\+crc}} \&c, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1hal_1_1hw__accelerator__pusch__dec}{hal\+::hw\+\_\+accelerator\+\_\+pusch\+\_\+dec}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hw}})
\begin{DoxyCompactList}\small\item\em PUSCH decoder constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1pusch__decoder__buffer}{pusch\+\_\+decoder\+\_\+buffer}} \& \mbox{\hyperlink{classsrsran_1_1pusch__decoder__hw__impl_a1d7c2214a70cc68ddac55397eb422416}{new\+\_\+data}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ transport\+\_\+block, \mbox{\hyperlink{classsrsran_1_1unique__rx__buffer}{unique\+\_\+rx\+\_\+buffer}} softbuffer, \mbox{\hyperlink{classsrsran_1_1pusch__decoder__notifier}{pusch\+\_\+decoder\+\_\+notifier}} \&notifier, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration}{configuration}} \&cfg) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Decodes a PUSCH codeword. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1pusch__decoder__hw__impl_a7538e51c2273ff7b8bf25c5cb16890dd}{set\+\_\+nof\+\_\+softbits}} (\mbox{\hyperlink{classsrsran_1_1units_1_1bits}{units\+::bits}} nof\+\_\+softbits) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Sets the number of UL-\/\+SCH codeword softbits expected by the PUSCH decoder. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1pusch__decoder}{srsran\+::pusch\+\_\+decoder}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}pusch\+\_\+decoder} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Generic hardware-\/accelerated implementation of the PUSCH decoder. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1pusch__decoder__hw__impl_a280a86d13e98b6adab62643758d87449}\label{classsrsran_1_1pusch__decoder__hw__impl_a280a86d13e98b6adab62643758d87449} 
\index{srsran::pusch\_decoder\_hw\_impl@{srsran::pusch\_decoder\_hw\_impl}!pusch\_decoder\_hw\_impl@{pusch\_decoder\_hw\_impl}}
\index{pusch\_decoder\_hw\_impl@{pusch\_decoder\_hw\_impl}!srsran::pusch\_decoder\_hw\_impl@{srsran::pusch\_decoder\_hw\_impl}}
\doxysubsubsection{\texorpdfstring{pusch\_decoder\_hw\_impl()}{pusch\_decoder\_hw\_impl()}}
{\footnotesize\ttfamily srsran\+::pusch\+\_\+decoder\+\_\+hw\+\_\+impl\+::pusch\+\_\+decoder\+\_\+hw\+\_\+impl (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1ldpc__segmenter__rx}{ldpc\+\_\+segmenter\+\_\+rx}} $>$}]{seg,  }\item[{\mbox{\hyperlink{structsrsran_1_1pusch__decoder__hw__impl_1_1sch__crc}{sch\+\_\+crc}} \&}]{c,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1hal_1_1hw__accelerator__pusch__dec}{hal\+::hw\+\_\+accelerator\+\_\+pusch\+\_\+dec}} $>$}]{hw }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



PUSCH decoder constructor. 

Sets up the internal components, namely LDPC segmenter, all the CRC calculators and the hardware accelerator.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em seg} & Pointer to an LDPC segmenter object. \\
\hline
\mbox{\texttt{ in}}  & {\em crcs} & Structure with pointers to three CRC calculator objects, with generator polynomials of type {\ttfamily CRC16}, {\ttfamily CRC24A} and {\ttfamily CRC24B}. \\
\hline
\mbox{\texttt{ in}}  & {\em hw} & Unique pointer to a hardware-\/accelerator. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00072\ \ \ \ \ segmenter(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{seg}})),}
\DoxyCodeLine{00073\ \ \ \ \ crc\_set(\{std::move(c.crc16),\ std::move(c.crc24A),\ std::move(c.crc24B)\}),}
\DoxyCodeLine{00074\ \ \ \ \ decoder(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hw}})),}
\DoxyCodeLine{00075\ \ \ \ \ softbits\_buffer(pdsch\_constants::CODEWORD\_MAX\_SIZE.value())}
\DoxyCodeLine{00076\ \ \ \{}
\DoxyCodeLine{00077\ \ \ \ \ srsran\_assert(segmenter,\ \textcolor{stringliteral}{"{}Invalid\ LDPC\ segmenter\ factory."{}});}
\DoxyCodeLine{00078\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__hw__impl_1_1sch__crc_afb6628d5ee7060dce2432b20a2e83c92}{crc16}},\ \textcolor{stringliteral}{"{}Invalid\ CRC16\ calculator."{}});}
\DoxyCodeLine{00079\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__hw__impl_1_1sch__crc_a194e6a9cb523084572cc35a8b998f45f}{crc24A}},\ \textcolor{stringliteral}{"{}Invalid\ CRC24A\ calculator."{}});}
\DoxyCodeLine{00080\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__hw__impl_1_1sch__crc_a40df2f0210d7bbaf6848b28e94996a28}{crc24B}},\ \textcolor{stringliteral}{"{}Invalid\ CRC24B\ calculator."{}});}
\DoxyCodeLine{00081\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__hw__impl_1_1sch__crc_afb6628d5ee7060dce2432b20a2e83c92}{crc16}}-\/>get\_generator\_poly()\ ==\ crc\_generator\_poly::CRC16,}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Not\ a\ CRC\ generator\ of\ type\ CRC16."{}});}
\DoxyCodeLine{00083\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__hw__impl_1_1sch__crc_a194e6a9cb523084572cc35a8b998f45f}{crc24A}}-\/>get\_generator\_poly()\ ==\ crc\_generator\_poly::CRC24A,}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Not\ a\ CRC\ generator\ of\ type\ CRC24A."{}});}
\DoxyCodeLine{00085\ \ \ \ \ srsran\_assert(crc\_set.\mbox{\hyperlink{structsrsran_1_1pusch__decoder__hw__impl_1_1sch__crc_a40df2f0210d7bbaf6848b28e94996a28}{crc24B}}-\/>get\_generator\_poly()\ ==\ crc\_generator\_poly::CRC24B,}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Not\ a\ CRC\ generator\ of\ type\ CRC24B."{}});}
\DoxyCodeLine{00087\ \ \ \ \ srsran\_assert(decoder,\ \textcolor{stringliteral}{"{}Invalid\ hardware-\/accelerated\ PUSCH\ decoder."{}});}
\DoxyCodeLine{00088\ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=222pt]{d4/d55/classsrsran_1_1pusch__decoder__hw__impl_a280a86d13e98b6adab62643758d87449_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=222pt]{d4/d55/classsrsran_1_1pusch__decoder__hw__impl_a280a86d13e98b6adab62643758d87449_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1pusch__decoder__hw__impl_a1d7c2214a70cc68ddac55397eb422416}\label{classsrsran_1_1pusch__decoder__hw__impl_a1d7c2214a70cc68ddac55397eb422416} 
\index{srsran::pusch\_decoder\_hw\_impl@{srsran::pusch\_decoder\_hw\_impl}!new\_data@{new\_data}}
\index{new\_data@{new\_data}!srsran::pusch\_decoder\_hw\_impl@{srsran::pusch\_decoder\_hw\_impl}}
\doxysubsubsection{\texorpdfstring{new\_data()}{new\_data()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1pusch__decoder__buffer}{pusch\+\_\+decoder\+\_\+buffer}} \& pusch\+\_\+decoder\+\_\+hw\+\_\+impl\+::new\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{transport\+\_\+block,  }\item[{\mbox{\hyperlink{classsrsran_1_1unique__rx__buffer}{unique\+\_\+rx\+\_\+buffer}}}]{rm\+\_\+buffer,  }\item[{\mbox{\hyperlink{classsrsran_1_1pusch__decoder__notifier}{pusch\+\_\+decoder\+\_\+notifier}} \&}]{notifier,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pusch__decoder_1_1configuration}{configuration}} \&}]{cfg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Decodes a PUSCH codeword. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em transport\+\_\+block} & The decoded transport block, with packed (8 bits per entry) representation. \\
\hline
\mbox{\texttt{ in,out}}  & {\em rm\+\_\+buffer} & A buffer for combining log-\/likelihood ratios from different retransmissions. \\
\hline
\mbox{\texttt{ in}}  & {\em notifier} & Interface for notifying the completion of the TB processing. \\
\hline
\mbox{\texttt{ in}}  & {\em cfg} & Decoder configuration parameters. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A \doxylink{classsrsran_1_1pusch__decoder__buffer}{pusch\+\_\+decoder\+\_\+buffer}, used to write softbits into the decoder. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classsrsran_1_1pusch__decoder_abfc3c42e784ff24d28827bb5973782c3}{srsran\+::pusch\+\_\+decoder}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00098\ \{}
\DoxyCodeLine{00099\ \ \ transport\_block\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{transport\_block\_}};}
\DoxyCodeLine{00100\ \ \ softbuffer\ \ \ \ \ \ =\ std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{softbuffer\_}});}
\DoxyCodeLine{00101\ \ \ result\_notifier\ =\ \&notifier;}
\DoxyCodeLine{00102\ \ \ current\_config\ \ =\ cfg;}
\DoxyCodeLine{00103\ \ \ softbits\_count\ \ =\ 0;}
\DoxyCodeLine{00104\ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00105\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1pusch__decoder__hw__impl_a7538e51c2273ff7b8bf25c5cb16890dd}\label{classsrsran_1_1pusch__decoder__hw__impl_a7538e51c2273ff7b8bf25c5cb16890dd} 
\index{srsran::pusch\_decoder\_hw\_impl@{srsran::pusch\_decoder\_hw\_impl}!set\_nof\_softbits@{set\_nof\_softbits}}
\index{set\_nof\_softbits@{set\_nof\_softbits}!srsran::pusch\_decoder\_hw\_impl@{srsran::pusch\_decoder\_hw\_impl}}
\doxysubsubsection{\texorpdfstring{set\_nof\_softbits()}{set\_nof\_softbits()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::pusch\+\_\+decoder\+\_\+hw\+\_\+impl\+::set\+\_\+nof\+\_\+softbits (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1units_1_1bits}{units\+::bits}}}]{nof\+\_\+softbits }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Sets the number of UL-\/\+SCH codeword softbits expected by the PUSCH decoder. 

It allows the decoder to start decoding codeblocks before receiving the entire codeword. If it is called before \doxylink{classsrsran_1_1pusch__decoder__hw__impl_a1d7c2214a70cc68ddac55397eb422416}{new\+\_\+data} or after decoding has started, it has no effect.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em nof\+\_\+softbits} & Number of codeword softbits, parameter $G^\textup{UL-SCH}$ in TS38.\+212 Section 6.\+2.\+7. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1pusch__decoder_a06627763d4c15a248b389602dc818a45}{srsran\+::pusch\+\_\+decoder}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00098\ \ \ \{}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{comment}{//\ Not\ implemented.}}
\DoxyCodeLine{00100\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/channel\+\_\+processors/pusch/\mbox{\hyperlink{pusch__decoder__hw__impl_8h}{pusch\+\_\+decoder\+\_\+hw\+\_\+impl.\+h}}\item 
lib/phy/upper/channel\+\_\+processors/pusch/pusch\+\_\+decoder\+\_\+hw\+\_\+impl.\+cpp\end{DoxyCompactItemize}
