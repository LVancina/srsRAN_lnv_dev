\doxysection{srsran\+::ofh\+::uplane\+\_\+rx\+\_\+symbol\+\_\+data\+\_\+flow\+\_\+writer Class Reference}
\hypertarget{classsrsran_1_1ofh_1_1uplane__rx__symbol__data__flow__writer}{}\label{classsrsran_1_1ofh_1_1uplane__rx__symbol__data__flow__writer}\index{srsran::ofh::uplane\_rx\_symbol\_data\_flow\_writer@{srsran::ofh::uplane\_rx\_symbol\_data\_flow\_writer}}


Open Fronthaul User-\/\+Plane uplink received symbol data flow writer.  




{\ttfamily \#include $<$ofh\+\_\+uplane\+\_\+rx\+\_\+symbol\+\_\+data\+\_\+flow\+\_\+writer.\+h$>$}



Collaboration diagram for srsran\+::ofh\+::uplane\+\_\+rx\+\_\+symbol\+\_\+data\+\_\+flow\+\_\+writer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=220pt]{de/d30/classsrsran_1_1ofh_1_1uplane__rx__symbol__data__flow__writer__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ofh_1_1uplane__rx__symbol__data__flow__writer_a6df57870945543cf7dd1186c71a4174c}{uplane\+\_\+rx\+\_\+symbol\+\_\+data\+\_\+flow\+\_\+writer}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classunsigned}{unsigned}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\+\_\+eaxc\+\_\+}}, \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\+\_\+}}, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1ofh_1_1uplink__context__repository}{uplink\+\_\+context\+\_\+repository}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\+\_\+context\+\_\+repo\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ofh_1_1uplane__rx__symbol__data__flow__writer_aec43234d396275e27e04a709602043d0}{write\+\_\+to\+\_\+resource\+\_\+grid}} (\mbox{\hyperlink{classunsigned}{unsigned}} eaxc, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ofh_1_1uplane__message__decoder__results}{uplane\+\_\+message\+\_\+decoder\+\_\+results}} \&results)
\begin{DoxyCompactList}\small\item\em Writes the given decoder results in the corresponding resource grid using the given e\+AxC. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Open Fronthaul User-\/\+Plane uplink received symbol data flow writer. 

Writes IQ data received in an Open Fronthaul message to the corresponding resource grid. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1uplane__rx__symbol__data__flow__writer_a6df57870945543cf7dd1186c71a4174c}\label{classsrsran_1_1ofh_1_1uplane__rx__symbol__data__flow__writer_a6df57870945543cf7dd1186c71a4174c} 
\index{srsran::ofh::uplane\_rx\_symbol\_data\_flow\_writer@{srsran::ofh::uplane\_rx\_symbol\_data\_flow\_writer}!uplane\_rx\_symbol\_data\_flow\_writer@{uplane\_rx\_symbol\_data\_flow\_writer}}
\index{uplane\_rx\_symbol\_data\_flow\_writer@{uplane\_rx\_symbol\_data\_flow\_writer}!srsran::ofh::uplane\_rx\_symbol\_data\_flow\_writer@{srsran::ofh::uplane\_rx\_symbol\_data\_flow\_writer}}
\doxysubsubsection{\texorpdfstring{uplane\_rx\_symbol\_data\_flow\_writer()}{uplane\_rx\_symbol\_data\_flow\_writer()}}
{\footnotesize\ttfamily srsran\+::ofh\+::uplane\+\_\+rx\+\_\+symbol\+\_\+data\+\_\+flow\+\_\+writer\+::uplane\+\_\+rx\+\_\+symbol\+\_\+data\+\_\+flow\+\_\+writer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classunsigned}{unsigned}} $>$}]{ul\+\_\+eaxc\+\_\+,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger\+\_\+,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1ofh_1_1uplink__context__repository}{uplink\+\_\+context\+\_\+repository}} $>$}]{ul\+\_\+context\+\_\+repo\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00041\ \ \ \ \ ul\_eaxc(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_eaxc\_}}.begin(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_eaxc\_}}.end()),}
\DoxyCodeLine{00042\ \ \ \ \ logger(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\_}}),}
\DoxyCodeLine{00043\ \ \ \ \ ul\_context\_repo\_ptr(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_context\_repo\_}}),}
\DoxyCodeLine{00044\ \ \ \ \ ul\_context\_repo(*ul\_context\_repo\_ptr)}
\DoxyCodeLine{00045\ \ \ \{}
\DoxyCodeLine{00046\ \ \ \ \ srsran\_assert(!ul\_eaxc.empty(),\ \textcolor{stringliteral}{"{}Invalid\ number\ of\ uplink\ eAxCs"{}});}
\DoxyCodeLine{00047\ \ \ \ \ srsran\_assert(ul\_context\_repo\_ptr,\ \textcolor{stringliteral}{"{}Invalid\ uplink\ context\ repository"{}});}
\DoxyCodeLine{00048\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ofh_1_1uplane__rx__symbol__data__flow__writer_aec43234d396275e27e04a709602043d0}\label{classsrsran_1_1ofh_1_1uplane__rx__symbol__data__flow__writer_aec43234d396275e27e04a709602043d0} 
\index{srsran::ofh::uplane\_rx\_symbol\_data\_flow\_writer@{srsran::ofh::uplane\_rx\_symbol\_data\_flow\_writer}!write\_to\_resource\_grid@{write\_to\_resource\_grid}}
\index{write\_to\_resource\_grid@{write\_to\_resource\_grid}!srsran::ofh::uplane\_rx\_symbol\_data\_flow\_writer@{srsran::ofh::uplane\_rx\_symbol\_data\_flow\_writer}}
\doxysubsubsection{\texorpdfstring{write\_to\_resource\_grid()}{write\_to\_resource\_grid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} uplane\+\_\+rx\+\_\+symbol\+\_\+data\+\_\+flow\+\_\+writer\+::write\+\_\+to\+\_\+resource\+\_\+grid (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{eaxc,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ofh_1_1uplane__message__decoder__results}{uplane\+\_\+message\+\_\+decoder\+\_\+results}} \&}]{results }\end{DoxyParamCaption})}



Writes the given decoder results in the corresponding resource grid using the given e\+AxC. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00031\ \{}
\DoxyCodeLine{00032\ \ \ \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}}\ \ \ \ \ \ \ =\ results.\mbox{\hyperlink{structsrsran_1_1ofh_1_1uplane__message__decoder__results_a1bfb6f342eb04856f25868ddbf63ab86}{params}}.\mbox{\hyperlink{structsrsran_1_1ofh_1_1uplane__message__params_a7bc40d1c233418403b95c754ef436c85}{slot}};}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ symbol\ \ \ \ \ =\ results.\mbox{\hyperlink{structsrsran_1_1ofh_1_1uplane__message__decoder__results_a1bfb6f342eb04856f25868ddbf63ab86}{params}}.\mbox{\hyperlink{structsrsran_1_1ofh_1_1uplane__message__params_a2f81ffaafaa1fce4f6c64ef77d0827c2}{symbol\_id}};}
\DoxyCodeLine{00034\ \ \ \mbox{\hyperlink{classsrsran_1_1ofh_1_1uplink__context}{uplink\_context}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_context}}\ =\ ul\_context\_repo.\mbox{\hyperlink{classsrsran_1_1ofh_1_1uplink__context__repository_a0333a219fbba7f308cde41c88ad25316}{get}}(\mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}},\ symbol);}
\DoxyCodeLine{00035\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_context}}.empty())\ \{}
\DoxyCodeLine{00036\ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}Dropped\ received\ Open\ Fronthaul\ message\ as\ no\ uplink\ slot\ context\ was\ found\ for\ slot\ '\{\}',\ symbol\ "{}}}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'\{\}'\ and\ eAxC\ '\{\}'"{}},}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ results.\mbox{\hyperlink{structsrsran_1_1ofh_1_1uplane__message__decoder__results_a1bfb6f342eb04856f25868ddbf63ab86}{params}}.\mbox{\hyperlink{structsrsran_1_1ofh_1_1uplane__message__params_a7bc40d1c233418403b95c754ef436c85}{slot}},}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ results.\mbox{\hyperlink{structsrsran_1_1ofh_1_1uplane__message__decoder__results_a1bfb6f342eb04856f25868ddbf63ab86}{params}}.\mbox{\hyperlink{structsrsran_1_1ofh_1_1uplane__message__params_a2f81ffaafaa1fce4f6c64ef77d0827c2}{symbol\_id}},}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ eaxc);}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00043\ \ \ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \textcolor{comment}{//\ Find\ resource\ grid\ port\ with\ eAxC.}}
\DoxyCodeLine{00046\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rg\_port}}\ =\ std::distance(ul\_eaxc.begin(),\ std::find(ul\_eaxc.begin(),\ ul\_eaxc.end(),\ eaxc));}
\DoxyCodeLine{00047\ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rg\_port}}\ <\ ul\_eaxc.size(),\ \textcolor{stringliteral}{"{}Invalid\ resource\ grid\ port\ value\ '\{\}'"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rg\_port}});}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\_ul\_nof\_prbs}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_context}}.get\_grid\_nof\_prbs();}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}\ :\ results.sections)\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ Section\ PRBs\ are\ above\ the\ last\ PRB\ of\ the\ DU.\ Do\ not\ copy.}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}.start\_prb\ >=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\_ul\_nof\_prbs}})\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{//\ By\ default,\ try\ to\ copy\ all\ the\ expected\ PRBs.}}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_to\_write}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\_ul\_nof\_prbs}}\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}.start\_prb;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{//\ Section\ contains\ less\ PRBs\ than\ the\ grid.\ Copy\ the\ whole\ section.}}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}.start\_prb\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}.nof\_prbs\ <\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\_ul\_nof\_prbs}})\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_to\_write}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}.nof\_prbs;}
\DoxyCodeLine{00062\ \ \ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ ul\_context\_repo.\mbox{\hyperlink{classsrsran_1_1ofh_1_1uplink__context__repository_ae0b0a398724c35826e0cd050a040f813}{write\_grid}}(}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}},}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rg\_port}},}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ symbol,}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}.start\_prb\ *\ \mbox{\hyperlink{namespacesrsran_a1d73f866251b700d7747204655a84500}{NOF\_SUBCARRIERS\_PER\_RB}},}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ cf\_t>}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}.iq\_samples)}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ .\mbox{\hyperlink{classsrsran_1_1span_ac5f02596fcb6e8f430a3e11e47a6d7e8}{subspan}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}.start\_prb\ *\ \mbox{\hyperlink{namespacesrsran_a1d73f866251b700d7747204655a84500}{NOF\_SUBCARRIERS\_PER\_RB}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_to\_write}}\ *\ \mbox{\hyperlink{namespacesrsran_a1d73f866251b700d7747204655a84500}{NOF\_SUBCARRIERS\_PER\_RB}}));}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}Written\ IQ\ data\ into\ UL\ resource\ grid\ PRB\ range\ [\{\},\{\}),\ for\ slot\ '\{\}',\ symbol\ '\{\}'\ and\ port\ '\{\}'"{}},}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}.start\_prb,}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sect}}.start\_prb\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_prbs\_to\_write}},}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}},}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ symbol,}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rg\_port}});}
\DoxyCodeLine{00078\ \ \ \}}
\DoxyCodeLine{00079\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/ofh/receiver/ofh\+\_\+uplane\+\_\+rx\+\_\+symbol\+\_\+data\+\_\+flow\+\_\+writer.\+h\item 
lib/ofh/receiver/ofh\+\_\+uplane\+\_\+rx\+\_\+symbol\+\_\+data\+\_\+flow\+\_\+writer.\+cpp\end{DoxyCompactItemize}
