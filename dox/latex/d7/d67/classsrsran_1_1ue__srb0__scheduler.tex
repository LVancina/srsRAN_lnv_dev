\doxysection{srsran\+::ue\+\_\+srb0\+\_\+scheduler Class Reference}
\hypertarget{classsrsran_1_1ue__srb0__scheduler}{}\label{classsrsran_1_1ue__srb0__scheduler}\index{srsran::ue\_srb0\_scheduler@{srsran::ue\_srb0\_scheduler}}


Defines SRB0 scheduler that is used to allocate grants for UE\textquotesingle{}s SRB0 DL messages in a given slot.  




{\ttfamily \#include $<$ue\+\_\+srb0\+\_\+scheduler.\+h$>$}



Collaboration diagram for srsran\+::ue\+\_\+srb0\+\_\+scheduler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{da/d06/classsrsran_1_1ue__srb0__scheduler__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ue__srb0__scheduler_a8482d92654d330b297df6fd25cf54474}{ue\+\_\+srb0\+\_\+scheduler}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config}{scheduler\+\_\+ue\+\_\+expert\+\_\+config}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{expert\+\_\+cfg\+\_\+}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\+\_\+configuration}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\+\_\+cfg\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1pdcch__resource__allocator}{pdcch\+\_\+resource\+\_\+allocator}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\+\_\+sch\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1pucch__allocator}{pucch\+\_\+allocator}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pucch\+\_\+alloc\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1ue__repository}{ue\+\_\+repository}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ues\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ue__srb0__scheduler_a454d55b6124981e2569c72f0e677d33d}{handle\+\_\+dl\+\_\+buffer\+\_\+state\+\_\+indication}} (\mbox{\hyperlink{namespacesrsran_a511ed22603607d4a784c0f1807648b47}{du\+\_\+ue\+\_\+index\+\_\+t}} ue\+\_\+index)
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ue__srb0__scheduler_afc21330a62a33083cae80df6b8ae8fa0}{run\+\_\+slot}} (\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator}{cell\+\_\+resource\+\_\+allocator}} \&res\+\_\+alloc)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Defines SRB0 scheduler that is used to allocate grants for UE\textquotesingle{}s SRB0 DL messages in a given slot. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ue__srb0__scheduler_a8482d92654d330b297df6fd25cf54474}\label{classsrsran_1_1ue__srb0__scheduler_a8482d92654d330b297df6fd25cf54474} 
\index{srsran::ue\_srb0\_scheduler@{srsran::ue\_srb0\_scheduler}!ue\_srb0\_scheduler@{ue\_srb0\_scheduler}}
\index{ue\_srb0\_scheduler@{ue\_srb0\_scheduler}!srsran::ue\_srb0\_scheduler@{srsran::ue\_srb0\_scheduler}}
\doxysubsubsection{\texorpdfstring{ue\_srb0\_scheduler()}{ue\_srb0\_scheduler()}}
{\footnotesize\ttfamily ue\+\_\+srb0\+\_\+scheduler\+::ue\+\_\+srb0\+\_\+scheduler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config}{scheduler\+\_\+ue\+\_\+expert\+\_\+config}} \&}]{expert\+\_\+cfg\+\_\+,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\+\_\+configuration}} \&}]{cell\+\_\+cfg\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1pdcch__resource__allocator}{pdcch\+\_\+resource\+\_\+allocator}} \&}]{pdcch\+\_\+sch\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1pucch__allocator}{pucch\+\_\+allocator}} \&}]{pucch\+\_\+alloc\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1ue__repository}{ue\+\_\+repository}} \&}]{ues\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00037\ \ \ expert\_cfg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{expert\_cfg\_}}),}
\DoxyCodeLine{00038\ \ \ cell\_cfg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\_cfg\_}}),}
\DoxyCodeLine{00039\ \ \ pdcch\_sch(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_sch\_}}),}
\DoxyCodeLine{00040\ \ \ pucch\_alloc(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pucch\_alloc\_}}),}
\DoxyCodeLine{00041\ \ \ ues(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ues\_}}),}
\DoxyCodeLine{00042\ \ \ initial\_active\_dl\_bwp(cell\_cfg.dl\_cfg\_common.init\_dl\_bwp.generic\_params),}
\DoxyCodeLine{00043\ \ \ ss\_cfg(cell\_cfg.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ .\mbox{\hyperlink{structsrsran_1_1pdcch__config__common_a2e3ed0017a58f05d4952d95ab804435e}{search\_spaces}}[cell\_cfg.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common.\mbox{\hyperlink{structsrsran_1_1pdcch__config__common_abb3e2d05a704bec469946b206ad200f7}{ra\_search\_space\_id}}]),}
\DoxyCodeLine{00045\ \ \ cs\_cfg(cell\_cfg.get\_common\_coreset(ss\_cfg.\mbox{\hyperlink{structsrsran_1_1search__space__configuration_ace03a709d08d7adb470672818f74a70d}{get\_coreset\_id}}())),}
\DoxyCodeLine{00046\ \ \ logger(srslog::fetch\_basic\_logger(\textcolor{stringliteral}{"{}SCHED"{}}))}
\DoxyCodeLine{00047\ \{}
\DoxyCodeLine{00048\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ue__srb0__scheduler_a454d55b6124981e2569c72f0e677d33d}\label{classsrsran_1_1ue__srb0__scheduler_a454d55b6124981e2569c72f0e677d33d} 
\index{srsran::ue\_srb0\_scheduler@{srsran::ue\_srb0\_scheduler}!handle\_dl\_buffer\_state\_indication@{handle\_dl\_buffer\_state\_indication}}
\index{handle\_dl\_buffer\_state\_indication@{handle\_dl\_buffer\_state\_indication}!srsran::ue\_srb0\_scheduler@{srsran::ue\_srb0\_scheduler}}
\doxysubsubsection{\texorpdfstring{handle\_dl\_buffer\_state\_indication()}{handle\_dl\_buffer\_state\_indication()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} ue\+\_\+srb0\+\_\+scheduler\+::handle\+\_\+dl\+\_\+buffer\+\_\+state\+\_\+indication (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a511ed22603607d4a784c0f1807648b47}{du\+\_\+ue\+\_\+index\+\_\+t}}}]{ue\+\_\+index }\end{DoxyParamCaption})}

Handles DL buffer state reported by upper layers. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em ue\+\_\+index} & UE\textquotesingle{}s DU Index for which SRB0 message needs to be scheduled. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00084\ \{}
\DoxyCodeLine{00085\ \ \ pending\_ues.push\_back(ue\_index);}
\DoxyCodeLine{00086\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__srb0__scheduler_afc21330a62a33083cae80df6b8ae8fa0}\label{classsrsran_1_1ue__srb0__scheduler_afc21330a62a33083cae80df6b8ae8fa0} 
\index{srsran::ue\_srb0\_scheduler@{srsran::ue\_srb0\_scheduler}!run\_slot@{run\_slot}}
\index{run\_slot@{run\_slot}!srsran::ue\_srb0\_scheduler@{srsran::ue\_srb0\_scheduler}}
\doxysubsubsection{\texorpdfstring{run\_slot()}{run\_slot()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} ue\+\_\+srb0\+\_\+scheduler\+::run\+\_\+slot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator}{cell\+\_\+resource\+\_\+allocator}} \&}]{res\+\_\+alloc }\end{DoxyParamCaption})}

Schedule UE\textquotesingle{}s SRB0 DL grants for a given slot and one or more cells. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em res\+\_\+alloc} & Resource Grid of the cell where the DL grant is going to be allocated. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00051\ \{}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordflow}{if}\ (ues.empty())\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00054\ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_alloc}}\ =\ res\_alloc[0];}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ cell\_cfg.is\_dl\_enabled(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_alloc}}.slot))\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00059\ \ \ \}}
\DoxyCodeLine{00060\ \ \ \textcolor{comment}{//\ Note:\ Unable\ at\ the\ moment\ to\ multiplex\ CSI\ and\ PDSCH.}}
\DoxyCodeLine{00061\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ res\_alloc[0].result.dl.csi\_rs.empty())\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00063\ \ \ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ Schedule\ SRB0\ messages.}}
\DoxyCodeLine{00066\ \ \ \textcolor{keyword}{auto}\ it\ =\ pending\_ues.begin();}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordflow}{while}\ (it\ !=\ pending\_ues.end())\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ UE\ exists.}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ ues.\mbox{\hyperlink{classsrsran_1_1ue__repository_a8d4b4805828ab1b0375fa323b73c3d6c}{contains}}(*it))\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ it\ =\ pending\_ues.erase(it);}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{auto}\&\ u\ =\ ues[*it];}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{if}\ (u.has\_pending\_dl\_newtx\_bytes(LCID\_SRB0)\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ schedule\_srb0(res\_alloc,\ u))\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ it\ =\ pending\_ues.erase(it);}
\DoxyCodeLine{00077\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ ++it;}
\DoxyCodeLine{00079\ \ \ \ \ \}}
\DoxyCodeLine{00080\ \ \ \}}
\DoxyCodeLine{00081\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/ue\+\_\+scheduling/ue\+\_\+srb0\+\_\+scheduler.\+h\item 
lib/scheduler/ue\+\_\+scheduling/ue\+\_\+srb0\+\_\+scheduler.\+cpp\end{DoxyCompactItemize}
