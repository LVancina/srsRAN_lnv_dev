\doxysection{srsran\+::gtpu\+\_\+tunnel\+\_\+ngu\+\_\+tx Class Reference}
\hypertarget{classsrsran_1_1gtpu__tunnel__ngu__tx}{}\label{classsrsran_1_1gtpu__tunnel__ngu__tx}\index{srsran::gtpu\_tunnel\_ngu\_tx@{srsran::gtpu\_tunnel\_ngu\_tx}}


Class used for transmitting GTP-\/U bearers.  




{\ttfamily \#include $<$gtpu\+\_\+tunnel\+\_\+ngu\+\_\+tx.\+h$>$}



Inheritance diagram for srsran\+::gtpu\+\_\+tunnel\+\_\+ngu\+\_\+tx\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d6d/classsrsran_1_1gtpu__tunnel__ngu__tx__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::gtpu\+\_\+tunnel\+\_\+ngu\+\_\+tx\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{df/d1c/classsrsran_1_1gtpu__tunnel__ngu__tx__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__ngu__tx_a0f49ab37fb5e45042e5f7c93ad8237e4}{gtpu\+\_\+tunnel\+\_\+ngu\+\_\+tx}} (srs\+\_\+cu\+\_\+up\+::ue\+\_\+index\+\_\+t ue\+\_\+index, \mbox{\hyperlink{structsrsran_1_1gtpu__config_1_1gtpu__tx__config}{gtpu\+\_\+config\+::gtpu\+\_\+tx\+\_\+config}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cfg\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1dlt__pcap}{dlt\+\_\+pcap}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gtpu\+\_\+pcap\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__upper__layer__notifier}{gtpu\+\_\+tunnel\+\_\+tx\+\_\+upper\+\_\+layer\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{upper\+\_\+dn\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__ngu__tx_a32862bc870b591d8148b58206002a68d}{handle\+\_\+sdu}} (\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\+\_\+buffer}} buf, \mbox{\hyperlink{namespacesrsran_a925956f9fba30e5758ac8b39142a60b1}{qos\+\_\+flow\+\_\+id\+\_\+t}} qfi) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{final}}
\begin{DoxyCompactList}\small\item\em Interface for the lower layers to pass SDUs into the GTP-\/U. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__base__tx}{srsran\+::gtpu\+\_\+tunnel\+\_\+base\+\_\+tx}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__base__tx_a2e43c5de0ed821277825d1723d0989b0}{gtpu\+\_\+tunnel\+\_\+base\+\_\+tx}} (\mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__log__prefix}{gtpu\+\_\+tunnel\+\_\+log\+\_\+prefix}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{log\+\_\+prefix}}, \mbox{\hyperlink{classsrsran_1_1dlt__pcap}{dlt\+\_\+pcap}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gtpu\+\_\+pcap\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__upper__layer__notifier}{gtpu\+\_\+tunnel\+\_\+tx\+\_\+upper\+\_\+layer\+\_\+notifier}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{upper\+\_\+dn\+\_\+}})
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__base__tx_a38fa46bd5f01b21e33dcc39ee5a4edce}{to\+\_\+sockaddr}} (sockaddr\+\_\+storage \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{out\+\_\+sockaddr}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classchar}{char}} \texorpdfstring{$\ast$}{*}addr, uint16\+\_\+t port)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__lower__layer__interface}{srsran\+::gtpu\+\_\+tunnel\+\_\+tx\+\_\+lower\+\_\+layer\+\_\+interface}}}
\begin{DoxyCompactItemize}
\item 
{\bfseries gtpu\+\_\+tunnel\+\_\+tx\+\_\+lower\+\_\+layer\+\_\+interface} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__lower__layer__interface}{gtpu\+\_\+tunnel\+\_\+tx\+\_\+lower\+\_\+layer\+\_\+interface}} \&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
\mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__lower__layer__interface}{gtpu\+\_\+tunnel\+\_\+tx\+\_\+lower\+\_\+layer\+\_\+interface}} \& {\bfseries operator=} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__lower__layer__interface}{gtpu\+\_\+tunnel\+\_\+tx\+\_\+lower\+\_\+layer\+\_\+interface}} \&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
{\bfseries gtpu\+\_\+tunnel\+\_\+tx\+\_\+lower\+\_\+layer\+\_\+interface} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__lower__layer__interface}{gtpu\+\_\+tunnel\+\_\+tx\+\_\+lower\+\_\+layer\+\_\+interface}} \&\&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
\mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__lower__layer__interface}{gtpu\+\_\+tunnel\+\_\+tx\+\_\+lower\+\_\+layer\+\_\+interface}} \& {\bfseries operator=} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__lower__layer__interface}{gtpu\+\_\+tunnel\+\_\+tx\+\_\+lower\+\_\+layer\+\_\+interface}} \&\&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__base__tx}{srsran\+::gtpu\+\_\+tunnel\+\_\+base\+\_\+tx}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__base__tx_a86d6987cff51704bd7e9f7e41aceef9f}{send\+\_\+pdu}} (\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\+\_\+buffer}} buf, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \+::sockaddr\+\_\+storage \&peer\+\_\+sockaddr)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__base__tx}{srsran\+::gtpu\+\_\+tunnel\+\_\+base\+\_\+tx}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1prefixed__logger}{gtpu\+\_\+tunnel\+\_\+logger}} {\bfseries logger}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class used for transmitting GTP-\/U bearers. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1gtpu__tunnel__ngu__tx_a0f49ab37fb5e45042e5f7c93ad8237e4}\label{classsrsran_1_1gtpu__tunnel__ngu__tx_a0f49ab37fb5e45042e5f7c93ad8237e4} 
\index{srsran::gtpu\_tunnel\_ngu\_tx@{srsran::gtpu\_tunnel\_ngu\_tx}!gtpu\_tunnel\_ngu\_tx@{gtpu\_tunnel\_ngu\_tx}}
\index{gtpu\_tunnel\_ngu\_tx@{gtpu\_tunnel\_ngu\_tx}!srsran::gtpu\_tunnel\_ngu\_tx@{srsran::gtpu\_tunnel\_ngu\_tx}}
\doxysubsubsection{\texorpdfstring{gtpu\_tunnel\_ngu\_tx()}{gtpu\_tunnel\_ngu\_tx()}}
{\footnotesize\ttfamily srsran\+::gtpu\+\_\+tunnel\+\_\+ngu\+\_\+tx\+::gtpu\+\_\+tunnel\+\_\+ngu\+\_\+tx (\begin{DoxyParamCaption}\item[{srs\+\_\+cu\+\_\+up\+::ue\+\_\+index\+\_\+t}]{ue\+\_\+index,  }\item[{\mbox{\hyperlink{structsrsran_1_1gtpu__config_1_1gtpu__tx__config}{gtpu\+\_\+config\+::gtpu\+\_\+tx\+\_\+config}}}]{cfg\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1dlt__pcap}{dlt\+\_\+pcap}} \&}]{gtpu\+\_\+pcap\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__upper__layer__notifier}{gtpu\+\_\+tunnel\+\_\+tx\+\_\+upper\+\_\+layer\+\_\+notifier}} \&}]{upper\+\_\+dn\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00045\ \ \ \ \ gtpu\_tunnel\_base\_tx(gtpu\_tunnel\_log\_prefix\{ue\_index,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cfg\_}}.peer\_teid,\ \textcolor{stringliteral}{"{}UL"{}}\},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gtpu\_pcap\_}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{upper\_dn\_}}),\ cfg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cfg\_}})}
\DoxyCodeLine{00046\ \ \ \{}
\DoxyCodeLine{00047\ \ \ \ \ to\_sockaddr(peer\_sockaddr,\ cfg.peer\_addr.c\_str(),\ cfg.peer\_port);}
\DoxyCodeLine{00048\ \ \ \ \ logger.log\_info(\textcolor{stringliteral}{"{}GTPU\ NGU\ Tx\ configured.\ \{\}"{}},\ cfg);}
\DoxyCodeLine{00049\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1gtpu__tunnel__ngu__tx_a32862bc870b591d8148b58206002a68d}\label{classsrsran_1_1gtpu__tunnel__ngu__tx_a32862bc870b591d8148b58206002a68d} 
\index{srsran::gtpu\_tunnel\_ngu\_tx@{srsran::gtpu\_tunnel\_ngu\_tx}!handle\_sdu@{handle\_sdu}}
\index{handle\_sdu@{handle\_sdu}!srsran::gtpu\_tunnel\_ngu\_tx@{srsran::gtpu\_tunnel\_ngu\_tx}}
\doxysubsubsection{\texorpdfstring{handle\_sdu()}{handle\_sdu()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::gtpu\+\_\+tunnel\+\_\+ngu\+\_\+tx\+::handle\+\_\+sdu (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1byte__buffer}{byte\+\_\+buffer}}}]{sdu,  }\item[{\mbox{\hyperlink{namespacesrsran_a925956f9fba30e5758ac8b39142a60b1}{qos\+\_\+flow\+\_\+id\+\_\+t}}}]{qfi }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [final]}, {\ttfamily [virtual]}}



Interface for the lower layers to pass SDUs into the GTP-\/U. 


\begin{DoxyParams}{Parameters}
{\em sdu} & SDU to be handled \\
\hline
{\em qfi} & QoS flow associated with the SDU \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1gtpu__tunnel__tx__lower__layer__interface_aea106bd84fd6370d8f8f41683e81a4bf}{srsran\+::gtpu\+\_\+tunnel\+\_\+tx\+\_\+lower\+\_\+layer\+\_\+interface}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00056\ \ \ \{}
\DoxyCodeLine{00057\ \ \ \ \ gtpu\_header\ hdr\ \ \ \ \ \ \ \ \ =\ \{\};}
\DoxyCodeLine{00058\ \ \ \ \ hdr.flags.version\ \ \ \ \ \ \ =\ GTPU\_FLAGS\_VERSION\_V1;}
\DoxyCodeLine{00059\ \ \ \ \ hdr.flags.protocol\_type\ =\ GTPU\_FLAGS\_GTP\_PROTOCOL;}
\DoxyCodeLine{00060\ \ \ \ \ hdr.flags.ext\_hdr\ \ \ \ \ \ \ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00061\ \ \ \ \ hdr.message\_type\ \ \ \ \ \ \ \ =\ GTPU\_MSG\_DATA\_PDU;}
\DoxyCodeLine{00062\ \ \ \ \ hdr.length\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ buf.length()\ +\ 4\ +\ 4;}
\DoxyCodeLine{00063\ \ \ \ \ hdr.teid\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ cfg.peer\_teid;}
\DoxyCodeLine{00064\ \ \ \ \ hdr.next\_ext\_hdr\_type\ \ \ =\ gtpu\_extension\_header\_type::pdu\_session\_container;}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ byte\_buffer\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ext\_buf}};}
\DoxyCodeLine{00067\ \ \ \ \ bit\_encoder\ encoder\{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ext\_buf}}\};}
\DoxyCodeLine{00068\ \ \ \ \ encoder.pack(1,\ 4);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ PDU\ type}}
\DoxyCodeLine{00069\ \ \ \ \ encoder.pack(0,\ 4);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ unused\ options}}
\DoxyCodeLine{00070\ \ \ \ \ encoder.pack(0,\ 1);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ spare}}
\DoxyCodeLine{00071\ \ \ \ \ encoder.pack(\mbox{\hyperlink{namespacesrsran_a48b1287bbb0da3e8c545174a7483b7a7}{qos\_flow\_id\_to\_uint}}(qfi),\ 7);\ \textcolor{comment}{//\ QFI}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ gtpu\_extension\_header\ ext;}
\DoxyCodeLine{00074\ \ \ \ \ ext.extension\_header\_type\ =\ gtpu\_extension\_header\_type::pdu\_session\_container;}
\DoxyCodeLine{00075\ \ \ \ \ ext.container\ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ext\_buf}};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ hdr.ext\_list.push\_back(ext);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{write\_ok}}\ =\ \mbox{\hyperlink{namespacesrsran_afd81a8c24d4de479c6bd3887e97d640e}{gtpu\_write\_header}}(buf,\ hdr,\ logger);}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{write\_ok}})\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ logger.log\_error(\textcolor{stringliteral}{"{}Dropped\ SDU,\ error\ writing\ GTP-\/U\ header.\ teid=\{\}"{}},\ hdr.teid);}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00084\ \ \ \ \ \}}
\DoxyCodeLine{00085\ \ \ \ \ logger.log\_info(buf.begin(),\ buf.end(),\ \textcolor{stringliteral}{"{}TX\ PDU.\ pdu\_len=\{\}\ teid=\{\}\ qfi=\{\}"{}},\ buf.length(),\ hdr.teid,\ qfi);}
\DoxyCodeLine{00086\ \ \ \ \ send\_pdu(std::move(buf),\ peer\_sockaddr);}
\DoxyCodeLine{00087\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/gtpu/gtpu\+\_\+tunnel\+\_\+ngu\+\_\+tx.\+h\end{DoxyCompactItemize}
