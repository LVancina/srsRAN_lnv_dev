\doxysection{srsran\+::crc\+\_\+calculator\+\_\+clmul\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1crc__calculator__clmul__impl}{}\label{classsrsran_1_1crc__calculator__clmul__impl}\index{srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}}


CRC calculator implementation based on the {\itshape PCLMULQDQ} instruction.  




{\ttfamily \#include $<$crc\+\_\+calculator\+\_\+clmul\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::crc\+\_\+calculator\+\_\+clmul\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{d5/d4a/classsrsran_1_1crc__calculator__clmul__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::crc\+\_\+calculator\+\_\+clmul\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{df/d21/classsrsran_1_1crc__calculator__clmul__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1crc__calculator__clmul__impl_a7f0b2fc21c4c291b7f5982fd1ec7df77}{crc\+\_\+calculator\+\_\+clmul\+\_\+impl}} (\mbox{\hyperlink{namespacesrsran_a435210edce480bf70bdd9d0c887c0c56}{crc\+\_\+generator\+\_\+poly}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{poly\+\_\+}})
\begin{DoxyCompactList}\small\item\em Default constructor from a polynomial. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a0d42ca5ccf5e45162370645b3d94597a}{crc\+\_\+calculator\+\_\+checksum\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1crc__calculator__clmul__impl_aa1181187dedaa1ce51a3bc4540800edb}{calculate\+\_\+byte}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ data) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Calculates the checksum from a byte buffer (8 packed bits in every input byte). \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a0d42ca5ccf5e45162370645b3d94597a}{crc\+\_\+calculator\+\_\+checksum\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1crc__calculator__clmul__impl_ab42db947457cf6b77f4eea55105b1332}{calculate\+\_\+bit}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ data) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Calculates the checksum from a bit buffer (1 bit in for every input byte). \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a0d42ca5ccf5e45162370645b3d94597a}{crc\+\_\+calculator\+\_\+checksum\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1crc__calculator__clmul__impl_a633be6080383439381022374105ffb44}{calculate}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\+\_\+buffer}} \&data) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Calculates the checksum from a bit buffer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a435210edce480bf70bdd9d0c887c0c56}{crc\+\_\+generator\+\_\+poly}} \mbox{\hyperlink{classsrsran_1_1crc__calculator__clmul__impl_a12faf57c4f4d4a83fd869fe5593efc09}{get\+\_\+generator\+\_\+poly}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Returns the identifier of the generator polynomial. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
CRC calculator implementation based on the {\itshape PCLMULQDQ} instruction. 

Port of the {\itshape soft-\/crc} implementation copyrighted by Intel Corporation and licensed under BSD. Source\+: \href{https://github.com/intel/soft-crc}{\texttt{ https\+://github.\+com/intel/soft-\/crc}}

"{}\+Fast CRC Computation for Generic Polynomials Using PCLMULQDQ Instruction"{} URL\+: \href{http://download.intel.com/design/intarch/papers/323102.pdf}{\texttt{ http\+://download.\+intel.\+com/design/intarch/papers/323102.\+pdf}} 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1crc__calculator__clmul__impl_a7f0b2fc21c4c291b7f5982fd1ec7df77}\label{classsrsran_1_1crc__calculator__clmul__impl_a7f0b2fc21c4c291b7f5982fd1ec7df77} 
\index{srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}!crc\_calculator\_clmul\_impl@{crc\_calculator\_clmul\_impl}}
\index{crc\_calculator\_clmul\_impl@{crc\_calculator\_clmul\_impl}!srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}}
\doxysubsubsection{\texorpdfstring{crc\_calculator\_clmul\_impl()}{crc\_calculator\_clmul\_impl()}}
{\footnotesize\ttfamily srsran\+::crc\+\_\+calculator\+\_\+clmul\+\_\+impl\+::crc\+\_\+calculator\+\_\+clmul\+\_\+impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a435210edce480bf70bdd9d0c887c0c56}{crc\+\_\+generator\+\_\+poly}}}]{poly\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Default constructor from a polynomial. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00041\ :\ poly(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{poly\_}}),\ crc\_calc\_lut(poly)\ \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1crc__calculator__clmul__impl_a633be6080383439381022374105ffb44}\label{classsrsran_1_1crc__calculator__clmul__impl_a633be6080383439381022374105ffb44} 
\index{srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}!calculate@{calculate}}
\index{calculate@{calculate}!srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}}
\doxysubsubsection{\texorpdfstring{calculate()}{calculate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a0d42ca5ccf5e45162370645b3d94597a}{crc\+\_\+calculator\+\_\+checksum\+\_\+t}} crc\+\_\+calculator\+\_\+clmul\+\_\+impl\+::calculate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1bit__buffer}{bit\+\_\+buffer}} \&}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Calculates the checksum from a bit buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em data} & Input data. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The resulting CRC checksum. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classsrsran_1_1crc__calculator_aef578a5a33ab7a680911acb2ddcae963}{srsran\+::crc\+\_\+calculator}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00199\ \{}
\DoxyCodeLine{00200\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbytes}}\ \ \ \ \ \ \ \ \ \ =\ data.size()\ /\ 8;}
\DoxyCodeLine{00201\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{remainder\_nbits}}\ =\ data.size()\ \%\ 8;}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \mbox{\hyperlink{classuint32__t}{uint32\_t}}\ crc;}
\DoxyCodeLine{00204\ \ \ \textcolor{keywordflow}{if}\ (poly\ ==\ crc\_generator\_poly::CRC24A)\ \{}
\DoxyCodeLine{00205\ \ \ \ \ crc\ =\ crc32\_calc\_pclmulqdq(data.get\_buffer().first(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbytes}}),\ crc24A\_ctx)\ >>\ 8U;}
\DoxyCodeLine{00206\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (poly\ ==\ crc\_generator\_poly::CRC24B)\ \{}
\DoxyCodeLine{00207\ \ \ \ \ crc\ =\ crc32\_calc\_pclmulqdq(data.get\_buffer().first(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbytes}}),\ crc24B\_ctx)\ >>\ 8U;}
\DoxyCodeLine{00208\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00209\ \ \ \ \ crc\ =\ crc\_calc\_lut.\mbox{\hyperlink{classsrsran_1_1crc__calculator__lut__impl_a5246e6c93b5c770ce2ca3f3ddcfec3c2}{calculate\_byte}}(data.get\_buffer().first(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbytes}}));}
\DoxyCodeLine{00210\ \ \ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \textcolor{comment}{//\ Return\ the\ current\ CRC\ if\ no\ remainder\ bits.}}
\DoxyCodeLine{00213\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{remainder\_nbits}}\ ==\ 0)\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordflow}{return}\ crc;}
\DoxyCodeLine{00215\ \ \ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \textcolor{comment}{//\ Reset\ the\ LUT\ algorithm\ with\ the\ current\ CRC.}}
\DoxyCodeLine{00218\ \ \ crc\_calc\_lut.\mbox{\hyperlink{classsrsran_1_1crc__calculator__lut__impl_ab0c7c74052b6520decc75d2035cff2b2}{reset}}(crc);}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \textcolor{comment}{//\ Extract\ from\ the\ data\ the\ latest\ byte\ with\ zero\ padding.}}
\DoxyCodeLine{00221\ \ \ \mbox{\hyperlink{classuint8__t}{uint8\_t}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{last\_byte}}\ =\ data.extract(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nbytes}}\ *\ 8,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{remainder\_nbits}})\ <<\ (8U\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{remainder\_nbits}});}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \textcolor{comment}{//\ Insert\ the\ latest\ byte\ into\ the\ LUT\ algorithm.}}
\DoxyCodeLine{00224\ \ \ crc\_calc\_lut.\mbox{\hyperlink{classsrsran_1_1crc__calculator__lut__impl_afb92ddb460f7d9400e8978a6568aae39}{put\_byte}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{last\_byte}});}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ \textcolor{comment}{//\ Update\ checksum.}}
\DoxyCodeLine{00227\ \ \ crc\ =\ crc\_calc\_lut.\mbox{\hyperlink{classsrsran_1_1crc__calculator__lut__impl_a667419120c34366e3bdb8df5af2c4332}{get\_checksum}}();}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \textcolor{comment}{//\ Reset\ CRC\ prior\ to\ reverse.}}
\DoxyCodeLine{00230\ \ \ crc\_calc\_lut.\mbox{\hyperlink{classsrsran_1_1crc__calculator__lut__impl_ab0c7c74052b6520decc75d2035cff2b2}{reset}}(crc);}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \textcolor{comment}{//\ Reverse\ the\ padded.}}
\DoxyCodeLine{00233\ \ \ crc\_calc\_lut.\mbox{\hyperlink{classsrsran_1_1crc__calculator__lut__impl_ac1f460d23eafbce60d64e072c1457794}{reversecrcbit}}(8\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{remainder\_nbits}});}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \textcolor{keywordflow}{return}\ crc\_calc\_lut.\mbox{\hyperlink{classsrsran_1_1crc__calculator__lut__impl_a667419120c34366e3bdb8df5af2c4332}{get\_checksum}}();}
\DoxyCodeLine{00236\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1crc__calculator__clmul__impl_ab42db947457cf6b77f4eea55105b1332}\label{classsrsran_1_1crc__calculator__clmul__impl_ab42db947457cf6b77f4eea55105b1332} 
\index{srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}!calculate\_bit@{calculate\_bit}}
\index{calculate\_bit@{calculate\_bit}!srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}}
\doxysubsubsection{\texorpdfstring{calculate\_bit()}{calculate\_bit()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a0d42ca5ccf5e45162370645b3d94597a}{crc\+\_\+calculator\+\_\+checksum\+\_\+t}} crc\+\_\+calculator\+\_\+clmul\+\_\+impl\+::calculate\+\_\+bit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Calculates the checksum from a bit buffer (1 bit in for every input byte). 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em data} & Provides the byte buffer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The resulting CRC checksum. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classsrsran_1_1crc__calculator_ad0d4abb35547dbf3c99af855035581e9}{srsran\+::crc\+\_\+calculator}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00194\ \{}
\DoxyCodeLine{00195\ \ \ \textcolor{keywordflow}{return}\ crc\_calc\_lut.\mbox{\hyperlink{classsrsran_1_1crc__calculator__lut__impl_a224e92c939f342424ca3eb2e2154170f}{calculate\_bit}}(data);}
\DoxyCodeLine{00196\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1crc__calculator__clmul__impl_aa1181187dedaa1ce51a3bc4540800edb}\label{classsrsran_1_1crc__calculator__clmul__impl_aa1181187dedaa1ce51a3bc4540800edb} 
\index{srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}!calculate\_byte@{calculate\_byte}}
\index{calculate\_byte@{calculate\_byte}!srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}}
\doxysubsubsection{\texorpdfstring{calculate\_byte()}{calculate\_byte()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a0d42ca5ccf5e45162370645b3d94597a}{crc\+\_\+calculator\+\_\+checksum\+\_\+t}} crc\+\_\+calculator\+\_\+clmul\+\_\+impl\+::calculate\+\_\+byte (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Calculates the checksum from a byte buffer (8 packed bits in every input byte). 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em data} & Provides the byte buffer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The resulting CRC checksum. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classsrsran_1_1crc__calculator_a527fe01b97675f1709ea4995b7a8f936}{srsran\+::crc\+\_\+calculator}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00181\ \{}
\DoxyCodeLine{00182\ \ \ \textcolor{keywordflow}{if}\ (poly\ ==\ crc\_generator\_poly::CRC24A)\ \{}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordflow}{return}\ crc32\_calc\_pclmulqdq(data,\ crc24A\_ctx)\ >>\ 8U;}
\DoxyCodeLine{00184\ \ \ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \textcolor{keywordflow}{if}\ (poly\ ==\ crc\_generator\_poly::CRC24B)\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keywordflow}{return}\ crc32\_calc\_pclmulqdq(data,\ crc24B\_ctx)\ >>\ 8U;}
\DoxyCodeLine{00188\ \ \ \}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \textcolor{keywordflow}{return}\ crc\_calc\_lut.\mbox{\hyperlink{classsrsran_1_1crc__calculator__lut__impl_a5246e6c93b5c770ce2ca3f3ddcfec3c2}{calculate\_byte}}(data);}
\DoxyCodeLine{00191\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1crc__calculator__clmul__impl_a12faf57c4f4d4a83fd869fe5593efc09}\label{classsrsran_1_1crc__calculator__clmul__impl_a12faf57c4f4d4a83fd869fe5593efc09} 
\index{srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}!get\_generator\_poly@{get\_generator\_poly}}
\index{get\_generator\_poly@{get\_generator\_poly}!srsran::crc\_calculator\_clmul\_impl@{srsran::crc\_calculator\_clmul\_impl}}
\doxysubsubsection{\texorpdfstring{get\_generator\_poly()}{get\_generator\_poly()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a435210edce480bf70bdd9d0c887c0c56}{crc\+\_\+generator\+\_\+poly}} srsran\+::crc\+\_\+calculator\+\_\+clmul\+\_\+impl\+::get\+\_\+generator\+\_\+poly (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the identifier of the generator polynomial. 



Implements \mbox{\hyperlink{classsrsran_1_1crc__calculator_a47c397142a916607dab38210cedc5e4d}{srsran\+::crc\+\_\+calculator}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053\ \{\ \textcolor{keywordflow}{return}\ poly;\ \};}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/channel\+\_\+coding/crc\+\_\+calculator\+\_\+clmul\+\_\+impl.\+h\item 
lib/phy/upper/channel\+\_\+coding/crc\+\_\+calculator\+\_\+clmul\+\_\+impl.\+cpp\end{DoxyCompactItemize}
