\doxysection{srslog\+::json\+\_\+formatter Class Reference}
\hypertarget{classsrslog_1_1json__formatter}{}\label{classsrslog_1_1json__formatter}\index{srslog::json\_formatter@{srslog::json\_formatter}}


{\ttfamily \#include $<$json\+\_\+formatter.\+h$>$}



Inheritance diagram for srslog\+::json\+\_\+formatter\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=227pt]{d4/dbe/classsrslog_1_1json__formatter__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srslog\+::json\+\_\+formatter\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=227pt]{d2/d94/classsrslog_1_1json__formatter__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrslog_1_1log__formatter}{log\+\_\+formatter}} $>$ \mbox{\hyperlink{classsrslog_1_1json__formatter_a447f1e537fb58ad8c8bf011718925556}{clone}} () const override
\begin{DoxyCompactList}\small\item\em Returns a copy of the formatter. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classsrslog_1_1json__formatter_aae3b1fb09cd00a6dbd0d76c390f19675}{format}} (\mbox{\hyperlink{structsrslog_1_1detail_1_1log__entry__metadata}{detail\+::log\+\_\+entry\+\_\+metadata}} \&\&metadata, fmt\+::memory\+\_\+buffer \&buffer) override
\begin{DoxyCompactList}\small\item\em Formats the log entry into the input buffer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrslog_1_1log__formatter}{srslog\+::log\+\_\+formatter}}}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{classsrslog_1_1log__formatter_a975950e648ca907cbeb6c2bab6f78aba}{format\+\_\+full\+\_\+queue\+\_\+error}} (fmt\+::memory\+\_\+buffer \&buffer)
\begin{DoxyCompactList}\small\item\em Formats a full queue error string into the input buffer. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename... Ts$>$ }\\void \mbox{\hyperlink{classsrslog_1_1log__formatter_a6ba50ee854d86f203319f0e579f7cf11}{format\+\_\+ctx}} (const \mbox{\hyperlink{structsrslog_1_1context}{srslog\+::context}}$<$ Ts... $>$ \&ctx, \mbox{\hyperlink{structsrslog_1_1detail_1_1log__entry__metadata}{detail\+::log\+\_\+entry\+\_\+metadata}} \&\&metadata, fmt\+::memory\+\_\+buffer \&buffer)
\begin{DoxyCompactList}\small\item\em Formats the context and log entry into the input buffer. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
JSON formatter class implementation. Formats each log entry and context into its own JSON object making the formatter stateless so that new entries do not depend on the state of previous ones. The output is ready for JSON streaming following the "{}\+Concatenated JSON"{} style. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrslog_1_1json__formatter_aa378fd4a1f30c382e6f14e1eff27dfbf}\label{classsrslog_1_1json__formatter_aa378fd4a1f30c382e6f14e1eff27dfbf} 
\index{srslog::json\_formatter@{srslog::json\_formatter}!json\_formatter@{json\_formatter}}
\index{json\_formatter@{json\_formatter}!srslog::json\_formatter@{srslog::json\_formatter}}
\doxysubsubsection{\texorpdfstring{json\_formatter()}{json\_formatter()}}
{\footnotesize\ttfamily srslog\+::json\+\_\+formatter\+::json\+\_\+formatter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00037\ \{\ scope\_stack.reserve(16);\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrslog_1_1json__formatter_a447f1e537fb58ad8c8bf011718925556}\label{classsrslog_1_1json__formatter_a447f1e537fb58ad8c8bf011718925556} 
\index{srslog::json\_formatter@{srslog::json\_formatter}!clone@{clone}}
\index{clone@{clone}!srslog::json\_formatter@{srslog::json\_formatter}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrslog_1_1log__formatter}{log\+\_\+formatter}} $>$ json\+\_\+formatter\+::clone (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Returns a copy of the formatter. 



Implements \mbox{\hyperlink{classsrslog_1_1log__formatter_a503b1cece98168c52f78627ce7b53a8e}{srslog\+::log\+\_\+formatter}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00029\ \{}
\DoxyCodeLine{00030\ \ \ \textcolor{keywordflow}{return}\ std::unique\_ptr<log\_formatter>(\textcolor{keyword}{new}\ \mbox{\hyperlink{classsrslog_1_1json__formatter}{json\_formatter}});}
\DoxyCodeLine{00031\ \}}

\end{DoxyCode}
\Hypertarget{classsrslog_1_1json__formatter_aae3b1fb09cd00a6dbd0d76c390f19675}\label{classsrslog_1_1json__formatter_aae3b1fb09cd00a6dbd0d76c390f19675} 
\index{srslog::json\_formatter@{srslog::json\_formatter}!format@{format}}
\index{format@{format}!srslog::json\_formatter@{srslog::json\_formatter}}
\doxysubsubsection{\texorpdfstring{format()}{format()}}
{\footnotesize\ttfamily void json\+\_\+formatter\+::format (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrslog_1_1detail_1_1log__entry__metadata}{detail\+::log\+\_\+entry\+\_\+metadata}} \&\&}]{metadata,  }\item[{fmt\+::memory\+\_\+buffer \&}]{buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Formats the log entry into the input buffer. 



Implements \mbox{\hyperlink{classsrslog_1_1log__formatter_a6f291cfae7f93a705ac70d6a3a4ed22b}{srslog\+::log\+\_\+formatter}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00034\ \{}
\DoxyCodeLine{00035\ \ \ fmt::format\_to(buffer,}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\{\(\backslash\)n"{}}}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \(\backslash\)"{}log\_entry\(\backslash\)"{}:\ \(\backslash\)"{}"{}});}
\DoxyCodeLine{00038\ \ \ \textcolor{keywordflow}{if}\ (metadata.fmtstring)\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{if}\ (metadata.store)\ \{}
\DoxyCodeLine{00040\ \ \ \ \ \ \ fmt::basic\_format\_args<fmt::buffer\_context<char>>\ args(*metadata.store);}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ fmt::vformat\_to(buffer,\ fmt::to\_string\_view(metadata.fmtstring),\ args);}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (...)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ fmt::print(stderr,\ \textcolor{stringliteral}{"{}srsLog\ error\ -\/\ Invalid\ format\ string:\ \(\backslash\)"{}\{\}\(\backslash\)"{}\(\backslash\)n"{}},\ metadata.fmtstring);}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ fmt::format\_to(buffer,\ \textcolor{stringliteral}{"{}\ -\/>\ srsLog\ error\ -\/\ Invalid\ format\ string:\ \(\backslash\)"{}\{\}\(\backslash\)"{}"{}},\ metadata.fmtstring);}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#ifdef\ STOP\_ON\_WARNING}}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ std::abort();}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00050\ \ \ \ \ \ \ fmt::format\_to(buffer,\ fmt::to\_string\_view(\textcolor{stringliteral}{"{}\(\backslash\)"{}"{}}));}
\DoxyCodeLine{00051\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ fmt::format\_to(buffer,\ \textcolor{stringliteral}{"{}\{\}\(\backslash\)"{}"{}},\ metadata.fmtstring);}
\DoxyCodeLine{00053\ \ \ \ \ \}}
\DoxyCodeLine{00054\ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keywordflow}{if}\ (!metadata.hex\_dump.empty())\ \{}
\DoxyCodeLine{00057\ \ \ \ \ fmt::format\_to(}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ buffer,\ \textcolor{stringliteral}{"{},\(\backslash\)n\ \ \(\backslash\)"{}hex\_dump\(\backslash\)"{}:\ \(\backslash\)"{}\{:02x\}\(\backslash\)"{}"{}},\ fmt::join(metadata.hex\_dump.cbegin(),\ metadata.hex\_dump.cend(),\ \textcolor{stringliteral}{"{}\ "{}}));}
\DoxyCodeLine{00059\ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ fmt::format\_to(buffer,\ \textcolor{stringliteral}{"{}\(\backslash\)n\}\}\(\backslash\)n"{}});}
\DoxyCodeLine{00062\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/srslog/formatters/json\+\_\+formatter.\+h\item 
lib/srslog/formatters/json\+\_\+formatter.\+cpp\end{DoxyCompactItemize}
