\doxysection{srsran\+::ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher Class Reference}
\hypertarget{classsrsran_1_1ue__pdsch__param__candidate__searcher}{}\label{classsrsran_1_1ue__pdsch__param__candidate__searcher}\index{srsran::ue\_pdsch\_param\_candidate\_searcher@{srsran::ue\_pdsch\_param\_candidate\_searcher}}


This class assists with the search of PDSCH parameters given an UE config that ensures a valid UE PDSCH resource allocation in the Cell Resource Grid. The search iterates through different HARQ, Search\+Space and PDSCH time-\/domain resource candidates, returning only the valid ones. This class operates as a range with \doxylink{classsrsran_1_1ue__pdsch__param__candidate__searcher_a09476b70ae4f52810f4590e6ac152e55}{begin()} and end() iterators, and only searches for valid candidates in a lazy fashion. That means that we only compute all valid candidates if we iterate from \doxylink{classsrsran_1_1ue__pdsch__param__candidate__searcher_a09476b70ae4f52810f4590e6ac152e55}{begin()} to end().  




{\ttfamily \#include $<$ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher.\+h$>$}



Collaboration diagram for srsran\+::ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{dc/db0/classsrsran_1_1ue__pdsch__param__candidate__searcher__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1candidate}{candidate}}
\begin{DoxyCompactList}\small\item\em Parameters for a given PDSCH candidate. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}}
\begin{DoxyCompactList}\small\item\em Iterator for list of candidates. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher_afb44590eeecbe5659d20ce0695a4f0f9}{ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue}{ue}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\+\_\+ref\+\_\+}}, \mbox{\hyperlink{namespacesrsran_a43119bc16f40f319a0f1687fea2b1ff0}{ue\+\_\+cell\+\_\+index\+\_\+t}} cell\+\_\+index, \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\+\_\+retx\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\+\_\+slot\+\_\+}})
\begin{DoxyCompactList}\small\item\em Create a searcher for UE PDSCH parameters. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}} \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher_a09476b70ae4f52810f4590e6ac152e55}{begin}} ()
\begin{DoxyCompactList}\small\item\em Get begin to the list of candidates. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}} \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher_a40c9b6800d7c9b91ab60f1aa8d209f26}{end}} ()
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*}, MAX\+\_\+\+NOF\+\_\+\+HARQS $>$ \& \mbox{\hyperlink{classsrsran_1_1ue__pdsch__param__candidate__searcher_a0e2a54caa82e34c8897662e992ba69a4}{dl\+\_\+harqs}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em List of DL HARQ candidates. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This class assists with the search of PDSCH parameters given an UE config that ensures a valid UE PDSCH resource allocation in the Cell Resource Grid. The search iterates through different HARQ, Search\+Space and PDSCH time-\/domain resource candidates, returning only the valid ones. This class operates as a range with \doxylink{classsrsran_1_1ue__pdsch__param__candidate__searcher_a09476b70ae4f52810f4590e6ac152e55}{begin()} and end() iterators, and only searches for valid candidates in a lazy fashion. That means that we only compute all valid candidates if we iterate from \doxylink{classsrsran_1_1ue__pdsch__param__candidate__searcher_a09476b70ae4f52810f4590e6ac152e55}{begin()} to end(). 

To be a valid candidate, the following conditions must be met\+:
\begin{DoxyItemize}
\item The HARQ process state must match the {\ttfamily is\+\_\+retx} state passed in the constructor. If {\ttfamily is\+\_\+retx} is false, there should be at most one empty HARQ candidate returned during the whole search. If {\ttfamily is\+\_\+retx} is true, all the HARQs of the candidates returned must have a pending retransmission.
\item We avoid Search\+Space\#0 for UE PDSCH allocation.
\item The slot must have sufficient DL symbols, given the PDSCH time-\/domain resource.
\item For {\ttfamily is\+\_\+retx} equal to true, we ensure the candidates will lead to allocations with the same number of DL symbols as the previous HARQ allocation. 
\end{DoxyItemize}

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ue__pdsch__param__candidate__searcher_afb44590eeecbe5659d20ce0695a4f0f9}\label{classsrsran_1_1ue__pdsch__param__candidate__searcher_afb44590eeecbe5659d20ce0695a4f0f9} 
\index{srsran::ue\_pdsch\_param\_candidate\_searcher@{srsran::ue\_pdsch\_param\_candidate\_searcher}!ue\_pdsch\_param\_candidate\_searcher@{ue\_pdsch\_param\_candidate\_searcher}}
\index{ue\_pdsch\_param\_candidate\_searcher@{ue\_pdsch\_param\_candidate\_searcher}!srsran::ue\_pdsch\_param\_candidate\_searcher@{srsran::ue\_pdsch\_param\_candidate\_searcher}}
\doxysubsubsection{\texorpdfstring{ue\_pdsch\_param\_candidate\_searcher()}{ue\_pdsch\_param\_candidate\_searcher()}}
{\footnotesize\ttfamily srsran\+::ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher\+::ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue}{ue}} \&}]{ue\+\_\+ref\+\_\+,  }\item[{\mbox{\hyperlink{namespacesrsran_a43119bc16f40f319a0f1687fea2b1ff0}{ue\+\_\+cell\+\_\+index\+\_\+t}}}]{cell\+\_\+index,  }\item[{\mbox{\hyperlink{classbool}{bool}}}]{is\+\_\+retx\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{pdcch\+\_\+slot\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Create a searcher for UE PDSCH parameters. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00145\ \ \ \ \ ue\_ref(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_ref\_}}),\ ue\_cc(ue\_ref.\mbox{\hyperlink{classsrsran_1_1ue_a80a02c52f95845267a1542233eb81ef0}{get\_cell}}(cell\_index)),\ is\_retx(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_retx\_}}),\ pdcch\_slot(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_slot\_}})}
\DoxyCodeLine{00146\ \ \ \{}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_retx)\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ list\ of\ DL\ HARQ\ processes\ with\ pending\ retx,\ sorted\ from\ oldest\ to\ newest.}}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ !=\ ue\_cc.harqs.nof\_dl\_harqs();\ ++i)\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ dl\_harq\_process\&\ h\ =\ ue\_cc.harqs.dl\_harq(i);}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (h.has\_pending\_retx())\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ dl\_harq\_candidates.push\_back(\&h);}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ std::sort(}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ dl\_harq\_candidates.begin(),}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ dl\_harq\_candidates.end(),}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ [](\textcolor{keyword}{const}\ dl\_harq\_process*\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{lhs}},\ \textcolor{keyword}{const}\ dl\_harq\_process*\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rhs}})\ \{\ return\ lhs-\/>slot\_ack()\ <\ rhs-\/>slot\_ack();\ \});}
\DoxyCodeLine{00159\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ue\_ref.\mbox{\hyperlink{classsrsran_1_1ue_a80a02c52f95845267a1542233eb81ef0}{get\_cell}}(cell\_index).\mbox{\hyperlink{classsrsran_1_1ue__cell_a5547f22a9e862e932a494f187f17b61a}{is\_active}}())\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \textcolor{comment}{//\ If\ there\ are\ no\ pending\ new\ Tx\ bytes,\ return.}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ ue\_ref.\mbox{\hyperlink{classsrsran_1_1ue_ab3cc9e4be962ce4f7a6b034d4ce27e7c}{has\_pending\_dl\_newtx\_bytes}}())\ \{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \textcolor{comment}{//\ Find\ empty\ HARQ.\ Create\ a\ list\ with\ a\ single\ position.}}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \textcolor{keyword}{const}\ dl\_harq\_process*\ h\ =\ ue\_cc.harqs.find\_empty\_dl\_harq();}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (h\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ dl\_harq\_candidates.push\_back(h);}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00170\ \ \ \ \ \}}
\DoxyCodeLine{00171\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ue__pdsch__param__candidate__searcher_a09476b70ae4f52810f4590e6ac152e55}\label{classsrsran_1_1ue__pdsch__param__candidate__searcher_a09476b70ae4f52810f4590e6ac152e55} 
\index{srsran::ue\_pdsch\_param\_candidate\_searcher@{srsran::ue\_pdsch\_param\_candidate\_searcher}!begin@{begin}}
\index{begin@{begin}!srsran::ue\_pdsch\_param\_candidate\_searcher@{srsran::ue\_pdsch\_param\_candidate\_searcher}}
\doxysubsubsection{\texorpdfstring{begin()}{begin()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}} srsran\+::ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher\+::begin (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Get begin to the list of candidates. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00174\ \{\ \textcolor{keywordflow}{return}\ iterator\{*\textcolor{keyword}{this},\ dl\_harq\_candidates.begin(),\ ss\_candidate\_list.begin(),\ 0\};\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__pdsch__param__candidate__searcher_a0e2a54caa82e34c8897662e992ba69a4}\label{classsrsran_1_1ue__pdsch__param__candidate__searcher_a0e2a54caa82e34c8897662e992ba69a4} 
\index{srsran::ue\_pdsch\_param\_candidate\_searcher@{srsran::ue\_pdsch\_param\_candidate\_searcher}!dl\_harqs@{dl\_harqs}}
\index{dl\_harqs@{dl\_harqs}!srsran::ue\_pdsch\_param\_candidate\_searcher@{srsran::ue\_pdsch\_param\_candidate\_searcher}}
\doxysubsubsection{\texorpdfstring{dl\_harqs()}{dl\_harqs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \texorpdfstring{$\ast$}{*}, MAX\+\_\+\+NOF\+\_\+\+HARQS $>$ \& srsran\+::ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher\+::dl\+\_\+harqs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



List of DL HARQ candidates. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00178\ \{\ \textcolor{keywordflow}{return}\ dl\_harq\_candidates;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__pdsch__param__candidate__searcher_a40c9b6800d7c9b91ab60f1aa8d209f26}\label{classsrsran_1_1ue__pdsch__param__candidate__searcher_a40c9b6800d7c9b91ab60f1aa8d209f26} 
\index{srsran::ue\_pdsch\_param\_candidate\_searcher@{srsran::ue\_pdsch\_param\_candidate\_searcher}!end@{end}}
\index{end@{end}!srsran::ue\_pdsch\_param\_candidate\_searcher@{srsran::ue\_pdsch\_param\_candidate\_searcher}}
\doxysubsubsection{\texorpdfstring{end()}{end()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1ue__pdsch__param__candidate__searcher_1_1iterator}{iterator}} srsran\+::ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher\+::end (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00175\ \{\ \textcolor{keywordflow}{return}\ iterator\{*\textcolor{keyword}{this},\ dl\_harq\_candidates.end(),\ \textcolor{keyword}{nullptr},\ 0\};\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/ue\+\_\+scheduling/ue\+\_\+pdsch\+\_\+param\+\_\+candidate\+\_\+searcher.\+h\end{DoxyCompactItemize}
