\doxysection{srsran\+::ecpri\+::packet\+\_\+builder\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1ecpri_1_1packet__builder__impl}{}\label{classsrsran_1_1ecpri_1_1packet__builder__impl}\index{srsran::ecpri::packet\_builder\_impl@{srsran::ecpri::packet\_builder\_impl}}


e\+CPRI packet builder implementation.  




{\ttfamily \#include $<$ecpri\+\_\+packet\+\_\+builder\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::ecpri\+::packet\+\_\+builder\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=210pt]{db/d1b/classsrsran_1_1ecpri_1_1packet__builder__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::ecpri\+::packet\+\_\+builder\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=210pt]{d5/db3/classsrsran_1_1ecpri_1_1packet__builder__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units\+::bytes}} \mbox{\hyperlink{classsrsran_1_1ecpri_1_1packet__builder__impl_a59553baccebc3621966289ee9e7d4f57}{get\+\_\+header\+\_\+size}} (message\+\_\+type msg\+\_\+type) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Returns the e\+CPRI header size in bytes for the given e\+CPRI message type. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ecpri_1_1packet__builder__impl_aaa620ecc14b79c6b85bfe400f8703dc1}{build\+\_\+control\+\_\+packet}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ buffer, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ecpri_1_1realtime__control__parameters}{realtime\+\_\+control\+\_\+parameters}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\+\_\+params}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ecpri_1_1packet__builder__impl_a32716dcd1d8215df1963dfb8b0a1c2b9}{build\+\_\+data\+\_\+packet}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ buffer, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ecpri_1_1iq__data__parameters}{iq\+\_\+data\+\_\+parameters}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\+\_\+params}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1ecpri_1_1packet__builder}{srsran\+::ecpri\+::packet\+\_\+builder}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}packet\+\_\+builder} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
e\+CPRI packet builder implementation. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ecpri_1_1packet__builder__impl_aaa620ecc14b79c6b85bfe400f8703dc1}\label{classsrsran_1_1ecpri_1_1packet__builder__impl_aaa620ecc14b79c6b85bfe400f8703dc1} 
\index{srsran::ecpri::packet\_builder\_impl@{srsran::ecpri::packet\_builder\_impl}!build\_control\_packet@{build\_control\_packet}}
\index{build\_control\_packet@{build\_control\_packet}!srsran::ecpri::packet\_builder\_impl@{srsran::ecpri::packet\_builder\_impl}}
\doxysubsubsection{\texorpdfstring{build\_control\_packet()}{build\_control\_packet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} packet\+\_\+builder\+\_\+impl\+::build\+\_\+control\+\_\+packet (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{buffer,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ecpri_1_1realtime__control__parameters}{realtime\+\_\+control\+\_\+parameters}} \&}]{msg\+\_\+params }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Builds a control e\+CPRI packet using the given control parameters into the given {\ttfamily buffer}.

This function expects that the buffer already contains the payload of the packet. The builder will write the header in the first ecpri\+\_\+packet\+\_\+builder\+::get\+\_\+header\+\_\+size bytes of the buffer.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em buffer} & Buffer where the packet will be built. \\
\hline
\mbox{\texttt{ in}}  & {\em msg\+\_\+params} & e\+CPRI message parameters. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1ecpri_1_1packet__builder_ac773893e1a3d11f2bb9f045a9465ddbd}{srsran\+::ecpri\+::packet\+\_\+builder}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00059\ \{}
\DoxyCodeLine{00060\ \ \ \textcolor{comment}{//\ The\ payload\ is\ already\ appended\ in\ the\ buffer,\ so\ payload\ size\ equals\ buffer\ size\ -\/\ eCPRI\ header\ size.}}
\DoxyCodeLine{00061\ \ \ \mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units::bytes}}\ payload\_size(buffer.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}());}
\DoxyCodeLine{00062\ \ \ payload\_size\ -\/=\ ECPRI\_COMMON\_HEADER\_SIZE;}
\DoxyCodeLine{00063\ \ \ \mbox{\hyperlink{classsrsran_1_1ofh_1_1network__order__binary__serializer}{ofh::network\_order\_binary\_serializer}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}(buffer.\mbox{\hyperlink{classsrsran_1_1span_a451a209648781b54503ae671408e16b8}{data}}());}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ Write\ eCPRI\ version\ and\ concatenation\ fields\ (1\ Byte).}}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}.write(get\_first\_byte\_in\_common\_header());}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \textcolor{comment}{//\ Write\ eCPRI\ message\ type\ (1\ Byte).}}
\DoxyCodeLine{00069\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}.write(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classuint8__t}{uint8\_t}}\textcolor{keyword}{>}(message\_type::rt\_control\_data));}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \textcolor{comment}{//\ Write\ the\ payload\ size\ (2\ Bytes).}}
\DoxyCodeLine{00072\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}.write(\textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(payload\_size.value()));}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \textcolor{comment}{//\ Write\ RTC\_ID\ (2\ Bytes).}}
\DoxyCodeLine{00075\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}.write(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\_params}}.rtc\_id);}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \textcolor{comment}{//\ Write\ SEQ\_ID\ (2\ Byte).}}
\DoxyCodeLine{00078\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}.write(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\_params}}.seq\_id);}
\DoxyCodeLine{00079\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ecpri_1_1packet__builder__impl_a32716dcd1d8215df1963dfb8b0a1c2b9}\label{classsrsran_1_1ecpri_1_1packet__builder__impl_a32716dcd1d8215df1963dfb8b0a1c2b9} 
\index{srsran::ecpri::packet\_builder\_impl@{srsran::ecpri::packet\_builder\_impl}!build\_data\_packet@{build\_data\_packet}}
\index{build\_data\_packet@{build\_data\_packet}!srsran::ecpri::packet\_builder\_impl@{srsran::ecpri::packet\_builder\_impl}}
\doxysubsubsection{\texorpdfstring{build\_data\_packet()}{build\_data\_packet()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} packet\+\_\+builder\+\_\+impl\+::build\+\_\+data\+\_\+packet (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{buffer,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ecpri_1_1iq__data__parameters}{iq\+\_\+data\+\_\+parameters}} \&}]{msg\+\_\+params }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Builds a data e\+CPRI packet using the given data parameters into the given {\ttfamily buffer}.

This function expects that the buffer already contains the payload of the packet. The builder will write the header in the first ecpri\+\_\+packet\+\_\+builder\+::get\+\_\+header\+\_\+size bytes of the buffer.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em buffer} & Buffer where the packet will be built. \\
\hline
\mbox{\texttt{ in}}  & {\em msg\+\_\+params} & e\+CPRI message parameters. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1ecpri_1_1packet__builder_a06dc9ad3eed7bbfb6e1a6dc0bb3967b9}{srsran\+::ecpri\+::packet\+\_\+builder}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00082\ \{}
\DoxyCodeLine{00083\ \ \ \textcolor{comment}{//\ The\ payload\ is\ already\ appended\ in\ the\ buffer,\ so\ payload\ size\ equals\ buffer\ size\ -\/\ eCPRI\ header\ size.}}
\DoxyCodeLine{00084\ \ \ \mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units::bytes}}\ payload\_size(buffer.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}());}
\DoxyCodeLine{00085\ \ \ payload\_size\ -\/=\ ECPRI\_COMMON\_HEADER\_SIZE;}
\DoxyCodeLine{00086\ \ \ \mbox{\hyperlink{classsrsran_1_1ofh_1_1network__order__binary__serializer}{ofh::network\_order\_binary\_serializer}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}(buffer.\mbox{\hyperlink{classsrsran_1_1span_a451a209648781b54503ae671408e16b8}{data}}());}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \textcolor{comment}{//\ Write\ eCPRI\ version\ and\ concatenation\ fields\ (1\ Byte).}}
\DoxyCodeLine{00089\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}.write(get\_first\_byte\_in\_common\_header());}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{//\ Write\ eCPRI\ message\ type\ (1\ Byte).}}
\DoxyCodeLine{00092\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}.write(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classuint8__t}{uint8\_t}}\textcolor{keyword}{>}(message\_type::iq\_data));}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \textcolor{comment}{//\ Write\ the\ payload\ size\ (2\ Bytes).}}
\DoxyCodeLine{00095\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}.write(\textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(payload\_size.value()));}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{comment}{//\ Write\ PC\_ID\ (2\ Bytes).}}
\DoxyCodeLine{00098\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}.write(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\_params}}.pc\_id);}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{//\ Write\ SEQ\_ID\ (2\ Bytes).}}
\DoxyCodeLine{00101\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{serializer}}.write(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\_params}}.seq\_id);}
\DoxyCodeLine{00102\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ecpri_1_1packet__builder__impl_a59553baccebc3621966289ee9e7d4f57}\label{classsrsran_1_1ecpri_1_1packet__builder__impl_a59553baccebc3621966289ee9e7d4f57} 
\index{srsran::ecpri::packet\_builder\_impl@{srsran::ecpri::packet\_builder\_impl}!get\_header\_size@{get\_header\_size}}
\index{get\_header\_size@{get\_header\_size}!srsran::ecpri::packet\_builder\_impl@{srsran::ecpri::packet\_builder\_impl}}
\doxysubsubsection{\texorpdfstring{get\_header\_size()}{get\_header\_size()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1units_1_1bytes}{units\+::bytes}} packet\+\_\+builder\+\_\+impl\+::get\+\_\+header\+\_\+size (\begin{DoxyParamCaption}\item[{message\+\_\+type}]{msg\+\_\+type }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the e\+CPRI header size in bytes for the given e\+CPRI message type. 



Implements \mbox{\hyperlink{classsrsran_1_1ecpri_1_1packet__builder_a588b09bd10c8862105c943693b728f47}{srsran\+::ecpri\+::packet\+\_\+builder}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00032\ \{}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordflow}{switch}\ (msg\_type)\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordflow}{case}\ message\_type::rt\_control\_data:}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ECPRI\_COMMON\_HEADER\_SIZE\ +\ ECPRI\_REALTIME\_CONTROL\_PACKET\_FIELDS\_SIZE;}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordflow}{case}\ message\_type::iq\_data:}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ECPRI\_COMMON\_HEADER\_SIZE\ +\ ECPRI\_IQ\_DATA\_PACKET\_FIELDS\_SIZE;}
\DoxyCodeLine{00038\ \ \ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \textcolor{keywordflow}{return}\ ECPRI\_COMMON\_HEADER\_SIZE;}
\DoxyCodeLine{00041\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/ofh/ecpri/ecpri\+\_\+packet\+\_\+builder\+\_\+impl.\+h\item 
lib/ofh/ecpri/ecpri\+\_\+packet\+\_\+builder\+\_\+impl.\+cpp\end{DoxyCompactItemize}
