\doxysection{srsran\+::downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1downlink__processor__single__executor__impl}{}\label{classsrsran_1_1downlink__processor__single__executor__impl}\index{srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}}


Implementation of a downlink processor.  




{\ttfamily \#include $<$downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/dfd/classsrsran_1_1downlink__processor__single__executor__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dbb/classsrsran_1_1downlink__processor__single__executor__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__impl_a1f14f44dcdd7321a2088b4079c0c9313}{downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl}} (\mbox{\hyperlink{classsrsran_1_1upper__phy__rg__gateway}{upper\+\_\+phy\+\_\+rg\+\_\+gateway}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gateway\+\_\+}}, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pdcch__processor}{pdcch\+\_\+processor}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\+\_\+proc\+\_\+}}, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pdsch__processor}{pdsch\+\_\+processor}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdsch\+\_\+proc\+\_\+}}, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1ssb__processor}{ssb\+\_\+processor}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ssb\+\_\+proc\+\_\+}}, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1nzp__csi__rs__generator}{nzp\+\_\+csi\+\_\+rs\+\_\+generator}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\+\_\+rs\+\_\+proc\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{executor\+\_\+}}, \mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\+\_\+}})
\begin{DoxyCompactList}\small\item\em Builds a downlink processor single executor impl object with the given parameters. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__impl_a53227edd4ce38455ad9a43b6e5f9a292}{process\+\_\+pdcch}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pdcch__processor_1_1pdu__t}{pdcch\+\_\+processor\+::pdu\+\_\+t}} \&pdu) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Process the given PDCCH PDU. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__impl_a684de28891246b05ed6b3ff4e8109226}{process\+\_\+pdsch}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$, \mbox{\hyperlink{classsrsran_1_1pdsch__processor_a6c6105b34bc5b25ffb234eddcbfe3f71}{pdsch\+\_\+processor\+::\+MAX\+\_\+\+NOF\+\_\+\+TRANSPORT\+\_\+\+BLOCKS}} $>$ \&data, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pdsch__processor_1_1pdu__t}{pdsch\+\_\+processor\+::pdu\+\_\+t}} \&pdu) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Process the given PDSCH PDU and its related data, which it is given in data parameter. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__impl_a213c7fbda264c76ceb2da92cf666242b}{process\+\_\+ssb}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ssb__processor_1_1pdu__t}{ssb\+\_\+processor\+::pdu\+\_\+t}} \&pdu) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Process the given SSB PDU. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__impl_a8b6e19abc85061f9d880a7b6912a370e}{process\+\_\+nzp\+\_\+csi\+\_\+rs}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1nzp__csi__rs__generator_1_1config__t}{nzp\+\_\+csi\+\_\+rs\+\_\+generator\+::config\+\_\+t}} \&config) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Process the given NZP-\/\+CSI-\/\+RS configuration. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__impl_ad86585896a4c6f860576c8ecf11f1c33}{configure\+\_\+resource\+\_\+grid}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1resource__grid__context}{resource\+\_\+grid\+\_\+context}} \&context, \mbox{\hyperlink{classsrsran_1_1resource__grid}{resource\+\_\+grid}} \&grid) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Configures the resource grid of the \doxylink{classsrsran_1_1downlink__processor}{downlink\+\_\+processor}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__impl_ad6a698a53afd112a0172d30570284889}{finish\+\_\+processing\+\_\+pdus}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Stops accepting PDUs. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementation of a downlink processor. 

This implementation process the PDUs and config using one executor, which hides the execution threading model. The implementation ensures that all the PDUs and configs will be processed before transmitting the resource grid through the gateway, even if \doxylink{classsrsran_1_1downlink__processor__single__executor__impl_ad6a698a53afd112a0172d30570284889}{finish\+\_\+processing\+\_\+pdus()} method is called before every PDU is processed. \begin{DoxyNote}{Note}
This implementation follows the same method order that the interface. Not following this order will result in undefined behaviour. As a reminder, the order is the following\+: first configure the downlink processor by calling \doxylink{classsrsran_1_1downlink__processor__single__executor__impl_ad86585896a4c6f860576c8ecf11f1c33}{configure\+\_\+resource\+\_\+grid()}. After it is configured it can start to process PDUs. Finally, when no more PDUs need to be processed, \doxylink{classsrsran_1_1downlink__processor__single__executor__impl_ad6a698a53afd112a0172d30570284889}{finish\+\_\+processing\+\_\+pdus()} can be called so the grid can be send through the gateway. Note that \doxylink{classsrsran_1_1downlink__processor__single__executor__impl_ad6a698a53afd112a0172d30570284889}{finish\+\_\+processing\+\_\+pdus()} can be called before the PDUs finished processing, but the resource grid is sent through the gateway as soon as every enqueued PDU before \doxylink{classsrsran_1_1downlink__processor__single__executor__impl_ad6a698a53afd112a0172d30570284889}{finish\+\_\+processing\+\_\+pdus()} is processed . This is controlled counting the PDUs that are processed and finished processing. 

Thread safe class. 
\end{DoxyNote}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1downlink__processor__single__executor__impl_a1f14f44dcdd7321a2088b4079c0c9313}\label{classsrsran_1_1downlink__processor__single__executor__impl_a1f14f44dcdd7321a2088b4079c0c9313} 
\index{srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}!downlink\_processor\_single\_executor\_impl@{downlink\_processor\_single\_executor\_impl}}
\index{downlink\_processor\_single\_executor\_impl@{downlink\_processor\_single\_executor\_impl}!srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}}
\doxysubsubsection{\texorpdfstring{downlink\_processor\_single\_executor\_impl()}{downlink\_processor\_single\_executor\_impl()}}
{\footnotesize\ttfamily downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl\+::downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1upper__phy__rg__gateway}{upper\+\_\+phy\+\_\+rg\+\_\+gateway}} \&}]{gateway\+\_\+,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pdcch__processor}{pdcch\+\_\+processor}} $>$}]{pdcch\+\_\+proc\+\_\+,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1pdsch__processor}{pdsch\+\_\+processor}} $>$}]{pdsch\+\_\+proc\+\_\+,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1ssb__processor}{ssb\+\_\+processor}} $>$}]{ssb\+\_\+proc\+\_\+,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1nzp__csi__rs__generator}{nzp\+\_\+csi\+\_\+rs\+\_\+generator}} $>$}]{csi\+\_\+rs\+\_\+proc\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&}]{executor\+\_\+,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1logger__impl}{srslog\+::basic\+\_\+logger}} \&}]{logger\+\_\+ }\end{DoxyParamCaption})}



Builds a downlink processor single executor impl object with the given parameters. 


\begin{DoxyParams}{Parameters}
{\em gateway\+\_\+} & Gateway that will be used to send the resource grids. \\
\hline
{\em pdcch\+\_\+proc\+\_\+} & PDSCH processor used to process PDSCH PDUs. \\
\hline
{\em pdsch\+\_\+proc\+\_\+} & PDCCH processor used to process PDCCH PDUs. \\
\hline
{\em ssb\+\_\+proc\+\_\+} & SSB processor used to process SSB PDUs. \\
\hline
{\em csi\+\_\+rs\+\_\+proc\+\_\+} & CSI-\/\+RS processor used to process CSI-\/\+RS configurations. \\
\hline
{\em executor\+\_\+} & Task executor that will be used to process every PDU. \\
\hline
{\em logger\+\_\+} & Logger instance. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00041\ \ \ gateway(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gateway\_}}),}
\DoxyCodeLine{00042\ \ \ current\_grid(\textcolor{keyword}{nullptr}),}
\DoxyCodeLine{00043\ \ \ pdcch\_proc(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_proc\_}})),}
\DoxyCodeLine{00044\ \ \ pdsch\_proc(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdsch\_proc\_}})),}
\DoxyCodeLine{00045\ \ \ ssb\_proc(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ssb\_proc\_}})),}
\DoxyCodeLine{00046\ \ \ csi\_rs\_proc(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_rs\_proc\_}})),}
\DoxyCodeLine{00047\ \ \ executor(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{executor\_}}),}
\DoxyCodeLine{00048\ \ \ logger(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{logger\_}}),}
\DoxyCodeLine{00049\ \ \ pdsch\_notifier(*\textcolor{keyword}{this})}
\DoxyCodeLine{00050\ \{}
\DoxyCodeLine{00051\ \ \ srsran\_assert(pdcch\_proc,\ \textcolor{stringliteral}{"{}Invalid\ PDCCH\ processor\ received."{}});}
\DoxyCodeLine{00052\ \ \ srsran\_assert(pdsch\_proc,\ \textcolor{stringliteral}{"{}Invalid\ PDSCH\ processor\ received."{}});}
\DoxyCodeLine{00053\ \ \ srsran\_assert(ssb\_proc,\ \textcolor{stringliteral}{"{}Invalid\ SSB\ processor\ received."{}});}
\DoxyCodeLine{00054\ \ \ srsran\_assert(csi\_rs\_proc,\ \textcolor{stringliteral}{"{}Invalid\ CSI-\/RS\ processor\ received."{}});}
\DoxyCodeLine{00055\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1downlink__processor__single__executor__impl_ad86585896a4c6f860576c8ecf11f1c33}\label{classsrsran_1_1downlink__processor__single__executor__impl_ad86585896a4c6f860576c8ecf11f1c33} 
\index{srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}!configure\_resource\_grid@{configure\_resource\_grid}}
\index{configure\_resource\_grid@{configure\_resource\_grid}!srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}}
\doxysubsubsection{\texorpdfstring{configure\_resource\_grid()}{configure\_resource\_grid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl\+::configure\+\_\+resource\+\_\+grid (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1resource__grid__context}{resource\+\_\+grid\+\_\+context}} \&}]{context,  }\item[{\mbox{\hyperlink{classsrsran_1_1resource__grid}{resource\+\_\+grid}} \&}]{grid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Configures the resource grid of the \doxylink{classsrsran_1_1downlink__processor}{downlink\+\_\+processor}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em context} & Resource grid context that contains the information of the processing slot. \\
\hline
\mbox{\texttt{ in}}  & {\em grid} & Resource grid that will contain the data of the processed downlink channels. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily true} if the resource grid is successfully configured, {\ttfamily false} otherwise.
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\begin{DoxyItemize}
\item Calling this method is mandatory before processing any PDU.
\item The resource grid number of ports and bandwidth must be sufficient to accommodate all the PDUs. 
\end{DoxyItemize}
\end{DoxyNote}


Implements \mbox{\hyperlink{classsrsran_1_1downlink__processor_af578458d6d55670d62a9bf920b5f0bf4}{srsran\+::downlink\+\_\+processor}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00229\ \{}
\DoxyCodeLine{00230\ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \textcolor{comment}{//\ Don't\ configure\ the\ grid\ if\ the\ DL\ processor\ is\ not\ available.}}
\DoxyCodeLine{00233\ \ \ \textcolor{keywordflow}{if}\ (!state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_a943615e1e192c6255a488716c22381c4}{is\_idle}}())\ \{}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00235\ \ \ \}}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ report\_fatal\_error\_if\_not(current\_grid\ ==\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}A\ previously\ configured\ resource\ grid\ is\ still\ in\ use."{}});}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ current\_grid\ =\ \&grid;}
\DoxyCodeLine{00240\ \ \ rg\_context\ \ \ =\ context;}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \textcolor{comment}{//\ update\ internal\ state\ to\ allow\ processing\ PDUs\ and\ increase\ the\ pending\ task\ counter.}}
\DoxyCodeLine{00243\ \ \ state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_a2488b516c908923832cefa3d279d7aa4}{on\_resource\_grid\_configured}}();}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \mbox{\hyperlink{namespacesrsran_a84c18973244331fd6a0b0e1e553e54a1}{l1\_tracer}}\ <<\ \mbox{\hyperlink{structsrsran_1_1instant__trace__event}{instant\_trace\_event}}(\textcolor{stringliteral}{"{}configure\_rg"{}},\ instant\_trace\_event::cpu\_scope::thread);}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00248\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1downlink__processor__single__executor__impl_ad6a698a53afd112a0172d30570284889}\label{classsrsran_1_1downlink__processor__single__executor__impl_ad6a698a53afd112a0172d30570284889} 
\index{srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}!finish\_processing\_pdus@{finish\_processing\_pdus}}
\index{finish\_processing\_pdus@{finish\_processing\_pdus}!srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}}
\doxysubsubsection{\texorpdfstring{finish\_processing\_pdus()}{finish\_processing\_pdus()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl\+::finish\+\_\+processing\+\_\+pdus (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Stops accepting PDUs. 

When this method is called, the interface will not expect to process more PDUs, so once it finishes to process all the enqueued PDUs, the resource grid will be sent to the lower bound gateway using the {\ttfamily context} from \doxylink{classsrsran_1_1downlink__processor__single__executor__impl_ad86585896a4c6f860576c8ecf11f1c33}{configure\+\_\+resource\+\_\+grid()} to provide the processing context of the resource grid in the lower physical layer. 

Implements \mbox{\hyperlink{classsrsran_1_1downlink__processor_af279e448ba47bb0008b4786a3983c5d5}{srsran\+::downlink\+\_\+processor}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00251\ \{}
\DoxyCodeLine{00252\ \ \ \mbox{\hyperlink{namespacesrsran_a84c18973244331fd6a0b0e1e553e54a1}{l1\_tracer}}\ <<\ \mbox{\hyperlink{structsrsran_1_1instant__trace__event}{instant\_trace\_event}}(\textcolor{stringliteral}{"{}finish\_processing\_pdus"{}},\ instant\_trace\_event::cpu\_scope::global);}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{can\_send\_grid}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00255\ \ \ \{}
\DoxyCodeLine{00256\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{comment}{//\ No\ more\ PDUs\ will\ be\ processed.\ If\ there\ are\ no\ pending\ or\ running\ tasks,\ the\ grid\ will\ be\ sent\ right\ away.}}
\DoxyCodeLine{00258\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{can\_send\_grid}}\ =\ state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_aa7acc2f79dd203cf3b2f3dc890e0fc49}{on\_finish\_requested}}();}
\DoxyCodeLine{00259\ \ \ \}}
\DoxyCodeLine{00260\ \ \ \textcolor{comment}{//\ Send\ the\ grid\ if\ all\ the\ PDUs\ finished\ to\ process.}}
\DoxyCodeLine{00261\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{can\_send\_grid}})\ \{}
\DoxyCodeLine{00262\ \ \ \ \ send\_resource\_grid();}
\DoxyCodeLine{00263\ \ \ \}}
\DoxyCodeLine{00264\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1downlink__processor__single__executor__impl_a8b6e19abc85061f9d880a7b6912a370e}\label{classsrsran_1_1downlink__processor__single__executor__impl_a8b6e19abc85061f9d880a7b6912a370e} 
\index{srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}!process\_nzp\_csi\_rs@{process\_nzp\_csi\_rs}}
\index{process\_nzp\_csi\_rs@{process\_nzp\_csi\_rs}!srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}}
\doxysubsubsection{\texorpdfstring{process\_nzp\_csi\_rs()}{process\_nzp\_csi\_rs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl\+::process\+\_\+nzp\+\_\+csi\+\_\+rs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1nzp__csi__rs__generator_1_1config__t}{nzp\+\_\+csi\+\_\+rs\+\_\+generator\+::config\+\_\+t}} \&}]{config }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Process the given NZP-\/\+CSI-\/\+RS configuration. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em config} & NZP-\/\+CSI-\/\+RS configuration to process. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1downlink__processor_ae825b50a21b77917fa5cfec453ce0c65}{srsran\+::downlink\+\_\+processor}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00185\ \{}
\DoxyCodeLine{00186\ \ \ \{}
\DoxyCodeLine{00187\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{comment}{//\ Do\ not\ enqueue\ the\ task\ if\ the\ DL\ processor\ is\ not\ accepting\ PDUs.}}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keywordflow}{if}\ (!state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_a3ba588fff8c23f229b49f8a9c5e3d6dd}{is\_processing}}())\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ logger.warning(config.\mbox{\hyperlink{structsrsran_1_1nzp__csi__rs__generator_1_1config__t_a8905aff831f11cb77fa0b7b98d2b357d}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a19d7b2faaa1fcc74f3d01560339f7602}{sfn}}(),}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.\mbox{\hyperlink{structsrsran_1_1nzp__csi__rs__generator_1_1config__t_a8905aff831f11cb77fa0b7b98d2b357d}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a1808c0aeecc25d6382e49511028c010e}{slot\_index}}(),}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ downlink\ processor\ state.\ Ignoring\ NZP-\/CSI-\/RS:\ \{:s\}"{}},}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config);}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00196\ \ \ \ \ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{comment}{//\ Increase\ the\ pending\ task\ counter.}}
\DoxyCodeLine{00199\ \ \ \ \ state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_a1c1d6a80305d15f0bba48d1d94de2d31}{on\_task\_creation}}();}
\DoxyCodeLine{00200\ \ \ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \textcolor{comment}{//\ Try\ to\ enqueue\ the\ PDU\ processing\ task.}}
\DoxyCodeLine{00203\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{enqueued}}\ =\ executor.\mbox{\hyperlink{classsrsran_1_1task__executor_a7ce182401ef2d2b419bfbed5b5e488f7}{execute}}([\textcolor{keyword}{this},\ config]()\ \{}
\DoxyCodeLine{00204\ \ \ \ \ trace\_point\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{process\_nzp\_csi\_rs\_tp}}\ =\ \mbox{\hyperlink{namespacesrsran_a84c18973244331fd6a0b0e1e553e54a1}{l1\_tracer}}.now();}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{comment}{//\ Do\ not\ execute\ if\ the\ grid\ is\ not\ available.}}
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_grid\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1resource__grid__mapper}{resource\_grid\_mapper}}\&\ mapper\ =\ current\_grid-\/>\mbox{\hyperlink{classsrsran_1_1resource__grid_a038d0178ef753238dad3fb2887336352}{get\_mapper}}();}
\DoxyCodeLine{00209\ \ \ \ \ \ \ csi\_rs\_proc-\/>map(mapper,\ config);}
\DoxyCodeLine{00210\ \ \ \ \ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a84c18973244331fd6a0b0e1e553e54a1}{l1\_tracer}}\ <<\ \mbox{\hyperlink{structsrsran_1_1trace__event}{trace\_event}}(\textcolor{stringliteral}{"{}process\_nzp\_csi\_rs"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{process\_nzp\_csi\_rs\_tp}});}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{comment}{//\ Report\ task\ completion\ to\ FSM.}}
\DoxyCodeLine{00215\ \ \ \ \ on\_task\_completion();}
\DoxyCodeLine{00216\ \ \ \});}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \textcolor{comment}{//\ If\ que\ task\ could\ not\ be\ enqueued.}}
\DoxyCodeLine{00219\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{enqueued}})\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{comment}{//\ Report\ task\ drop\ to\ FSM.}}
\DoxyCodeLine{00221\ \ \ \ \ on\_task\_completion();}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \ \ logger.warning(config.\mbox{\hyperlink{structsrsran_1_1nzp__csi__rs__generator_1_1config__t_a8905aff831f11cb77fa0b7b98d2b357d}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a19d7b2faaa1fcc74f3d01560339f7602}{sfn}}(),\ config.\mbox{\hyperlink{structsrsran_1_1nzp__csi__rs__generator_1_1config__t_a8905aff831f11cb77fa0b7b98d2b357d}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a1808c0aeecc25d6382e49511028c010e}{slot\_index}}(),\ \textcolor{stringliteral}{"{}Failed\ to\ process\ NZP-\/CSI-\/RS:\ \{:s\}"{}},\ config);}
\DoxyCodeLine{00224\ \ \ \}}
\DoxyCodeLine{00225\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1downlink__processor__single__executor__impl_a53227edd4ce38455ad9a43b6e5f9a292}\label{classsrsran_1_1downlink__processor__single__executor__impl_a53227edd4ce38455ad9a43b6e5f9a292} 
\index{srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}!process\_pdcch@{process\_pdcch}}
\index{process\_pdcch@{process\_pdcch}!srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}}
\doxysubsubsection{\texorpdfstring{process\_pdcch()}{process\_pdcch()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl\+::process\+\_\+pdcch (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pdcch__processor_1_1pdu__t}{pdcch\+\_\+processor\+::pdu\+\_\+t}} \&}]{pdu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Process the given PDCCH PDU. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em pdu} & PDCCH PDU to process. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1downlink__processor_a270cb11a434b2f13de896d50e7624840}{srsran\+::downlink\+\_\+processor}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00058\ \{}
\DoxyCodeLine{00059\ \ \ \{}
\DoxyCodeLine{00060\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//\ Do\ not\ enqueue\ the\ task\ if\ the\ DL\ processor\ is\ not\ accepting\ PDUs.}}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordflow}{if}\ (!state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_a3ba588fff8c23f229b49f8a9c5e3d6dd}{is\_processing}}())\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ logger.warning(}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ pdu.\mbox{\hyperlink{structsrsran_1_1pdcch__processor_1_1pdu__t_a065bc7a6cb0e62507d204422650acb6b}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a19d7b2faaa1fcc74f3d01560339f7602}{sfn}}(),\ pdu.\mbox{\hyperlink{structsrsran_1_1pdcch__processor_1_1pdu__t_a065bc7a6cb0e62507d204422650acb6b}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a1808c0aeecc25d6382e49511028c010e}{slot\_index}}(),\ \textcolor{stringliteral}{"{}Invalid\ downlink\ processor\ state.\ Ignoring\ PDCCH:\ \{:s\}"{}},\ pdu);}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{//\ Increase\ the\ pending\ task\ counter.}}
\DoxyCodeLine{00070\ \ \ \ \ state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_a1c1d6a80305d15f0bba48d1d94de2d31}{on\_task\_creation}}();}
\DoxyCodeLine{00071\ \ \ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \textcolor{comment}{//\ Try\ to\ enqueue\ the\ PDU\ processing\ task.}}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{enqueued}}\ =\ executor.\mbox{\hyperlink{classsrsran_1_1task__executor_a7ce182401ef2d2b419bfbed5b5e488f7}{execute}}([\textcolor{keyword}{this},\ pdu]()\ \{}
\DoxyCodeLine{00075\ \ \ \ \ trace\_point\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{process\_pdcch\_tp}}\ =\ \mbox{\hyperlink{namespacesrsran_a84c18973244331fd6a0b0e1e553e54a1}{l1\_tracer}}.now();}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ Do\ not\ execute\ if\ the\ grid\ is\ not\ available.}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_grid\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1resource__grid__mapper}{resource\_grid\_mapper}}\&\ mapper\ =\ current\_grid-\/>\mbox{\hyperlink{classsrsran_1_1resource__grid_a038d0178ef753238dad3fb2887336352}{get\_mapper}}();}
\DoxyCodeLine{00080\ \ \ \ \ \ \ pdcch\_proc-\/>process(mapper,\ pdu);}
\DoxyCodeLine{00081\ \ \ \ \ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a84c18973244331fd6a0b0e1e553e54a1}{l1\_tracer}}\ <<\ \mbox{\hyperlink{structsrsran_1_1trace__event}{trace\_event}}(\textcolor{stringliteral}{"{}process\_pdcch"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{process\_pdcch\_tp}});}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{comment}{//\ Report\ task\ completion\ to\ FSM.}}
\DoxyCodeLine{00086\ \ \ \ \ on\_task\_completion();}
\DoxyCodeLine{00087\ \ \ \});}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \textcolor{comment}{//\ If\ que\ task\ could\ not\ be\ enqueued.}}
\DoxyCodeLine{00090\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{enqueued}})\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//\ Report\ task\ drop\ to\ FSM.}}
\DoxyCodeLine{00092\ \ \ \ \ on\_task\_completion();}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ logger.warning(pdu.\mbox{\hyperlink{structsrsran_1_1pdcch__processor_1_1pdu__t_a065bc7a6cb0e62507d204422650acb6b}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a19d7b2faaa1fcc74f3d01560339f7602}{sfn}}(),\ pdu.\mbox{\hyperlink{structsrsran_1_1pdcch__processor_1_1pdu__t_a065bc7a6cb0e62507d204422650acb6b}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a1808c0aeecc25d6382e49511028c010e}{slot\_index}}(),\ \textcolor{stringliteral}{"{}Failed\ to\ process\ PDCCH:\ \{:s\}"{}},\ pdu);}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1downlink__processor__single__executor__impl_a684de28891246b05ed6b3ff4e8109226}\label{classsrsran_1_1downlink__processor__single__executor__impl_a684de28891246b05ed6b3ff4e8109226} 
\index{srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}!process\_pdsch@{process\_pdsch}}
\index{process\_pdsch@{process\_pdsch}!srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}}
\doxysubsubsection{\texorpdfstring{process\_pdsch()}{process\_pdsch()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl\+::process\+\_\+pdsch (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$, \mbox{\hyperlink{classsrsran_1_1pdsch__processor_a6c6105b34bc5b25ffb234eddcbfe3f71}{pdsch\+\_\+processor\+::\+MAX\+\_\+\+NOF\+\_\+\+TRANSPORT\+\_\+\+BLOCKS}} $>$ \&}]{data,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pdsch__processor_1_1pdu__t}{pdsch\+\_\+processor\+::pdu\+\_\+t}} \&}]{pdu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Process the given PDSCH PDU and its related data, which it is given in data parameter. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em data} & Contains the PDSCH transport blocks. \\
\hline
\mbox{\texttt{ in}}  & {\em pdu} & PDSCH PDU to process. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1downlink__processor_a1291046c6450686f6363442c8460b332}{srsran\+::downlink\+\_\+processor}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00101\ \{}
\DoxyCodeLine{00102\ \ \ \{}
\DoxyCodeLine{00103\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{comment}{//\ Do\ not\ enqueue\ the\ task\ if\ the\ DL\ processor\ is\ not\ accepting\ PDUs.}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordflow}{if}\ (!state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_a3ba588fff8c23f229b49f8a9c5e3d6dd}{is\_processing}}())\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ logger.warning(}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ pdu.\mbox{\hyperlink{structsrsran_1_1pdsch__processor_1_1pdu__t_ad9b35e363e72713730e0f9199c761a00}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a19d7b2faaa1fcc74f3d01560339f7602}{sfn}}(),\ pdu.\mbox{\hyperlink{structsrsran_1_1pdsch__processor_1_1pdu__t_ad9b35e363e72713730e0f9199c761a00}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a1808c0aeecc25d6382e49511028c010e}{slot\_index}}(),\ \textcolor{stringliteral}{"{}Invalid\ downlink\ processor\ state.\ Ignoring\ PDSCH:\ \{:s\}"{}},\ pdu);}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00110\ \ \ \ \ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//\ Increase\ the\ pending\ task\ counter.}}
\DoxyCodeLine{00113\ \ \ \ \ state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_a1c1d6a80305d15f0bba48d1d94de2d31}{on\_task\_creation}}();}
\DoxyCodeLine{00114\ \ \ \}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \textcolor{comment}{//\ Try\ to\ enqueue\ the\ PDU\ processing\ task.}}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{enqueued}}\ =\ executor.\mbox{\hyperlink{classsrsran_1_1task__executor_a7ce182401ef2d2b419bfbed5b5e488f7}{execute}}([\textcolor{keyword}{this},\ data,\ pdu]()\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{00118\ \ \ \ \ trace\_point\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{process\_pdsch\_tp}}\ =\ \mbox{\hyperlink{namespacesrsran_a84c18973244331fd6a0b0e1e553e54a1}{l1\_tracer}}.now();}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{comment}{//\ Do\ not\ execute\ if\ the\ grid\ is\ not\ available.}}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_grid\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1resource__grid__mapper}{resource\_grid\_mapper}}\&\ mapper\ =\ current\_grid-\/>\mbox{\hyperlink{classsrsran_1_1resource__grid_a038d0178ef753238dad3fb2887336352}{get\_mapper}}();}
\DoxyCodeLine{00123\ \ \ \ \ \ \ pdsch\_proc-\/>process(mapper,\ pdsch\_notifier,\ data,\ pdu);}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a84c18973244331fd6a0b0e1e553e54a1}{l1\_tracer}}\ <<\ \mbox{\hyperlink{structsrsran_1_1trace__event}{trace\_event}}(\textcolor{stringliteral}{"{}process\_pdsch"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{process\_pdsch\_tp}});}
\DoxyCodeLine{00126\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \textcolor{comment}{//\ Inform\ about\ the\ dropped\ PDSCH.}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ logger.warning(pdu.\mbox{\hyperlink{structsrsran_1_1pdsch__processor_1_1pdu__t_ad9b35e363e72713730e0f9199c761a00}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a19d7b2faaa1fcc74f3d01560339f7602}{sfn}}(),\ pdu.\mbox{\hyperlink{structsrsran_1_1pdsch__processor_1_1pdu__t_ad9b35e363e72713730e0f9199c761a00}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a1808c0aeecc25d6382e49511028c010e}{slot\_index}}(),\ \textcolor{stringliteral}{"{}Resource\ grid\ not\ configured.\ Ignoring\ PDSCH\ \{:s\}."{}},\ pdu);}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \ \ \textcolor{comment}{//\ Report\ task\ drop\ to\ FSM.}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ on\_task\_completion();}
\DoxyCodeLine{00132\ \ \ \ \ \}}
\DoxyCodeLine{00133\ \ \ \});}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \textcolor{comment}{//\ If\ que\ task\ could\ not\ be\ enqueued.}}
\DoxyCodeLine{00136\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{enqueued}})\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{comment}{//\ Report\ task\ drop\ to\ FSM.}}
\DoxyCodeLine{00138\ \ \ \ \ on\_task\_completion();}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ logger.warning(pdu.\mbox{\hyperlink{structsrsran_1_1pdsch__processor_1_1pdu__t_ad9b35e363e72713730e0f9199c761a00}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a19d7b2faaa1fcc74f3d01560339f7602}{sfn}}(),\ pdu.\mbox{\hyperlink{structsrsran_1_1pdsch__processor_1_1pdu__t_ad9b35e363e72713730e0f9199c761a00}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a1808c0aeecc25d6382e49511028c010e}{slot\_index}}(),\ \textcolor{stringliteral}{"{}Failed\ to\ process\ PDSCH:\ \{:s\}"{}},\ pdu);}
\DoxyCodeLine{00141\ \ \ \}}
\DoxyCodeLine{00142\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1downlink__processor__single__executor__impl_a213c7fbda264c76ceb2da92cf666242b}\label{classsrsran_1_1downlink__processor__single__executor__impl_a213c7fbda264c76ceb2da92cf666242b} 
\index{srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}!process\_ssb@{process\_ssb}}
\index{process\_ssb@{process\_ssb}!srsran::downlink\_processor\_single\_executor\_impl@{srsran::downlink\_processor\_single\_executor\_impl}}
\doxysubsubsection{\texorpdfstring{process\_ssb()}{process\_ssb()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl\+::process\+\_\+ssb (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ssb__processor_1_1pdu__t}{ssb\+\_\+processor\+::pdu\+\_\+t}} \&}]{pdu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Process the given SSB PDU. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em pdu} & SSB PDU to pr \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1downlink__processor_ae74690336558a5a3419b59e58eebdb42}{srsran\+::downlink\+\_\+processor}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00145\ \{}
\DoxyCodeLine{00146\ \ \ \{}
\DoxyCodeLine{00147\ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{comment}{//\ Do\ not\ enqueue\ the\ task\ if\ the\ DL\ processor\ is\ not\ accepting\ PDUs.}}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordflow}{if}\ (!state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_a3ba588fff8c23f229b49f8a9c5e3d6dd}{is\_processing}}())\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ logger.warning(}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ pdu.\mbox{\hyperlink{structsrsran_1_1ssb__processor_1_1pdu__t_a6a5cf3340deeb056edfcfd6200eb81cf}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a19d7b2faaa1fcc74f3d01560339f7602}{sfn}}(),\ pdu.\mbox{\hyperlink{structsrsran_1_1ssb__processor_1_1pdu__t_a6a5cf3340deeb056edfcfd6200eb81cf}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a1808c0aeecc25d6382e49511028c010e}{slot\_index}}(),\ \textcolor{stringliteral}{"{}Invalid\ downlink\ processor\ state.\ Ignoring\ SSB:\ \{:s\}"{}},\ pdu);}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00154\ \ \ \ \ \}}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{comment}{//\ Increase\ the\ pending\ task\ counter.}}
\DoxyCodeLine{00157\ \ \ \ \ state.\mbox{\hyperlink{classsrsran_1_1downlink__processor__single__executor__state_a1c1d6a80305d15f0bba48d1d94de2d31}{on\_task\_creation}}();}
\DoxyCodeLine{00158\ \ \ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \textcolor{comment}{//\ Try\ to\ enqueue\ the\ PDU\ processing\ task.}}
\DoxyCodeLine{00161\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{enqueued}}\ =\ executor.\mbox{\hyperlink{classsrsran_1_1task__executor_a7ce182401ef2d2b419bfbed5b5e488f7}{execute}}([\textcolor{keyword}{this},\ pdu]()\ \{}
\DoxyCodeLine{00162\ \ \ \ \ trace\_point\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{process\_ssb\_tp}}\ =\ \mbox{\hyperlink{namespacesrsran_a84c18973244331fd6a0b0e1e553e54a1}{l1\_tracer}}.now();}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{comment}{//\ Do\ not\ execute\ if\ the\ grid\ is\ not\ available.}}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_grid\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ ssb\_proc-\/>process(current\_grid-\/>\mbox{\hyperlink{classsrsran_1_1resource__grid_aed355dfce387dda5f340b655df5248ae}{get\_writer}}(),\ pdu);}
\DoxyCodeLine{00167\ \ \ \ \ \}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a84c18973244331fd6a0b0e1e553e54a1}{l1\_tracer}}\ <<\ \mbox{\hyperlink{structsrsran_1_1trace__event}{trace\_event}}(\textcolor{stringliteral}{"{}process\_ssb"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{process\_ssb\_tp}});}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{comment}{//\ Report\ task\ completion\ to\ FSM.}}
\DoxyCodeLine{00172\ \ \ \ \ on\_task\_completion();}
\DoxyCodeLine{00173\ \ \ \});}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \textcolor{comment}{//\ If\ que\ task\ could\ not\ be\ enqueued.}}
\DoxyCodeLine{00176\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{enqueued}})\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{comment}{//\ Report\ task\ drop\ to\ FSM.}}
\DoxyCodeLine{00178\ \ \ \ \ on\_task\_completion();}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ logger.warning(pdu.\mbox{\hyperlink{structsrsran_1_1ssb__processor_1_1pdu__t_a6a5cf3340deeb056edfcfd6200eb81cf}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a19d7b2faaa1fcc74f3d01560339f7602}{sfn}}(),\ pdu.\mbox{\hyperlink{structsrsran_1_1ssb__processor_1_1pdu__t_a6a5cf3340deeb056edfcfd6200eb81cf}{slot}}.\mbox{\hyperlink{classsrsran_1_1slot__point_a1808c0aeecc25d6382e49511028c010e}{slot\_index}}(),\ \textcolor{stringliteral}{"{}Failed\ to\ process\ SSB:\ \{:s\}"{}},\ pdu);}
\DoxyCodeLine{00181\ \ \ \}}
\DoxyCodeLine{00182\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl.\+h\item 
lib/phy/upper/downlink\+\_\+processor\+\_\+single\+\_\+executor\+\_\+impl.\+cpp\end{DoxyCompactItemize}
