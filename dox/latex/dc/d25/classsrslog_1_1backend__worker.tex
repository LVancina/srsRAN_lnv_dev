\doxysection{srslog\+::backend\+\_\+worker Class Reference}
\hypertarget{classsrslog_1_1backend__worker}{}\label{classsrslog_1_1backend__worker}\index{srslog::backend\_worker@{srslog::backend\_worker}}


{\ttfamily \#include $<$backend\+\_\+worker.\+h$>$}



Collaboration diagram for srslog\+::backend\+\_\+worker\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{d3/de0/classsrslog_1_1backend__worker__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrslog_1_1backend__worker_a19a4dbdb643f91453481c69baa5f27bc}{backend\+\_\+worker}} (\mbox{\hyperlink{classsrslog_1_1sink__repository}{sink\+\_\+repository}} \&sink\+\_\+repo\+\_\+, \mbox{\hyperlink{classsrslog_1_1detail_1_1work__queue}{detail\+::work\+\_\+queue}}$<$ \mbox{\hyperlink{structsrslog_1_1detail_1_1log__entry}{detail\+::log\+\_\+entry}} $>$ \&queue\+\_\+, \mbox{\hyperlink{classsrslog_1_1detail_1_1dyn__arg__store__pool}{detail\+::dyn\+\_\+arg\+\_\+store\+\_\+pool}} \&arg\+\_\+pool\+\_\+)
\item 
\Hypertarget{classsrslog_1_1backend__worker_af4d66a0f432aa89c52d534a51e9f9d76}\label{classsrslog_1_1backend__worker_af4d66a0f432aa89c52d534a51e9f9d76} 
{\bfseries backend\+\_\+worker} (const \mbox{\hyperlink{classsrslog_1_1backend__worker}{backend\+\_\+worker}} \&)=delete
\item 
\Hypertarget{classsrslog_1_1backend__worker_a9076912765e603c3a1bf6fa9ff286785}\label{classsrslog_1_1backend__worker_a9076912765e603c3a1bf6fa9ff286785} 
\mbox{\hyperlink{classsrslog_1_1backend__worker}{backend\+\_\+worker}} \& {\bfseries operator=} (const \mbox{\hyperlink{classsrslog_1_1backend__worker}{backend\+\_\+worker}} \&)=delete
\item 
void \mbox{\hyperlink{classsrslog_1_1backend__worker_ab82ec78d95c8b3b8ea623911dd62268f}{start}} (backend\+\_\+priority priority)
\item 
void \mbox{\hyperlink{classsrslog_1_1backend__worker_a4cc4b03e0bfdd20fa137f6b5669eb9a7}{stop}} ()
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrslog_1_1backend__worker_a779a741d31c550aa735bf2962177700f}{is\+\_\+running}} () const
\item 
void \mbox{\hyperlink{classsrslog_1_1backend__worker_a0254ca3a08a242d6ab89546e562dbee1}{set\+\_\+error\+\_\+handler}} (error\+\_\+handler new\+\_\+err\+\_\+handler)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The backend worker runs in a secondary thread a routine that endlessly pops log entries from a work queue and dispatches them to the selected sinks. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrslog_1_1backend__worker_a19a4dbdb643f91453481c69baa5f27bc}\label{classsrslog_1_1backend__worker_a19a4dbdb643f91453481c69baa5f27bc} 
\index{srslog::backend\_worker@{srslog::backend\_worker}!backend\_worker@{backend\_worker}}
\index{backend\_worker@{backend\_worker}!srslog::backend\_worker@{srslog::backend\_worker}}
\doxysubsubsection{\texorpdfstring{backend\_worker()}{backend\_worker()}}
{\footnotesize\ttfamily srslog\+::backend\+\_\+worker\+::backend\+\_\+worker (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrslog_1_1sink__repository}{sink\+\_\+repository}} \&}]{sink\+\_\+repo\+\_\+,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1work__queue}{detail\+::work\+\_\+queue}}$<$ \mbox{\hyperlink{structsrslog_1_1detail_1_1log__entry}{detail\+::log\+\_\+entry}} $>$ \&}]{queue\+\_\+,  }\item[{\mbox{\hyperlink{classsrslog_1_1detail_1_1dyn__arg__store__pool}{detail\+::dyn\+\_\+arg\+\_\+store\+\_\+pool}} \&}]{arg\+\_\+pool\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00044\ \ \ \ \ sink\_repo(sink\_repo\_),\ queue(queue\_),\ arg\_pool(arg\_pool\_),\ running\_flag(\textcolor{keyword}{false})}
\DoxyCodeLine{00045\ \ \ \{}
\DoxyCodeLine{00046\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrslog_1_1backend__worker_a861a7bbf107730b8c5916c4ee0499828}\label{classsrslog_1_1backend__worker_a861a7bbf107730b8c5916c4ee0499828} 
\index{srslog::backend\_worker@{srslog::backend\_worker}!````~backend\_worker@{\texorpdfstring{$\sim$}{\string~}backend\_worker}}
\index{````~backend\_worker@{\texorpdfstring{$\sim$}{\string~}backend\_worker}!srslog::backend\_worker@{srslog::backend\_worker}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}backend\_worker()}{\string~backend\_worker()}}
{\footnotesize\ttfamily srslog\+::backend\+\_\+worker\+::\texorpdfstring{$\sim$}{\string~}backend\+\_\+worker (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00051\ \{\ \mbox{\hyperlink{classsrslog_1_1backend__worker_a4cc4b03e0bfdd20fa137f6b5669eb9a7}{stop}}();\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrslog_1_1backend__worker_a779a741d31c550aa735bf2962177700f}\label{classsrslog_1_1backend__worker_a779a741d31c550aa735bf2962177700f} 
\index{srslog::backend\_worker@{srslog::backend\_worker}!is\_running@{is\_running}}
\index{is\_running@{is\_running}!srslog::backend\_worker@{srslog::backend\_worker}}
\doxysubsubsection{\texorpdfstring{is\_running()}{is\_running()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srslog\+::backend\+\_\+worker\+::is\+\_\+running (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Returns true if the worker thread is currently running, otherwise returns false. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00066\ \{\ \textcolor{keywordflow}{return}\ running\_flag;\ \}}

\end{DoxyCode}
\Hypertarget{classsrslog_1_1backend__worker_a0254ca3a08a242d6ab89546e562dbee1}\label{classsrslog_1_1backend__worker_a0254ca3a08a242d6ab89546e562dbee1} 
\index{srslog::backend\_worker@{srslog::backend\_worker}!set\_error\_handler@{set\_error\_handler}}
\index{set\_error\_handler@{set\_error\_handler}!srslog::backend\_worker@{srslog::backend\_worker}}
\doxysubsubsection{\texorpdfstring{set\_error\_handler()}{set\_error\_handler()}}
{\footnotesize\ttfamily void srslog\+::backend\+\_\+worker\+::set\+\_\+error\+\_\+handler (\begin{DoxyParamCaption}\item[{error\+\_\+handler}]{new\+\_\+err\+\_\+handler }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Uses the specified error handler to receive error notifications. Calls to this method when the worker is running will get ignored. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00071\ \ \ \{}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ Ignore\ new\ handlers\ when\ the\ worker\ is\ running.}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsrslog_1_1backend__worker_a779a741d31c550aa735bf2962177700f}{is\_running}}())\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00075\ \ \ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ Install\ a\ dummy\ callback\ if\ the\ input\ one\ is\ empty.\ This\ avoids\ having\ to}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//\ check\ for\ null\ at\ each\ call\ site.}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{if}\ (!new\_err\_handler)\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ err\_handler\ =\ [](\textcolor{keyword}{const}\ std::string\&)\ \{\};}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ err\_handler\ =\ std::move(new\_err\_handler);}
\DoxyCodeLine{00085\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrslog_1_1backend__worker_ab82ec78d95c8b3b8ea623911dd62268f}\label{classsrslog_1_1backend__worker_ab82ec78d95c8b3b8ea623911dd62268f} 
\index{srslog::backend\_worker@{srslog::backend\_worker}!start@{start}}
\index{start@{start}!srslog::backend\_worker@{srslog::backend\_worker}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily void backend\+\_\+worker\+::start (\begin{DoxyParamCaption}\item[{backend\+\_\+priority}]{priority }\end{DoxyParamCaption})}

Starts the backend worker thread. After returning from this function the secondary thread is ensured to be running. Calling this function more than once has no effect. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00092\ \{}
\DoxyCodeLine{00093\ \ \ \textcolor{comment}{//\ Ensure\ we\ only\ create\ the\ worker\ thread\ once.}}
\DoxyCodeLine{00094\ \ \ std::call\_once(start\_once\_flag,\ [\textcolor{keyword}{this},\ priority]()\ \{\ create\_worker(priority);\ \});}
\DoxyCodeLine{00095\ \}}

\end{DoxyCode}
\Hypertarget{classsrslog_1_1backend__worker_a4cc4b03e0bfdd20fa137f6b5669eb9a7}\label{classsrslog_1_1backend__worker_a4cc4b03e0bfdd20fa137f6b5669eb9a7} 
\index{srslog::backend\_worker@{srslog::backend\_worker}!stop@{stop}}
\index{stop@{stop}!srslog::backend\_worker@{srslog::backend\_worker}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily void backend\+\_\+worker\+::stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Stops the backend worker thread if it is running, otherwise the call has no effect. After returning from this function the secondary thread is ensured to have terminated. Calling this function more than once has no effect. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \ \ \textcolor{comment}{//\ Signal\ the\ worker\ thread\ to\ stop.}}
\DoxyCodeLine{00032\ \ \ running\_flag\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordflow}{if}\ (worker\_thread.joinable())\ \{}
\DoxyCodeLine{00034\ \ \ \ \ worker\_thread.join();}
\DoxyCodeLine{00035\ \ \ \}}
\DoxyCodeLine{00036\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/srslog/backend\+\_\+worker.\+h\item 
lib/srslog/backend\+\_\+worker.\+cpp\end{DoxyCompactItemize}
