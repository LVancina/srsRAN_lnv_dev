\doxysection{srsran\+::ue\+\_\+link\+\_\+adaptation\+\_\+controller Class Reference}
\hypertarget{classsrsran_1_1ue__link__adaptation__controller}{}\label{classsrsran_1_1ue__link__adaptation__controller}\index{srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}}


Component that handles the derivation of the MCS for a UE, given its CSI, PHY estimates, and experienced channel BLER.  




{\ttfamily \#include $<$ue\+\_\+link\+\_\+adaptation\+\_\+controller.\+h$>$}



Collaboration diagram for srsran\+::ue\+\_\+link\+\_\+adaptation\+\_\+controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=220pt]{df/d68/classsrsran_1_1ue__link__adaptation__controller__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_a4ea870dbfa2f00e8170a194d971b3bc4}{ue\+\_\+link\+\_\+adaptation\+\_\+controller}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\+\_\+configuration}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\+\_\+cfg\+\_\+}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__channel__state__manager}{ue\+\_\+channel\+\_\+state\+\_\+manager}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\+\_\+channel\+\_\+state}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_ac37977a3082a3e97784c4e343f4f9e22}{handle\+\_\+dl\+\_\+ack\+\_\+info}} (\mbox{\hyperlink{classbool}{bool}} ack, \mbox{\hyperlink{namespacesrsran_a367cc2af01bc27587547d88877227aee}{sch\+\_\+mcs\+\_\+index}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\+\_\+mcs}}, \mbox{\hyperlink{namespacesrsran_a7360cbf57f4cd82cfda032d47fa58e81}{pdsch\+\_\+mcs\+\_\+table}} mcs\+\_\+table)
\begin{DoxyCompactList}\small\item\em Update DL link quality with the latest DL HARQ feedback. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_afe8431650dae7b1814a8a6966049a685}{handle\+\_\+ul\+\_\+crc\+\_\+info}} (\mbox{\hyperlink{classbool}{bool}} crc, \mbox{\hyperlink{namespacesrsran_a367cc2af01bc27587547d88877227aee}{sch\+\_\+mcs\+\_\+index}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\+\_\+mcs}}, \mbox{\hyperlink{namespacesrsran_ab9c85fbd71b868a0cc3ba0b21d0c2bbf}{pusch\+\_\+mcs\+\_\+table}} mcs\+\_\+table)
\begin{DoxyCompactList}\small\item\em Update UL link quality with the latest UL CRC feedback. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{namespacesrsran_a367cc2af01bc27587547d88877227aee}{sch\+\_\+mcs\+\_\+index}} $>$ \mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_a6afdd03b41aa32b4be5c73248025a572}{calculate\+\_\+dl\+\_\+mcs}} (\mbox{\hyperlink{namespacesrsran_a7360cbf57f4cd82cfda032d47fa58e81}{pdsch\+\_\+mcs\+\_\+table}} mcs\+\_\+table) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Derives an adequate MCS given the reported CQI and experienced BLER. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a367cc2af01bc27587547d88877227aee}{sch\+\_\+mcs\+\_\+index}} \mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_a7343a4a0f00246cdab33e915e042be5b}{calculate\+\_\+ul\+\_\+mcs}} (\mbox{\hyperlink{namespacesrsran_ab9c85fbd71b868a0cc3ba0b21d0c2bbf}{pusch\+\_\+mcs\+\_\+table}} mcs\+\_\+table) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Derives an adequate MCS given the estimated UL SNR and experienced BLER. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classfloat}{float}} \mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_ae9a0a43b2798fe6bc0af75ec69f40422}{dl\+\_\+cqi\+\_\+offset}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Get the value of the DL CQI offset that the OLLA algorithm is currently using. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classfloat}{float}} \mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_a8bf5045f421cf50f3c87c366ca7865fa}{ul\+\_\+snr\+\_\+offset\+\_\+db}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Get the value of the UL SNR offset that the OLLA algorithm is currently using. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_a878dc8c69b88ace04843eedf866a691e}{is\+\_\+dl\+\_\+olla\+\_\+enabled}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Checks whether OLLA is enabled for DL. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_a57ba034a9544eacfde3ad60284e71cab}{is\+\_\+ul\+\_\+olla\+\_\+enabled}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Checks whether OLLA is enabled for UL. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Component that handles the derivation of the MCS for a UE, given its CSI, PHY estimates, and experienced channel BLER. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ue__link__adaptation__controller_a4ea870dbfa2f00e8170a194d971b3bc4}\label{classsrsran_1_1ue__link__adaptation__controller_a4ea870dbfa2f00e8170a194d971b3bc4} 
\index{srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}!ue\_link\_adaptation\_controller@{ue\_link\_adaptation\_controller}}
\index{ue\_link\_adaptation\_controller@{ue\_link\_adaptation\_controller}!srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}}
\doxysubsubsection{\texorpdfstring{ue\_link\_adaptation\_controller()}{ue\_link\_adaptation\_controller()}}
{\footnotesize\ttfamily ue\+\_\+link\+\_\+adaptation\+\_\+controller\+::ue\+\_\+link\+\_\+adaptation\+\_\+controller (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\+\_\+configuration}} \&}]{cell\+\_\+cfg\+\_\+,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__channel__state__manager}{ue\+\_\+channel\+\_\+state\+\_\+manager}} \&}]{ue\+\_\+channel\+\_\+state }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00030\ \ \ cell\_cfg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\_cfg\_}}),\ ue\_ch\_st(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_channel\_state}})}
\DoxyCodeLine{00031\ \{}
\DoxyCodeLine{00032\ \ \ \textcolor{keywordflow}{if}\ (cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_aa129de1a8cb0b408abaeaea62e3f5fae}{olla\_cqi\_inc}}\ >\ 0)\ \{}
\DoxyCodeLine{00033\ \ \ \ \ dl\_olla.emplace(cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a396efc7e27fe53284bdaaf62b9bfadc0}{olla\_dl\_target\_bler}},}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_aa129de1a8cb0b408abaeaea62e3f5fae}{olla\_cqi\_inc}},}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_abf178b7b1167075e37c360d0a1f7d138}{olla\_max\_cqi\_offset}});}
\DoxyCodeLine{00036\ \ \ \}}
\DoxyCodeLine{00037\ \ \ \textcolor{keywordflow}{if}\ (cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a4eda995535696d9f6f4d118332e36943}{olla\_ul\_snr\_inc}}\ >\ 0)\ \{}
\DoxyCodeLine{00038\ \ \ \ \ ul\_olla.emplace(cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a1ccaf6f163c32d1f1251e2452f50769a}{olla\_ul\_target\_bler}},}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a4eda995535696d9f6f4d118332e36943}{olla\_ul\_snr\_inc}},}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_ac69577b2e477c6458f8ae5539df5657e}{olla\_max\_ul\_snr\_offset}});}
\DoxyCodeLine{00041\ \ \ \}}
\DoxyCodeLine{00042\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ue__link__adaptation__controller_a6afdd03b41aa32b4be5c73248025a572}\label{classsrsran_1_1ue__link__adaptation__controller_a6afdd03b41aa32b4be5c73248025a572} 
\index{srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}!calculate\_dl\_mcs@{calculate\_dl\_mcs}}
\index{calculate\_dl\_mcs@{calculate\_dl\_mcs}!srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}}
\doxysubsubsection{\texorpdfstring{calculate\_dl\_mcs()}{calculate\_dl\_mcs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{namespacesrsran_a367cc2af01bc27587547d88877227aee}{sch\+\_\+mcs\+\_\+index}} $>$ ue\+\_\+link\+\_\+adaptation\+\_\+controller\+::calculate\+\_\+dl\+\_\+mcs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a7360cbf57f4cd82cfda032d47fa58e81}{pdsch\+\_\+mcs\+\_\+table}}}]{mcs\+\_\+table }\end{DoxyParamCaption}) const}



Derives an adequate MCS given the reported CQI and experienced BLER. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00093\ \{}
\DoxyCodeLine{00094\ \ \ \textcolor{keywordflow}{if}\ (cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a73d03c02021072f4f70b3687c5d39944}{dl\_mcs}}.length()\ ==\ 0)\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{comment}{//\ Fixed\ MCS.}}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordflow}{return}\ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a73d03c02021072f4f70b3687c5d39944}{dl\_mcs}}.start();}
\DoxyCodeLine{00097\ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \textcolor{comment}{//\ Derive\ MCS\ using\ the\ combination\ of\ CQI\ +\ outer\ loop\ link\ adaptation.}}
\DoxyCodeLine{00100\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{eff\_cqi}}\ =\ get\_effective\_cqi();}
\DoxyCodeLine{00101\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{eff\_cqi}}\ ==\ 0.0F)\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{comment}{//\ Special\ case,\ where\ reported\ CQI==0.}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a2e817fa4d4a8084eb1746ee8d1440679}{nullopt}};}
\DoxyCodeLine{00104\ \ \ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \textcolor{comment}{//\ There\ are\ fewer\ CQIs\ than\ MCS\ values,\ so\ we\ perform\ a\ linear\ interpolation.}}
\DoxyCodeLine{00107\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cqi\_lb}}\ =\ std::floor(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{eff\_cqi}}),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cqi\_ub}}\ =\ std::ceil(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{eff\_cqi}});}
\DoxyCodeLine{00108\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{coeff}}\ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{eff\_cqi}}\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cqi\_lb}};}
\DoxyCodeLine{00109\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_lb}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a73fecc119ecd740ae1cc0a5a128189d4}{map\_cqi\_to\_mcs}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cqi\_lb}}),\ mcs\_table).value().value());}
\DoxyCodeLine{00110\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_ub}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a73fecc119ecd740ae1cc0a5a128189d4}{map\_cqi\_to\_mcs}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cqi\_ub}}),\ mcs\_table).value().value());}
\DoxyCodeLine{00111\ \ \ \mbox{\hyperlink{classsrsran_1_1bounded__integer}{sch\_mcs\_index}}\ mcs\{\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classuint8__t}{uint8\_t}}\textcolor{keyword}{>}(std::floor(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_lb}}\ *\ (1\ -\/\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{coeff}})\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_ub}}\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{coeff}}))\};}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \textcolor{comment}{//\ Ensures\ that\ the\ MCS\ is\ within\ the\ configured\ range.}}
\DoxyCodeLine{00114\ \ \ mcs\ =\ std::min(std::max(mcs,\ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a73d03c02021072f4f70b3687c5d39944}{dl\_mcs}}.start()),\ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a73d03c02021072f4f70b3687c5d39944}{dl\_mcs}}.stop());}
\DoxyCodeLine{00115\ \ \ \textcolor{keywordflow}{return}\ mcs;}
\DoxyCodeLine{00116\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__link__adaptation__controller_a7343a4a0f00246cdab33e915e042be5b}\label{classsrsran_1_1ue__link__adaptation__controller_a7343a4a0f00246cdab33e915e042be5b} 
\index{srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}!calculate\_ul\_mcs@{calculate\_ul\_mcs}}
\index{calculate\_ul\_mcs@{calculate\_ul\_mcs}!srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}}
\doxysubsubsection{\texorpdfstring{calculate\_ul\_mcs()}{calculate\_ul\_mcs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a367cc2af01bc27587547d88877227aee}{sch\+\_\+mcs\+\_\+index}} ue\+\_\+link\+\_\+adaptation\+\_\+controller\+::calculate\+\_\+ul\+\_\+mcs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_ab9c85fbd71b868a0cc3ba0b21d0c2bbf}{pusch\+\_\+mcs\+\_\+table}}}]{mcs\+\_\+table }\end{DoxyParamCaption}) const}



Derives an adequate MCS given the estimated UL SNR and experienced BLER. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00119\ \{}
\DoxyCodeLine{00120\ \ \ \textcolor{keywordflow}{if}\ (cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a71e368646b97794e4da7ce80a7ad723a}{ul\_mcs}}.length()\ ==\ 0)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{comment}{//\ Fixed\ MCS.}}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordflow}{return}\ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a71e368646b97794e4da7ce80a7ad723a}{ul\_mcs}}.start();}
\DoxyCodeLine{00123\ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \textcolor{comment}{//\ Derive\ MCS\ using\ the\ combination\ of\ estimated\ UL\ SNR\ +\ outer\ loop\ link\ adaptation.}}
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{classsrsran_1_1bounded__integer}{sch\_mcs\_index}}\ mcs\ =\ \mbox{\hyperlink{namespacesrsran_af871058dc5b4addc709ed9643564f6c2}{map\_snr\_to\_mcs\_ul}}(get\_effective\_snr(),\ mcs\_table);}
\DoxyCodeLine{00127\ \ \ mcs\ =\ std::min(std::max(mcs,\ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a71e368646b97794e4da7ce80a7ad723a}{ul\_mcs}}.start()),\ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a71e368646b97794e4da7ce80a7ad723a}{ul\_mcs}}.stop());}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \textcolor{keywordflow}{return}\ mcs;}
\DoxyCodeLine{00130\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__link__adaptation__controller_ae9a0a43b2798fe6bc0af75ec69f40422}\label{classsrsran_1_1ue__link__adaptation__controller_ae9a0a43b2798fe6bc0af75ec69f40422} 
\index{srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}!dl\_cqi\_offset@{dl\_cqi\_offset}}
\index{dl\_cqi\_offset@{dl\_cqi\_offset}!srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}}
\doxysubsubsection{\texorpdfstring{dl\_cqi\_offset()}{dl\_cqi\_offset()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classfloat}{float}} srsran\+::ue\+\_\+link\+\_\+adaptation\+\_\+controller\+::dl\+\_\+cqi\+\_\+offset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Get the value of the DL CQI offset that the OLLA algorithm is currently using. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00051\ \{\ \textcolor{keywordflow}{return}\ dl\_olla.has\_value()\ ?\ dl\_olla-\/>offset\_db()\ :\ 0.0f;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__link__adaptation__controller_ac37977a3082a3e97784c4e343f4f9e22}\label{classsrsran_1_1ue__link__adaptation__controller_ac37977a3082a3e97784c4e343f4f9e22} 
\index{srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}!handle\_dl\_ack\_info@{handle\_dl\_ack\_info}}
\index{handle\_dl\_ack\_info@{handle\_dl\_ack\_info}!srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}}
\doxysubsubsection{\texorpdfstring{handle\_dl\_ack\_info()}{handle\_dl\_ack\_info()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} ue\+\_\+link\+\_\+adaptation\+\_\+controller\+::handle\+\_\+dl\+\_\+ack\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classbool}{bool}}}]{ack,  }\item[{\mbox{\hyperlink{namespacesrsran_a367cc2af01bc27587547d88877227aee}{sch\+\_\+mcs\+\_\+index}}}]{used\+\_\+mcs,  }\item[{\mbox{\hyperlink{namespacesrsran_a7360cbf57f4cd82cfda032d47fa58e81}{pdsch\+\_\+mcs\+\_\+table}}}]{mcs\+\_\+table }\end{DoxyParamCaption})}



Update DL link quality with the latest DL HARQ feedback. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00047\ \{}
\DoxyCodeLine{00048\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ dl\_olla.has\_value())\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00050\ \ \ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1bounded__integer}{sch\_mcs\_index}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_mcs}}\ =\ \mbox{\hyperlink{namespacesrsran_a73fecc119ecd740ae1cc0a5a128189d4}{map\_cqi\_to\_mcs}}(cqi\_value::max(),\ mcs\_table).\mbox{\hyperlink{classsrsran_1_1strong__type_a1a71ac48ba41b4a070b32e296c177db0}{value}}();}
\DoxyCodeLine{00053\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1interval}{interval<sch\_mcs\_index,\ true>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_bounds}}\{cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a73d03c02021072f4f70b3687c5d39944}{dl\_mcs}}.start(),}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::min(cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a73d03c02021072f4f70b3687c5d39944}{dl\_mcs}}.stop(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_mcs}})\};}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ dl\_olla-\/>update(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ack\_value}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_mcs}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_bounds}});}
\DoxyCodeLine{00057\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__link__adaptation__controller_afe8431650dae7b1814a8a6966049a685}\label{classsrsran_1_1ue__link__adaptation__controller_afe8431650dae7b1814a8a6966049a685} 
\index{srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}!handle\_ul\_crc\_info@{handle\_ul\_crc\_info}}
\index{handle\_ul\_crc\_info@{handle\_ul\_crc\_info}!srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}}
\doxysubsubsection{\texorpdfstring{handle\_ul\_crc\_info()}{handle\_ul\_crc\_info()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} ue\+\_\+link\+\_\+adaptation\+\_\+controller\+::handle\+\_\+ul\+\_\+crc\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classbool}{bool}}}]{crc,  }\item[{\mbox{\hyperlink{namespacesrsran_a367cc2af01bc27587547d88877227aee}{sch\+\_\+mcs\+\_\+index}}}]{used\+\_\+mcs,  }\item[{\mbox{\hyperlink{namespacesrsran_ab9c85fbd71b868a0cc3ba0b21d0c2bbf}{pusch\+\_\+mcs\+\_\+table}}}]{mcs\+\_\+table }\end{DoxyParamCaption})}



Update UL link quality with the latest UL CRC feedback. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00060\ \{}
\DoxyCodeLine{00061\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ ul\_olla.has\_value())\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00063\ \ \ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1interval}{interval<sch\_mcs\_index,\ true>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_bounds}}\{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a71e368646b97794e4da7ce80a7ad723a}{ul\_mcs}}.start(),\ std::min(cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a71e368646b97794e4da7ce80a7ad723a}{ul\_mcs}}.stop(),\ \mbox{\hyperlink{namespacesrsran_a0feb2c681401e4bd6731b8049462e80b}{get\_max\_mcs\_ul}}(mcs\_table))\};}
\DoxyCodeLine{00067\ \ \ ul\_olla-\/>update(crc,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{used\_mcs}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_bounds}});}
\DoxyCodeLine{00068\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__link__adaptation__controller_a878dc8c69b88ace04843eedf866a691e}\label{classsrsran_1_1ue__link__adaptation__controller_a878dc8c69b88ace04843eedf866a691e} 
\index{srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}!is\_dl\_olla\_enabled@{is\_dl\_olla\_enabled}}
\index{is\_dl\_olla\_enabled@{is\_dl\_olla\_enabled}!srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}}
\doxysubsubsection{\texorpdfstring{is\_dl\_olla\_enabled()}{is\_dl\_olla\_enabled()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::ue\+\_\+link\+\_\+adaptation\+\_\+controller\+::is\+\_\+dl\+\_\+olla\+\_\+enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Checks whether OLLA is enabled for DL. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00057\ \{\ \textcolor{keywordflow}{return}\ dl\_olla.has\_value();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__link__adaptation__controller_a57ba034a9544eacfde3ad60284e71cab}\label{classsrsran_1_1ue__link__adaptation__controller_a57ba034a9544eacfde3ad60284e71cab} 
\index{srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}!is\_ul\_olla\_enabled@{is\_ul\_olla\_enabled}}
\index{is\_ul\_olla\_enabled@{is\_ul\_olla\_enabled}!srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}}
\doxysubsubsection{\texorpdfstring{is\_ul\_olla\_enabled()}{is\_ul\_olla\_enabled()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::ue\+\_\+link\+\_\+adaptation\+\_\+controller\+::is\+\_\+ul\+\_\+olla\+\_\+enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Checks whether OLLA is enabled for UL. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00060\ \{\ \textcolor{keywordflow}{return}\ ul\_olla.has\_value();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__link__adaptation__controller_a8bf5045f421cf50f3c87c366ca7865fa}\label{classsrsran_1_1ue__link__adaptation__controller_a8bf5045f421cf50f3c87c366ca7865fa} 
\index{srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}!ul\_snr\_offset\_db@{ul\_snr\_offset\_db}}
\index{ul\_snr\_offset\_db@{ul\_snr\_offset\_db}!srsran::ue\_link\_adaptation\_controller@{srsran::ue\_link\_adaptation\_controller}}
\doxysubsubsection{\texorpdfstring{ul\_snr\_offset\_db()}{ul\_snr\_offset\_db()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classfloat}{float}} srsran\+::ue\+\_\+link\+\_\+adaptation\+\_\+controller\+::ul\+\_\+snr\+\_\+offset\+\_\+db (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Get the value of the UL SNR offset that the OLLA algorithm is currently using. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00054\ \{\ \textcolor{keywordflow}{return}\ ul\_olla.has\_value()\ ?\ ul\_olla-\/>offset\_db()\ :\ 0.0f;\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/ue\+\_\+scheduling/ue\+\_\+link\+\_\+adaptation\+\_\+controller.\+h\item 
lib/scheduler/ue\+\_\+scheduling/ue\+\_\+link\+\_\+adaptation\+\_\+controller.\+cpp\end{DoxyCompactItemize}
