\doxysection{srsran\+::short\+\_\+block\+\_\+detector\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1short__block__detector__impl}{}\label{classsrsran_1_1short__block__detector__impl}\index{srsran::short\_block\_detector\_impl@{srsran::short\_block\_detector\_impl}}


Generic implementation of the short-\/block detector.  




{\ttfamily \#include $<$short\+\_\+block\+\_\+detector\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::short\+\_\+block\+\_\+detector\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=219pt]{df/d92/classsrsran_1_1short__block__detector__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::short\+\_\+block\+\_\+detector\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=219pt]{d6/d0c/classsrsran_1_1short__block__detector__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1short__block__detector__impl_a19623e946a11e01acf68e233517b5816}{detect}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ output, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1log__likelihood__ratio}{log\+\_\+likelihood\+\_\+ratio}} $>$ input, \mbox{\hyperlink{namespacesrsran_a7d1f3285d6ba6d2621f9d919681802df}{modulation\+\_\+scheme}} mod) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Detection, decoding and rate-\/dematching of short blocks. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1short__block__detector}{srsran\+::short\+\_\+block\+\_\+detector}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}short\+\_\+block\+\_\+detector} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Generic implementation of the short-\/block detector. 

Implements a brute-\/force, maximum-\/likelihood detector for short-\/block codes (up to 11 information bits). 

\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1short__block__detector__impl_a19623e946a11e01acf68e233517b5816}\label{classsrsran_1_1short__block__detector__impl_a19623e946a11e01acf68e233517b5816} 
\index{srsran::short\_block\_detector\_impl@{srsran::short\_block\_detector\_impl}!detect@{detect}}
\index{detect@{detect}!srsran::short\_block\_detector\_impl@{srsran::short\_block\_detector\_impl}}
\doxysubsubsection{\texorpdfstring{detect()}{detect()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} short\+\_\+block\+\_\+detector\+\_\+impl\+::detect (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{output,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1log__likelihood__ratio}{log\+\_\+likelihood\+\_\+ratio}} $>$}]{input,  }\item[{\mbox{\hyperlink{namespacesrsran_a7d1f3285d6ba6d2621f9d919681802df}{modulation\+\_\+scheme}}}]{mod }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Detection, decoding and rate-\/dematching of short blocks. 

Checks whether the provided signal contains a codeblock and, if so, decodes its content assuming the encoding followed TS38.\+212 Section 5.\+3.\+3 and the rate-\/matching scheme of TS38.\+212 Section 5.\+4.\+3. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em output} & Detected message (one bit per entry). \\
\hline
\mbox{\texttt{ in}}  & {\em input} & Received codeblock (log-\/likelihood ratios). \\
\hline
\mbox{\texttt{ in}}  & {\em mod} & Modulation scheme. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if {\ttfamily input} passes a detection test. 
\end{DoxyReturn}
\begin{DoxyRemark}{Remarks}
When the detection test fails, the function returns {\ttfamily false} and the content of {\ttfamily output} is unreliable. 
\end{DoxyRemark}


Implements \mbox{\hyperlink{classsrsran_1_1short__block__detector_a986df6551dee5d79213b723c6fa67ae8}{srsran\+::short\+\_\+block\+\_\+detector}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00162\ \{}
\DoxyCodeLine{00163\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bits\_per\_symbol}}\ =\ \mbox{\hyperlink{namespacesrsran_af78ee928d6d8a3d8ff6bbc753f50c44e}{get\_bits\_per\_symbol}}(mod);}
\DoxyCodeLine{00164\ \ \ validate\_spans(output,\ input,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bits\_per\_symbol}});}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \textcolor{comment}{//\ If\ all\ input\ bits\ are\ zero,\ the\ result\ is\ invalid.}}
\DoxyCodeLine{00167\ \ \ \textcolor{keywordflow}{if}\ (std::all\_of(input.\mbox{\hyperlink{classsrsran_1_1span_a6202eea0b4569bf9ba5bf5b1574a03ae}{begin}}(),\ input.\mbox{\hyperlink{classsrsran_1_1span_ab0dddc814f190b4e022e9cbfbf1f2400}{end}}(),\ [](\mbox{\hyperlink{classsrsran_1_1log__likelihood__ratio}{log\_likelihood\_ratio}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bit}})\ \{\ return\ bit\ ==\ 0;\ \}))\ \{}
\DoxyCodeLine{00168\ \ \ \ \ std::fill(output.\mbox{\hyperlink{classsrsran_1_1span_a6202eea0b4569bf9ba5bf5b1574a03ae}{begin}}(),\ output.\mbox{\hyperlink{classsrsran_1_1span_ab0dddc814f190b4e022e9cbfbf1f2400}{end}}(),\ 1);}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00170\ \ \ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \mbox{\hyperlink{classsrsran_1_1static__vector}{static\_vector<log\_likelihood\_ratio,\ MAX\_BLOCK\_LENGTH>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}};}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \textcolor{keywordtype}{double}\ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_metric}}\ =\ 0;}
\DoxyCodeLine{00175\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{out\_size}}\ \ \ =\ output.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}();}
\DoxyCodeLine{00176\ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{out\_size}})\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}}.resize(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bits\_per\_symbol}});}
\DoxyCodeLine{00179\ \ \ \ \ \ \ rate\_dematch(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}},\ input);}
\DoxyCodeLine{00180\ \ \ \ \ \ \ output[0]\ \ =\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}}[0]\ >\ 0)\ ?\ 0\ :\ 1;}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_metric}}\ =\ 1;}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}}.resize(3UL\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bits\_per\_symbol}});}
\DoxyCodeLine{00185\ \ \ \ \ \ \ rate\_dematch(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}},\ input);}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_metric}}\ =\ detect\_2(output,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}});}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}}.resize(MAX\_BLOCK\_LENGTH);}
\DoxyCodeLine{00190\ \ \ \ \ \ \ rate\_dematch(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}},\ input);}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_metric}}\ =\ detect\_3\_11(output,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}});}
\DoxyCodeLine{00192\ \ \ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \textcolor{comment}{//\ Detection\ threshold\ values\ computed\ with\ the\ generalized\ likelihood\ ratio\ test.}}
\DoxyCodeLine{00195\ \ \ \textcolor{comment}{//\ TODO(david):\ Thresholds\ for\ the\ 1-\/\ and\ 2-\/bit\ cases\ are\ not\ meaningful.}}
\DoxyCodeLine{00196\ \ \ \textcolor{keyword}{constexpr}\ std::array<double,\ MAX\_MSG\_LENGTH>\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{THRESHOLDS}}\ =\ \{0,\ 0,\ 12,\ 14,\ 16,\ 18,\ 20,\ 22,\ 24,\ 26,\ 29\};}
\DoxyCodeLine{00197\ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{max\_metric}}\ >\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{THRESHOLDS}}[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{out\_size}}\ -\/\ 1]);}
\DoxyCodeLine{00198\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/channel\+\_\+coding/short/\mbox{\hyperlink{short__block__detector__impl_8h}{short\+\_\+block\+\_\+detector\+\_\+impl.\+h}}\item 
lib/phy/upper/channel\+\_\+coding/short/short\+\_\+block\+\_\+detector\+\_\+impl.\+cpp\end{DoxyCompactItemize}
