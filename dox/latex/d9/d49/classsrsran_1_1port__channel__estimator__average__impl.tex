\doxysection{srsran\+::port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1port__channel__estimator__average__impl}{}\label{classsrsran_1_1port__channel__estimator__average__impl}\index{srsran::port\_channel\_estimator\_average\_impl@{srsran::port\_channel\_estimator\_average\_impl}}


Port channel estimator that averages all OFDM symbols containing DM-\/\+RS.  




{\ttfamily \#include $<$port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=233pt]{dd/d8b/classsrsran_1_1port__channel__estimator__average__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d6/dc3/classsrsran_1_1port__channel__estimator__average__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1port__channel__estimator__average__impl_a584c03229cb5d5ed2a209d31332657a3}{port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1interpolator}{interpolator}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{interp}}, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1dft__processor}{dft\+\_\+processor}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{idft\+\_\+proc}}, \mbox{\hyperlink{namespacesrsran_adc0f9086fd375c5668eb00620b3fab2e}{port\+\_\+channel\+\_\+estimator\+\_\+fd\+\_\+smoothing\+\_\+strategy}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd\+\_\+smoothing\+\_\+strategy\+\_\+}})
\begin{DoxyCompactList}\small\item\em Constructor -\/ Sets the internal interpolator and inverse DFT processor of size {\ttfamily DFT\+\_\+\+SIZE}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1port__channel__estimator__average__impl_ab2661fe97af92cf61cd794a58eaca96e}{compute}} (\mbox{\hyperlink{classsrsran_1_1channel__estimate}{channel\+\_\+estimate}} \&estimate, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1resource__grid__reader}{resource\+\_\+grid\+\_\+reader}} \&grid, \mbox{\hyperlink{classunsigned}{unsigned}} port, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_aebc9654b641a50942f881465580b8bec}{dmrs\+\_\+symbol\+\_\+list}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pilots}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1port__channel__estimator_1_1configuration}{configuration}} \&cfg) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Computes the channel estimate. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1port__channel__estimator}{srsran\+::port\+\_\+channel\+\_\+estimator}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}port\+\_\+channel\+\_\+estimator} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{constexpr}} \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1port__channel__estimator__average__impl_a96288bf46248e5e336eb75b5d4a8e008}{DFT\+\_\+\+SIZE}} = 4096
\begin{DoxyCompactList}\small\item\em Size of the internal inverse Discrete Fourier Transform. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{constexpr}} \mbox{\hyperlink{classfloat}{float}} \mbox{\hyperlink{classsrsran_1_1port__channel__estimator__average__impl_a369fbd0af26bc64725e5436d3fded5bc}{MAX\+\_\+\+SINR\+\_\+\+DB}} = 100
\begin{DoxyCompactList}\small\item\em Maximum SINR in decibels. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Port channel estimator that averages all OFDM symbols containing DM-\/\+RS. 

This estimator considers the channel constant in time over the entire slot. As for the frequency domain, the channel coefficients corresponding to subcarriers containing DM-\/\+RS pilots are LSE-\/estimated, while the remaining coefficients are estimated by interpolating the previous ones. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1port__channel__estimator__average__impl_a584c03229cb5d5ed2a209d31332657a3}\label{classsrsran_1_1port__channel__estimator__average__impl_a584c03229cb5d5ed2a209d31332657a3} 
\index{srsran::port\_channel\_estimator\_average\_impl@{srsran::port\_channel\_estimator\_average\_impl}!port\_channel\_estimator\_average\_impl@{port\_channel\_estimator\_average\_impl}}
\index{port\_channel\_estimator\_average\_impl@{port\_channel\_estimator\_average\_impl}!srsran::port\_channel\_estimator\_average\_impl@{srsran::port\_channel\_estimator\_average\_impl}}
\doxysubsubsection{\texorpdfstring{port\_channel\_estimator\_average\_impl()}{port\_channel\_estimator\_average\_impl()}}
{\footnotesize\ttfamily srsran\+::port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl\+::port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1interpolator}{interpolator}} $>$}]{interp,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1dft__processor}{dft\+\_\+processor}} $>$}]{idft\+\_\+proc,  }\item[{\mbox{\hyperlink{namespacesrsran_adc0f9086fd375c5668eb00620b3fab2e}{port\+\_\+channel\+\_\+estimator\+\_\+fd\+\_\+smoothing\+\_\+strategy}}}]{fd\+\_\+smoothing\+\_\+strategy\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructor -\/ Sets the internal interpolator and inverse DFT processor of size {\ttfamily DFT\+\_\+\+SIZE}. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00054\ \ \ \ \ fd\_smoothing\_strategy(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd\_smoothing\_strategy\_}}),\ freq\_interpolator(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{interp}})),\ idft(std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{idft\_proc}}))}
\DoxyCodeLine{00055\ \ \ \{}
\DoxyCodeLine{00056\ \ \ \ \ srsran\_assert(freq\_interpolator,\ \textcolor{stringliteral}{"{}Invalid\ interpolator."{}});}
\DoxyCodeLine{00057\ \ \ \ \ srsran\_assert(idft-\/>get\_direction()\ ==\ \mbox{\hyperlink{classsrsran_1_1dft__processor_ad6d2dd1eff168ecf482b422a7c363d40a1955bdc302911f376074eb9b02e56639}{dft\_processor::direction::INVERSE}},}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ port\ channel\ estimator\ requires\ an\ inverse\ (not\ direct)\ DFT\ processor."{}});}
\DoxyCodeLine{00059\ \ \ \ \ srsran\_assert(idft-\/>get\_size()\ ==\ \mbox{\hyperlink{classsrsran_1_1port__channel__estimator__average__impl_a96288bf46248e5e336eb75b5d4a8e008}{DFT\_SIZE}},}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ port\ channel\ estimator\ requires\ an\ iDFT\ of\ size\ \{\},\ provided\ \{\}."{}},}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(\mbox{\hyperlink{classsrsran_1_1port__channel__estimator__average__impl_a96288bf46248e5e336eb75b5d4a8e008}{DFT\_SIZE}}),}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idft-\/>get\_size());}
\DoxyCodeLine{00063\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1port__channel__estimator__average__impl_ab2661fe97af92cf61cd794a58eaca96e}\label{classsrsran_1_1port__channel__estimator__average__impl_ab2661fe97af92cf61cd794a58eaca96e} 
\index{srsran::port\_channel\_estimator\_average\_impl@{srsran::port\_channel\_estimator\_average\_impl}!compute@{compute}}
\index{compute@{compute}!srsran::port\_channel\_estimator\_average\_impl@{srsran::port\_channel\_estimator\_average\_impl}}
\doxysubsubsection{\texorpdfstring{compute()}{compute()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl\+::compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1channel__estimate}{channel\+\_\+estimate}} \&}]{estimate,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1resource__grid__reader}{resource\+\_\+grid\+\_\+reader}} \&}]{grid,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{port,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_aebc9654b641a50942f881465580b8bec}{dmrs\+\_\+symbol\+\_\+list}} \&}]{pilots,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1port__channel__estimator_1_1configuration}{configuration}} \&}]{cfg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Computes the channel estimate. 

Estimates the channel to the current receive antenna port for all transmit layers. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em estimate} & The estimated channel coefficients for all resource elements, all OFDM symbols, all receive ports and all transmit layers. \\
\hline
\mbox{\texttt{ in}}  & {\em grid} & The frequency--time resource grid. \\
\hline
\mbox{\texttt{ in}}  & {\em port} & Receive antenna port the estimation refers to. \\
\hline
\mbox{\texttt{ in}}  & {\em pilots} & DM-\/\+RS symbols (a.\+k.\+a. pilots). For each layer, symbols are listed by RE first and then by OFDM symbol. \\
\hline
\mbox{\texttt{ in}}  & {\em pattern} & Pattern with the positions of the DM-\/\+RS symbols. \\
\hline
\mbox{\texttt{ in}}  & {\em cfg} & Estimator configuration. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1port__channel__estimator_a9665fac5391603ae1e4e007dd02bc898}{srsran\+::port\+\_\+channel\+\_\+estimator}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00203\ \{}
\DoxyCodeLine{00204\ \ \ \mbox{\hyperlink{structsrsran_1_1re__measurement__dimensions}{re\_measurement\_dimensions}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbols\_size}}\ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pilots}}.size();}
\DoxyCodeLine{00205\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_pilots}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbols\_size}}.\mbox{\hyperlink{structsrsran_1_1re__measurement__dimensions_a31143253af3ece6dda12baf2215fb0a4}{nof\_subc}}\ *\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbols\_size}}.nof\_symbols;}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ \textcolor{comment}{//\ Prepare\ symbol\ destination.}}
\DoxyCodeLine{00208\ \ \ rx\_pilots.\mbox{\hyperlink{classsrsran_1_1detail_1_1re__measurement__tensor__base_a6a2bd1f886defc065f4d78a537005f42}{resize}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{symbols\_size}});}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \textcolor{comment}{//\ For\ each\ layer...}}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}}\ =\ 0,\ nof\_tx\_layers\ =\ cfg.dmrs\_pattern.size();\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}}\ !=\ nof\_tx\_layers;\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}})\ \{}
\DoxyCodeLine{00212\ \ \ \ \ rsrp\ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0;}
\DoxyCodeLine{00213\ \ \ \ \ epre\ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0;}
\DoxyCodeLine{00214\ \ \ \ \ noise\_var\ \ \ \ \ \ \ \ =\ 0;}
\DoxyCodeLine{00215\ \ \ \ \ time\_alignment\_s\ =\ 0;}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{comment}{//\ compute\_layer\_hop\ updates\ rsrp,\ epre,\ niose\_var\ and\ time\_alignment\_s.}}
\DoxyCodeLine{00218\ \ \ \ \ compute\_layer\_hop(estimate,\ grid,\ port,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pilots}},\ cfg,\ 0,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}});}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordflow}{if}\ (cfg.dmrs\_pattern[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}}].hopping\_symbol\_index.has\_value())\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ compute\_layer\_hop(estimate,\ grid,\ port,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pilots}},\ cfg,\ 1,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}});}
\DoxyCodeLine{00221\ \ \ \ \ \ \ time\_alignment\_s\ /=\ 2.0F;}
\DoxyCodeLine{00222\ \ \ \ \ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ rsrp\ /=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_pilots}});}
\DoxyCodeLine{00225\ \ \ \ \ epre\ /=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_pilots}});}
\DoxyCodeLine{00226\ \ \ \ \ time\_alignment\_s\ /=\ (\mbox{\hyperlink{classsrsran_1_1port__channel__estimator__average__impl_a96288bf46248e5e336eb75b5d4a8e008}{DFT\_SIZE}}\ *\ \mbox{\hyperlink{namespacesrsran_a8c3848f1144990e3777cdc7e1ab27cf7}{scs\_to\_khz}}(cfg.scs)\ *\ 1000.0F);}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ estimate.\mbox{\hyperlink{classsrsran_1_1channel__estimate_a55e6505cc49f3e689487f38a8c5e920f}{set\_rsrp}}(rsrp,\ port,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}});}
\DoxyCodeLine{00229\ \ \ \ \ estimate.\mbox{\hyperlink{classsrsran_1_1channel__estimate_a7123bed76e9d5dd8b4fb3e94419cc29e}{set\_epre}}(epre,\ port,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}});}
\DoxyCodeLine{00230\ \ \ \ \ estimate.\mbox{\hyperlink{classsrsran_1_1channel__estimate_a40afb0a66b8057048879c250294ba0e9}{set\_time\_alignment}}(\mbox{\hyperlink{classsrsran_1_1phy__time__unit_a9759195d4f33e9afbf1c790ab103af94}{phy\_time\_unit::from\_seconds}}(time\_alignment\_s),\ port,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}});}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ noise\_var\ /=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{nof\_dmrs\_pilots}}\ -\/\ 1);}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{comment}{//\ Bound\ the\ noise\ variance\ from\ below.}}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{min\_noise\_variance}}\ =\ rsrp\ /\ \mbox{\hyperlink{namespacesrsran_ada214d674922e183072577c0453cbebf}{convert\_dB\_to\_power}}(\mbox{\hyperlink{classsrsran_1_1port__channel__estimator__average__impl_a369fbd0af26bc64725e5436d3fded5bc}{MAX\_SINR\_DB}});}
\DoxyCodeLine{00236\ \ \ \ \ noise\_var\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ std::max(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{min\_noise\_variance}},\ noise\_var);}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{comment}{//\ Write\ the\ noise\ variance\ in\ the\ channel\ estimate\ result.}}
\DoxyCodeLine{00239\ \ \ \ \ estimate.set\_noise\_variance(noise\_var,\ port,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}});}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ srsran\_assert(cfg.scaling\ >\ 0,\ \textcolor{stringliteral}{"{}The\ DM-\/RS\ to\ data\ scaling\ factor\ should\ be\ a\ positive\ number."{}});}
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{comment}{//\ Compute\ the\ estimated\ data\ received\ power\ by\ scaling\ the\ RSRP.}}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{datarp}}\ =\ rsrp\ /\ cfg.scaling\ /\ cfg.scaling;}
\DoxyCodeLine{00244\ \ \ \ \ estimate.\mbox{\hyperlink{classsrsran_1_1channel__estimate_af996cdabe49e1189a339ed552ceb239f}{set\_snr}}((noise\_var\ !=\ 0)\ ?\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{datarp}}\ /\ noise\_var\ :\ 1000,\ port,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{i\_layer}});}
\DoxyCodeLine{00245\ \ \ \}}
\DoxyCodeLine{00246\ \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\Hypertarget{classsrsran_1_1port__channel__estimator__average__impl_a96288bf46248e5e336eb75b5d4a8e008}\label{classsrsran_1_1port__channel__estimator__average__impl_a96288bf46248e5e336eb75b5d4a8e008} 
\index{srsran::port\_channel\_estimator\_average\_impl@{srsran::port\_channel\_estimator\_average\_impl}!DFT\_SIZE@{DFT\_SIZE}}
\index{DFT\_SIZE@{DFT\_SIZE}!srsran::port\_channel\_estimator\_average\_impl@{srsran::port\_channel\_estimator\_average\_impl}}
\doxysubsubsection{\texorpdfstring{DFT\_SIZE}{DFT\_SIZE}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{constexpr}} \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl\+::\+DFT\+\_\+\+SIZE = 4096\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}



Size of the internal inverse Discrete Fourier Transform. 

The inverse DFT is used to estimate the time alignment. A DFT size of 4096 points allows of a resolution of 16.\+3 and 8.\+1 nanoseconds with a subcarrier spacing of 15 k\+Hz and 30 k\+Hz, respectively. \Hypertarget{classsrsran_1_1port__channel__estimator__average__impl_a369fbd0af26bc64725e5436d3fded5bc}\label{classsrsran_1_1port__channel__estimator__average__impl_a369fbd0af26bc64725e5436d3fded5bc} 
\index{srsran::port\_channel\_estimator\_average\_impl@{srsran::port\_channel\_estimator\_average\_impl}!MAX\_SINR\_DB@{MAX\_SINR\_DB}}
\index{MAX\_SINR\_DB@{MAX\_SINR\_DB}!srsran::port\_channel\_estimator\_average\_impl@{srsran::port\_channel\_estimator\_average\_impl}}
\doxysubsubsection{\texorpdfstring{MAX\_SINR\_DB}{MAX\_SINR\_DB}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{constexpr}} \mbox{\hyperlink{classfloat}{float}} srsran\+::port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl\+::\+MAX\+\_\+\+SINR\+\_\+\+DB = 100\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}



Maximum SINR in decibels. 

The SINR is bounded above to avoid a zero noise variance. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/signal\+\_\+processors/port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl.\+h\item 
lib/phy/upper/signal\+\_\+processors/port\+\_\+channel\+\_\+estimator\+\_\+average\+\_\+impl.\+cpp\end{DoxyCompactItemize}
