\doxysection{srsran\+::io\+\_\+broker\+\_\+epoll Class Reference}
\hypertarget{classsrsran_1_1io__broker__epoll}{}\label{classsrsran_1_1io__broker__epoll}\index{srsran::io\_broker\_epoll@{srsran::io\_broker\_epoll}}


Implementation of an IO broker using epoll.  




{\ttfamily \#include $<$io\+\_\+broker\+\_\+epoll.\+h$>$}



Inheritance diagram for srsran\+::io\+\_\+broker\+\_\+epoll\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{dd/dc4/classsrsran_1_1io__broker__epoll__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::io\+\_\+broker\+\_\+epoll\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{d0/d9b/classsrsran_1_1io__broker__epoll__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1io__broker__epoll_a60916d23f48112f20de533443606446d}{io\+\_\+broker\+\_\+epoll}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1io__broker__config}{io\+\_\+broker\+\_\+config}} \&config)
\item 
\mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\+\_\+\+NODISCARD}} \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1io__broker__epoll_a6c033f8b31ea3f2d580df6ccc42dc0ca}{register\+\_\+fd}} (\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}}, \mbox{\hyperlink{classsrsran_1_1io__broker_a0aeb4484b3f57202da18bb2ef94d370c}{recv\+\_\+callback\+\_\+t}} handler) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\item 
\mbox{\hyperlink{compiler_8h_a84270d7b45f0280051bd27685657e03e}{SRSRAN\+\_\+\+NODISCARD}} \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1io__broker__epoll_a3b66dc9df041bf703665a4a95a87667e}{unregister\+\_\+fd}} (\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Remove fd from epoll handler. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1io__broker}{srsran\+::io\+\_\+broker}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}io\+\_\+broker} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Provides default destructor. \end{DoxyCompactList}\item 
{\bfseries io\+\_\+broker} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1io__broker}{io\+\_\+broker}} \&\mbox{\hyperlink{namespacesrsran_aaf684a2cfa98b7f333de7041525a5b29a795f3202b17cb6bc3d4b771d8c6c9eaf}{other}})=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\begin{DoxyCompactList}\small\item\em Forbid copy constructor. \end{DoxyCompactList}\item 
{\bfseries io\+\_\+broker} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1io__broker}{io\+\_\+broker}} \&\&\mbox{\hyperlink{namespacesrsran_aaf684a2cfa98b7f333de7041525a5b29a795f3202b17cb6bc3d4b771d8c6c9eaf}{other}})=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\begin{DoxyCompactList}\small\item\em Forbid move constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1io__broker}{io\+\_\+broker}} \& {\bfseries operator=} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1io__broker}{io\+\_\+broker}} \&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\begin{DoxyCompactList}\small\item\em Forbid copy assigment operator. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1io__broker}{io\+\_\+broker}} \& {\bfseries operator=} (\mbox{\hyperlink{classsrsran_1_1io__broker}{io\+\_\+broker}} \&\&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\begin{DoxyCompactList}\small\item\em Forbid move assigment operator. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Public Types inherited from \mbox{\hyperlink{classsrsran_1_1io__broker}{srsran\+::io\+\_\+broker}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{using}} {\bfseries recv\+\_\+callback\+\_\+t} = std\+::function$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}}(\mbox{\hyperlink{classint}{int}})$>$
\begin{DoxyCompactList}\small\item\em Callback called when socket fd (passed as argument) has data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1io__broker}{srsran\+::io\+\_\+broker}}}
\begin{DoxyCompactItemize}
\item 
{\bfseries io\+\_\+broker} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Allow default constructor for child. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementation of an IO broker using epoll. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1io__broker__epoll_a60916d23f48112f20de533443606446d}\label{classsrsran_1_1io__broker__epoll_a60916d23f48112f20de533443606446d} 
\index{srsran::io\_broker\_epoll@{srsran::io\_broker\_epoll}!io\_broker\_epoll@{io\_broker\_epoll}}
\index{io\_broker\_epoll@{io\_broker\_epoll}!srsran::io\_broker\_epoll@{srsran::io\_broker\_epoll}}
\doxysubsubsection{\texorpdfstring{io\_broker\_epoll()}{io\_broker\_epoll()}}
{\footnotesize\ttfamily io\+\_\+broker\+\_\+epoll\+::io\+\_\+broker\+\_\+epoll (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1io__broker__config}{io\+\_\+broker\+\_\+config}} \&}]{config }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ logger(srslog::fetch\_basic\_logger(\textcolor{stringliteral}{"{}IO-\/EPOLL"{}}))}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \ \ \textcolor{comment}{//\ Init\ epoll\ socket}}
\DoxyCodeLine{00032\ \ \ epoll\_fd\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::epoll\_create1}}(0);}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordflow}{if}\ (epoll\_fd\ ==\ -\/1)\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a630688b51219f81c5a47ec5650326afc}{report\_fatal\_error}}(\textcolor{stringliteral}{"{}IO\ broker:\ failed\ to\ create\ epoll\ file\ descriptor.\ error=\{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}}));}
\DoxyCodeLine{00035\ \ \ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \textcolor{comment}{//\ register\ event\ to\ handle\ stop}}
\DoxyCodeLine{00038\ \ \ event\_fd\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::eventfd}}(0,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EFD\_CLOEXEC}}\ |\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EFD\_NONBLOCK}});}
\DoxyCodeLine{00039\ \ \ \textcolor{keywordflow}{if}\ (event\_fd\ ==\ -\/1)\ \{}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a630688b51219f81c5a47ec5650326afc}{report\_fatal\_error}}(\textcolor{stringliteral}{"{}IO\ broker:\ failed\ to\ create\ file\ descriptor\ for\ event\ notification.\ error=\{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}}));}
\DoxyCodeLine{00041\ \ \ \}}
\DoxyCodeLine{00042\ \ \ \textcolor{keywordtype}{bool}\ success\ =\ \mbox{\hyperlink{classsrsran_1_1io__broker__epoll_a6c033f8b31ea3f2d580df6ccc42dc0ca}{register\_fd}}(event\_fd,\ [](\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}})\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//\ do\ nothing}}
\DoxyCodeLine{00044\ \ \ \});}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordflow}{if}\ (!success)\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a630688b51219f81c5a47ec5650326afc}{report\_fatal\_error}}(\textcolor{stringliteral}{"{}IO\ broker:\ failed\ to\ register\ event\ file\ descriptor.\ event\_fd=\{\}"{}},\ event\_fd);}
\DoxyCodeLine{00047\ \ \ \}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ logger.debug(\textcolor{stringliteral}{"{}Starting\ event\ loop"{}});}
\DoxyCodeLine{00050\ \ \ \textcolor{comment}{//\ start\ thread\ to\ handle\ epoll\ events}}
\DoxyCodeLine{00051\ \ \ thread\ =\ \mbox{\hyperlink{classsrsran_1_1unique__thread}{unique\_thread}}(config.thread\_name,\ config.thread\_prio,\ config.cpu\_mask,\ [\textcolor{keyword}{this}]()\ \{}
\DoxyCodeLine{00052\ \ \ \ \ while\ (running)\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ thread\_loop();}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ \ \ \});}
\DoxyCodeLine{00056\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1io__broker__epoll_a5ec75eb6e0a8175051bcff4348b35321}\label{classsrsran_1_1io__broker__epoll_a5ec75eb6e0a8175051bcff4348b35321} 
\index{srsran::io\_broker\_epoll@{srsran::io\_broker\_epoll}!````~io\_broker\_epoll@{\texorpdfstring{$\sim$}{\string~}io\_broker\_epoll}}
\index{````~io\_broker\_epoll@{\texorpdfstring{$\sim$}{\string~}io\_broker\_epoll}!srsran::io\_broker\_epoll@{srsran::io\_broker\_epoll}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}io\_broker\_epoll()}{\string~io\_broker\_epoll()}}
{\footnotesize\ttfamily io\+\_\+broker\+\_\+epoll\+::\texorpdfstring{$\sim$}{\string~}io\+\_\+broker\+\_\+epoll (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00059\ \{}
\DoxyCodeLine{00060\ \ \ \textcolor{keywordflow}{if}\ (running)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ inform\ thread\ to\ stop}}
\DoxyCodeLine{00062\ \ \ \ \ running\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ send\ stop\ event\ to\ interrupt\ possible\ epoll\_wait()}}
\DoxyCodeLine{00065\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}}\ =\ 1;}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ssize\_t}}\ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ =\ ::write(event\_fd,\ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{tmp}}));}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ret}}\ ==\ -\/1)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ write\ stop\ event.\ event\_fd=\{\}\ error=\{\}"{}},\ event\_fd,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}}));}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ logger.debug(\textcolor{stringliteral}{"{}Joining\ event\ loop"{}});}
\DoxyCodeLine{00073\ \ \ \textcolor{comment}{//\ wait\ for\ completion}}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{if}\ (thread.running())\ \{}
\DoxyCodeLine{00075\ \ \ \ \ thread.join();}
\DoxyCodeLine{00076\ \ \ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ logger.debug(\textcolor{stringliteral}{"{}Closing\ epoll\ file\ descriptor.\ epoll\_fd=\{\}"{}},\ epoll\_fd);}
\DoxyCodeLine{00079\ \ \ std::lock\_guard<std::mutex>\ lock(event\_handler\_mutex);}
\DoxyCodeLine{00080\ \ \ event\_handler.clear();}
\DoxyCodeLine{00081\ \ \ close(epoll\_fd);}
\DoxyCodeLine{00082\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1io__broker__epoll_a6c033f8b31ea3f2d580df6ccc42dc0ca}\label{classsrsran_1_1io__broker__epoll_a6c033f8b31ea3f2d580df6ccc42dc0ca} 
\index{srsran::io\_broker\_epoll@{srsran::io\_broker\_epoll}!register\_fd@{register\_fd}}
\index{register\_fd@{register\_fd}!srsran::io\_broker\_epoll@{srsran::io\_broker\_epoll}}
\doxysubsubsection{\texorpdfstring{register\_fd()}{register\_fd()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} io\+\_\+broker\+\_\+epoll\+::register\+\_\+fd (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{fd,  }\item[{\mbox{\hyperlink{classsrsran_1_1io__broker_a0aeb4484b3f57202da18bb2ef94d370c}{recv\+\_\+callback\+\_\+t}}}]{handler }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Adds a new file descriptor to the epoll-\/handler. The call is thread-\/safe and new file descriptors can be added while the \doxylink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{epoll\+\_\+wait()} is blocking. 

Implements \mbox{\hyperlink{classsrsran_1_1io__broker_a6c24c2e4dd6318cd267f68739356e9bb}{srsran\+::io\+\_\+broker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00140\ \{}
\DoxyCodeLine{00141\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{epoll\_event}}\ ev\ =\ \{\};}
\DoxyCodeLine{00142\ \ \ ev.data.fd\ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}};}
\DoxyCodeLine{00143\ \ \ ev.events\ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EPOLLIN}};}
\DoxyCodeLine{00144\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::epoll\_ctl}}(epoll\_fd,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EPOLL\_CTL\_ADD}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}},\ \&ev)\ ==\ -\/1)\ \{}
\DoxyCodeLine{00145\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ register\ file\ descriptor.\ fd=\{\}\ error=\{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}}));}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00147\ \ \ \}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ std::lock\_guard<std::mutex>\ lock(event\_handler\_mutex);}
\DoxyCodeLine{00150\ \ \ event\_handler.insert(\{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}},\ std::make\_unique<epoll\_receive\_callback>(handler)\});}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ logger.debug(\textcolor{stringliteral}{"{}Registered\ file\ descriptor.\ fd=\{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}});}
\DoxyCodeLine{00153\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00154\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1io__broker__epoll_a3b66dc9df041bf703665a4a95a87667e}\label{classsrsran_1_1io__broker__epoll_a3b66dc9df041bf703665a4a95a87667e} 
\index{srsran::io\_broker\_epoll@{srsran::io\_broker\_epoll}!unregister\_fd@{unregister\_fd}}
\index{unregister\_fd@{unregister\_fd}!srsran::io\_broker\_epoll@{srsran::io\_broker\_epoll}}
\doxysubsubsection{\texorpdfstring{unregister\_fd()}{unregister\_fd()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} io\+\_\+broker\+\_\+epoll\+::unregister\+\_\+fd (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{fd }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Remove fd from epoll handler. 



Implements \mbox{\hyperlink{classsrsran_1_1io__broker_af6d46fbb345d9dbb3ea299748d7ce28f}{srsran\+::io\+\_\+broker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00158\ \{}
\DoxyCodeLine{00159\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{epoll\_event}}\ ev\ =\ \{\};}
\DoxyCodeLine{00160\ \ \ ev.data.fd\ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}};}
\DoxyCodeLine{00161\ \ \ ev.events\ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EPOLLIN}};}
\DoxyCodeLine{00162\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{::epoll\_ctl}}(epoll\_fd,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{EPOLL\_CTL\_DEL}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}},\ \&ev)\ ==\ -\/1)\ \{}
\DoxyCodeLine{00163\ \ \ \ \ logger.error(\textcolor{stringliteral}{"{}Failed\ to\ unregister\ file\ descriptor.\ fd=\{\}\ error=\{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{strerror}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{errno}}));}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00165\ \ \ \}}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ std::lock\_guard<std::mutex>\ lock(event\_handler\_mutex);}
\DoxyCodeLine{00168\ \ \ event\_handler.erase(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}});}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ logger.debug(\textcolor{stringliteral}{"{}Unregistered\ file\ descriptor.\ fd=\{\}"{}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}});}
\DoxyCodeLine{00171\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00172\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/support/network/io\+\_\+broker\+\_\+epoll.\+h\item 
lib/support/network/io\+\_\+broker\+\_\+epoll.\+cpp\end{DoxyCompactItemize}
