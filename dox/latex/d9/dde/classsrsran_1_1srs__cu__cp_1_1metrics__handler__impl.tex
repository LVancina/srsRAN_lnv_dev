\doxysection{srsran\+::srs\+\_\+cu\+\_\+cp\+::metrics\+\_\+handler\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl}{}\label{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl}\index{srsran::srs\_cu\_cp::metrics\_handler\_impl@{srsran::srs\_cu\_cp::metrics\_handler\_impl}}


Inheritance diagram for srsran\+::srs\+\_\+cu\+\_\+cp\+::metrics\+\_\+handler\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=222pt]{d8/de9/classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::srs\+\_\+cu\+\_\+cp\+::metrics\+\_\+handler\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=222pt]{da/d35/classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl_ab984788986a188433fe36072afe19e7c}{metrics\+\_\+handler\+\_\+impl}} (\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cu\+\_\+cp\+\_\+exec\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1timer__manager}{timer\+\_\+manager}} \&timers, \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__metrics__handler}{ue\+\_\+metrics\+\_\+handler}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\+\_\+handler\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__repository__metrics__handler}{du\+\_\+repository\+\_\+metrics\+\_\+handler}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\+\_\+handler\+\_\+}})
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1metrics__report__session}{metrics\+\_\+report\+\_\+session}} $>$ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl_a754de11656cecdec024f84243a7fb835}{create\+\_\+periodic\+\_\+report\+\_\+session}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1periodic__metric__report__request}{periodic\+\_\+metric\+\_\+report\+\_\+request}} \&request) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Create a new metrics periodic report session. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1metrics__report}{metrics\+\_\+report}} \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl_ac4a6e17b95b8795ab62c421f307a6117}{request\+\_\+metrics\+\_\+report}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Synchronously request a new single metrics report. The call blocks until the report is ready. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl_ab984788986a188433fe36072afe19e7c}\label{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl_ab984788986a188433fe36072afe19e7c} 
\index{srsran::srs\_cu\_cp::metrics\_handler\_impl@{srsran::srs\_cu\_cp::metrics\_handler\_impl}!metrics\_handler\_impl@{metrics\_handler\_impl}}
\index{metrics\_handler\_impl@{metrics\_handler\_impl}!srsran::srs\_cu\_cp::metrics\_handler\_impl@{srsran::srs\_cu\_cp::metrics\_handler\_impl}}
\doxysubsubsection{\texorpdfstring{metrics\_handler\_impl()}{metrics\_handler\_impl()}}
{\footnotesize\ttfamily metrics\+\_\+handler\+\_\+impl\+::metrics\+\_\+handler\+\_\+impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1task__executor}{task\+\_\+executor}} \&}]{cu\+\_\+cp\+\_\+exec\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1timer__manager}{timer\+\_\+manager}} \&}]{timers,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1ue__metrics__handler}{ue\+\_\+metrics\+\_\+handler}} \&}]{ue\+\_\+handler\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__repository__metrics__handler}{du\+\_\+repository\+\_\+metrics\+\_\+handler}} \&}]{du\+\_\+handler\+\_\+ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00035\ \ \ cu\_cp\_exec(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cu\_cp\_exec\_}}),}
\DoxyCodeLine{00036\ \ \ timers(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{timers\_}}),}
\DoxyCodeLine{00037\ \ \ ue\_handler(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_handler\_}}),}
\DoxyCodeLine{00038\ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1du__handler}{du\_handler}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{du\_handler\_}}),}
\DoxyCodeLine{00039\ \ \ logger(srslog::fetch\_basic\_logger(\textcolor{stringliteral}{"{}CU-\/CP"{}}))}
\DoxyCodeLine{00040\ \{}
\DoxyCodeLine{00041\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl_a754de11656cecdec024f84243a7fb835}\label{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl_a754de11656cecdec024f84243a7fb835} 
\index{srsran::srs\_cu\_cp::metrics\_handler\_impl@{srsran::srs\_cu\_cp::metrics\_handler\_impl}!create\_periodic\_report\_session@{create\_periodic\_report\_session}}
\index{create\_periodic\_report\_session@{create\_periodic\_report\_session}!srsran::srs\_cu\_cp::metrics\_handler\_impl@{srsran::srs\_cu\_cp::metrics\_handler\_impl}}
\doxysubsubsection{\texorpdfstring{create\_periodic\_report\_session()}{create\_periodic\_report\_session()}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1metrics__report__session}{metrics\+\_\+report\+\_\+session}} $>$ metrics\+\_\+handler\+\_\+impl\+::create\+\_\+periodic\+\_\+report\+\_\+session (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1periodic__metric__report__request}{periodic\+\_\+metric\+\_\+report\+\_\+request}} \&}]{request }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Create a new metrics periodic report session. 

\begin{DoxyReturn}{Returns}
Handle to the session. When the session object goes out of scope, the session is automatically closed. 
\end{DoxyReturn}
Close the session, explicitly stopping the reporting of new metrics.

Implements \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1metrics__handler_a0c7361c36ae05c968e5d467f9c8b3b7c}{srsran\+::srs\+\_\+cu\+\_\+cp\+::metrics\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00045\ \{}
\DoxyCodeLine{00046\ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{periodic\_metrics\_report\_session\_impl}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{final}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1metrics__report__session}{metrics\_report\_session}}}
\DoxyCodeLine{00047\ \ \ \{}
\DoxyCodeLine{00048\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{periodic\_metrics\_report\_session\_impl}}(\mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl}{metrics\_handler\_impl}}\&\ handler\_,\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{session\_id\_}})\ :}
\DoxyCodeLine{00050\ \ \ \ \ \ \ handler(\&handler\_),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{session\_id}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{session\_id\_}})}
\DoxyCodeLine{00051\ \ \ \ \ \{}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{\string~periodic\_metrics\_report\_session\_impl}}()\textcolor{keyword}{\ override\ }\{\ stop();\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{void}\ reconfigure\_request(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1periodic__metric__report__request}{periodic\_metric\_report\_request}}\&\ request)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00056\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ srsran\_assert(handler\ !=\ \textcolor{keyword}{nullptr},\ \textcolor{stringliteral}{"{}Using\ invalid\ metric\ report\ session"{}});}
\DoxyCodeLine{00058\ \ \ \ \ \ \ handler-\/>request\_session\_reconfiguration(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{session\_id}},\ request);}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{void}\ stop()\textcolor{keyword}{\ override}}
\DoxyCodeLine{00063\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (handler\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ handler-\/>request\_session\_deletion(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{session\_id}});}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl}{metrics\_handler\_impl}}*\ handler\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{session\_id}};}
\DoxyCodeLine{00072\ \ \ \};}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \textcolor{comment}{//\ Allocate\ new\ Session\ context}}
\DoxyCodeLine{00075\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{session\_id}}\ =\ create\_periodic\_session(request);}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \textcolor{comment}{//\ Return\ handler\ to\ the\ session}}
\DoxyCodeLine{00078\ \ \ \textcolor{keywordflow}{return}\ std::make\_unique<periodic\_metrics\_report\_session\_impl>(*\textcolor{keyword}{this},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{session\_id}});}
\DoxyCodeLine{00079\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl_ac4a6e17b95b8795ab62c421f307a6117}\label{classsrsran_1_1srs__cu__cp_1_1metrics__handler__impl_ac4a6e17b95b8795ab62c421f307a6117} 
\index{srsran::srs\_cu\_cp::metrics\_handler\_impl@{srsran::srs\_cu\_cp::metrics\_handler\_impl}!request\_metrics\_report@{request\_metrics\_report}}
\index{request\_metrics\_report@{request\_metrics\_report}!srsran::srs\_cu\_cp::metrics\_handler\_impl@{srsran::srs\_cu\_cp::metrics\_handler\_impl}}
\doxysubsubsection{\texorpdfstring{request\_metrics\_report()}{request\_metrics\_report()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1metrics__report}{metrics\+\_\+report}} metrics\+\_\+handler\+\_\+impl\+::request\+\_\+metrics\+\_\+report (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Synchronously request a new single metrics report. The call blocks until the report is ready. 

Note\+: Given its blocking nature, avoid calling this method in contexts other than unit tests. \begin{DoxyReturn}{Returns}
The metrics report. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classsrsran_1_1srs__cu__cp_1_1metrics__handler_adec3523950b49b1fc58f9e121eae7f96}{srsran\+::srs\+\_\+cu\+\_\+cp\+::metrics\+\_\+handler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00082\ \{}
\DoxyCodeLine{00083\ \ \ \mbox{\hyperlink{structsrsran_1_1srs__cu__cp_1_1metrics__report}{metrics\_report}}\ report;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \mbox{\hyperlink{namespacesrsran_a7b1865b527be10b8c856e60871d2e2fe}{force\_blocking\_execute}}(}
\DoxyCodeLine{00086\ \ \ \ \ \ \ cu\_cp\_exec,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ [\&]()\ \{\ report\ =\ create\_report();\ \},}
\DoxyCodeLine{00088\ \ \ \ \ \ \ [\textcolor{keyword}{this}]()\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}Postponing\ metrics\ report\ request.\ Cause:\ CU-\/CP\ task\ queue\ is\ full"{}});}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ std::this\_thread::sleep\_for(std::chrono::milliseconds\{100\});}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \});}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \textcolor{keywordflow}{return}\ report;}
\DoxyCodeLine{00094\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/cu\+\_\+cp/metrics\+\_\+handler/metrics\+\_\+handler\+\_\+impl.\+h\item 
lib/cu\+\_\+cp/metrics\+\_\+handler/metrics\+\_\+handler\+\_\+impl.\+cpp\end{DoxyCompactItemize}
