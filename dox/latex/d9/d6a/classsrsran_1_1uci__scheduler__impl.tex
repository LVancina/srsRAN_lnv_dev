\doxysection{srsran\+::uci\+\_\+scheduler\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1uci__scheduler__impl}{}\label{classsrsran_1_1uci__scheduler__impl}\index{srsran::uci\_scheduler\_impl@{srsran::uci\_scheduler\_impl}}


Inheritance diagram for srsran\+::uci\+\_\+scheduler\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=220pt]{d5/d8e/classsrsran_1_1uci__scheduler__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::uci\+\_\+scheduler\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=220pt]{df/d6a/classsrsran_1_1uci__scheduler__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1uci__scheduler__impl_a6d17992b92e54a12d5f380d72fbb5cf6}{uci\+\_\+scheduler\+\_\+impl}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\+\_\+configuration}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\+\_\+cfg\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1uci__allocator}{uci\+\_\+allocator}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{uci\+\_\+alloc\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1ue__repository}{ue\+\_\+repository}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ues\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1uci__scheduler__impl_a52a1e9f9c7d4084fd7975877ad6736c4}{run\+\_\+slot}} (\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator}{cell\+\_\+resource\+\_\+allocator}} \&res\+\_\+alloc, \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} sl\+\_\+tx) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1uci__scheduler__impl_a6d17992b92e54a12d5f380d72fbb5cf6}\label{classsrsran_1_1uci__scheduler__impl_a6d17992b92e54a12d5f380d72fbb5cf6} 
\index{srsran::uci\_scheduler\_impl@{srsran::uci\_scheduler\_impl}!uci\_scheduler\_impl@{uci\_scheduler\_impl}}
\index{uci\_scheduler\_impl@{uci\_scheduler\_impl}!srsran::uci\_scheduler\_impl@{srsran::uci\_scheduler\_impl}}
\doxysubsubsection{\texorpdfstring{uci\_scheduler\_impl()}{uci\_scheduler\_impl()}}
{\footnotesize\ttfamily uci\+\_\+scheduler\+\_\+impl\+::uci\+\_\+scheduler\+\_\+impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\+\_\+configuration}} \&}]{cell\+\_\+cfg\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1uci__allocator}{uci\+\_\+allocator}} \&}]{uci\+\_\+alloc\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1ue__repository}{ue\+\_\+repository}} \&}]{ues\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00034\ \ \ cell\_cfg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{cell\_cfg\_}}),\ uci\_alloc(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{uci\_alloc\_}}),\ ues(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ues\_}}),\ logger(srslog::fetch\_basic\_logger(\textcolor{stringliteral}{"{}SCHED"{}}))}
\DoxyCodeLine{00035\ \{}
\DoxyCodeLine{00036\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1uci__scheduler__impl_a52a1e9f9c7d4084fd7975877ad6736c4}\label{classsrsran_1_1uci__scheduler__impl_a52a1e9f9c7d4084fd7975877ad6736c4} 
\index{srsran::uci\_scheduler\_impl@{srsran::uci\_scheduler\_impl}!run\_slot@{run\_slot}}
\index{run\_slot@{run\_slot}!srsran::uci\_scheduler\_impl@{srsran::uci\_scheduler\_impl}}
\doxysubsubsection{\texorpdfstring{run\_slot()}{run\_slot()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} uci\+\_\+scheduler\+\_\+impl\+::run\+\_\+slot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator}{cell\+\_\+resource\+\_\+allocator}} \&}]{res\+\_\+alloc,  }\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{sl\+\_\+tx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Schedules the SR opportunities and CSI occasions. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em res\+\_\+alloc} & struct with scheduling results. \\
\hline
\mbox{\texttt{ in}}  & {\em sl\+\_\+tx} & slot for which the SR should be allocated. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classsrsran_1_1uci__scheduler_af42311ded3c3ddbae3f3c6c91f55a65f}{srsran\+::uci\+\_\+scheduler}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00041\ \{}
\DoxyCodeLine{00042\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ user\ :\ ues)\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//\ At\ this\ point,\ we\ assume\ the\ config\ validator\ ensures\ there\ is\ pCell.}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classsrsran_1_1ue__cell}{ue\_cell}}\ =\ user-\/>get\_pcell();}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{classsrsran_1_1ue__cell}{ue\_cell}}.\mbox{\hyperlink{classsrsran_1_1ue__cell_a5547f22a9e862e932a494f187f17b61a}{is\_active}}()\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{classsrsran_1_1ue__cell}{ue\_cell}}.cfg().cfg\_dedicated().\mbox{\hyperlink{structsrsran_1_1serving__cell__config_a2fe7ab17cda5bafb76bcabb1e526e556}{ul\_config}}.has\_value())\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00048\ \ \ \ \ \}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1optional}{optional<std::pair<unsigned,\ unsigned>}}>\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_period\_and\_offset}};}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsrsran_1_1ue__cell}{ue\_cell}}.cfg().cfg\_dedicated().\mbox{\hyperlink{structsrsran_1_1serving__cell__config_a6cb73c2a0cc5b1478ca90b6535700926}{csi\_meas\_cfg}}.has\_value())\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \textcolor{comment}{//\ We\ assume\ we\ only\ use\ the\ first\ CSI\ report\ configuration.}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_report\_cfg\_idx}}\ =\ 0;}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_report\_cfg}}\ =}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1ue__cell}{ue\_cell}}.cfg().cfg\_dedicated().\mbox{\hyperlink{structsrsran_1_1serving__cell__config_a6cb73c2a0cc5b1478ca90b6535700926}{csi\_meas\_cfg}}.value().csi\_report\_cfg\_list[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_report\_cfg\_idx}}];}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_period\_and\_offset}}.emplace(std::pair<unsigned,\ unsigned>\{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ csi\_report\_periodicity\_to\_uint(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{variant\_get<csi\_report\_config::periodic\_or\_semi\_persistent\_report\_on\_pucch>}}(}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_report\_cfg}}.report\_cfg\_type)}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .report\_slot\_period),}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{variant\_get<csi\_report\_config::periodic\_or\_semi\_persistent\_report\_on\_pucch>}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_report\_cfg}}.report\_cfg\_type)}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .report\_slot\_offset\});}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsrsran_1_1ue__cell}{ue\_cell}}.is\_pucch\_grid\_inited())\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \textcolor{comment}{//\ Only\ allocate\ in\ the\ farthest\ slot\ in\ the\ grid,\ as\ the\ previous\ part\ of\ the\ allocation\ grid\ has\ been\ completed}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \textcolor{comment}{//\ at\ the\ first\ this\ function\ was\ called.}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ schedule\_uci(cell\_alloc[cell\_alloc.max\_ul\_slot\_alloc\_delay],\ user-\/>crnti,\ \mbox{\hyperlink{classsrsran_1_1ue__cell}{ue\_cell}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_period\_and\_offset}});}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ Initial\ allocation:\ we\ allocate\ opportunities\ all\ over\ the\ grid.}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ n\ =\ 0;\ n\ !=\ cell\_alloc.max\_ul\_slot\_alloc\_delay\ +\ 1;\ ++n)\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ schedule\_uci(cell\_alloc[n],\ user-\/>crnti,\ \mbox{\hyperlink{classsrsran_1_1ue__cell}{ue\_cell}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_period\_and\_offset}});}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1ue__cell}{ue\_cell}}.set\_pucch\_grid\_inited();}
\DoxyCodeLine{00076\ \ \ \ \ \}}
\DoxyCodeLine{00077\ \ \ \}}
\DoxyCodeLine{00078\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/uci\+\_\+scheduling/uci\+\_\+scheduler\+\_\+impl.\+h\item 
lib/scheduler/uci\+\_\+scheduling/uci\+\_\+scheduler\+\_\+impl.\+cpp\end{DoxyCompactItemize}
