\doxysection{srsran\+::ue\+\_\+cell Class Reference}
\hypertarget{classsrsran_1_1ue__cell}{}\label{classsrsran_1_1ue__cell}\index{srsran::ue\_cell@{srsran::ue\_cell}}


Context respective to a UE serving cell.  




{\ttfamily \#include $<$ue\+\_\+cell.\+h$>$}



Collaboration diagram for srsran\+::ue\+\_\+cell\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d2/d46/classsrsran_1_1ue__cell__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsrsran_1_1ue__cell_1_1metrics}{metrics}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1ue__cell_aef6935f6eb760e7a85e89c42b975236f}{ue\+\_\+cell}} (\mbox{\hyperlink{namespacesrsran_a511ed22603607d4a784c0f1807648b47}{du\+\_\+ue\+\_\+index\+\_\+t}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\+\_\+index\+\_\+}}, \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crnti\+\_\+val}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\+\_\+cell\+\_\+cfg\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1ue__harq__timeout__notifier}{ue\+\_\+harq\+\_\+timeout\+\_\+notifier}} harq\+\_\+timeout\+\_\+notifier)
\item 
\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1ue__cell_acfd4848ba8b3fb85b5c64218d7348cf9}{rnti}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{namespacesrsran_a93c929b38944ccc0dbb9039381103931}{bwp\+\_\+id\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1ue__cell_ace4fd83dcfb69d4b15969e583ee359b2}{active\+\_\+bwp\+\_\+id}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1ue__cell_a5547f22a9e862e932a494f187f17b61a}{is\+\_\+active}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Determines whether the UE cell is currently active. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \& \mbox{\hyperlink{classsrsran_1_1ue__cell_a5b78de1abc7b8b688d78ebf74e13b50d}{cfg}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ue__cell_aa4d3658027e05690a4bfebb7536848c5}{deactivate}} ()
\begin{DoxyCompactList}\small\item\em Deactivates cell. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ue__cell_aad8207039508e51231149389d82e6b41}{handle\+\_\+reconfiguration\+\_\+request}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&ue\+\_\+cell\+\_\+cfg)
\item 
\mbox{\hyperlink{structsrsran_1_1dl__harq__process_1_1dl__ack__info__result}{dl\+\_\+harq\+\_\+process\+::dl\+\_\+ack\+\_\+info\+\_\+result}} \mbox{\hyperlink{classsrsran_1_1ue__cell_ab6193f53cf0017e24ace31a6f16ab338}{handle\+\_\+dl\+\_\+ack\+\_\+info}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{uci\+\_\+slot}}, \mbox{\hyperlink{namespacesrsran_ad15571815e2fd31523e75ed1b2b5012a}{mac\+\_\+harq\+\_\+ack\+\_\+report\+\_\+status}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ack\+\_\+value}}, \mbox{\hyperlink{classunsigned}{unsigned}} harq\+\_\+bit\+\_\+idx, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pucch\+\_\+snr}})
\item 
\mbox{\hyperlink{structsrsran_1_1grant__prbs__mcs}{grant\+\_\+prbs\+\_\+mcs}} \mbox{\hyperlink{classsrsran_1_1ue__cell_a4ac5dd943fba67bcc61834a65a943d00}{required\+\_\+dl\+\_\+prbs}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pdsch__time__domain__resource__allocation}{pdsch\+\_\+time\+\_\+domain\+\_\+resource\+\_\+allocation}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdsch\+\_\+td\+\_\+cfg}}, \mbox{\hyperlink{classunsigned}{unsigned}} pending\+\_\+bytes, \mbox{\hyperlink{namespacesrsran_ac0a93d3e0aa8452e32308d5038bcad49}{dci\+\_\+dl\+\_\+rnti\+\_\+config\+\_\+type}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dci\+\_\+type}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Estimate the number of required DL PRBs to allocate the given number of bytes. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structsrsran_1_1grant__prbs__mcs}{grant\+\_\+prbs\+\_\+mcs}} \mbox{\hyperlink{classsrsran_1_1ue__cell_ac7b0fe8951ddd9a1047070eee026343f}{required\+\_\+ul\+\_\+prbs}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pusch__time__domain__resource__allocation}{pusch\+\_\+time\+\_\+domain\+\_\+resource\+\_\+allocation}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pusch\+\_\+td\+\_\+cfg}}, \mbox{\hyperlink{classunsigned}{unsigned}} pending\+\_\+bytes, \mbox{\hyperlink{namespacesrsran_a635cecd3b3b6716ab9f4b6043d603f9f}{dci\+\_\+ul\+\_\+rnti\+\_\+config\+\_\+type}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dci\+\_\+type}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Estimate the number of required UL PRBs to allocate the given number of bytes. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1ue__cell_ac3bcd5251b782667e381677e04d36695}{get\+\_\+pdsch\+\_\+rv}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{h\+\_\+dl}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1ue__cell_a40aa31b96c223976f48c698ae303950c}{get\+\_\+pusch\+\_\+rv}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ul__harq__process}{ul\+\_\+harq\+\_\+process}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{h\+\_\+ul}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1ue__cell_a333f014a41b0f6604e14dbe20f77513e}{is\+\_\+in\+\_\+fallback\+\_\+mode}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classsrsran_1_1ue__cell_a748b218acdf204bc621cd6d3cf7b3db8}{handle\+\_\+crc\+\_\+pdu}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pusch\+\_\+slot}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ul__crc__pdu__indication}{ul\+\_\+crc\+\_\+pdu\+\_\+indication}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crc\+\_\+pdu}})
\begin{DoxyCompactList}\small\item\em Handle CRC PDU indication. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ue__cell_a1898c1453b50e97923ef9adfa943e8cc}{handle\+\_\+csi\+\_\+report}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1csi__report__data}{csi\+\_\+report\+\_\+data}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\+\_\+report}})
\begin{DoxyCompactList}\small\item\em Update UE with the latest CSI report for a given cell. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ue__cell_1_1metrics}{metrics}} \& \mbox{\hyperlink{classsrsran_1_1ue__cell_ae4db10f9b83185c9f126193360a50bf7}{get\+\_\+metrics}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Get the current UE cell metrics. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structsrsran_1_1ue__cell_1_1metrics}{metrics}} \& \mbox{\hyperlink{classsrsran_1_1ue__cell_afad5c591ef6c7ae619cd51673f304d32}{get\+\_\+metrics}} ()
\item 
\mbox{\hyperlink{namespacesrsran_a54ef0ab6c0534846b772739c4ffc6ff2}{aggregation\+\_\+level}} \mbox{\hyperlink{classsrsran_1_1ue__cell_af8ad5bf6f3b1d2fde8a6b2d3a2ff29d3}{get\+\_\+aggregation\+\_\+level}} (\mbox{\hyperlink{namespacesrsran_adaab0f63f541585966388e78a87120b4}{cqi\+\_\+value}} cqi, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1search__space__info}{search\+\_\+space\+\_\+info}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\+\_\+info}}, \mbox{\hyperlink{classbool}{bool}} is\+\_\+dl) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Get recommended aggregation level for PDCCH given reported CQI. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1search__space__info}{search\+\_\+space\+\_\+info}} \texorpdfstring{$\ast$}{*}, \mbox{\hyperlink{namespacesrsran_a998eb311caae6c32e55e88ebe764990c}{MAX\+\_\+\+NOF\+\_\+\+SEARCH\+\_\+\+SPACE\+\_\+\+PER\+\_\+\+BWP}} $>$ \mbox{\hyperlink{classsrsran_1_1ue__cell_ab8a88a09424f7500b26475226024ca4d}{get\+\_\+active\+\_\+dl\+\_\+search\+\_\+spaces}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} pdcch\+\_\+slot, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{namespacesrsran_ac0a93d3e0aa8452e32308d5038bcad49}{dci\+\_\+dl\+\_\+rnti\+\_\+config\+\_\+type}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\+\_\+dci\+\_\+rnti\+\_\+type}}=\{\}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Get list of recommended Search Spaces given the UE current state and channel quality. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1search__space__info}{search\+\_\+space\+\_\+info}} \texorpdfstring{$\ast$}{*}, \mbox{\hyperlink{namespacesrsran_a998eb311caae6c32e55e88ebe764990c}{MAX\+\_\+\+NOF\+\_\+\+SEARCH\+\_\+\+SPACE\+\_\+\+PER\+\_\+\+BWP}} $>$ \mbox{\hyperlink{classsrsran_1_1ue__cell_aa73e0e13050b5fd62f1d91f2b4eb3039}{get\+\_\+active\+\_\+ul\+\_\+search\+\_\+spaces}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} pdcch\+\_\+slot, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{namespacesrsran_a635cecd3b3b6716ab9f4b6043d603f9f}{dci\+\_\+ul\+\_\+rnti\+\_\+config\+\_\+type}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\+\_\+dci\+\_\+rnti\+\_\+type}}=\{\}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ue__cell_a2d395040e0bbfb466c129a68cae7287d}{set\+\_\+fallback\+\_\+state}} (\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fallback\+\_\+state\+\_\+}})
\begin{DoxyCompactList}\small\item\em Set UE fallback state. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1ue__cell_a97dbfa6d47cdd6535e090871466c8315}{is\+\_\+pucch\+\_\+grid\+\_\+inited}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1ue__cell_aeb48158a7d9f9633166d508d5101a50f}{set\+\_\+pucch\+\_\+grid\+\_\+inited}} ()
\item 
\mbox{\hyperlink{classsrsran_1_1ue__channel__state__manager}{ue\+\_\+channel\+\_\+state\+\_\+manager}} \& \mbox{\hyperlink{classsrsran_1_1ue__cell_a9ec269dbea62873f276ab52989a5df1d}{channel\+\_\+state\+\_\+manager}} ()
\begin{DoxyCompactList}\small\item\em Get UE channel state handler. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__channel__state__manager}{ue\+\_\+channel\+\_\+state\+\_\+manager}} \& \mbox{\hyperlink{classsrsran_1_1ue__cell_aea9a6d3e484ed2a1385eaba83913e067}{channel\+\_\+state\+\_\+manager}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller}{ue\+\_\+link\+\_\+adaptation\+\_\+controller}} \& \mbox{\hyperlink{classsrsran_1_1ue__cell_aa0f8cced93097a448ef54662aa58872a}{link\+\_\+adaptation\+\_\+controller}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1ue__cell_a4bb07f90b66536c6942fbf1bad839ccb}\label{classsrsran_1_1ue__cell_a4bb07f90b66536c6942fbf1bad839ccb} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_a511ed22603607d4a784c0f1807648b47}{du\+\_\+ue\+\_\+index\+\_\+t}} {\bfseries ue\+\_\+index}
\item 
\Hypertarget{classsrsran_1_1ue__cell_a072876929ecf77462672a8a1ff3ca4a5}\label{classsrsran_1_1ue__cell_a072876929ecf77462672a8a1ff3ca4a5} 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\+\_\+cell\+\_\+index\+\_\+t}} {\bfseries cell\+\_\+index}
\item 
\Hypertarget{classsrsran_1_1ue__cell_a56021535acd8dc3212c185b7e08125c2}\label{classsrsran_1_1ue__cell_a56021535acd8dc3212c185b7e08125c2} 
\mbox{\hyperlink{classsrsran_1_1harq__entity}{harq\+\_\+entity}} {\bfseries harqs}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Context respective to a UE serving cell. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1ue__cell_aef6935f6eb760e7a85e89c42b975236f}\label{classsrsran_1_1ue__cell_aef6935f6eb760e7a85e89c42b975236f} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!ue\_cell@{ue\_cell}}
\index{ue\_cell@{ue\_cell}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{ue\_cell()}{ue\_cell()}}
{\footnotesize\ttfamily ue\+\_\+cell\+::ue\+\_\+cell (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a511ed22603607d4a784c0f1807648b47}{du\+\_\+ue\+\_\+index\+\_\+t}}}]{ue\+\_\+index\+\_\+,  }\item[{\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}}}]{crnti\+\_\+val,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&}]{ue\+\_\+cell\+\_\+cfg\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1ue__harq__timeout__notifier}{ue\+\_\+harq\+\_\+timeout\+\_\+notifier}}}]{harq\+\_\+timeout\+\_\+notifier }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00040\ \ \ ue\_index(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_index\_}}),}
\DoxyCodeLine{00041\ \ \ cell\_index(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_cell\_cfg\_}}.cell\_cfg\_common.cell\_index),}
\DoxyCodeLine{00042\ \ \ harqs(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crnti\_val}},}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{unsigned})\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_cell\_cfg\_}}.cfg\_dedicated().pdsch\_serv\_cell\_cfg-\/>nof\_harq\_proc,}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ NOF\_UL\_HARQS,}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ harq\_timeout\_notifier,}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_cell\_cfg\_}}.cell\_cfg\_common.ntn\_cs\_koffset),}
\DoxyCodeLine{00047\ \ \ crnti\_(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crnti\_val}}),}
\DoxyCodeLine{00048\ \ \ cell\_cfg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_cell\_cfg\_}}.cell\_cfg\_common),}
\DoxyCodeLine{00049\ \ \ ue\_cfg(\&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_cell\_cfg\_}}),}
\DoxyCodeLine{00050\ \ \ expert\_cfg(cell\_cfg.expert\_cfg.ue),}
\DoxyCodeLine{00051\ \ \ logger(srslog::fetch\_basic\_logger(\textcolor{stringliteral}{"{}SCHED"{}})),}
\DoxyCodeLine{00052\ \ \ channel\_state(cell\_cfg.expert\_cfg.ue,\ ue\_cfg-\/>\mbox{\hyperlink{classsrsran_1_1ue__cell__configuration_a9789c6b1af632529a0c8c0091584448f}{get\_nof\_dl\_ports}}()),}
\DoxyCodeLine{00053\ \ \ ue\_mcs\_calculator(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ue\_cell\_cfg\_}}.cell\_cfg\_common,\ channel\_state)}
\DoxyCodeLine{00054\ \{}
\DoxyCodeLine{00055\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1ue__cell_ace4fd83dcfb69d4b15969e583ee359b2}\label{classsrsran_1_1ue__cell_ace4fd83dcfb69d4b15969e583ee359b2} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!active\_bwp\_id@{active\_bwp\_id}}
\index{active\_bwp\_id@{active\_bwp\_id}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{active\_bwp\_id()}{active\_bwp\_id()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a93c929b38944ccc0dbb9039381103931}{bwp\+\_\+id\+\_\+t}} srsran\+::ue\+\_\+cell\+::active\+\_\+bwp\+\_\+id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00065\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a41c7236508881761bbd602d002833e8e}{to\_bwp\_id}}(0);\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_a5b78de1abc7b8b688d78ebf74e13b50d}\label{classsrsran_1_1ue__cell_a5b78de1abc7b8b688d78ebf74e13b50d} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!cfg@{cfg}}
\index{cfg@{cfg}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{cfg()}{cfg()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \& srsran\+::ue\+\_\+cell\+::cfg (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00070\ \{\ \textcolor{keywordflow}{return}\ *ue\_cfg;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_a9ec269dbea62873f276ab52989a5df1d}\label{classsrsran_1_1ue__cell_a9ec269dbea62873f276ab52989a5df1d} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!channel\_state\_manager@{channel\_state\_manager}}
\index{channel\_state\_manager@{channel\_state\_manager}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{channel\_state\_manager()}{channel\_state\_manager()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1ue__channel__state__manager}{ue\+\_\+channel\+\_\+state\+\_\+manager}} \& srsran\+::ue\+\_\+cell\+::channel\+\_\+state\+\_\+manager (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Get UE channel state handler. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00142\ \{\ \textcolor{keywordflow}{return}\ channel\_state;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_aea9a6d3e484ed2a1385eaba83913e067}\label{classsrsran_1_1ue__cell_aea9a6d3e484ed2a1385eaba83913e067} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!channel\_state\_manager@{channel\_state\_manager}}
\index{channel\_state\_manager@{channel\_state\_manager}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{channel\_state\_manager()}{channel\_state\_manager()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__channel__state__manager}{ue\+\_\+channel\+\_\+state\+\_\+manager}} \& srsran\+::ue\+\_\+cell\+::channel\+\_\+state\+\_\+manager (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00143\ \{\ \textcolor{keywordflow}{return}\ channel\_state;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_aa4d3658027e05690a4bfebb7536848c5}\label{classsrsran_1_1ue__cell_aa4d3658027e05690a4bfebb7536848c5} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!deactivate@{deactivate}}
\index{deactivate@{deactivate}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{deactivate()}{deactivate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} ue\+\_\+cell\+::deactivate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Deactivates cell. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00057\ \{}
\DoxyCodeLine{00058\ \ \ \textcolor{comment}{//\ Stop\ UL\ HARQ\ retransmissions.}}
\DoxyCodeLine{00059\ \ \ \textcolor{comment}{//\ Note:\ We\ do\ no\ stop\ DL\ retransmissions\ because\ we\ are\ still\ relying\ on\ DL\ to\ send\ a\ potential\ RRC\ Release.}}
\DoxyCodeLine{00060\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hid}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hid}}\ !=\ harqs.nof\_ul\_harqs();\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hid}})\ \{}
\DoxyCodeLine{00061\ \ \ \ \ harqs.ul\_harq(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{hid}}).\mbox{\hyperlink{classsrsran_1_1ul__harq__process_a3fe3a8cc557ede35f6657212c6c369ef}{cancel\_harq\_retxs}}();}
\DoxyCodeLine{00062\ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ active\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00065\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_ab8a88a09424f7500b26475226024ca4d}\label{classsrsran_1_1ue__cell_ab8a88a09424f7500b26475226024ca4d} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!get\_active\_dl\_search\_spaces@{get\_active\_dl\_search\_spaces}}
\index{get\_active\_dl\_search\_spaces@{get\_active\_dl\_search\_spaces}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{get\_active\_dl\_search\_spaces()}{get\_active\_dl\_search\_spaces()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1search__space__info}{search\+\_\+space\+\_\+info}} \texorpdfstring{$\ast$}{*}, \mbox{\hyperlink{namespacesrsran_a998eb311caae6c32e55e88ebe764990c}{MAX\+\_\+\+NOF\+\_\+\+SEARCH\+\_\+\+SPACE\+\_\+\+PER\+\_\+\+BWP}} $>$ ue\+\_\+cell\+::get\+\_\+active\+\_\+dl\+\_\+search\+\_\+spaces (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{pdcch\+\_\+slot,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{namespacesrsran_ac0a93d3e0aa8452e32308d5038bcad49}{dci\+\_\+dl\+\_\+rnti\+\_\+config\+\_\+type}} $>$}]{required\+\_\+dci\+\_\+rnti\+\_\+type = {\ttfamily \{\}} }\end{DoxyParamCaption}) const}



Get list of recommended Search Spaces given the UE current state and channel quality. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em required\+\_\+dci\+\_\+rnti\+\_\+type} & Optional parameter to filter Search Spaces by DCI RNTI config type. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
List of Search\+Space configuration. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00251\ \{}
\DoxyCodeLine{00252\ \ \ \mbox{\hyperlink{classsrsran_1_1static__vector}{static\_vector<const\ search\_space\_info*,\ MAX\_NOF\_SEARCH\_SPACE\_PER\_BWP>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{active\_search\_spaces}};}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}}\ ==\ dci\_dl\_rnti\_config\_type::tc\_rnti\_f1\_0)\ \{}
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{comment}{//\ In\ case\ of\ TC-\/RNTI,\ use\ Type-\/1\ PDCCH\ CSS\ for\ a\ UE.}}
\DoxyCodeLine{00256\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{active\_search\_spaces}}.push\_back(}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \&cfg().search\_space(cfg().cell\_cfg\_common.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common.ra\_search\_space\_id));}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{active\_search\_spaces}};}
\DoxyCodeLine{00259\ \ \ \}}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \textcolor{comment}{//\ In\ fallback\ mode\ state,\ only\ use\ search\ spaces\ configured\ in\ CellConfigCommon.}}
\DoxyCodeLine{00262\ \ \ \textcolor{keywordflow}{if}\ (is\_fallback\_mode)\ \{}
\DoxyCodeLine{00263\ \ \ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}}.has\_value()\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}}\ ==\ dci\_dl\_rnti\_config\_type::c\_rnti\_f1\_0,}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ required\ dci-\/rnti\ parameter"{}});}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1search__space__configuration}{search\_space\_configuration}}\&\ ss\ :}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ ue\_cfg-\/>cell\_cfg\_common.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common.search\_spaces)\ \{}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{active\_search\_spaces}}.push\_back(\&ue\_cfg-\/>search\_space(ss.get\_id()));}
\DoxyCodeLine{00269\ \ \ \ \ \}}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{active\_search\_spaces}};}
\DoxyCodeLine{00271\ \ \ \}}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{filter\_ss}}\ =\ [\textcolor{keyword}{this},\ pdcch\_slot,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}}](\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1search__space__info}{search\_space\_info}}\&\ ss)\ \{}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{//\ See\ TS\ 38.213,\ A\ UE\ monitors\ PDCCH\ candidates\ in\ one\ or\ more\ of\ the\ following\ search\ spaces\ sets:}}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{comment}{//\ -\/\ a\ Type3-\/PDCCH\ CSS\ set\ configured\ by\ SearchSpace\ in\ PDCCH-\/Config\ with\ searchSpaceType\ =\ common\ for\ DCI\ formats}}
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{comment}{//\ \ \ with\ CRC\ scrambled\ by\ INT-\/RNTI,\ SFI-\/RNTI,\ TPC-\/PUSCH-\/RNTI,\ TPC-\/PUCCH-\/RNTI,\ or\ TPC-\/SRS-\/RNTI\ and,\ only\ for\ the}}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{comment}{//\ \ \ primary\ cell,\ C-\/RNTI,\ MCS-\/C-\/RNTI,\ or\ CS-\/RNTI(s).}}
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{comment}{//\ -\/\ a\ USS\ set\ configured\ by\ SearchSpace\ in\ PDCCH-\/Config\ with\ searchSpaceType\ =\ ue-\/Specific\ for\ DCI\ formats}}
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{comment}{//\ \ \ with\ CRC\ scrambled\ by\ C-\/RNTI,\ MCS-\/C-\/RNTI,\ SP-\/CSI-\/RNTI,\ or\ CS-\/RNTI(s).}}
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{comment}{//\ As\ per\ TS\ 38.213,\ the\ UE\ monitors\ PDCCH\ candidates\ for\ DCI\ format\ 0\_0\ and\ DCI\ format\ 1\_0\ with\ CRC\ scrambled\ by}}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{comment}{//\ the\ C-\/RNTI,\ the\ MCS-\/C-\/RNTI,\ or\ the\ CS-\/RNTI\ in\ the\ one\ or\ more\ search\ space\ sets\ in\ a\ slot\ where\ the\ UE\ monitors}}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{comment}{//\ PDCCH\ candidates\ for\ at\ least\ a\ DCI\ format\ 0\_0\ or\ a\ DCI\ format\ 1\_0\ with\ CRC\ scrambled\ by\ SI-\/RNTI,\ RA-\/RNTI\ or}}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{comment}{//\ P-\/RNTI.}}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keywordflow}{if}\ (ss.cfg-\/>is\_common\_search\_space())\ \{}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_config\_ss\_lst}}\ =\ cfg().bwp(active\_bwp\_id()).dl\_ded-\/>pdcch\_cfg-\/>search\_spaces;}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_type3\_css}}\ \ \ \ \ \ \ \ =\ std::find\_if(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_config\_ss\_lst}}.begin(),}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_config\_ss\_lst}}.end(),}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&ss](\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1search__space__configuration}{search\_space\_configuration}}\&\ ss\_cfg)\ \{}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ ss.cfg-\/>get\_id()\ ==\ ss\_cfg.get\_id();}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \})\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_config\_ss\_lst}}.end();}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_ss\_for\_ra}}\ =}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ ss.cfg-\/>get\_id()\ ==\ cfg().cell\_cfg\_common.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common.\mbox{\hyperlink{structsrsran_1_1pdcch__config__common_abb3e2d05a704bec469946b206ad200f7}{ra\_search\_space\_id}};}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_ss\_for\_paging}}\ =}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ cfg().cell\_cfg\_common.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common.paging\_search\_space\_id.\mbox{\hyperlink{classsrsran_1_1optional_a2f160539a76c3f4dd0b50b339b81202e}{has\_value}}()\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ ss.cfg-\/>get\_id()\ ==}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cfg().cell\_cfg\_common.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common.paging\_search\_space\_id.value();}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \textcolor{comment}{//\ [Implementation-\/defined]\ We\ exclude\ SearchSpace\#0\ to\ avoid\ the\ complexity\ of\ computing\ the\ SearchSpace\#0\ PDCCH}}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \textcolor{comment}{//\ candidates\ monitoring\ occasions\ associated\ with\ a\ SS/PBCH\ block\ as\ mentioned\ in\ TS\ 38.213,\ clause\ 10.1.}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ss.cfg-\/>get\_id()\ ==\ to\_search\_space\_id(0)\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_ss\_for\_ra}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_ss\_for\_paging}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_type3\_css}}))\ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00306\ \ \ \ \ \}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ \textcolor{keywordflow}{if}\ (ss.get\_pdcch\_candidates(\mbox{\hyperlink{classsrsran_1_1ue__cell_af8ad5bf6f3b1d2fde8a6b2d3a2ff29d3}{get\_aggregation\_level}}(\mbox{\hyperlink{classsrsran_1_1ue__cell_a9ec269dbea62873f276ab52989a5df1d}{channel\_state\_manager}}().get\_wideband\_cqi(),\ ss,\ \textcolor{keyword}{true}),\ pdcch\_slot)}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ .empty())\ \{}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00311\ \ \ \ \ \}}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}}.has\_value()\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ pdcch\_helper::search\_space\_supports\_dci\_dl\_format(*ss.cfg,\ \mbox{\hyperlink{namespacesrsran_ad130b4418f6a3901ee5f40dbfb48299f}{get\_dci\_dl\_format}}(*\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}})))\ \{}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00315\ \ \ \ \ \}}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00317\ \ \ \};}
\DoxyCodeLine{00318\ \ \ \textcolor{keywordflow}{return}\ get\_prioritized\_search\_spaces(*\textcolor{keyword}{this},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{filter\_ss}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00319\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_aa73e0e13050b5fd62f1d91f2b4eb3039}\label{classsrsran_1_1ue__cell_aa73e0e13050b5fd62f1d91f2b4eb3039} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!get\_active\_ul\_search\_spaces@{get\_active\_ul\_search\_spaces}}
\index{get\_active\_ul\_search\_spaces@{get\_active\_ul\_search\_spaces}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{get\_active\_ul\_search\_spaces()}{get\_active\_ul\_search\_spaces()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1search__space__info}{search\+\_\+space\+\_\+info}} \texorpdfstring{$\ast$}{*}, \mbox{\hyperlink{namespacesrsran_a998eb311caae6c32e55e88ebe764990c}{MAX\+\_\+\+NOF\+\_\+\+SEARCH\+\_\+\+SPACE\+\_\+\+PER\+\_\+\+BWP}} $>$ ue\+\_\+cell\+::get\+\_\+active\+\_\+ul\+\_\+search\+\_\+spaces (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{pdcch\+\_\+slot,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{namespacesrsran_a635cecd3b3b6716ab9f4b6043d603f9f}{dci\+\_\+ul\+\_\+rnti\+\_\+config\+\_\+type}} $>$}]{required\+\_\+dci\+\_\+rnti\+\_\+type = {\ttfamily \{\}} }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00324\ \{}
\DoxyCodeLine{00325\ \ \ \textcolor{comment}{//\ In\ fallback\ mode\ state,\ only\ use\ search\ spaces\ configured\ in\ CellConfigCommon.}}
\DoxyCodeLine{00326\ \ \ \textcolor{keywordflow}{if}\ (is\_fallback\_mode)\ \{}
\DoxyCodeLine{00327\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1static__vector}{static\_vector<const\ search\_space\_info*,\ MAX\_NOF\_SEARCH\_SPACE\_PER\_BWP>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{active\_search\_spaces}};}
\DoxyCodeLine{00328\ \ \ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}}.has\_value()\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}}\ ==\ dci\_ul\_rnti\_config\_type::c\_rnti\_f0\_0,}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ required\ dci-\/rnti\ parameter"{}});}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1search__space__configuration}{search\_space\_configuration}}\&\ ss\ :}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ ue\_cfg-\/>cell\_cfg\_common.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common.search\_spaces)\ \{}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{active\_search\_spaces}}.push\_back(\&ue\_cfg-\/>search\_space(ss.get\_id()));}
\DoxyCodeLine{00334\ \ \ \ \ \}}
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{active\_search\_spaces}};}
\DoxyCodeLine{00336\ \ \ \}}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{filter\_ss}}\ =\ [\textcolor{keyword}{this},\ pdcch\_slot,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}}](\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1search__space__info}{search\_space\_info}}\&\ ss)\ \{}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{comment}{//\ See\ TS\ 38.213,\ A\ UE\ monitors\ PDCCH\ candidates\ in\ one\ or\ more\ of\ the\ following\ search\ spaces\ sets:}}
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{comment}{//\ -\/\ a\ Type3-\/PDCCH\ CSS\ set\ configured\ by\ SearchSpace\ in\ PDCCH-\/Config\ with\ searchSpaceType\ =\ common\ for\ DCI\ formats}}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{comment}{//\ \ \ with\ CRC\ scrambled\ by\ INT-\/RNTI,\ SFI-\/RNTI,\ TPC-\/PUSCH-\/RNTI,\ TPC-\/PUCCH-\/RNTI,\ or\ TPC-\/SRS-\/RNTI\ and,\ only\ for\ the}}
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{comment}{//\ \ \ primary\ cell,\ C-\/RNTI,\ MCS-\/C-\/RNTI,\ or\ CS-\/RNTI(s).}}
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{comment}{//\ -\/\ a\ USS\ set\ configured\ by\ SearchSpace\ in\ PDCCH-\/Config\ with\ searchSpaceType\ =\ ue-\/Specific\ for\ DCI\ formats}}
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{comment}{//\ \ \ with\ CRC\ scrambled\ by\ C-\/RNTI,\ MCS-\/C-\/RNTI,\ SP-\/CSI-\/RNTI,\ or\ CS-\/RNTI(s).}}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{comment}{//\ As\ per\ TS\ 38.213,\ the\ UE\ monitors\ PDCCH\ candidates\ for\ DCI\ format\ 0\_0\ and\ DCI\ format\ 1\_0\ with\ CRC\ scrambled\ by}}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{comment}{//\ the\ C-\/RNTI,\ the\ MCS-\/C-\/RNTI,\ or\ the\ CS-\/RNTI\ in\ the\ one\ or\ more\ search\ space\ sets\ in\ a\ slot\ where\ the\ UE\ monitors}}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{comment}{//\ PDCCH\ candidates\ for\ at\ least\ a\ DCI\ format\ 0\_0\ or\ a\ DCI\ format\ 1\_0\ with\ CRC\ scrambled\ by\ SI-\/RNTI,\ RA-\/RNTI\ or}}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{comment}{//\ P-\/RNTI.}}
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keywordflow}{if}\ (ss.cfg-\/>is\_common\_search\_space())\ \{}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_config\_ss\_lst}}\ =\ cfg().bwp(active\_bwp\_id()).dl\_ded-\/>pdcch\_cfg-\/>search\_spaces;}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_type3\_css}}\ \ \ \ \ \ \ \ =\ std::find\_if(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_config\_ss\_lst}}.begin(),}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_config\_ss\_lst}}.end(),}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&ss](\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1search__space__configuration}{search\_space\_configuration}}\&\ ss\_cfg)\ \{}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ ss.cfg-\/>get\_id()\ ==\ ss\_cfg.get\_id();}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \})\ !=\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdcch\_config\_ss\_lst}}.end();}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_ss\_for\_ra}}\ =}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ ss.cfg-\/>get\_id()\ ==\ cfg().cell\_cfg\_common.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common.\mbox{\hyperlink{structsrsran_1_1pdcch__config__common_abb3e2d05a704bec469946b206ad200f7}{ra\_search\_space\_id}};}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_ss\_for\_paging}}\ =}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ cfg().cell\_cfg\_common.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common.paging\_search\_space\_id.\mbox{\hyperlink{classsrsran_1_1optional_a2f160539a76c3f4dd0b50b339b81202e}{has\_value}}()\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ ss.cfg-\/>get\_id()\ ==}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cfg().cell\_cfg\_common.dl\_cfg\_common.init\_dl\_bwp.pdcch\_common.paging\_search\_space\_id.value();}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \ \ \ \ \textcolor{comment}{//\ [Implementation-\/defined]\ We\ exclude\ SearchSpace\#0\ to\ avoid\ the\ complexity\ of\ computing\ the\ SearchSpace\#0\ PDCCH}}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \textcolor{comment}{//\ candidates\ monitoring\ occasions\ associated\ with\ a\ SS/PBCH\ block\ as\ mentioned\ in\ TS\ 38.213,\ clause\ 10.1.}}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ss.cfg-\/>get\_id()\ ==\ to\_search\_space\_id(0)\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_ss\_for\_ra}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_ss\_for\_paging}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_type3\_css}}))\ \{}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00371\ \ \ \ \ \}}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keywordflow}{if}\ (ss.get\_pdcch\_candidates(\mbox{\hyperlink{classsrsran_1_1ue__cell_af8ad5bf6f3b1d2fde8a6b2d3a2ff29d3}{get\_aggregation\_level}}(\mbox{\hyperlink{classsrsran_1_1ue__cell_a9ec269dbea62873f276ab52989a5df1d}{channel\_state\_manager}}().get\_wideband\_cqi(),\ ss,\ \textcolor{keyword}{false}),}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pdcch\_slot)}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ .empty())\ \{}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00377\ \ \ \ \ \}}
\DoxyCodeLine{00378\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}}.has\_value()\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ *\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{required\_dci\_rnti\_type}}\ ==\ (ss.get\_ul\_dci\_format()\ ==\ dci\_ul\_format::f0\_0}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ dci\_ul\_rnti\_config\_type::c\_rnti\_f0\_0}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{namespacesrsran_a635cecd3b3b6716ab9f4b6043d603f9f}{dci\_ul\_rnti\_config\_type}}::c\_rnti\_f0\_1));}
\DoxyCodeLine{00382\ \ \ \};}
\DoxyCodeLine{00383\ \ \ \textcolor{keywordflow}{return}\ get\_prioritized\_search\_spaces(*\textcolor{keyword}{this},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{filter\_ss}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00384\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_af8ad5bf6f3b1d2fde8a6b2d3a2ff29d3}\label{classsrsran_1_1ue__cell_af8ad5bf6f3b1d2fde8a6b2d3a2ff29d3} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!get\_aggregation\_level@{get\_aggregation\_level}}
\index{get\_aggregation\_level@{get\_aggregation\_level}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{get\_aggregation\_level()}{get\_aggregation\_level()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a54ef0ab6c0534846b772739c4ffc6ff2}{aggregation\+\_\+level}} ue\+\_\+cell\+::get\+\_\+aggregation\+\_\+level (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_adaab0f63f541585966388e78a87120b4}{cqi\+\_\+value}}}]{cqi,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1search__space__info}{search\+\_\+space\+\_\+info}} \&}]{ss\+\_\+info,  }\item[{\mbox{\hyperlink{classbool}{bool}}}]{is\+\_\+dl }\end{DoxyParamCaption}) const}



Get recommended aggregation level for PDCCH given reported CQI. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00388\ \{}
\DoxyCodeLine{00389\ \ \ \mbox{\hyperlink{namespacesrsran_a9469b39470379c53808f28c6d2e7fffc}{cqi\_table\_t}}\ cqi\_table\ =\ cqi\_table\_t::table1;}
\DoxyCodeLine{00390\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dci\_size}};}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.cfg-\/>is\_common\_search\_space())\ \{}
\DoxyCodeLine{00393\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_dl)\ \{}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dci\_size}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.dci\_sz.format1\_0\_common\_size.total.value();}
\DoxyCodeLine{00395\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dci\_size}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.dci\_sz.format0\_0\_common\_size.total.value();}
\DoxyCodeLine{00397\ \ \ \ \ \}}
\DoxyCodeLine{00398\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00399\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_dl)\ \{}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dci\_size}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.get\_dl\_dci\_format()\ ==\ dci\_dl\_format::f1\_1\ ?\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.dci\_sz.format1\_1\_ue\_size-\/>total.value()}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.dci\_sz.format1\_0\_ue\_size-\/>total.value();}
\DoxyCodeLine{00402\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dci\_size}}\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.get\_ul\_dci\_format()\ ==\ dci\_ul\_format::f0\_1\ ?\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.dci\_sz.format0\_1\_ue\_size-\/>total.value()}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.dci\_sz.format0\_0\_ue\_size-\/>total.value();}
\DoxyCodeLine{00405\ \ \ \ \ \}}
\DoxyCodeLine{00406\ \ \ \}}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.cfg-\/>is\_common\_search\_space()\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{and}}\ cfg().cfg\_dedicated().csi\_meas\_cfg.has\_value())\ \{}
\DoxyCodeLine{00409\ \ \ \ \ \textcolor{comment}{//\ NOTE:\ It\ is\ assumed\ there\ is\ atleast\ one\ CSI\ report\ configured\ for\ UE.}}
\DoxyCodeLine{00410\ \ \ \ \ cqi\_table\ =\ cfg().cfg\_dedicated().\mbox{\hyperlink{structsrsran_1_1serving__cell__config_a6cb73c2a0cc5b1478ca90b6535700926}{csi\_meas\_cfg}}-\/>csi\_report\_cfg\_list.back().cqi\_table.value();}
\DoxyCodeLine{00411\ \ \ \}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a30ddcaac816529298c492b90c8577560}{map\_cqi\_to\_aggregation\_level}}(cqi,\ cqi\_table,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ss\_info}}.cfg-\/>get\_nof\_candidates(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dci\_size}});}
\DoxyCodeLine{00414\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_afad5c591ef6c7ae619cd51673f304d32}\label{classsrsran_1_1ue__cell_afad5c591ef6c7ae619cd51673f304d32} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!get\_metrics@{get\_metrics}}
\index{get\_metrics@{get\_metrics}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{get\_metrics()}{get\_metrics()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1ue__cell_1_1metrics}{metrics}} \& srsran\+::ue\+\_\+cell\+::get\+\_\+metrics (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00113\ \{\ \textcolor{keywordflow}{return}\ ue\_metrics;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_ae4db10f9b83185c9f126193360a50bf7}\label{classsrsran_1_1ue__cell_ae4db10f9b83185c9f126193360a50bf7} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!get\_metrics@{get\_metrics}}
\index{get\_metrics@{get\_metrics}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{get\_metrics()}{get\_metrics()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ue__cell_1_1metrics}{metrics}} \& srsran\+::ue\+\_\+cell\+::get\+\_\+metrics (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Get the current UE cell metrics. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00112\ \{\ \textcolor{keywordflow}{return}\ ue\_metrics;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_ac3bcd5251b782667e381677e04d36695}\label{classsrsran_1_1ue__cell_ac3bcd5251b782667e381677e04d36695} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!get\_pdsch\_rv@{get\_pdsch\_rv}}
\index{get\_pdsch\_rv@{get\_pdsch\_rv}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{get\_pdsch\_rv()}{get\_pdsch\_rv()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} srsran\+::ue\+\_\+cell\+::get\+\_\+pdsch\+\_\+rv (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1dl__harq__process}{dl\+\_\+harq\+\_\+process}} \&}]{h\+\_\+dl }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00093\ \ \ \{}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return}\ cell\_cfg.expert\_cfg.ue}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ .\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_afd629718c7eeda87d50042d10dc21680}{pdsch\_rv\_sequence}}[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{h\_dl}}.tb(0).nof\_retxs\ \%\ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_afd629718c7eeda87d50042d10dc21680}{pdsch\_rv\_sequence}}.size()];}
\DoxyCodeLine{00096\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_a40aa31b96c223976f48c698ae303950c}\label{classsrsran_1_1ue__cell_a40aa31b96c223976f48c698ae303950c} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!get\_pusch\_rv@{get\_pusch\_rv}}
\index{get\_pusch\_rv@{get\_pusch\_rv}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{get\_pusch\_rv()}{get\_pusch\_rv()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} srsran\+::ue\+\_\+cell\+::get\+\_\+pusch\+\_\+rv (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ul__harq__process}{ul\+\_\+harq\+\_\+process}} \&}]{h\+\_\+ul }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098\ \ \ \{}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{return}\ cell\_cfg.expert\_cfg.ue}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ .\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_ab3a85b2f25760060a0eaa24e8379fe94}{pusch\_rv\_sequence}}[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{h\_ul}}.tb().nof\_retxs\ \%\ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_ab3a85b2f25760060a0eaa24e8379fe94}{pusch\_rv\_sequence}}.size()];}
\DoxyCodeLine{00101\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_a748b218acdf204bc621cd6d3cf7b3db8}\label{classsrsran_1_1ue__cell_a748b218acdf204bc621cd6d3cf7b3db8} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!handle\_crc\_pdu@{handle\_crc\_pdu}}
\index{handle\_crc\_pdu@{handle\_crc\_pdu}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{handle\_crc\_pdu()}{handle\_crc\_pdu()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} ue\+\_\+cell\+::handle\+\_\+crc\+\_\+pdu (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{pusch\+\_\+slot,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1ul__crc__pdu__indication}{ul\+\_\+crc\+\_\+pdu\+\_\+indication}} \&}]{crc\+\_\+pdu }\end{DoxyParamCaption})}



Handle CRC PDU indication. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00189\ \{}
\DoxyCodeLine{00190\ \ \ \textcolor{comment}{//\ Update\ UL\ HARQ\ state.}}
\DoxyCodeLine{00191\ \ \ \textcolor{keywordtype}{int}\ tbs\ =\ harqs.\mbox{\hyperlink{classsrsran_1_1harq__entity_ac7d8dd718225b1f0260eb66022fc5282}{ul\_crc\_info}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crc\_pdu}}.harq\_id,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crc\_pdu}}.tb\_crc\_success,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pusch\_slot}});}
\DoxyCodeLine{00192\ \ \ \textcolor{keywordflow}{if}\ (tbs\ >=\ 0)\ \{}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{comment}{//\ HARQ\ with\ matching\ ID\ and\ UCI\ slot\ was\ found.}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{comment}{//\ Update\ link\ adaptation\ controller.}}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1ul__harq__process}{ul\_harq\_process}}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{h\_ul}}\ =\ harqs.ul\_harq(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crc\_pdu}}.harq\_id);}
\DoxyCodeLine{00197\ \ \ \ \ ue\_mcs\_calculator.\mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_afe8431650dae7b1814a8a6966049a685}{handle\_ul\_crc\_info}}(}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crc\_pdu}}.tb\_crc\_success,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{h\_ul}}.last\_tx\_params().mcs,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{h\_ul}}.last\_tx\_params().mcs\_table);}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{comment}{//\ Update\ PUSCH\ KO\ count\ metrics.}}
\DoxyCodeLine{00201\ \ \ \ \ ue\_metrics.consecutive\_pusch\_kos\ =\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crc\_pdu}}.tb\_crc\_success)\ ?\ 0\ :\ ue\_metrics.consecutive\_pusch\_kos\ +\ 1;}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{comment}{//\ Update\ PUSCH\ SNR\ reported\ from\ PHY.}}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crc\_pdu}}.ul\_sinr\_metric.has\_value())\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ channel\_state.update\_pusch\_snr(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{crc\_pdu}}.ul\_sinr\_metric.value());}
\DoxyCodeLine{00206\ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \textcolor{keywordflow}{return}\ tbs;}
\DoxyCodeLine{00210\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_a1898c1453b50e97923ef9adfa943e8cc}\label{classsrsran_1_1ue__cell_a1898c1453b50e97923ef9adfa943e8cc} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!handle\_csi\_report@{handle\_csi\_report}}
\index{handle\_csi\_report@{handle\_csi\_report}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{handle\_csi\_report()}{handle\_csi\_report()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} ue\+\_\+cell\+::handle\+\_\+csi\+\_\+report (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1csi__report__data}{csi\+\_\+report\+\_\+data}} \&}]{csi\+\_\+report }\end{DoxyParamCaption})}



Update UE with the latest CSI report for a given cell. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00213\ \{}
\DoxyCodeLine{00214\ \ \ \mbox{\hyperlink{classsrsran_1_1ue__cell_a2d395040e0bbfb466c129a68cae7287d}{set\_fallback\_state}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00215\ \ \ apply\_link\_adaptation\_procedures(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_report}});}
\DoxyCodeLine{00216\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ channel\_state.\mbox{\hyperlink{classsrsran_1_1ue__channel__state__manager_af981c726aeaa5655a04b7c9289545954}{handle\_csi\_report}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{csi\_report}}))\ \{}
\DoxyCodeLine{00217\ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}ue=\{\}\ rnti=\{\}:\ Invalid\ CSI\ report\ received"{}},\ ue\_index,\ rnti());}
\DoxyCodeLine{00218\ \ \ \}}
\DoxyCodeLine{00219\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_ab6193f53cf0017e24ace31a6f16ab338}\label{classsrsran_1_1ue__cell_ab6193f53cf0017e24ace31a6f16ab338} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!handle\_dl\_ack\_info@{handle\_dl\_ack\_info}}
\index{handle\_dl\_ack\_info@{handle\_dl\_ack\_info}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{handle\_dl\_ack\_info()}{handle\_dl\_ack\_info()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1dl__harq__process_1_1dl__ack__info__result}{dl\+\_\+harq\+\_\+process\+::dl\+\_\+ack\+\_\+info\+\_\+result}} ue\+\_\+cell\+::handle\+\_\+dl\+\_\+ack\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{uci\+\_\+slot,  }\item[{\mbox{\hyperlink{namespacesrsran_ad15571815e2fd31523e75ed1b2b5012a}{mac\+\_\+harq\+\_\+ack\+\_\+report\+\_\+status}}}]{ack\+\_\+value,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{harq\+\_\+bit\+\_\+idx,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$}]{pucch\+\_\+snr }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00076\ \{}
\DoxyCodeLine{00077\ \ \ \mbox{\hyperlink{structsrsran_1_1dl__harq__process_1_1dl__ack__info__result}{dl\_harq\_process::dl\_ack\_info\_result}}\ result\ =\ harqs.\mbox{\hyperlink{classsrsran_1_1harq__entity_aa2828a14b911b195b07d3cfae323f9bc}{dl\_ack\_info}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{uci\_slot}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ack\_value}},\ harq\_bit\_idx,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pucch\_snr}});}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{if}\ (result.update\ ==\ dl\_harq\_process::status\_update::acked\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{or}}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ result.update\ ==\ dl\_harq\_process::status\_update::nacked)\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ HARQ\ is\ not\ expecting\ more\ ACK\ bits.\ Consider\ the\ feedback\ in\ the\ link\ adaptation\ controller.}}
\DoxyCodeLine{00082\ \ \ \ \ ue\_mcs\_calculator.\mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_ac37977a3082a3e97784c4e343f4f9e22}{handle\_dl\_ack\_info}}(}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ result.update\ ==\ dl\_harq\_process::status\_update::acked,\ result.mcs,\ result.mcs\_table);}
\DoxyCodeLine{00084\ \ \ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00087\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_aad8207039508e51231149389d82e6b41}\label{classsrsran_1_1ue__cell_aad8207039508e51231149389d82e6b41} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!handle\_reconfiguration\_request@{handle\_reconfiguration\_request}}
\index{handle\_reconfiguration\_request@{handle\_reconfiguration\_request}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{handle\_reconfiguration\_request()}{handle\_reconfiguration\_request()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} ue\+\_\+cell\+::handle\+\_\+reconfiguration\+\_\+request (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&}]{ue\+\_\+cell\+\_\+cfg }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00068\ \{}
\DoxyCodeLine{00069\ \ \ ue\_cfg\ =\ \&ue\_cell\_cfg;}
\DoxyCodeLine{00070\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_a5547f22a9e862e932a494f187f17b61a}\label{classsrsran_1_1ue__cell_a5547f22a9e862e932a494f187f17b61a} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!is\_active@{is\_active}}
\index{is\_active@{is\_active}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{is\_active()}{is\_active()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::ue\+\_\+cell\+::is\+\_\+active (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Determines whether the UE cell is currently active. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00068\ \{\ \textcolor{keywordflow}{return}\ active;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_a333f014a41b0f6604e14dbe20f77513e}\label{classsrsran_1_1ue__cell_a333f014a41b0f6604e14dbe20f77513e} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!is\_in\_fallback\_mode@{is\_in\_fallback\_mode}}
\index{is\_in\_fallback\_mode@{is\_in\_fallback\_mode}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{is\_in\_fallback\_mode()}{is\_in\_fallback\_mode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::ue\+\_\+cell\+::is\+\_\+in\+\_\+fallback\+\_\+mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00103\ \{\ \textcolor{keywordflow}{return}\ is\_fallback\_mode;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_a97dbfa6d47cdd6535e090871466c8315}\label{classsrsran_1_1ue__cell_a97dbfa6d47cdd6535e090871466c8315} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!is\_pucch\_grid\_inited@{is\_pucch\_grid\_inited}}
\index{is\_pucch\_grid\_inited@{is\_pucch\_grid\_inited}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{is\_pucch\_grid\_inited()}{is\_pucch\_grid\_inited()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::ue\+\_\+cell\+::is\+\_\+pucch\+\_\+grid\+\_\+inited (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00137\ \{\ \textcolor{keywordflow}{return}\ is\_pucch\_alloc\_grid\_initialized;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_aa0f8cced93097a448ef54662aa58872a}\label{classsrsran_1_1ue__cell_aa0f8cced93097a448ef54662aa58872a} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!link\_adaptation\_controller@{link\_adaptation\_controller}}
\index{link\_adaptation\_controller@{link\_adaptation\_controller}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{link\_adaptation\_controller()}{link\_adaptation\_controller()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller}{ue\+\_\+link\+\_\+adaptation\+\_\+controller}} \& srsran\+::ue\+\_\+cell\+::link\+\_\+adaptation\+\_\+controller (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00145\ \{\ \textcolor{keywordflow}{return}\ ue\_mcs\_calculator;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_a4ac5dd943fba67bcc61834a65a943d00}\label{classsrsran_1_1ue__cell_a4ac5dd943fba67bcc61834a65a943d00} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!required\_dl\_prbs@{required\_dl\_prbs}}
\index{required\_dl\_prbs@{required\_dl\_prbs}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{required\_dl\_prbs()}{required\_dl\_prbs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1grant__prbs__mcs}{grant\+\_\+prbs\+\_\+mcs}} ue\+\_\+cell\+::required\+\_\+dl\+\_\+prbs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pdsch__time__domain__resource__allocation}{pdsch\+\_\+time\+\_\+domain\+\_\+resource\+\_\+allocation}} \&}]{pdsch\+\_\+td\+\_\+cfg,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{pending\+\_\+bytes,  }\item[{\mbox{\hyperlink{namespacesrsran_ac0a93d3e0aa8452e32308d5038bcad49}{dci\+\_\+dl\+\_\+rnti\+\_\+config\+\_\+type}}}]{dci\+\_\+type }\end{DoxyParamCaption}) const}



Estimate the number of required DL PRBs to allocate the given number of bytes. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00092\ \{}
\DoxyCodeLine{00093\ \ \ \mbox{\hyperlink{structsrsran_1_1pdsch__config__params}{pdsch\_config\_params}}\ pdsch\_cfg;}
\DoxyCodeLine{00094\ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dci\_type}})\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordflow}{case}\ dci\_dl\_rnti\_config\_type::tc\_rnti\_f1\_0:}
\DoxyCodeLine{00096\ \ \ \ \ \ \ pdsch\_cfg\ =\ \mbox{\hyperlink{namespacesrsran_afdd0020f677962611dc4750ff59adaf8}{get\_pdsch\_config\_f1\_0\_tc\_rnti}}(cell\_cfg,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdsch\_td\_cfg}});}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordflow}{case}\ dci\_dl\_rnti\_config\_type::c\_rnti\_f1\_0:}
\DoxyCodeLine{00099\ \ \ \ \ \ \ pdsch\_cfg\ =\ \mbox{\hyperlink{namespacesrsran_ade749ce1cb6bc8a5dcbadb05bdb9453e}{get\_pdsch\_config\_f1\_0\_c\_rnti}}(cfg(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdsch\_td\_cfg}});}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{case}\ dci\_dl\_rnti\_config\_type::c\_rnti\_f1\_1:}
\DoxyCodeLine{00102\ \ \ \ \ \ \ pdsch\_cfg\ =\ \mbox{\hyperlink{namespacesrsran_ad1f3c8f521e705599a853caca9257e16}{get\_pdsch\_config\_f1\_1\_c\_rnti}}(cfg(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pdsch\_td\_cfg}},\ \mbox{\hyperlink{classsrsran_1_1ue__cell_a9ec269dbea62873f276ab52989a5df1d}{channel\_state\_manager}}().get\_nof\_dl\_layers());}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a630688b51219f81c5a47ec5650326afc}{report\_fatal\_error}}(\textcolor{stringliteral}{"{}Unsupported\ PDCCH\ DCI\ UL\ format"{}});}
\DoxyCodeLine{00106\ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \mbox{\hyperlink{classsrsran_1_1optional}{optional<sch\_mcs\_index>}}\ mcs\ =\ ue\_mcs\_calculator.\mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_a6afdd03b41aa32b4be5c73248025a572}{calculate\_dl\_mcs}}(pdsch\_cfg.mcs\_table);}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ mcs.\mbox{\hyperlink{classsrsran_1_1optional_a2f160539a76c3f4dd0b50b339b81202e}{has\_value}}())\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{//\ Return\ a\ grant\ with\ no\ PRBs\ if\ the\ MCS\ is\ invalid\ (CQI\ is\ either\ 0,\ for\ UE\ out\ of\ range,\ or\ >\ 15).}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structsrsran_1_1grant__prbs__mcs}{grant\_prbs\_mcs}}\{.\mbox{\hyperlink{structsrsran_1_1grant__prbs__mcs_aa09388a7a06b05f80ac0dc0e61bbdf67}{n\_prbs}}\ =\ 0\};}
\DoxyCodeLine{00112\ \ \ \}}
\DoxyCodeLine{00113\ \ \ \mbox{\hyperlink{structsrsran_1_1sch__mcs__description}{sch\_mcs\_description}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_config}}\ =\ \mbox{\hyperlink{namespacesrsran_a4eee2970cbfb5f30250ac3bcc2a4971a}{pdsch\_mcs\_get\_config}}(pdsch\_cfg.mcs\_table,\ mcs.value());}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \mbox{\hyperlink{structsrsran_1_1sch__prbs__tbs}{sch\_prbs\_tbs}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prbs\_tbs}}\ =\ \mbox{\hyperlink{namespacesrsran_a70b8a26545adce623448955edfe349c3}{get\_nof\_prbs}}(\mbox{\hyperlink{structsrsran_1_1prbs__calculator__sch__config}{prbs\_calculator\_sch\_config}}\{pending\_bytes,}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{classunsigned}{unsigned}})pdsch\_cfg.symbols.\mbox{\hyperlink{classsrsran_1_1interval_ac47a815285449ead553a43a0b5f85f63}{length}}(),}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_ac5e3b371735e947bc78d6d8af579ef0d}{calculate\_nof\_dmrs\_per\_rb}}(pdsch\_cfg.dmrs),}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pdsch\_cfg.nof\_oh\_prb,}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_config}},}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pdsch\_cfg.nof\_layers\});}
\DoxyCodeLine{00121\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prbs\_tbs}}.nof\_prbs\ ==\ 0)\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structsrsran_1_1grant__prbs__mcs}{grant\_prbs\_mcs}}\{.\mbox{\hyperlink{structsrsran_1_1grant__prbs__mcs_aa09388a7a06b05f80ac0dc0e61bbdf67}{n\_prbs}}\ =\ 0\};}
\DoxyCodeLine{00123\ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \textcolor{comment}{//\ Bound\ Nof\ PRBs\ by\ the\ number\ of\ PRBs\ in\ the\ BWP\ and\ the\ limits\ defined\ in\ the\ scheduler\ config.}}
\DoxyCodeLine{00126\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1bwp__downlink__common}{bwp\_downlink\_common}}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bwp\_dl\_cmn}}\ =\ *ue\_cfg-\/>bwp(active\_bwp\_id()).dl\_common;}
\DoxyCodeLine{00127\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nof\_prbs\ \ \ =\ std::min(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prbs\_tbs}}.nof\_prbs,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bwp\_dl\_cmn}}.generic\_params.crbs.length());}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \textcolor{comment}{//\ Apply\ grant\ size\ limits\ specified\ in\ the\ config.}}
\DoxyCodeLine{00130\ \ \ nof\_prbs\ =\ std::max(std::min(nof\_prbs,\ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a99ca79c9c84d7b42a868dee4766668a9}{pdsch\_nof\_rbs}}.stop()),}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cell\_cfg.expert\_cfg.ue.\mbox{\hyperlink{structsrsran_1_1scheduler__ue__expert__config_a99ca79c9c84d7b42a868dee4766668a9}{pdsch\_nof\_rbs}}.start());}
\DoxyCodeLine{00132\ \ \ nof\_prbs\ =\ std::max(std::min(nof\_prbs,\ ue\_cfg-\/>\mbox{\hyperlink{classsrsran_1_1ue__cell__configuration_a2baf140cc6e889f3f37c8f7543b59500}{rrm\_cfg}}().\mbox{\hyperlink{structsrsran_1_1sched__ue__resource__alloc__config_afe4e71eac3dd010aa684a485e4207af9}{pdsch\_grant\_size\_limits}}.stop()),}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ue\_cfg-\/>\mbox{\hyperlink{classsrsran_1_1ue__cell__configuration_a2baf140cc6e889f3f37c8f7543b59500}{rrm\_cfg}}().\mbox{\hyperlink{structsrsran_1_1sched__ue__resource__alloc__config_afe4e71eac3dd010aa684a485e4207af9}{pdsch\_grant\_size\_limits}}.start());}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structsrsran_1_1grant__prbs__mcs}{grant\_prbs\_mcs}}\{mcs.value(),\ nof\_prbs\};}
\DoxyCodeLine{00136\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_ac7b0fe8951ddd9a1047070eee026343f}\label{classsrsran_1_1ue__cell_ac7b0fe8951ddd9a1047070eee026343f} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!required\_ul\_prbs@{required\_ul\_prbs}}
\index{required\_ul\_prbs@{required\_ul\_prbs}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{required\_ul\_prbs()}{required\_ul\_prbs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsrsran_1_1grant__prbs__mcs}{grant\+\_\+prbs\+\_\+mcs}} ue\+\_\+cell\+::required\+\_\+ul\+\_\+prbs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{structsrsran_1_1pusch__time__domain__resource__allocation}{pusch\+\_\+time\+\_\+domain\+\_\+resource\+\_\+allocation}} \&}]{pusch\+\_\+td\+\_\+cfg,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{pending\+\_\+bytes,  }\item[{\mbox{\hyperlink{namespacesrsran_a635cecd3b3b6716ab9f4b6043d603f9f}{dci\+\_\+ul\+\_\+rnti\+\_\+config\+\_\+type}}}]{dci\+\_\+type }\end{DoxyParamCaption}) const}



Estimate the number of required UL PRBs to allocate the given number of bytes. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00141\ \{}
\DoxyCodeLine{00142\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1bwp__uplink__common}{bwp\_uplink\_common}}\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bwp\_ul\_cmn}}\ =\ *ue\_cfg-\/>bwp(active\_bwp\_id()).ul\_common;}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \textcolor{comment}{//\ In\ the\ following,\ we\ allocate\ extra\ bits\ to\ account\ for\ the\ possible\ UCI\ overhead.\ At\ this\ point,\ we\ don't}}
\DoxyCodeLine{00145\ \ \ \textcolor{comment}{//\ differentiate\ between\ HARQ-\/ACK\ bits\ and\ CSI\ bits,\ which\ would\ be\ necessary\ to\ compute\ the\ beta-\/offset\ values.}}
\DoxyCodeLine{00146\ \ \ \textcolor{comment}{//\ Here,\ we\ only\ need\ to\ allocate\ some\ extra\ space.}}
\DoxyCodeLine{00147\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{uci\_bits\_overallocation}}\ =\ 20U;}
\DoxyCodeLine{00148\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_csi\_report\_slot}}\ \ \ \ \ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \mbox{\hyperlink{structsrsran_1_1pusch__config__params}{pusch\_config\_params}}\ pusch\_cfg;}
\DoxyCodeLine{00151\ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{dci\_type}})\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordflow}{case}\ dci\_ul\_rnti\_config\_type::tc\_rnti\_f0\_0:}
\DoxyCodeLine{00153\ \ \ \ \ \ \ pusch\_cfg\ =\ \mbox{\hyperlink{namespacesrsran_a188c8322d8c26fc620cee9cc2579d2a7}{get\_pusch\_config\_f0\_0\_tc\_rnti}}(cell\_cfg,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pusch\_td\_cfg}});}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordflow}{case}\ dci\_ul\_rnti\_config\_type::c\_rnti\_f0\_0:}
\DoxyCodeLine{00156\ \ \ \ \ \ \ pusch\_cfg\ =}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a1b99f8650ec705314f82f2cf2eea6794}{get\_pusch\_config\_f0\_0\_c\_rnti}}(*ue\_cfg,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bwp\_ul\_cmn}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pusch\_td\_cfg}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{uci\_bits\_overallocation}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_csi\_report\_slot}});}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordflow}{case}\ dci\_ul\_rnti\_config\_type::c\_rnti\_f0\_1:}
\DoxyCodeLine{00160\ \ \ \ \ \ \ pusch\_cfg\ =\ \mbox{\hyperlink{namespacesrsran_a79c60f1a36e31fb93f87c74488a9dfc4}{get\_pusch\_config\_f0\_1\_c\_rnti}}(}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ *ue\_cfg,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pusch\_td\_cfg}},\ channel\_state.\mbox{\hyperlink{classsrsran_1_1ue__channel__state__manager_abf82a4f102d9f9b559edb435cbbfeb43}{get\_nof\_ul\_layers}}(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{uci\_bits\_overallocation}},\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{is\_csi\_report\_slot}});}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a630688b51219f81c5a47ec5650326afc}{report\_fatal\_error}}(\textcolor{stringliteral}{"{}Unsupported\ PDCCH\ DCI\ UL\ format"{}});}
\DoxyCodeLine{00165\ \ \ \}}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \mbox{\hyperlink{classsrsran_1_1bounded__integer}{sch\_mcs\_index}}\ \ \ \ \ \ \ mcs\ \ \ \ \ \ \ \ =\ ue\_mcs\_calculator.\mbox{\hyperlink{classsrsran_1_1ue__link__adaptation__controller_a7343a4a0f00246cdab33e915e042be5b}{calculate\_ul\_mcs}}(pusch\_cfg.mcs\_table);}
\DoxyCodeLine{00168\ \ \ \mbox{\hyperlink{structsrsran_1_1sch__mcs__description}{sch\_mcs\_description}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_config}}\ =\ \mbox{\hyperlink{namespacesrsran_abb7d7407e3137b9568883568f71bd511}{pusch\_mcs\_get\_config}}(pusch\_cfg.mcs\_table,\ mcs,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ nof\_symbols\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pusch\_td\_cfg}}.symbols.length());}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \mbox{\hyperlink{structsrsran_1_1sch__prbs__tbs}{sch\_prbs\_tbs}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prbs\_tbs}}\ =\ \mbox{\hyperlink{namespacesrsran_a70b8a26545adce623448955edfe349c3}{get\_nof\_prbs}}(\mbox{\hyperlink{structsrsran_1_1prbs__calculator__sch__config}{prbs\_calculator\_sch\_config}}\{pending\_bytes,}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nof\_symbols,}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_ac5e3b371735e947bc78d6d8af579ef0d}{calculate\_nof\_dmrs\_per\_rb}}(pusch\_cfg.dmrs),}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pusch\_cfg.nof\_oh\_prb,}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{mcs\_config}},}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pusch\_cfg.nof\_layers\});}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \textcolor{keywordtype}{unsigned}\ nof\_prbs\ =\ std::min(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{prbs\_tbs}}.nof\_prbs,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{bwp\_ul\_cmn}}.generic\_params.crbs.length());}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \textcolor{comment}{//\ Apply\ grant\ size\ limits\ specified\ in\ the\ config.}}
\DoxyCodeLine{00182\ \ \ nof\_prbs\ =\ std::max(std::min(nof\_prbs,\ ue\_cfg-\/>\mbox{\hyperlink{classsrsran_1_1ue__cell__configuration_a2baf140cc6e889f3f37c8f7543b59500}{rrm\_cfg}}().\mbox{\hyperlink{structsrsran_1_1sched__ue__resource__alloc__config_ae64c449df31a278c33032ad4cb0c8753}{pusch\_grant\_size\_limits}}.stop()),}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ue\_cfg-\/>\mbox{\hyperlink{classsrsran_1_1ue__cell__configuration_a2baf140cc6e889f3f37c8f7543b59500}{rrm\_cfg}}().\mbox{\hyperlink{structsrsran_1_1sched__ue__resource__alloc__config_ae64c449df31a278c33032ad4cb0c8753}{pusch\_grant\_size\_limits}}.start());}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structsrsran_1_1grant__prbs__mcs}{grant\_prbs\_mcs}}\{mcs,\ nof\_prbs\};}
\DoxyCodeLine{00186\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_acfd4848ba8b3fb85b5c64218d7348cf9}\label{classsrsran_1_1ue__cell_acfd4848ba8b3fb85b5c64218d7348cf9} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!rnti@{rnti}}
\index{rnti@{rnti}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{rnti()}{rnti()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}} srsran\+::ue\+\_\+cell\+::rnti (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00063\ \{\ \textcolor{keywordflow}{return}\ crnti\_;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_a2d395040e0bbfb466c129a68cae7287d}\label{classsrsran_1_1ue__cell_a2d395040e0bbfb466c129a68cae7287d} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!set\_fallback\_state@{set\_fallback\_state}}
\index{set\_fallback\_state@{set\_fallback\_state}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{set\_fallback\_state()}{set\_fallback\_state()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ue\+\_\+cell\+::set\+\_\+fallback\+\_\+state (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classbool}{bool}}}]{fallback\+\_\+state\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Set UE fallback state. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00130\ \ \ \{}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fallback\_state\_}}\ !=\ is\_fallback\_mode)\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ logger.debug(\textcolor{stringliteral}{"{}ue=\{\}\ rnti=\{\}:\ \{\}\ fallback\ mode"{}},\ ue\_index,\ rnti(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fallback\_state\_}}\ ?\ \textcolor{stringliteral}{"{}Entering"{}}\ :\ \textcolor{stringliteral}{"{}Leaving"{}});}
\DoxyCodeLine{00133\ \ \ \ \ \}}
\DoxyCodeLine{00134\ \ \ \ \ is\_fallback\_mode\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fallback\_state\_}};}
\DoxyCodeLine{00135\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1ue__cell_aeb48158a7d9f9633166d508d5101a50f}\label{classsrsran_1_1ue__cell_aeb48158a7d9f9633166d508d5101a50f} 
\index{srsran::ue\_cell@{srsran::ue\_cell}!set\_pucch\_grid\_inited@{set\_pucch\_grid\_inited}}
\index{set\_pucch\_grid\_inited@{set\_pucch\_grid\_inited}!srsran::ue\_cell@{srsran::ue\_cell}}
\doxysubsubsection{\texorpdfstring{set\_pucch\_grid\_inited()}{set\_pucch\_grid\_inited()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::ue\+\_\+cell\+::set\+\_\+pucch\+\_\+grid\+\_\+inited (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00139\ \{\ is\_pucch\_alloc\_grid\_initialized\ =\ \textcolor{keyword}{true};\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/ue\+\_\+scheduling/ue\+\_\+cell.\+h\item 
lib/scheduler/ue\+\_\+scheduling/ue\+\_\+cell.\+cpp\end{DoxyCompactItemize}
