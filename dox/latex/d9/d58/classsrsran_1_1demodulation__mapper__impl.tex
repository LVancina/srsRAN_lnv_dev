\doxysection{srsran\+::demodulation\+\_\+mapper\+\_\+impl Class Reference}
\hypertarget{classsrsran_1_1demodulation__mapper__impl}{}\label{classsrsran_1_1demodulation__mapper__impl}\index{srsran::demodulation\_mapper\_impl@{srsran::demodulation\_mapper\_impl}}


Approximate-\/\+LLR demodulator.  




{\ttfamily \#include $<$demodulation\+\_\+mapper\+\_\+impl.\+h$>$}



Inheritance diagram for srsran\+::demodulation\+\_\+mapper\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d9/d64/classsrsran_1_1demodulation__mapper__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::demodulation\+\_\+mapper\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d1/d89/classsrsran_1_1demodulation__mapper__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1demodulation__mapper__impl_a41fe683ab1a2139de42ddb8e776aa866}{demodulate\+\_\+soft}} (\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1log__likelihood__ratio}{log\+\_\+likelihood\+\_\+ratio}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{llrs}}, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$ symbols, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classfloat}{float}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{noise\+\_\+vars}}, \mbox{\hyperlink{namespacesrsran_a7d1f3285d6ba6d2621f9d919681802df}{modulation\+\_\+scheme}} mod) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{override}}
\begin{DoxyCompactList}\small\item\em Soft demodulation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classsrsran_1_1demodulation__mapper}{srsran\+::demodulation\+\_\+mapper}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{virtual}} {\bfseries \texorpdfstring{$\sim$}{\string~}demodulation\+\_\+mapper} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Approximate-\/\+LLR demodulator. 

Implementation of the interface provided by \doxylink{classsrsran_1_1demodulation__mapper}{demodulation\+\_\+mapper}. Instead of the defining expression, the log-\/likelihood ratios are computed using the widely accepted approximation  \[
\ell(b_{m+i}) = -\frac{1}{\sigma_m^2} \biggl( \min_{s\in \mathcal{S}_{i,0}} \abs{y_m - s}^2
              - \min_{s\in \mathcal{S}_{i,1}} \abs{y_m - s}^2 \biggr)
\] where $y_m$ denotes the noisy modulation symbol, $\sigma_m^2$ is the equivalent (after equalization) noise variance and $\mathcal{S}_{i,B}$ is the set of constellation points for which $b_{m+i}=B\in\{0,1\}$. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1demodulation__mapper__impl_a41fe683ab1a2139de42ddb8e776aa866}\label{classsrsran_1_1demodulation__mapper__impl_a41fe683ab1a2139de42ddb8e776aa866} 
\index{srsran::demodulation\_mapper\_impl@{srsran::demodulation\_mapper\_impl}!demodulate\_soft@{demodulate\_soft}}
\index{demodulate\_soft@{demodulate\_soft}!srsran::demodulation\_mapper\_impl@{srsran::demodulation\_mapper\_impl}}
\doxysubsubsection{\texorpdfstring{demodulate\_soft()}{demodulate\_soft()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} demodulation\+\_\+mapper\+\_\+impl\+::demodulate\+\_\+soft (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{classsrsran_1_1log__likelihood__ratio}{log\+\_\+likelihood\+\_\+ratio}} $>$}]{llrs,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_adb0c7723c7e69c78add18ca453dd1dbc}{cf\+\_\+t}} $>$}]{symbols,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classfloat}{float}} $>$}]{noise\+\_\+vars,  }\item[{\mbox{\hyperlink{namespacesrsran_a7d1f3285d6ba6d2621f9d919681802df}{modulation\+\_\+scheme}}}]{mod }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Soft demodulation. 

Demodulates complex symbols into log-\/likelihood ratios (i.\+e., soft bits). 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em llrs} & Demodulated log-\/likelihood ratios. \\
\hline
\mbox{\texttt{ in}}  & {\em symbols} & Complex symbols to demodulate (equalization output). \\
\hline
\mbox{\texttt{ in}}  & {\em noise\+\_\+vars} & Noise variances (after equalization). \\
\hline
\mbox{\texttt{ in}}  & {\em mod} & Modulation scheme. \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
Parameters {\ttfamily symbols} and {\ttfamily noise\+\_\+vars} must have the same length. Each entry of {\ttfamily noise\+\_\+vars} contains the (estimated) noise variance after equalization corresponding to the symbol with the same index. 

The length of {\ttfamily llrs} is given by the number of symbols multiplied by the modulation order of {\ttfamily mod}. 

Any operation involving ill-\/formed inputs (NaN, infinity or negative noise variances, as well as Na\+N-\/valued symbols or infinity-\/over-\/infinity divisions) will result in an indeterminate, zero-\/valued log-\/ likelihood ratio. 
\end{DoxyRemark}


Implements \mbox{\hyperlink{classsrsran_1_1demodulation__mapper_aa2e3976142cb103cbdf3e8edbecbaffd}{srsran\+::demodulation\+\_\+mapper}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00080\ \{}
\DoxyCodeLine{00081\ \ \ srsran\_assert(symbols.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}()\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{noise\_vars}}.size(),\ \textcolor{stringliteral}{"{}Inputs\ symbols\ and\ noise\_vars\ must\ have\ the\ same\ length."{}});}
\DoxyCodeLine{00082\ \ \ srsran\_assert(symbols.\mbox{\hyperlink{classsrsran_1_1span_ad0e376d95ca916144eac76f27f0654ac}{size}}()\ *\ \mbox{\hyperlink{namespacesrsran_af78ee928d6d8a3d8ff6bbc753f50c44e}{get\_bits\_per\_symbol}}(mod)\ ==\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{llrs}}.size(),\ \textcolor{stringliteral}{"{}Input\ and\ output\ lengths\ are\ incompatible."{}});}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{keywordflow}{switch}\ (mod)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesrsran_a7d1f3285d6ba6d2621f9d919681802dfacfd8f331d281b0da79e7c6ed6988243c}{modulation\_scheme::BPSK}}:}
\DoxyCodeLine{00086\ \ \ \ \ \ \ demodulate\_soft\_BPSK(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{llrs}},\ symbols,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{noise\_vars}});}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesrsran_a7d1f3285d6ba6d2621f9d919681802dfa68b5dd822c6ef8ad44f98f56dfbe016e}{modulation\_scheme::PI\_2\_BPSK}}:}
\DoxyCodeLine{00089\ \ \ \ \ \ \ demodulate\_soft\_PI\_2\_BPSK(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{llrs}},\ symbols,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{noise\_vars}});}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesrsran_a7d1f3285d6ba6d2621f9d919681802dfa4539d029e1781f9347b6d7d173c04a6a}{modulation\_scheme::QPSK}}:}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a9a76d58834331210e13427464239a2db}{demodulate\_soft\_QPSK}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{llrs}},\ symbols,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{noise\_vars}});}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesrsran_a7d1f3285d6ba6d2621f9d919681802dfa03029a441fe46ebecd2135ba5d8b330f}{modulation\_scheme::QAM16}}:}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_ad9e015d8aa1cb6c658b7d5d311d22b49}{demodulate\_soft\_QAM16}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{llrs}},\ symbols,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{noise\_vars}});}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesrsran_a7d1f3285d6ba6d2621f9d919681802dfa5e0dd7cb58cf81fd6bed561c7e4b351b}{modulation\_scheme::QAM64}}:}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_ab6f81be63da4ae38cc0188d76a9bfd7d}{demodulate\_soft\_QAM64}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{llrs}},\ symbols,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{noise\_vars}});}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesrsran_a7d1f3285d6ba6d2621f9d919681802dfa69a2bdd96ac2c6035d0c8ca23563aec9}{modulation\_scheme::QAM256}}:}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_ab005a54058448b727b84e728a257431c}{demodulate\_soft\_QAM256}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{llrs}},\ symbols,\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{noise\_vars}});}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00104\ \ \ \ \ \ \ srsran\_assertion\_failure(\textcolor{stringliteral}{"{}Invalid\ modulation\ scheme."{}});}
\DoxyCodeLine{00105\ \ \ \}}
\DoxyCodeLine{00106\ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lib/phy/upper/channel\+\_\+modulation/\mbox{\hyperlink{demodulation__mapper__impl_8h}{demodulation\+\_\+mapper\+\_\+impl.\+h}}\item 
lib/phy/upper/channel\+\_\+modulation/demodulation\+\_\+mapper\+\_\+impl.\+cpp\end{DoxyCompactItemize}
