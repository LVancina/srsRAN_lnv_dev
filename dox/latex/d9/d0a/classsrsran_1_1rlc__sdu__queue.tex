\doxysection{srsran\+::rlc\+\_\+sdu\+\_\+queue Class Reference}
\hypertarget{classsrsran_1_1rlc__sdu__queue}{}\label{classsrsran_1_1rlc__sdu__queue}\index{srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}}


{\ttfamily \#include $<$rlc\+\_\+sdu\+\_\+queue.\+h$>$}



Collaboration diagram for srsran\+::rlc\+\_\+sdu\+\_\+queue\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=196pt]{db/d93/classsrsran_1_1rlc__sdu__queue__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1rlc__sdu__queue_a3eadef99e078433e2cd85f3a77fbf13a}{rlc\+\_\+sdu\+\_\+queue}} (uint16\+\_\+t capacity\+\_\+=4096)
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rlc__sdu__queue_af44a193f92b6cb8925b96cd179109924}{write}} (\mbox{\hyperlink{structsrsran_1_1rlc__sdu}{rlc\+\_\+sdu}} sdu)
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rlc__sdu__queue_a2e63b3205a14f4fa1bf00b0a4939374c}{read}} (\mbox{\hyperlink{structsrsran_1_1rlc__sdu}{rlc\+\_\+sdu}} \&sdu)
\item 
\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1rlc__sdu__queue_a81fcbc3c0b3bd602b91c45ee1a094384}{size\+\_\+sdus}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} \mbox{\hyperlink{classsrsran_1_1rlc__sdu__queue_ac977c96636624b0fdbe536439d787224}{size\+\_\+bytes}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rlc__sdu__queue_a79c4e3e3e37483715bc4e642cd62023d}{front\+\_\+size\+\_\+bytes}} (\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} \&size)
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rlc__sdu__queue_ac7201287a0d7631b8415313e472a1764}{is\+\_\+empty}} ()
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rlc__sdu__queue_aff7f415bc4af50a1e9abf9d9bf3b54ba}{is\+\_\+full}} ()
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rlc__sdu__queue_ac3c2de256ffb375e9d971a9b79500a44}{discard}} (\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} pdcp\+\_\+sn)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This class will hold RLC SDUs from upper layers. It provides methods for thread-\/safe read/writing of SDUs and discarding SDUs, if requested by the higher layers. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1rlc__sdu__queue_a3eadef99e078433e2cd85f3a77fbf13a}\label{classsrsran_1_1rlc__sdu__queue_a3eadef99e078433e2cd85f3a77fbf13a} 
\index{srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}!rlc\_sdu\_queue@{rlc\_sdu\_queue}}
\index{rlc\_sdu\_queue@{rlc\_sdu\_queue}!srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}}
\doxysubsubsection{\texorpdfstring{rlc\_sdu\_queue()}{rlc\_sdu\_queue()}}
{\footnotesize\ttfamily srsran\+::rlc\+\_\+sdu\+\_\+queue\+::rlc\+\_\+sdu\+\_\+queue (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{capacity\+\_\+ = {\ttfamily 4096} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00041\ \ \ \ \ capacity(capacity\_),\ queue(capacity\_,\ push\_callback(unread\_bytes,\ n\_sdus),\ pop\_callback(unread\_bytes,\ n\_sdus))}
\DoxyCodeLine{00042\ \ \ \{}
\DoxyCodeLine{00043\ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1rlc__sdu__queue_ac3c2de256ffb375e9d971a9b79500a44}\label{classsrsran_1_1rlc__sdu__queue_ac3c2de256ffb375e9d971a9b79500a44} 
\index{srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}!discard@{discard}}
\index{discard@{discard}!srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}}
\doxysubsubsection{\texorpdfstring{discard()}{discard()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::rlc\+\_\+sdu\+\_\+queue\+::discard (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}}}]{pdcp\+\_\+sn }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00082\ \ \ \{}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{discarded}}\ =\ queue.apply\_first([\&pdcp\_sn,\ \textcolor{keyword}{this}](rlc\_sdu\&\ sdu)\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!sdu.buf.empty()\ \&\&\ sdu.pdcp\_sn\ ==\ pdcp\_sn)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ queue.pop\_func(sdu);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ sdu.buf.clear();}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ return\ true;}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00090\ \ \ \ \ \});}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{discarded}};}
\DoxyCodeLine{00092\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__sdu__queue_a79c4e3e3e37483715bc4e642cd62023d}\label{classsrsran_1_1rlc__sdu__queue_a79c4e3e3e37483715bc4e642cd62023d} 
\index{srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}!front\_size\_bytes@{front\_size\_bytes}}
\index{front\_size\_bytes@{front\_size\_bytes}!srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}}
\doxysubsubsection{\texorpdfstring{front\_size\_bytes()}{front\_size\_bytes()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::rlc\+\_\+sdu\+\_\+queue\+::front\+\_\+size\+\_\+bytes (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} \&}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00072\ \ \ \{}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{return}\ queue.try\_call\_on\_front([\&size](\textcolor{keyword}{const}\ rlc\_sdu\&\ sdu)\ \{\ size\ =\ sdu.buf.length();\ \});}
\DoxyCodeLine{00074\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__sdu__queue_ac7201287a0d7631b8415313e472a1764}\label{classsrsran_1_1rlc__sdu__queue_ac7201287a0d7631b8415313e472a1764} 
\index{srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}!is\_empty@{is\_empty}}
\index{is\_empty@{is\_empty}!srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}}
\doxysubsubsection{\texorpdfstring{is\_empty()}{is\_empty()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::rlc\+\_\+sdu\+\_\+queue\+::is\+\_\+empty (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00076\ \{\ \textcolor{keywordflow}{return}\ queue.empty();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__sdu__queue_aff7f415bc4af50a1e9abf9d9bf3b54ba}\label{classsrsran_1_1rlc__sdu__queue_aff7f415bc4af50a1e9abf9d9bf3b54ba} 
\index{srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}!is\_full@{is\_full}}
\index{is\_full@{is\_full}!srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}}
\doxysubsubsection{\texorpdfstring{is\_full()}{is\_full()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::rlc\+\_\+sdu\+\_\+queue\+::is\+\_\+full (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00078\ \{\ \textcolor{keywordflow}{return}\ queue.size()\ >=\ capacity;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__sdu__queue_a2e63b3205a14f4fa1bf00b0a4939374c}\label{classsrsran_1_1rlc__sdu__queue_a2e63b3205a14f4fa1bf00b0a4939374c} 
\index{srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}!read@{read}}
\index{read@{read}!srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::rlc\+\_\+sdu\+\_\+queue\+::read (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1rlc__sdu}{rlc\+\_\+sdu}} \&}]{sdu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00055\ \ \ \{}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{//\ The\ SDU\ byte\_buffer\ might\ be\ empty,\ due\ to\ having\ been\ discarded.}}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ We\ try\ to\ read\ the\ next\ one\ if\ that\ is\ the\ case.}}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{optional<rlc\_sdu>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{popped\_elem}}\ =}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ queue.pop\_and\_discard\_until([](\textcolor{keyword}{const}\ rlc\_sdu\&\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{elem}})\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{not}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{elem}}.buf.empty();\ \});}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{popped\_elem}}.has\_value())\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ sdu\ =\ std::move(*\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{popped\_elem}});}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00065\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__sdu__queue_ac977c96636624b0fdbe536439d787224}\label{classsrsran_1_1rlc__sdu__queue_ac977c96636624b0fdbe536439d787224} 
\index{srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}!size\_bytes@{size\_bytes}}
\index{size\_bytes@{size\_bytes}!srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}}
\doxysubsubsection{\texorpdfstring{size\_bytes()}{size\_bytes()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} srsran\+::rlc\+\_\+sdu\+\_\+queue\+::size\+\_\+bytes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00069\ \{\ \textcolor{keywordflow}{return}\ unread\_bytes;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__sdu__queue_a81fcbc3c0b3bd602b91c45ee1a094384}\label{classsrsran_1_1rlc__sdu__queue_a81fcbc3c0b3bd602b91c45ee1a094384} 
\index{srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}!size\_sdus@{size\_sdus}}
\index{size\_sdus@{size\_sdus}!srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}}
\doxysubsubsection{\texorpdfstring{size\_sdus()}{size\_sdus()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} srsran\+::rlc\+\_\+sdu\+\_\+queue\+::size\+\_\+sdus (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00067\ \{\ \textcolor{keywordflow}{return}\ n\_sdus;\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rlc__sdu__queue_af44a193f92b6cb8925b96cd179109924}\label{classsrsran_1_1rlc__sdu__queue_af44a193f92b6cb8925b96cd179109924} 
\index{srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}!write@{write}}
\index{write@{write}!srsran::rlc\_sdu\_queue@{srsran::rlc\_sdu\_queue}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::rlc\+\_\+sdu\+\_\+queue\+::write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1rlc__sdu}{rlc\+\_\+sdu}}}]{sdu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00046\ \ \ \{}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordflow}{if}\ (queue.size()\ >=\ capacity)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00049\ \ \ \ \ \}}
\DoxyCodeLine{00050\ \ \ \ \ queue.push\_blocking(std::move(sdu));}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00052\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/rlc/rlc\+\_\+sdu\+\_\+queue.\+h\end{DoxyCompactItemize}
