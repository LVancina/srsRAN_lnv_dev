\doxysection{srsran\+::rb\+\_\+allocation Class Reference}
\hypertarget{classsrsran_1_1rb__allocation}{}\label{classsrsran_1_1rb__allocation}\index{srsran::rb\_allocation@{srsran::rb\_allocation}}


Describes the frequency allocation for PDSCH and PUSCH transmissions.  




{\ttfamily \#include $<$rb\+\_\+allocation.\+h$>$}



Collaboration diagram for srsran\+::rb\+\_\+allocation\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=190pt]{d7/d20/classsrsran_1_1rb__allocation__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1rb__allocation_afc67b968fd627acaf5b6121aab0c84c3}{rb\+\_\+allocation}} ()=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{default}}
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rb__allocation_a0aaf27d8deb6f93f0458ebef2dadb4dc}{operator==}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\+\_\+allocation}} \&\mbox{\hyperlink{namespacesrsran_aaf684a2cfa98b7f333de7041525a5b29a795f3202b17cb6bc3d4b771d8c6c9eaf}{other}}) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Compares two frequency domain allocations. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rb__allocation_a371f2f118ca976f0a2958c7f6d4baf0e}{is\+\_\+contiguous}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Determines if resultant VRB-\/to-\/\+PRB allocation is contiguous in frequency domain. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1rb__allocation_a1f8e75c73e734a72c89d6f4052102a98}{get\+\_\+prb\+\_\+begin}} (\mbox{\hyperlink{classunsigned}{unsigned}} bwp\+\_\+start\+\_\+rb) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Gets the lowest allocated PRB index. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1rb__allocation_a82e6e188111c58827be610671fe3fb93}{get\+\_\+prb\+\_\+end}} (\mbox{\hyperlink{classunsigned}{unsigned}} bwp\+\_\+start\+\_\+rb) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Gets the highest allocated PRB index plus one. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{classsrsran_1_1rb__allocation_ae60e2f7d4e1def8e22e8092f6ecde649}{get\+\_\+nof\+\_\+rb}} () \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Gets the number of allocated VRB. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classsrsran_1_1rb__allocation_aff159e20220d4f65d552a24fbf6bf651}{is\+\_\+bwp\+\_\+valid}} (\mbox{\hyperlink{classunsigned}{unsigned}} bwp\+\_\+start\+\_\+rb, \mbox{\hyperlink{classunsigned}{unsigned}} bwp\+\_\+size\+\_\+rb) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Determines whether the resource block allocation is valid for a given bandwidth part. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1bounded__bitset}{bounded\+\_\+bitset}}$<$ MAX\+\_\+\+RB $>$ \mbox{\hyperlink{classsrsran_1_1rb__allocation_a4742e3a79eea3d38e3aaba7d17301ac4}{get\+\_\+prb\+\_\+mask}} (\mbox{\hyperlink{classunsigned}{unsigned}} bwp\+\_\+start\+\_\+rb, \mbox{\hyperlink{classunsigned}{unsigned}} bwp\+\_\+size\+\_\+rb) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Generates the PRB allocation mask for the frequency domain allocation. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ uint16\+\_\+t, MAX\+\_\+\+RB $>$ \mbox{\hyperlink{classsrsran_1_1rb__allocation_a9e9c90b67ebb0b15838289d73ce6475c}{get\+\_\+prb\+\_\+indices}} (\mbox{\hyperlink{classunsigned}{unsigned}} bwp\+\_\+start\+\_\+rb, \mbox{\hyperlink{classunsigned}{unsigned}} bwp\+\_\+size\+\_\+rb) \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}}
\begin{DoxyCompactList}\small\item\em Generates the PRB allocation indexes for the frequency domain allocation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\+\_\+allocation}} \mbox{\hyperlink{classsrsran_1_1rb__allocation_a19d5a57bcce401e95415548136018855}{make\+\_\+type0}} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{bounded\+\_\+bitset}}$<$ MAX\+\_\+\+RB $>$ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\+\_\+bitmap}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper}{vrb\+\_\+to\+\_\+prb\+\_\+mapper}} $>$ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\+\_\+to\+\_\+prb\+\_\+map\+\_\+}}=\{\})
\begin{DoxyCompactList}\small\item\em Creates a Type 0 RB allocation object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\+\_\+allocation}} \mbox{\hyperlink{classsrsran_1_1rb__allocation_a2c1861747820537bc3e81b2ac9b03d96}{make\+\_\+type1}} (\mbox{\hyperlink{classunsigned}{unsigned}} rb\+\_\+start, \mbox{\hyperlink{classunsigned}{unsigned}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rb\+\_\+count}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper}{vrb\+\_\+to\+\_\+prb\+\_\+mapper}} $>$ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\+\_\+to\+\_\+prb\+\_\+map\+\_\+}}=\{\})
\begin{DoxyCompactList}\small\item\em Creates a Type 1 RB allocation object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{static}} \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\+\_\+allocation}} \mbox{\hyperlink{classsrsran_1_1rb__allocation_ae1078c9f5cc61e34f72ae1bb518da6d0}{make\+\_\+custom}} (std\+::initializer\+\_\+list$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classunsigned}{unsigned}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\+\_\+indexes}}, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper}{vrb\+\_\+to\+\_\+prb\+\_\+mapper}} $>$ \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\+\_\+to\+\_\+prb\+\_\+map\+\_\+}}=\{\})
\begin{DoxyCompactList}\small\item\em Creates a custom allocation object using a list of VRB indexes. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Describes the frequency allocation for PDSCH and PUSCH transmissions. 

The frequency allocation is defined at VRB level and it can be of type 0, type 1 or custom. Frequency allocation Types 0 and 1 are described in TS38.\+214 Section 5.\+1.\+2.\+2 for PDSCH and Section 6.\+1.\+2.\+2 for PUSCH.

The VRB allocation is made using one of the maker methods\+:
\begin{DoxyItemize}
\item \doxylink{classsrsran_1_1rb__allocation_a19d5a57bcce401e95415548136018855}{make\+\_\+type0()} for making a type0 allocation,
\item \doxylink{classsrsran_1_1rb__allocation_a2c1861747820537bc3e81b2ac9b03d96}{make\+\_\+type1()} for making a type1 allocation, or
\item \doxylink{classsrsran_1_1rb__allocation_ae1078c9f5cc61e34f72ae1bb518da6d0}{make\+\_\+custom()} for making a custom allocation.
\end{DoxyItemize}

Each of the makers optionally take a VRB-\/to-\/\+PRB mapper for PDSCH transmissions. If the VRB-\/to-\/\+PRB mapper is not provided, the VRB-\/to-\/\+PRB is defaulted. The default VRB-\/to-\/\+PRB mapper corresponds to non-\/interleaved and to a PDSCH transmission is not scheduled in a common SS.

\begin{DoxySeeAlso}{See also}
\doxylink{classsrsran_1_1vrb__to__prb__mapper}{vrb\+\_\+to\+\_\+prb\+\_\+mapper} \doxylink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{for} more \doxylink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{information} \doxylink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{regarding} \doxylink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{the} VRB-\/to-\/\+PRB mapping \doxylink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{for} PDSCH.
\end{DoxySeeAlso}
\begin{DoxyRemark}{Remarks}

\begin{DoxyItemize}
\item The default constructor \doxylink{classsrsran_1_1rb__allocation_afc67b968fd627acaf5b6121aab0c84c3}{rb\+\_\+allocation()} does not allocate any VRB.
\item Use \doxylink{classsrsran_1_1rb__allocation_a371f2f118ca976f0a2958c7f6d4baf0e}{is\+\_\+contiguous()} to determine whether the resultant allocation on the resource grid is contiguous.
\item Use \doxylink{classsrsran_1_1rb__allocation_a9e9c90b67ebb0b15838289d73ce6475c}{get\+\_\+prb\+\_\+indices()} to generate the list of PRB indices.
\item If the resultant physical allocation is contiguous, the methods \doxylink{classsrsran_1_1rb__allocation_a1f8e75c73e734a72c89d6f4052102a98}{get\+\_\+prb\+\_\+begin()} and \doxylink{classsrsran_1_1rb__allocation_a82e6e188111c58827be610671fe3fb93}{get\+\_\+prb\+\_\+end()} can be used to determine the first and last PRB indices without requiring to generate a list of PRB indices.
\item Independently of the allocation type and VRB-\/to-\/\+PRB mapping, the method \doxylink{classsrsran_1_1rb__allocation_a4742e3a79eea3d38e3aaba7d17301ac4}{get\+\_\+prb\+\_\+mask()} generates a mask indicating the PRB used for the transmission. 
\end{DoxyItemize}
\end{DoxyRemark}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1rb__allocation_afc67b968fd627acaf5b6121aab0c84c3}\label{classsrsran_1_1rb__allocation_afc67b968fd627acaf5b6121aab0c84c3} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!rb\_allocation@{rb\_allocation}}
\index{rb\_allocation@{rb\_allocation}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{rb\_allocation()}{rb\_allocation()}}
{\footnotesize\ttfamily srsran\+::rb\+\_\+allocation\+::rb\+\_\+allocation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



Default constructor. 

It constructs an empty allocation with default VRB-\/to-\/\+PRB mapping. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1rb__allocation_ae60e2f7d4e1def8e22e8092f6ecde649}\label{classsrsran_1_1rb__allocation_ae60e2f7d4e1def8e22e8092f6ecde649} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!get\_nof\_rb@{get\_nof\_rb}}
\index{get\_nof\_rb@{get\_nof\_rb}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{get\_nof\_rb()}{get\_nof\_rb()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::rb\+\_\+allocation\+::get\+\_\+nof\+\_\+rb (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Gets the number of allocated VRB. 


\begin{DoxyCode}{0}
\DoxyCodeLine{00163\ \{\ \textcolor{keywordflow}{return}\ vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a69381df20e59db2de0af0ed8085ac955}{count}}();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rb__allocation_a1f8e75c73e734a72c89d6f4052102a98}\label{classsrsran_1_1rb__allocation_a1f8e75c73e734a72c89d6f4052102a98} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!get\_prb\_begin@{get\_prb\_begin}}
\index{get\_prb\_begin@{get\_prb\_begin}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{get\_prb\_begin()}{get\_prb\_begin()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::rb\+\_\+allocation\+::get\+\_\+prb\+\_\+begin (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{bwp\+\_\+start\+\_\+rb }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Gets the lowest allocated PRB index. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em bwp\+\_\+start\+\_\+rb} & Indicates the BWP lowest PRB index relative to CRB0. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A PRB index relative to CRB0 (PointA) if there are active VRB. Otherwise, zero. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00140\ \ \ \{}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{first\_vrb}}\ =\ vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_aa2de3a0528dbe3ab78a6c764bef1eb0f}{find\_lowest}}(0,\ vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a0409da263eb1ccdc8cb491aac2a43bda}{size}}());}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{first\_vrb}}\ ==\ -\/1)\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00144\ \ \ \ \ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{first\_vrb}})\ +\ bwp\_start\_rb\ +\ vrb\_to\_prb\_map.\mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper_a02d89a247ca59d6b263bc36950cb5b8a}{get\_coreset\_start}}();}
\DoxyCodeLine{00147\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rb__allocation_a82e6e188111c58827be610671fe3fb93}\label{classsrsran_1_1rb__allocation_a82e6e188111c58827be610671fe3fb93} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!get\_prb\_end@{get\_prb\_end}}
\index{get\_prb\_end@{get\_prb\_end}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{get\_prb\_end()}{get\_prb\_end()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classunsigned}{unsigned}} srsran\+::rb\+\_\+allocation\+::get\+\_\+prb\+\_\+end (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{bwp\+\_\+start\+\_\+rb }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Gets the highest allocated PRB index plus one. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em bwp\+\_\+start\+\_\+rb} & Indicates the BWP lowest PRB index relative to CRB0. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A non-\/zero PRB index relative to CRB0 (PointA) if there are active VRB. Otherwise, zero. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00153\ \ \ \{}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{last\_vrb}}\ =\ vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a4113d614afd53f3e204dce4ec89963b9}{find\_highest}}(0,\ vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a0409da263eb1ccdc8cb491aac2a43bda}{size}}());}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{last\_vrb}}\ ==\ -\/1)\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00157\ \ \ \ \ \}}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{last\_vrb}}\ +\ 1)\ +\ bwp\_start\_rb\ +\ vrb\_to\_prb\_map.\mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper_a02d89a247ca59d6b263bc36950cb5b8a}{get\_coreset\_start}}();}
\DoxyCodeLine{00160\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rb__allocation_a9e9c90b67ebb0b15838289d73ce6475c}\label{classsrsran_1_1rb__allocation_a9e9c90b67ebb0b15838289d73ce6475c} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!get\_prb\_indices@{get\_prb\_indices}}
\index{get\_prb\_indices@{get\_prb\_indices}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{get\_prb\_indices()}{get\_prb\_indices()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1static__vector}{static\+\_\+vector}}$<$ uint16\+\_\+t, MAX\+\_\+\+RB $>$ rb\+\_\+allocation\+::get\+\_\+prb\+\_\+indices (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{bwp\+\_\+start\+\_\+rb,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{bwp\+\_\+size\+\_\+rb }\end{DoxyParamCaption}) const}



Generates the PRB allocation indexes for the frequency domain allocation. 

Calculates the PRB allocation indexes considering the BWP frequency allocation, the VRB mask and the VRB-\/to-\/\+PRB mapping.

The resultant indices are represented in a {\ttfamily static\+\_\+vector$<$uint16\+\_\+t,\+MAX\+\_\+\+RB$>$} of size $N_{BWP,i}^{start}+N_{BWP,i}^{size}$. The indices are relative to CRB0 (PointA) and they are indexed in VRB increasing order. In other words, the first index indicates the PRB index of the lowest active VRB. Correspondingly, the last index corresponds to the highest active VRB.

This method is intended for non-\/contiguous and/or interleaved allocation. For contiguous non-\/interleaved transmission use {\ttfamily \doxylink{classsrsran_1_1rb__allocation_a1f8e75c73e734a72c89d6f4052102a98}{get\+\_\+prb\+\_\+begin()}} and {\ttfamily \doxylink{classsrsran_1_1rb__allocation_a82e6e188111c58827be610671fe3fb93}{get\+\_\+prb\+\_\+end()}}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em bwp\+\_\+start\+\_\+rb} & Indicates the BWP lowest PRB index relative to CRB0 (PointA) as $N_{BWP,i}^{start}$. \\
\hline
\mbox{\texttt{ in}}  & {\em bwp\+\_\+size\+\_\+rb} & Indicates the BWP size in PRB as $N_{BWP,i}^{size}$. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The resultant PRB allocation indices represented as a static vector. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00141\ \{}
\DoxyCodeLine{00142\ \ \ srsran\_assert(\mbox{\hyperlink{classsrsran_1_1rb__allocation_aff159e20220d4f65d552a24fbf6bf651}{is\_bwp\_valid}}(bwp\_start\_rb,\ bwp\_size\_rb),}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ BWP\ configuration\ \{\}:\{\}\ for\ a\ VRB\ mask\ of\ size\ \{\}."{}},}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bwp\_start\_rb,}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bwp\_size\_rb,}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a0409da263eb1ccdc8cb491aac2a43bda}{size}}());}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \mbox{\hyperlink{classsrsran_1_1static__vector}{static\_vector<uint16\_t,\ MAX\_RB>}}\ result;}
\DoxyCodeLine{00149\ \ \ \mbox{\hyperlink{classsrsran_1_1static__vector}{static\_vector<uint16\_t,\ MAX\_RB>}}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_to\_prb\_indices}}\ =\ vrb\_to\_prb\_map.\mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper_aac8db67cffbf371950907e01628291fc}{get\_allocation\_indices}}(bwp\_size\_rb);}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_index}}\ =\ 0;\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_index}}\ !=\ vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a0409da263eb1ccdc8cb491aac2a43bda}{size}}();\ ++\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_index}})\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{comment}{//\ Skip\ unused\ VRB}}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordflow}{if}\ (vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a53b1498a7820972edb5b9c8db2fc94db}{test}}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_index}}))\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ result.push\_back(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_to\_prb\_indices}}[\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_index}}]);}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00159\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rb__allocation_a4742e3a79eea3d38e3aaba7d17301ac4}\label{classsrsran_1_1rb__allocation_a4742e3a79eea3d38e3aaba7d17301ac4} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!get\_prb\_mask@{get\_prb\_mask}}
\index{get\_prb\_mask@{get\_prb\_mask}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{get\_prb\_mask()}{get\_prb\_mask()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{bounded\+\_\+bitset}}$<$ MAX\+\_\+\+RB $>$ rb\+\_\+allocation\+::get\+\_\+prb\+\_\+mask (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{bwp\+\_\+start\+\_\+rb,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{bwp\+\_\+size\+\_\+rb }\end{DoxyParamCaption}) const}



Generates the PRB allocation mask for the frequency domain allocation. 

Calculates the PRB allocation mask considering the BWP frequency allocation, the VRB mask and the VRB-\/to-\/\+PRB mapping.

The resultant mask is represented in a {\ttfamily \doxylink{classsrsran_1_1bounded__bitset}{bounded\+\_\+bitset$<$\+MAX\+\_\+\+RB$>$}} of size $N_{BWP,i}^{start}+N_{BWP,i}^{size}$ in which every set bit represents an active PRB. The first bit of the mask belongs to CRB0 (PointA).


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em bwp\+\_\+start\+\_\+rb} & Indicates the BWP lowest PRB index relative to CRB0 (PointA) as $N_{BWP,i}^{start}$. \\
\hline
\mbox{\texttt{ in}}  & {\em bwp\+\_\+size\+\_\+rb} & Indicates the BWP size in PRB as $N_{BWP,i}^{size}$. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The PRB allocation mask represented as a bounded bitset. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00126\ \{}
\DoxyCodeLine{00127\ \ \ srsran\_assert(\mbox{\hyperlink{classsrsran_1_1rb__allocation_aff159e20220d4f65d552a24fbf6bf651}{is\_bwp\_valid}}(bwp\_start\_rb,\ bwp\_size\_rb),}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ BWP\ configuration\ \{\}:\{\}\ for\ a\ VRB\ mask\ of\ size\ \{\}."{}},}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bwp\_start\_rb,}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bwp\_size\_rb,}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a0409da263eb1ccdc8cb491aac2a43bda}{size}}());}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \textcolor{keywordflow}{if}\ (vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a6063ce8435cbbc14fb1344e49ac3becf}{is\_contiguous}}()\ \&\&\ !vrb\_to\_prb\_map.\mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper_ae45061a694614cb1fe59eff1d5399aff}{is\_interleaved}}())\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_contiguous\_prb\_mask(bwp\_start\_rb,\ bwp\_size\_rb);}
\DoxyCodeLine{00135\ \ \ \}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \textcolor{keywordflow}{return}\ get\_other\_prb\_mask(bwp\_start\_rb,\ bwp\_size\_rb);}
\DoxyCodeLine{00138\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rb__allocation_aff159e20220d4f65d552a24fbf6bf651}\label{classsrsran_1_1rb__allocation_aff159e20220d4f65d552a24fbf6bf651} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!is\_bwp\_valid@{is\_bwp\_valid}}
\index{is\_bwp\_valid@{is\_bwp\_valid}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{is\_bwp\_valid()}{is\_bwp\_valid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::rb\+\_\+allocation\+::is\+\_\+bwp\+\_\+valid (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{bwp\+\_\+start\+\_\+rb,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{bwp\+\_\+size\+\_\+rb }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Determines whether the resource block allocation is valid for a given bandwidth part. 

The resource block allocation combined with the BWP parameters are valid if\+:
\begin{DoxyItemize}
\item the sum of the BWP start and size does not exceed MAX\+\_\+\+RB; and
\item the size of the virtual resource block allocation does not exceed the size of the available physical resources.
\end{DoxyItemize}

For PDSCH transmissions scheduled by DCI in a common SS, the PRBs used for VRB to PRB mapping start from the lowest numbered resource block in the CORESET. For all other allocations, the available physical resources for VRB to PRB mapping comprise the entire BWP size.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em bwp\+\_\+start\+\_\+rb} & Lowest PRB index of the BWP relative to CRB0 (PointA), i.\+e. $N_{BWP,i}^{start}$. \\
\hline
\mbox{\texttt{ in}}  & {\em bwp\+\_\+size\+\_\+rb} & BWP size in PRB, i.\+e. $N_{BWP,i}^{size}$. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the combination of BWP and resource block is valid, false otherwise. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00179\ \ \ \{}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordflow}{return}\ ((bwp\_start\_rb\ +\ bwp\_size\_rb\ <=\ MAX\_RB)\ \&\&}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ (vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a0409da263eb1ccdc8cb491aac2a43bda}{size}}()\ +\ vrb\_to\_prb\_map.\mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper_a02d89a247ca59d6b263bc36950cb5b8a}{get\_coreset\_start}}()\ <=\ bwp\_size\_rb));}
\DoxyCodeLine{00182\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rb__allocation_a371f2f118ca976f0a2958c7f6d4baf0e}\label{classsrsran_1_1rb__allocation_a371f2f118ca976f0a2958c7f6d4baf0e} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!is\_contiguous@{is\_contiguous}}
\index{is\_contiguous@{is\_contiguous}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{is\_contiguous()}{is\_contiguous()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::rb\+\_\+allocation\+::is\+\_\+contiguous (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Determines if resultant VRB-\/to-\/\+PRB allocation is contiguous in frequency domain. 

The PRB allocation is contiguous if\+:
\begin{DoxyItemize}
\item the VRB allocated for the transmission are contiguous, and
\item the VRB-\/to-\/\+PRB mapping is not interleaved.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
True if the PRB allocation is contiguous. Otherwise, false. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00134\ \{\ \textcolor{keywordflow}{return}\ vrb\_mask.\mbox{\hyperlink{classsrsran_1_1bounded__bitset_a6063ce8435cbbc14fb1344e49ac3becf}{is\_contiguous}}()\ \&\&\ !vrb\_to\_prb\_map.\mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper_ae45061a694614cb1fe59eff1d5399aff}{is\_interleaved}}();\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rb__allocation_ae1078c9f5cc61e34f72ae1bb518da6d0}\label{classsrsran_1_1rb__allocation_ae1078c9f5cc61e34f72ae1bb518da6d0} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!make\_custom@{make\_custom}}
\index{make\_custom@{make\_custom}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{make\_custom()}{make\_custom()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\+\_\+allocation}} srsran\+::rb\+\_\+allocation\+::make\+\_\+custom (\begin{DoxyParamCaption}\item[{std\+::initializer\+\_\+list$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classunsigned}{unsigned}} $>$}]{vrb\+\_\+indexes,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper}{vrb\+\_\+to\+\_\+prb\+\_\+mapper}} $>$ \&}]{vrb\+\_\+to\+\_\+prb\+\_\+map\+\_\+ = {\ttfamily \{\}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Creates a custom allocation object using a list of VRB indexes. 

The custom allocation is indexed for testing and it is not described in the TS. The VRB mask is constructed from an integer initializer list that indicates the VRBs used for the PDSCH or PUSCH transmission.

The index list order is irrelevant and the index zero represents VRB0.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em vrb\+\_\+indexes} & Provides the VRB indexes. \\
\hline
\mbox{\texttt{ in}}  & {\em vrb\+\_\+to\+\_\+prb\+\_\+map\+\_\+} & Optional VRB-\/to-\/\+PRB mapping (for PDSCH only). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An RB allocation instance. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00106\ \{}
\DoxyCodeLine{00107\ \ \ \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\_allocation}}\ result;}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \textcolor{comment}{//\ Find\ the\ maximum\ VRB\ index.}}
\DoxyCodeLine{00110\ \ \ \textcolor{keywordtype}{unsigned}\ rb\_end\ =\ *std::max\_element(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_indexes}}.begin(),\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_indexes}}.end());}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \textcolor{comment}{//\ Allocate\ the\ VRB\ mask\ so\ the\ maximum\ index\ fits.}}
\DoxyCodeLine{00113\ \ \ result.vrb\_mask\ =\ \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{bounded\_bitset<MAX\_RB>}}(rb\_end\ +\ 1);}
\DoxyCodeLine{00114\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_index}}\ :\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_indexes}})\ \{}
\DoxyCodeLine{00115\ \ \ \ \ result.vrb\_mask.set(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_index}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00116\ \ \ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_to\_prb\_map\_}}.has\_value())\ \{}
\DoxyCodeLine{00119\ \ \ \ \ result.vrb\_to\_prb\_map\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_to\_prb\_map\_}}.value();}
\DoxyCodeLine{00120\ \ \ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00123\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rb__allocation_a19d5a57bcce401e95415548136018855}\label{classsrsran_1_1rb__allocation_a19d5a57bcce401e95415548136018855} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!make\_type0@{make\_type0}}
\index{make\_type0@{make\_type0}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{make\_type0()}{make\_type0()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\+\_\+allocation}} srsran\+::rb\+\_\+allocation\+::make\+\_\+type0 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{bounded\+\_\+bitset}}$<$ MAX\+\_\+\+RB $>$ \&}]{vrb\+\_\+bitmap,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper}{vrb\+\_\+to\+\_\+prb\+\_\+mapper}} $>$ \&}]{vrb\+\_\+to\+\_\+prb\+\_\+map\+\_\+ = {\ttfamily \{\}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Creates a Type 0 RB allocation object. 

Type 0 allocation is described in TS38.\+214 Section 5.\+1.\+2.\+2.\+1 for PDSCH and Section 6.\+1.\+2.\+2.\+1 for PUSCH.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em vrb\+\_\+bitmap} & VRB allocation bitmap in which each entry represents an active RB. \\
\hline
\mbox{\texttt{ in}}  & {\em vrb\+\_\+to\+\_\+prb\+\_\+map\+\_\+} & Optional VRB-\/to-\/\+PRB mapping (for PDSCH only). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An RB allocation instance. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00076\ \{}
\DoxyCodeLine{00077\ \ \ \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\_allocation}}\ result;}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ result.vrb\_mask\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_bitmap}};}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_to\_prb\_map\_}}.has\_value())\ \{}
\DoxyCodeLine{00082\ \ \ \ \ result.vrb\_to\_prb\_map\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_to\_prb\_map\_}}.value();}
\DoxyCodeLine{00083\ \ \ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00086\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rb__allocation_a2c1861747820537bc3e81b2ac9b03d96}\label{classsrsran_1_1rb__allocation_a2c1861747820537bc3e81b2ac9b03d96} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!make\_type1@{make\_type1}}
\index{make\_type1@{make\_type1}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{make\_type1()}{make\_type1()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\+\_\+allocation}} srsran\+::rb\+\_\+allocation\+::make\+\_\+type1 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{rb\+\_\+start,  }\item[{\mbox{\hyperlink{classunsigned}{unsigned}}}]{rb\+\_\+count,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classsrsran_1_1vrb__to__prb__mapper}{vrb\+\_\+to\+\_\+prb\+\_\+mapper}} $>$ \&}]{vrb\+\_\+to\+\_\+prb\+\_\+map\+\_\+ = {\ttfamily \{\}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Creates a Type 1 RB allocation object. 

Type 1 allocation is described in TS38.\+214 Section 5.\+1.\+2.\+2.\+2 for PDSCH and Section 6.\+1.\+2.\+2.\+2 for PUSCH.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em rb\+\_\+start} & Indicates the lowest VRB used for this transmission as $RB_{start}$. \\
\hline
\mbox{\texttt{ in}}  & {\em rb\+\_\+count} & Indicates the number of consecutive active VRB for this transmission as $L_{RB_s}$. \\
\hline
\mbox{\texttt{ in}}  & {\em vrb\+\_\+to\+\_\+prb\+\_\+map\+\_\+} & Optional VRB-\/to-\/\+PRB mapping (for PDSCH only). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An RB allocation instance. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00091\ \{}
\DoxyCodeLine{00092\ \ \ \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\_allocation}}\ result;}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ result.vrb\_mask\ =\ \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{bounded\_bitset<MAX\_RB>}}(rb\_start\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rb\_count}});}
\DoxyCodeLine{00095\ \ \ result.vrb\_mask.fill(rb\_start,\ rb\_start\ +\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rb\_count}});}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_to\_prb\_map\_}}.has\_value())\ \{}
\DoxyCodeLine{00098\ \ \ \ \ result.vrb\_to\_prb\_map\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{vrb\_to\_prb\_map\_}}.value();}
\DoxyCodeLine{00099\ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00102\ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1rb__allocation_a0aaf27d8deb6f93f0458ebef2dadb4dc}\label{classsrsran_1_1rb__allocation_a0aaf27d8deb6f93f0458ebef2dadb4dc} 
\index{srsran::rb\_allocation@{srsran::rb\_allocation}!operator==@{operator==}}
\index{operator==@{operator==}!srsran::rb\_allocation@{srsran::rb\_allocation}}
\doxysubsubsection{\texorpdfstring{operator==()}{operator==()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} srsran\+::rb\+\_\+allocation\+::operator== (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1rb__allocation}{rb\+\_\+allocation}} \&}]{other }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Compares two frequency domain allocations. 

Two allocations are considered equal if\+:
\begin{DoxyItemize}
\item their VRB masks are equal, and
\item the VRB-\/to-\/\+PRB mapping is equal. 
\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{00123\ \ \ \{}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordflow}{return}\ (vrb\_mask\ ==\ \mbox{\hyperlink{namespacesrsran_aaf684a2cfa98b7f333de7041525a5b29a795f3202b17cb6bc3d4b771d8c6c9eaf}{other}}.vrb\_mask)\ \&\&\ (vrb\_to\_prb\_map\ ==\ \mbox{\hyperlink{namespacesrsran_aaf684a2cfa98b7f333de7041525a5b29a795f3202b17cb6bc3d4b771d8c6c9eaf}{other}}.vrb\_to\_prb\_map);}
\DoxyCodeLine{00125\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/srsran/phy/upper/rb\+\_\+allocation.\+h\item 
lib/phy/upper/rb\+\_\+allocation.\+cpp\end{DoxyCompactItemize}
