\doxysection{srsran\+::slot\+\_\+sync\+\_\+point Class Reference}
\hypertarget{classsrsran_1_1slot__sync__point}{}\label{classsrsran_1_1slot__sync__point}\index{srsran::slot\_sync\_point@{srsran::slot\_sync\_point}}


{\ttfamily \#include $<$slot\+\_\+sync\+\_\+point.\+h$>$}



Collaboration diagram for srsran\+::slot\+\_\+sync\+\_\+point\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{d7/d5a/classsrsran_1_1slot__sync__point__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classsrsran_1_1slot__sync__point_aaf7727892d5d0f81912f1a923f6af293}\label{classsrsran_1_1slot__sync__point_aaf7727892d5d0f81912f1a923f6af293} 
{\bfseries slot\+\_\+sync\+\_\+point} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1slot__sync__point}{slot\+\_\+sync\+\_\+point}} \&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
\Hypertarget{classsrsran_1_1slot__sync__point_a1daf9e700e0a834bab6c53e12a10ef72}\label{classsrsran_1_1slot__sync__point_a1daf9e700e0a834bab6c53e12a10ef72} 
{\bfseries slot\+\_\+sync\+\_\+point} (\mbox{\hyperlink{classsrsran_1_1slot__sync__point}{slot\+\_\+sync\+\_\+point}} \&\&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
\Hypertarget{classsrsran_1_1slot__sync__point_a996fa61986598646d5596190e5d62004}\label{classsrsran_1_1slot__sync__point_a996fa61986598646d5596190e5d62004} 
\mbox{\hyperlink{classsrsran_1_1slot__sync__point}{slot\+\_\+sync\+\_\+point}} \& {\bfseries operator=} (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classsrsran_1_1slot__sync__point}{slot\+\_\+sync\+\_\+point}} \&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
\Hypertarget{classsrsran_1_1slot__sync__point_a3d8ef7728bdfe9f9c2ebe7a4f9c3e4f8}\label{classsrsran_1_1slot__sync__point_a3d8ef7728bdfe9f9c2ebe7a4f9c3e4f8} 
\mbox{\hyperlink{classsrsran_1_1slot__sync__point}{slot\+\_\+sync\+\_\+point}} \& {\bfseries operator=} (\mbox{\hyperlink{classsrsran_1_1slot__sync__point}{slot\+\_\+sync\+\_\+point}} \&\&)=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{delete}}
\item 
{\footnotesize template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Completion\+Function}} $>$ }\\\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1slot__sync__point_acf3e46c70ca7109cc61c54027ff3e05a}{wait}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sl}}, size\+\_\+t nof\+\_\+workers, \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Completion\+Function}} \&func)
\begin{DoxyCompactList}\small\item\em Called when thread enters synchronization point. Steps\+: \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This object creates a barrier for multiple threads when \doxylink{classsrsran_1_1slot__sync__point_acf3e46c70ca7109cc61c54027ff3e05a}{wait()} is called. Once the count reaches zero, a callback is invoked. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1slot__sync__point_acf3e46c70ca7109cc61c54027ff3e05a}\label{classsrsran_1_1slot__sync__point_acf3e46c70ca7109cc61c54027ff3e05a} 
\index{srsran::slot\_sync\_point@{srsran::slot\_sync\_point}!wait@{wait}}
\index{wait@{wait}!srsran::slot\_sync\_point@{srsran::slot\_sync\_point}}
\doxysubsubsection{\texorpdfstring{wait()}{wait()}}
{\footnotesize\ttfamily template$<$\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{typename}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Completion\+Function}} $>$ \\
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::slot\+\_\+sync\+\_\+point\+::wait (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{sl,  }\item[{size\+\_\+t}]{nof\+\_\+workers,  }\item[{\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{Completion\+Function}} \&}]{func }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Called when thread enters synchronization point. Steps\+: 


\begin{DoxyEnumerate}
\item If the current thread is the first to call \doxylink{classsrsran_1_1slot__sync__point_acf3e46c70ca7109cc61c54027ff3e05a}{wait()}, the count is set to the number of workers.
\item The count is decremented.
\begin{DoxyItemize}
\item If count \texorpdfstring{$>$}{>} 0, the current thread blocks waiting for count to reach zero.
\item If count==0, the current thread invokes completion callback, and notifies remaining threads to unlock. 
\begin{DoxyParams}{Parameters}
{\em sl} & current slot. \\
\hline
{\em nof\+\_\+workers} & number of workers currently passing through synchronization point. \\
\hline
{\em func} & Completion callback invoked when count reaches zero. \\
\hline
\end{DoxyParams}

\end{DoxyItemize}
\end{DoxyEnumerate}
\begin{DoxyCode}{0}
\DoxyCodeLine{00052\ \ \ \{}
\DoxyCodeLine{00053\ \ \ \ \ std::unique\_lock<std::mutex>\ lock(mutex);}
\DoxyCodeLine{00054\ \ \ \ \ srsran\_sanity\_check(nof\_workers\ >\ 0,\ \textcolor{stringliteral}{"{}Invalid\ count"{}});}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sl}}\ !=\ last\_sl)\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \textcolor{comment}{//\ Initialize\ barrier.}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ count\ \ \ =\ nof\_workers;}
\DoxyCodeLine{00058\ \ \ \ \ \ \ last\_sl\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{sl}};}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{if}\ (-\/-\/count\ ==\ 0)\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \textcolor{comment}{//\ Phase\ completion\ step.}}
\DoxyCodeLine{00063\ \ \ \ \ \ \ func();}
\DoxyCodeLine{00064\ \ \ \ \ \ \ lock.unlock();}
\DoxyCodeLine{00065\ \ \ \ \ \ \ cvar.notify\_all();}
\DoxyCodeLine{00066\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (count\ >\ 0)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ cvar.wait(lock);}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/support/slot\+\_\+sync\+\_\+point.\+h\end{DoxyCompactItemize}
