\doxysection{srsran\+::e2ap\+\_\+network\+\_\+adapter Class Reference}
\hypertarget{classsrsran_1_1e2ap__network__adapter}{}\label{classsrsran_1_1e2ap__network__adapter}\index{srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}}


E2\+AP bridge that uses the IO broker to handle the SCTP connection.  




{\ttfamily \#include $<$e2ap\+\_\+adapter.\+h$>$}



Inheritance diagram for srsran\+::e2ap\+\_\+network\+\_\+adapter\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/dc6/classsrsran_1_1e2ap__network__adapter__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for srsran\+::e2ap\+\_\+network\+\_\+adapter\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d1a/classsrsran_1_1e2ap__network__adapter__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1e2ap__network__adapter_a200235a66389ec01d43f959d4820388e}{e2ap\+\_\+network\+\_\+adapter}} (\mbox{\hyperlink{classsrsran_1_1io__broker}{io\+\_\+broker}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{broker\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1dlt__pcap}{dlt\+\_\+pcap}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pcap\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1e2ap__network__adapter_ae6ba50e74556171802da7d184c2fad4f}{connect\+\_\+gateway}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway}{sctp\+\_\+network\+\_\+gateway}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gateway\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1e2ap__network__adapter_a0297f116cf64f4e27ad255864a00ff36}{bind\+\_\+and\+\_\+listen}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway}{sctp\+\_\+network\+\_\+gateway}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gateway\+\_\+}})
\item 
\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ uint16\+\_\+t $>$ \mbox{\hyperlink{classsrsran_1_1e2ap__network__adapter_a3d3a300b4ec74a6fffa5c35998180645}{get\+\_\+listen\+\_\+port}} ()
\begin{DoxyCompactList}\small\item\em Return the port on which the gateway is listening. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1e2ap__network__adapter_a3080956f4a8b7cb099084ee8204ce753}{connect\+\_\+e2ap}} (\mbox{\hyperlink{classsrsran_1_1e2__message__handler}{e2\+\_\+message\+\_\+handler}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2ap\+\_\+msg\+\_\+handler\+\_\+}}, \mbox{\hyperlink{classsrsran_1_1e2__event__handler}{e2\+\_\+event\+\_\+handler}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{event\+\_\+handler\+\_\+}})
\item 
\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} \mbox{\hyperlink{classsrsran_1_1e2ap__network__adapter_a981b5103e77779c7ce4f08b2bfa646f3}{disconnect\+\_\+gateway}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
E2\+AP bridge that uses the IO broker to handle the SCTP connection. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1e2ap__network__adapter_a200235a66389ec01d43f959d4820388e}\label{classsrsran_1_1e2ap__network__adapter_a200235a66389ec01d43f959d4820388e} 
\index{srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}!e2ap\_network\_adapter@{e2ap\_network\_adapter}}
\index{e2ap\_network\_adapter@{e2ap\_network\_adapter}!srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}}
\doxysubsubsection{\texorpdfstring{e2ap\_network\_adapter()}{e2ap\_network\_adapter()}}
{\footnotesize\ttfamily srsran\+::e2ap\+\_\+network\+\_\+adapter\+::e2ap\+\_\+network\+\_\+adapter (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1io__broker}{io\+\_\+broker}} \&}]{broker\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1dlt__pcap}{dlt\+\_\+pcap}} \&}]{pcap\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00040\ :\ broker(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{broker\_}}),\ pcap(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{pcap\_}})\ \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1e2ap__network__adapter_a0297f116cf64f4e27ad255864a00ff36}\label{classsrsran_1_1e2ap__network__adapter_a0297f116cf64f4e27ad255864a00ff36} 
\index{srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}!bind\_and\_listen@{bind\_and\_listen}}
\index{bind\_and\_listen@{bind\_and\_listen}!srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}}
\doxysubsubsection{\texorpdfstring{bind\_and\_listen()}{bind\_and\_listen()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::e2ap\+\_\+network\+\_\+adapter\+::bind\+\_\+and\+\_\+listen (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway}{sctp\+\_\+network\+\_\+gateway}} $>$}]{gateway\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00062\ \ \ \{}
\DoxyCodeLine{00063\ \ \ \ \ gateway\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gateway\_}});}
\DoxyCodeLine{00064\ \ \ \ \ gateway\_ctrl\_handler\ =\ gateway.get();}
\DoxyCodeLine{00065\ \ \ \ \ gateway\_data\_handler\ =\ gateway.get();}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ packer\ =\ \mbox{\hyperlink{namespacesrsran_a8be44ec30691c967f619b701c80948d3}{create\_e2ap\_asn1\_packer}}(*gateway\_data\_handler,\ *\textcolor{keyword}{this},\ pcap);}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{if}\ (!gateway\_ctrl\_handler-\/>\mbox{\hyperlink{classsrsran_1_1network__gateway__controller_a9c0e4bf6fb69ba5e19e98767baba1a8b}{create\_and\_bind}}())\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a355eafe8d872b8f555172fa7bcd1482f}{report\_error}}(\textcolor{stringliteral}{"{}Failed\ to\ create\ SCTP\ gateway.\(\backslash\)n"{}});}
\DoxyCodeLine{00071\ \ \ \ \ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{if}\ (!gateway\_ctrl\_handler-\/>\mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__controller_a86851d7f59b4c8842a1b9726a4f87564}{listen}}())\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a355eafe8d872b8f555172fa7bcd1482f}{report\_error}}(\textcolor{stringliteral}{"{}Failed\ to\ listen\ SCTP\ gateway.\(\backslash\)n"{}});}
\DoxyCodeLine{00075\ \ \ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{bool}\ success\ =}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ broker.\mbox{\hyperlink{classsrsran_1_1io__broker_a6c24c2e4dd6318cd267f68739356e9bb}{register\_fd}}(gateway\_ctrl\_handler-\/>\mbox{\hyperlink{classsrsran_1_1network__gateway__controller_a6bc57302bb572f201965e19ad501a3ab}{get\_socket\_fd}}(),\ [\textcolor{keyword}{this}](\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}})\ \{\ gateway\_ctrl\_handler-\/>receive();\ \});}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{if}\ (!success)\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a630688b51219f81c5a47ec5650326afc}{report\_fatal\_error}}(\textcolor{stringliteral}{"{}Failed\ to\ register\ E2\ (SCTP)\ network\ gateway\ at\ IO\ broker.\ socket\_fd=\{\}"{}},}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gateway\_ctrl\_handler-\/>\mbox{\hyperlink{classsrsran_1_1network__gateway__controller_a6bc57302bb572f201965e19ad501a3ab}{get\_socket\_fd}}());}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1e2ap__network__adapter_a3080956f4a8b7cb099084ee8204ce753}\label{classsrsran_1_1e2ap__network__adapter_a3080956f4a8b7cb099084ee8204ce753} 
\index{srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}!connect\_e2ap@{connect\_e2ap}}
\index{connect\_e2ap@{connect\_e2ap}!srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}}
\doxysubsubsection{\texorpdfstring{connect\_e2ap()}{connect\_e2ap()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::e2ap\+\_\+network\+\_\+adapter\+::connect\+\_\+e2ap (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1e2__message__handler}{e2\+\_\+message\+\_\+handler}} \texorpdfstring{$\ast$}{*}}]{e2ap\+\_\+msg\+\_\+handler\+\_\+,  }\item[{\mbox{\hyperlink{classsrsran_1_1e2__event__handler}{e2\+\_\+event\+\_\+handler}} \texorpdfstring{$\ast$}{*}}]{event\+\_\+handler\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00098\ \ \ \{}
\DoxyCodeLine{00099\ \ \ \ \ e2ap\_msg\_handler\ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{e2ap\_msg\_handler\_}};}
\DoxyCodeLine{00100\ \ \ \ \ event\_handler\ \ \ \ =\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{event\_handler\_}};}
\DoxyCodeLine{00101\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1e2ap__network__adapter_ae6ba50e74556171802da7d184c2fad4f}\label{classsrsran_1_1e2ap__network__adapter_ae6ba50e74556171802da7d184c2fad4f} 
\index{srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}!connect\_gateway@{connect\_gateway}}
\index{connect\_gateway@{connect\_gateway}!srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}}
\doxysubsubsection{\texorpdfstring{connect\_gateway()}{connect\_gateway()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::e2ap\+\_\+network\+\_\+adapter\+::connect\+\_\+gateway (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classsrsran_1_1sctp__network__gateway}{sctp\+\_\+network\+\_\+gateway}} $>$}]{gateway\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00043\ \ \ \{}
\DoxyCodeLine{00044\ \ \ \ \ gateway\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ std::move(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{gateway\_}});}
\DoxyCodeLine{00045\ \ \ \ \ gateway\_ctrl\_handler\ =\ gateway.get();}
\DoxyCodeLine{00046\ \ \ \ \ gateway\_data\_handler\ =\ gateway.get();}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ packer\ =\ \mbox{\hyperlink{namespacesrsran_a8be44ec30691c967f619b701c80948d3}{create\_e2ap\_asn1\_packer}}(*gateway\_data\_handler,\ *\textcolor{keyword}{this},\ pcap);}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{if}\ (!gateway\_ctrl\_handler-\/>\mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__controller_ae00cc4599c95dc5c97f35b1de7f87725}{create\_and\_connect}}())\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a355eafe8d872b8f555172fa7bcd1482f}{report\_error}}(\textcolor{stringliteral}{"{}Failed\ to\ create\ SCTP\ gateway.\(\backslash\)n"{}});}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordtype}{bool}\ success\ =}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ broker.\mbox{\hyperlink{classsrsran_1_1io__broker_a6c24c2e4dd6318cd267f68739356e9bb}{register\_fd}}(gateway\_ctrl\_handler-\/>\mbox{\hyperlink{classsrsran_1_1network__gateway__controller_a6bc57302bb572f201965e19ad501a3ab}{get\_socket\_fd}}(),\ [\textcolor{keyword}{this}](\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{fd}})\ \{\ gateway\_ctrl\_handler-\/>receive();\ \});}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordflow}{if}\ (!success)\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a630688b51219f81c5a47ec5650326afc}{report\_fatal\_error}}(\textcolor{stringliteral}{"{}Failed\ to\ register\ E2\ (SCTP)\ network\ gateway\ at\ IO\ broker.\ socket\_fd=\{\}"{}},}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gateway\_ctrl\_handler-\/>\mbox{\hyperlink{classsrsran_1_1network__gateway__controller_a6bc57302bb572f201965e19ad501a3ab}{get\_socket\_fd}}());}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1e2ap__network__adapter_a981b5103e77779c7ce4f08b2bfa646f3}\label{classsrsran_1_1e2ap__network__adapter_a981b5103e77779c7ce4f08b2bfa646f3} 
\index{srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}!disconnect\_gateway@{disconnect\_gateway}}
\index{disconnect\_gateway@{disconnect\_gateway}!srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}}
\doxysubsubsection{\texorpdfstring{disconnect\_gateway()}{disconnect\_gateway()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{void}} srsran\+::e2ap\+\_\+network\+\_\+adapter\+::disconnect\+\_\+gateway (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00104\ \ \ \{}
\DoxyCodeLine{00105\ \ \ \ \ srsran\_assert(gateway\_ctrl\_handler,\ \textcolor{stringliteral}{"{}Gateway\ handler\ not\ set."{}});}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordtype}{bool}\ success\ =\ broker.\mbox{\hyperlink{classsrsran_1_1io__broker_af6d46fbb345d9dbb3ea299748d7ce28f}{unregister\_fd}}(gateway\_ctrl\_handler-\/>\mbox{\hyperlink{classsrsran_1_1network__gateway__controller_a6bc57302bb572f201965e19ad501a3ab}{get\_socket\_fd}}());}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordflow}{if}\ (!success)\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a630688b51219f81c5a47ec5650326afc}{report\_fatal\_error}}(\textcolor{stringliteral}{"{}Failed\ to\ unregister\ E2\ (SCTP)\ network\ gateway\ at\ IO\ broker.\ socket\_fd=\{\}"{}},}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gateway\_ctrl\_handler-\/>\mbox{\hyperlink{classsrsran_1_1network__gateway__controller_a6bc57302bb572f201965e19ad501a3ab}{get\_socket\_fd}}());}
\DoxyCodeLine{00110\ \ \ \ \ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ gateway\_ctrl\_handler\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00113\ \ \ \ \ gateway\_data\_handler\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ packer.reset();}
\DoxyCodeLine{00116\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1e2ap__network__adapter_a3d3a300b4ec74a6fffa5c35998180645}\label{classsrsran_1_1e2ap__network__adapter_a3d3a300b4ec74a6fffa5c35998180645} 
\index{srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}!get\_listen\_port@{get\_listen\_port}}
\index{get\_listen\_port@{get\_listen\_port}!srsran::e2ap\_network\_adapter@{srsran::e2ap\_network\_adapter}}
\doxysubsubsection{\texorpdfstring{get\_listen\_port()}{get\_listen\_port()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ uint16\+\_\+t $>$ srsran\+::e2ap\+\_\+network\+\_\+adapter\+::get\+\_\+listen\+\_\+port (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Return the port on which the gateway is listening. 

In case the gateway was configured to listen on port 0, i.\+e. the operating system shall pick a random free port, this function can be used to get the actual port number. 
\begin{DoxyCode}{0}
\DoxyCodeLine{00090\ \ \ \{}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordflow}{if}\ (gateway\_ctrl\_handler\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return}\ gateway\_ctrl\_handler-\/>\mbox{\hyperlink{classsrsran_1_1sctp__network__gateway__controller_a9272d258eb59d4112bb8724c0871619c}{get\_listen\_port}}();}
\DoxyCodeLine{00095\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
apps/gnb/adapters/e2ap\+\_\+adapter.\+h\end{DoxyCompactItemize}
