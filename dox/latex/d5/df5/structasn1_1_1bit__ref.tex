\doxysection{asn1\+::bit\+\_\+ref Struct Reference}
\hypertarget{structasn1_1_1bit__ref}{}\label{structasn1_1_1bit__ref}\index{asn1::bit\_ref@{asn1::bit\_ref}}


Collaboration diagram for asn1\+::bit\+\_\+ref\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=192pt]{df/dac/structasn1_1_1bit__ref__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structasn1_1_1bit__ref_ac6a931f48911a0bcdec31fae0bdd741a}{bit\+\_\+ref}} (\mbox{\hyperlink{classsrsran_1_1byte__buffer__writer}{srsran\+::byte\+\_\+buffer\+\_\+writer}} byte\+\_\+writer)
\item 
\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{srsran\+::byte\+\_\+buffer\+\_\+view}} \mbox{\hyperlink{structasn1_1_1bit__ref_a884ffec9e6bd1f53806bc845fbcf9d18}{data}} () const
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{structasn1_1_1bit__ref_a97658cb5050c5c4660c70659f39e187b}{distance\+\_\+bytes}} () const
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{structasn1_1_1bit__ref_aa3701953e2a708b2c7c9447b777824be}{distance}} () const
\item 
SRSASN\+\_\+\+CODE \mbox{\hyperlink{structasn1_1_1bit__ref_ad74eb4da8d9a116be5a2d41f618910ec}{pack}} (uint64\+\_\+t val, \mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} n\+\_\+bits)
\item 
SRSASN\+\_\+\+CODE \mbox{\hyperlink{structasn1_1_1bit__ref_a690f27343c0a47a2d8188e5d63223385}{pack\+\_\+bytes}} (\mbox{\hyperlink{classsrsran_1_1span}{srsran\+::span}}$<$ const \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ \mbox{\hyperlink{classbytes}{bytes}})
\item 
SRSASN\+\_\+\+CODE \mbox{\hyperlink{structasn1_1_1bit__ref_ab9b5def3e9abc76f1da9d695dc748e1c}{pack\+\_\+bytes}} (\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{srsran\+::byte\+\_\+buffer\+\_\+view}} \mbox{\hyperlink{classbytes}{bytes}})
\item 
SRSASN\+\_\+\+CODE \mbox{\hyperlink{structasn1_1_1bit__ref_af806ff8d7575b213e85aafc050cb6e0b}{align\+\_\+bytes\+\_\+zero}} ()
\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{structasn1_1_1bit__ref_ac6a931f48911a0bcdec31fae0bdd741a}\label{structasn1_1_1bit__ref_ac6a931f48911a0bcdec31fae0bdd741a} 
\index{asn1::bit\_ref@{asn1::bit\_ref}!bit\_ref@{bit\_ref}}
\index{bit\_ref@{bit\_ref}!asn1::bit\_ref@{asn1::bit\_ref}}
\doxysubsubsection{\texorpdfstring{bit\_ref()}{bit\_ref()}}
{\footnotesize\ttfamily asn1\+::bit\+\_\+ref\+::bit\+\_\+ref (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1byte__buffer__writer}{srsran\+::byte\+\_\+buffer\+\_\+writer}}}]{byte\+\_\+writer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00153\ :\ writer(byte\_writer)\ \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{structasn1_1_1bit__ref_af806ff8d7575b213e85aafc050cb6e0b}\label{structasn1_1_1bit__ref_af806ff8d7575b213e85aafc050cb6e0b} 
\index{asn1::bit\_ref@{asn1::bit\_ref}!align\_bytes\_zero@{align\_bytes\_zero}}
\index{align\_bytes\_zero@{align\_bytes\_zero}!asn1::bit\_ref@{asn1::bit\_ref}}
\doxysubsubsection{\texorpdfstring{align\_bytes\_zero()}{align\_bytes\_zero()}}
{\footnotesize\ttfamily SRSASN\+\_\+\+CODE asn1\+::bit\+\_\+ref\+::align\+\_\+bytes\+\_\+zero (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00193\ \{}
\DoxyCodeLine{00194\ \ \ offset\ =\ 0;}
\DoxyCodeLine{00195\ \ \ \textcolor{keywordflow}{return}\ SRSASN\_SUCCESS;}
\DoxyCodeLine{00196\ \}}

\end{DoxyCode}
\Hypertarget{structasn1_1_1bit__ref_a884ffec9e6bd1f53806bc845fbcf9d18}\label{structasn1_1_1bit__ref_a884ffec9e6bd1f53806bc845fbcf9d18} 
\index{asn1::bit\_ref@{asn1::bit\_ref}!data@{data}}
\index{data@{data}!asn1::bit\_ref@{asn1::bit\_ref}}
\doxysubsubsection{\texorpdfstring{data()}{data()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{srsran\+::byte\+\_\+buffer\+\_\+view}} asn1\+::bit\+\_\+ref\+::data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00155\ \{\ \textcolor{keywordflow}{return}\ writer.\mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a71a3c19ef897cd34d462eed52c8cf13e}{view}}();\ \}}

\end{DoxyCode}
\Hypertarget{structasn1_1_1bit__ref_aa3701953e2a708b2c7c9447b777824be}\label{structasn1_1_1bit__ref_aa3701953e2a708b2c7c9447b777824be} 
\index{asn1::bit\_ref@{asn1::bit\_ref}!distance@{distance}}
\index{distance@{distance}!asn1::bit\_ref@{asn1::bit\_ref}}
\doxysubsubsection{\texorpdfstring{distance()}{distance()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} asn1\+::bit\+\_\+ref\+::distance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00128\ \{}
\DoxyCodeLine{00129\ \ \ \textcolor{keywordflow}{return}\ 8\ *\ (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(writer.\mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a8818b11085b9f71510ab081f0c6d6102}{length}}())\ -\/\ (offset\ ==\ 0\ ?\ 0\ :\ 1))\ +\ offset;}
\DoxyCodeLine{00130\ \}}

\end{DoxyCode}
\Hypertarget{structasn1_1_1bit__ref_a97658cb5050c5c4660c70659f39e187b}\label{structasn1_1_1bit__ref_a97658cb5050c5c4660c70659f39e187b} 
\index{asn1::bit\_ref@{asn1::bit\_ref}!distance\_bytes@{distance\_bytes}}
\index{distance\_bytes@{distance\_bytes}!asn1::bit\_ref@{asn1::bit\_ref}}
\doxysubsubsection{\texorpdfstring{distance\_bytes()}{distance\_bytes()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} asn1\+::bit\+\_\+ref\+::distance\+\_\+bytes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00123\ \{}
\DoxyCodeLine{00124\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(writer.\mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a8818b11085b9f71510ab081f0c6d6102}{length}}());}
\DoxyCodeLine{00125\ \}}

\end{DoxyCode}
\Hypertarget{structasn1_1_1bit__ref_ad74eb4da8d9a116be5a2d41f618910ec}\label{structasn1_1_1bit__ref_ad74eb4da8d9a116be5a2d41f618910ec} 
\index{asn1::bit\_ref@{asn1::bit\_ref}!pack@{pack}}
\index{pack@{pack}!asn1::bit\_ref@{asn1::bit\_ref}}
\doxysubsubsection{\texorpdfstring{pack()}{pack()}}
{\footnotesize\ttfamily SRSASN\+\_\+\+CODE asn1\+::bit\+\_\+ref\+::pack (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{val,  }\item[{\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}}}]{n\+\_\+bits }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00133\ \{}
\DoxyCodeLine{00134\ \ \ srsran\_assert(n\_bits\ <\ 64,\ \textcolor{stringliteral}{"{}Invalid\ number\ of\ bits\ passed\ to\ pack()"{}});}
\DoxyCodeLine{00135\ \ \ \textcolor{keywordflow}{while}\ (n\_bits\ >\ 0)\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{if}\ (offset\ ==\ 0)\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (not\ writer.\mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a698c43cd05defb783d7e582bdda40bfe}{append}}(0))\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ SRSASN\_ERROR;}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00140\ \ \ \ \ \}}
\DoxyCodeLine{00141\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{namespacesrsran_ad24c439c1013fdd70334019fc3d1d1fbaf2ce11ebf110993621bedd8e747d7b1b}{mask}}\ =\ ((1ul\ <<\ n\_bits)\ -\/\ 1ul);\ \textcolor{comment}{//\ bitmap\ of\ n\_bits\ ones.}}
\DoxyCodeLine{00142\ \ \ \ \ val\ \ \ \ \ \ \ \ \ \ \ =\ val\ \&\ \mbox{\hyperlink{namespacesrsran_ad24c439c1013fdd70334019fc3d1d1fbaf2ce11ebf110993621bedd8e747d7b1b}{mask}};}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classuint32__t}{uint32\_t}}\textcolor{keyword}{>}(8U\ -\/\ offset)\ >\ n\_bits)\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \textcolor{comment}{//\ in\ case\ n\_bits\ <\ number\ of\ bits\ left\ in\ current\ byte\ (ie,\ last\ iteration).}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ shifted\_val\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classuint8__t}{uint8\_t}}\textcolor{keyword}{>}(val\ <<\ (8u\ -\/\ offset\ -\/\ n\_bits));}
\DoxyCodeLine{00146\ \ \ \ \ \ \ writer.\mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a95e4d9f58101d7077b2bb9eb9214a5bc}{back}}()\ +=\ shifted\_val;}
\DoxyCodeLine{00147\ \ \ \ \ \ \ offset\ +=\ n\_bits;}
\DoxyCodeLine{00148\ \ \ \ \ \ \ n\_bits\ =\ 0;}
\DoxyCodeLine{00149\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \textcolor{comment}{//\ in\ case,\ space\ in\ current\ byte\ is\ lower\ or\ equal\ to\ n\_bits\ (ie,\ not\ the\ last\ iteration).}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ shifted\_val\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classuint8__t}{uint8\_t}}\textcolor{keyword}{>}(val\ >>\ (n\_bits\ -\/\ 8u\ +\ offset));}
\DoxyCodeLine{00152\ \ \ \ \ \ \ writer.\mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a95e4d9f58101d7077b2bb9eb9214a5bc}{back}}()\ +=\ shifted\_val;}
\DoxyCodeLine{00153\ \ \ \ \ \ \ n\_bits\ -\/=\ 8U\ -\/\ offset;}
\DoxyCodeLine{00154\ \ \ \ \ \ \ offset\ =\ 0;}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \}}
\DoxyCodeLine{00157\ \ \ \textcolor{keywordflow}{return}\ SRSASN\_SUCCESS;}
\DoxyCodeLine{00158\ \}}

\end{DoxyCode}
\Hypertarget{structasn1_1_1bit__ref_ab9b5def3e9abc76f1da9d695dc748e1c}\label{structasn1_1_1bit__ref_ab9b5def3e9abc76f1da9d695dc748e1c} 
\index{asn1::bit\_ref@{asn1::bit\_ref}!pack\_bytes@{pack\_bytes}}
\index{pack\_bytes@{pack\_bytes}!asn1::bit\_ref@{asn1::bit\_ref}}
\doxysubsubsection{\texorpdfstring{pack\_bytes()}{pack\_bytes()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily SRSASN\+\_\+\+CODE asn1\+::bit\+\_\+ref\+::pack\+\_\+bytes (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1byte__buffer__view}{srsran\+::byte\+\_\+buffer\+\_\+view}}}]{bytes }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00177\ \{}
\DoxyCodeLine{00178\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classbytes}{bytes}}.empty())\ \{}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordflow}{return}\ SRSASN\_SUCCESS;}
\DoxyCodeLine{00180\ \ \ \}}
\DoxyCodeLine{00181\ \ \ \textcolor{keywordflow}{if}\ (offset\ ==\ 0)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{comment}{//\ Aligned\ case.}}
\DoxyCodeLine{00183\ \ \ \ \ HANDLE\_CODE(writer.\mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a698c43cd05defb783d7e582bdda40bfe}{append}}(\mbox{\hyperlink{classbytes}{bytes}})\ ?\ SRSASN\_SUCCESS\ :\ SRSASN\_ERROR\_ENCODE\_FAIL);}
\DoxyCodeLine{00184\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classuint8__t}{uint8\_t}}\ \textcolor{keywordtype}{byte}\ :\ \mbox{\hyperlink{classbytes}{bytes}})\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ HANDLE\_CODE(pack(\textcolor{keywordtype}{byte},\ 8U));}
\DoxyCodeLine{00187\ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \}}
\DoxyCodeLine{00189\ \ \ \textcolor{keywordflow}{return}\ SRSASN\_SUCCESS;}
\DoxyCodeLine{00190\ \}}

\end{DoxyCode}
\Hypertarget{structasn1_1_1bit__ref_a690f27343c0a47a2d8188e5d63223385}\label{structasn1_1_1bit__ref_a690f27343c0a47a2d8188e5d63223385} 
\index{asn1::bit\_ref@{asn1::bit\_ref}!pack\_bytes@{pack\_bytes}}
\index{pack\_bytes@{pack\_bytes}!asn1::bit\_ref@{asn1::bit\_ref}}
\doxysubsubsection{\texorpdfstring{pack\_bytes()}{pack\_bytes()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily SRSASN\+\_\+\+CODE asn1\+::bit\+\_\+ref\+::pack\+\_\+bytes (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1span}{srsran\+::span}}$<$ const \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{bytes }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00161\ \{}
\DoxyCodeLine{00162\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classbytes}{bytes}}.empty())\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordflow}{return}\ SRSASN\_SUCCESS;}
\DoxyCodeLine{00164\ \ \ \}}
\DoxyCodeLine{00165\ \ \ \textcolor{keywordflow}{if}\ (offset\ ==\ 0)\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{comment}{//\ Aligned\ case}}
\DoxyCodeLine{00167\ \ \ \ \ HANDLE\_CODE(writer.\mbox{\hyperlink{classsrsran_1_1byte__buffer__writer_a698c43cd05defb783d7e582bdda40bfe}{append}}(\mbox{\hyperlink{classbytes}{bytes}})\ ?\ SRSASN\_SUCCESS\ :\ SRSASN\_ERROR\_ENCODE\_FAIL);}
\DoxyCodeLine{00168\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classuint8__t}{uint8\_t}}\ \textcolor{keywordtype}{byte}\ :\ \mbox{\hyperlink{classbytes}{bytes}})\ \{}
\DoxyCodeLine{00170\ \ \ \ \ \ \ HANDLE\_CODE(pack(\textcolor{keywordtype}{byte},\ 8U));}
\DoxyCodeLine{00171\ \ \ \ \ \}}
\DoxyCodeLine{00172\ \ \ \}}
\DoxyCodeLine{00173\ \ \ \textcolor{keywordflow}{return}\ SRSASN\_SUCCESS;}
\DoxyCodeLine{00174\ \}}

\end{DoxyCode}


The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/srsran/asn1/asn1\+\_\+utils.\+h\item 
lib/asn1/asn1\+\_\+utils.\+cpp\end{DoxyCompactItemize}
