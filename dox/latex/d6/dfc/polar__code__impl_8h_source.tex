\doxysection{polar\+\_\+code\+\_\+impl.\+h}
\hypertarget{polar__code__impl_8h_source}{}\label{polar__code__impl_8h_source}\index{lib/phy/upper/channel\_coding/polar/polar\_code\_impl.h@{lib/phy/upper/channel\_coding/polar/polar\_code\_impl.h}}
\mbox{\hyperlink{polar__code__impl_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ 2021-\/2024\ Software\ Radio\ Systems\ Limited}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ srsRAN.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ srsRAN\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ it\ under\ the\ terms\ of\ the\ GNU\ Affero\ General\ Public\ License\ as}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ published\ by\ the\ Free\ Software\ Foundation,\ either\ version\ 3\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ the\ License,\ or\ (at\ your\ option)\ any\ later\ version.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ srsRAN\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ GNU\ Affero\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ A\ copy\ of\ the\ GNU\ Affero\ General\ Public\ License\ can\ be\ found\ in}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ the\ LICENSE\ file\ in\ the\ top-\/level\ directory\ of\ this\ distribution}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ and\ at\ http://www.gnu.org/licenses/.}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{comment}{///\ \(\backslash\)file}}
\DoxyCodeLine{00024\ \textcolor{comment}{///\ \(\backslash\)brief\ Polar\ code\ declaration.}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{pragma}\ \textcolor{preprocessor}{once}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}srsran/phy/upper/channel\_coding/polar/polar\_code.h"{}}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{namespace}\ \mbox{\hyperlink{namespacesrsran}{srsran}}\ \{}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{comment}{///\ Implementation\ of\ the\ polar\ code\ interface\ based\ on\ look-\/up\ tables.}}
\DoxyCodeLine{00033\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1polar__code__impl}{polar\_code\_impl}}\ :\ \textcolor{keyword}{public}\ polar\_code}
\DoxyCodeLine{00034\ \{}
\DoxyCodeLine{00035\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00036\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ mother\ code\ with\ codeblock\ length\ 32.}}
\DoxyCodeLine{00037\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 32>\ mother\_code\_5;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ mother\ code\ with\ codeblock\ length\ 64.}}
\DoxyCodeLine{00040\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 64>\ mother\_code\_6;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ mother\ code\ with\ codeblock\ length\ 128.}}
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 128>\ mother\_code\_7;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ mother\ code\ with\ codeblock\ length\ 256.}}
\DoxyCodeLine{00046\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 256>\ mother\_code\_8;}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ mother\ code\ with\ codeblock\ length\ 512.}}
\DoxyCodeLine{00049\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 512>\ mother\_code\_9;}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ mother\ code\ with\ codeblock\ length\ 1024.}}
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 1024>\ mother\_code\_10;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ block\ interleaver\ for\ codeblock\ length\ 32.}}
\DoxyCodeLine{00055\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 32>\ blk\_interleaver\_5;}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ block\ interleaver\ for\ codeblock\ length\ 64.}}
\DoxyCodeLine{00058\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 64>\ blk\_interleaver\_6;}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ block\ interleaver\ for\ codeblock\ length\ 128.}}
\DoxyCodeLine{00061\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 128>\ blk\_interleaver\_7;}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ block\ interleaver\ for\ codeblock\ length\ 256.}}
\DoxyCodeLine{00064\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 256>\ blk\_interleaver\_8;}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ block\ interleaver\ for\ codeblock\ length\ 512.}}
\DoxyCodeLine{00067\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 512>\ blk\_interleaver\_9;}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \textcolor{comment}{///\ Look-\/up\ table\ for\ the\ block\ interleaver\ for\ codeblock\ length\ 1024}}
\DoxyCodeLine{00070\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::array<uint16\_t,\ 1024>\ blk\_interleaver\_10;}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{///\ Returns\ a\ view\ of\ the\ desired\ mother\ code\ (\(\backslash\)c\ n\ is\ the\ base-\/2\ logarithm\ of\ the\ codeblock\ length).}}
\DoxyCodeLine{00073\ \ \ \textcolor{keyword}{static}\ span<\textcolor{keyword}{const}\ uint16\_t>\ get\_mother\_code(uint8\_t\ n);}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \textcolor{comment}{///\ Returns\ a\ view\ of\ the\ desired\ block\ interleaver\ (\(\backslash\)c\ n\ is\ the\ base-\/2\ logarithm\ of\ the\ codeblock\ length).}}
\DoxyCodeLine{00076\ \ \ \textcolor{keyword}{static}\ span<\textcolor{keyword}{const}\ uint16\_t>\ get\_blk\_interleaver(uint8\_t\ n);}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Extracts\ the\ elements\ in\ \(\backslash\)c\ x\ that\ are\ smaller\ than\ \(\backslash\)c\ T\ or\ are\ in\ \(\backslash\)c\ y.}}
\DoxyCodeLine{00079\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ The\ length\ of\ the\ output\ vector\ \(\backslash\)c\ z.}}
\DoxyCodeLine{00080\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}}
\DoxyCodeLine{00081\ \ \ setdiff\_stable(\textcolor{keyword}{const}\ uint16\_t*\ x,\ \textcolor{keyword}{const}\ uint16\_t*\ y,\ uint16\_t*\ z,\ uint16\_t\ T,\ uint16\_t\ len1,\ uint16\_t\ len2);}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \textcolor{comment}{///\ Computes\ all\ the\ internal\ data\ fields\ based\ on\ the\ message\ size\ \(\backslash\)c\ K,\ the\ rate-\/matched\ codeword\ size\ \(\backslash\)c\ E\ and\ the}}
\DoxyCodeLine{00084\ \ \ \textcolor{comment}{///\ base-\/2\ logarithm\ of\ the\ maximum\ codeblock\ length\ \(\backslash\)c\ nMax.}}
\DoxyCodeLine{00085\ \ \ \textcolor{keywordtype}{void}\ set\_code\_params(\textcolor{keywordtype}{unsigned}\ K,\ \textcolor{keywordtype}{unsigned}\ E,\ uint8\_t\ nMax);}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \textcolor{comment}{///\ Number\ of\ coded\ bits.}}
\DoxyCodeLine{00088\ \ \ \textcolor{keywordtype}{unsigned}\ N\ =\ 0;}
\DoxyCodeLine{00089\ \ \ \textcolor{comment}{///\ Base-\/2\ logarithm\ of\ the\ number\ of\ coded\ bits.}}
\DoxyCodeLine{00090\ \ \ uint8\_t\ n\ =\ 0;}
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{///\ Number\ of\ message\ bits\ (data\ and\ CRC).}}
\DoxyCodeLine{00092\ \ \ \textcolor{keywordtype}{unsigned}\ K\ =\ 0;}
\DoxyCodeLine{00093\ \ \ \textcolor{comment}{///\ Number\ of\ rate-\/matched\ encoded\ bits.}}
\DoxyCodeLine{00094\ \ \ \textcolor{keywordtype}{unsigned}\ E\ =\ 0;}
\DoxyCodeLine{00095\ \ \ \textcolor{comment}{///\ Number\ of\ parity-\/check\ bits.}}
\DoxyCodeLine{00096\ \ \ \textcolor{keywordtype}{unsigned}\ nPC\ =\ 0;}
\DoxyCodeLine{00097\ \ \ \textcolor{comment}{///\ Number\ of\ parity-\/check\ bits\ of\ minimum\ bandwidth\ type.}}
\DoxyCodeLine{00098\ \ \ \textcolor{keywordtype}{unsigned}\ nWmPC\ =\ 0;}
\DoxyCodeLine{00099\ \ \ \textcolor{comment}{///\ Set\ of\ indices\ corresponding\ to\ the\ positions\ occupied\ by\ message\ bits\ at\ the\ encoder\ input.}}
\DoxyCodeLine{00100\ \ \ bounded\_bitset<NMAX>\ K\_set\_mask;}
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{///\ Set\ of\ indices\ corresponding\ to\ the\ positions\ occupied\ by\ parity-\/check\ bits\ at\ the\ encoder\ input.}}
\DoxyCodeLine{00102\ \ \ std::array<uint16\_t,\ 4>\ PC\_set;}
\DoxyCodeLine{00103\ \ \ \textcolor{comment}{///\ Set\ of\ indices\ corresponding\ to\ the\ positions\ occupied\ by\ frozen\ bits\ at\ the\ encoder\ input.}}
\DoxyCodeLine{00104\ \ \ bounded\_bitset<NMAX>\ F\_set\_mask;}
\DoxyCodeLine{00105\ \ \ \textcolor{comment}{///\ Status\ of\ the\ internal\ bit\ interleaver.}}
\DoxyCodeLine{00106\ \ \ polar\_code\_ibil\ ibil;}
\DoxyCodeLine{00107\ \ \ \textcolor{comment}{///\ Temporal\ storage\ of\ indices\ corresponding\ to\ the\ positions\ occupied\ by\ message\ bits\ at\ the\ encoder\ input.}}
\DoxyCodeLine{00108\ \ \ std::array<uint16\_t,\ NMAX>\ tmp\_K\_set;}
\DoxyCodeLine{00109\ \ \ \textcolor{comment}{///\ Temporal\ storage\ of\ indices\ corresponding\ to\ the\ positions\ occupied\ by\ frozen\ bits\ at\ the\ encoder\ input.}}
\DoxyCodeLine{00110\ \ \ std::array<uint16\_t,\ NMAX>\ tmp\_F\_set;}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00113\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Default\ constructor.}}
\DoxyCodeLine{00114\ \ \ \textcolor{comment}{///\ \(\backslash\)warning\ The\ default\ configuration\ resulting\ from\ the\ constructor\ is\ invalid.\ The\ user\ must\ use\ the\ \(\backslash\)ref\ set()}}
\DoxyCodeLine{00115\ \ \ \textcolor{comment}{///\ method\ to\ provide\ a\ valid\ code\ configuration.}}
\DoxyCodeLine{00116\ \ \ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_afffac099145c45858e18a6be9a8b5eab}{polar\_code\_impl}}();}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \textcolor{comment}{///\ Default\ destructor.}}
\DoxyCodeLine{00119\ \ \ \string~\mbox{\hyperlink{classsrsran_1_1polar__code__impl_a7e820037cfc21fc4474b8e697bf9dc55}{polar\_code\_impl}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \textcolor{comment}{//\ See\ interface\ for\ the\ documentation\ of\ public\ methods.}}
\DoxyCodeLine{00122\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a3c50a0e4eb28e933f4f9946670452b6a}{get\_n}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00123\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a28b42b3bf67bc92283f3c84bf3b96f31}{get\_N}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00124\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a018959f429e9778c72354a09fe553456}{get\_K}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00125\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_adedcd20d051e0e6e1b87288d3c933fde}{get\_E}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00126\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a14673d83d2f68e466bffe83c0a8db528}{get\_nPC}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00127\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a0a00bd4006ad64d7ff1c133c701e8785}{bounded\_bitset}}<\mbox{\hyperlink{classsrsran_1_1polar__code__impl_a0a00bd4006ad64d7ff1c133c701e8785}{NMAX}}>\&\ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a0a00bd4006ad64d7ff1c133c701e8785}{get\_K\_set}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00128\ \ \ span<\textcolor{keyword}{const}\ uint16\_t>\ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a5a96b2ccc5378e5353e127168f43c87d}{get\_PC\_set}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00129\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a639714fee029567dc56b8cdf5dda1753}{bounded\_bitset}}<\mbox{\hyperlink{classsrsran_1_1polar__code__impl_a639714fee029567dc56b8cdf5dda1753}{NMAX}}>\&\ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a639714fee029567dc56b8cdf5dda1753}{get\_F\_set}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00130\ \ \ span<\textcolor{keyword}{const}\ uint16\_t>\ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a623391af15059cf64337900db26753f1}{get\_blk\_interleaver}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00131\ \ \ polar\_code\_ibil\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a2839065f7c0fc9b929179bcf54d7a236}{get\_ibil}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{override};}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1polar__code__impl_a2f34be802ab78bd627da37c8b7296e69}{set}}(\textcolor{keywordtype}{unsigned}\ K,\ \textcolor{keywordtype}{unsigned}\ E,\ uint8\_t\ nMax,\ polar\_code\_ibil\ ibil)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00134\ \};}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \}\ \textcolor{comment}{//\ namespace\ srsran}}

\end{DoxyCode}
