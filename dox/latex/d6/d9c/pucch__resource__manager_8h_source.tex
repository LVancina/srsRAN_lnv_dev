\doxysection{pucch\+\_\+resource\+\_\+manager.\+h}
\hypertarget{pucch__resource__manager_8h_source}{}\label{pucch__resource__manager_8h_source}\index{lib/scheduler/pucch\_scheduling/pucch\_resource\_manager.h@{lib/scheduler/pucch\_scheduling/pucch\_resource\_manager.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ 2021-\/2024\ Software\ Radio\ Systems\ Limited}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ srsRAN.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ srsRAN\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ it\ under\ the\ terms\ of\ the\ GNU\ Affero\ General\ Public\ License\ as}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ published\ by\ the\ Free\ Software\ Foundation,\ either\ version\ 3\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ the\ License,\ or\ (at\ your\ option)\ any\ later\ version.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ srsRAN\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ GNU\ Affero\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ A\ copy\ of\ the\ GNU\ Affero\ General\ Public\ License\ can\ be\ found\ in}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ the\ LICENSE\ file\ in\ the\ top-\/level\ directory\ of\ this\ distribution}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ and\ at\ http://www.gnu.org/licenses/.}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{pragma}\ \textcolor{preprocessor}{once}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}../config/ue\_configuration.h"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \mbox{\hyperlink{pucch__allocator_8h}{"{}pucch\_allocator.h"{}}}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{namespace}\ \mbox{\hyperlink{namespacesrsran}{srsran}}\ \{}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{comment}{///\ Containers\ used\ to\ return\ the\ output\ of\ the\ PUCCH\ resource\ manager.}}
\DoxyCodeLine{00031\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structsrsran_1_1pucch__harq__resource__alloc__record}{pucch\_harq\_resource\_alloc\_record}}\ \{}
\DoxyCodeLine{00032\ \ \ \textcolor{comment}{///\ Pointer\ to\ PUCCH\ resource\ configuration\ to\ be\ used.}}
\DoxyCodeLine{00033\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__resource}{pucch\_resource}}*\ \mbox{\hyperlink{structsrsran_1_1pucch__harq__resource__alloc__record_aaadc9a461359f88dd82616f9b69c5141}{pucch\_res}};}
\DoxyCodeLine{00034\ \ \ \textcolor{comment}{///\ PUCCH\ resource\ indicator\ corresponding\ to\ the\ resource\ that\ will\ be\ used\ by\ the\ UE.}}
\DoxyCodeLine{00035\ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{structsrsran_1_1pucch__harq__resource__alloc__record_a9bbb4ca8e7b5da25b4776e4b202b7836}{pucch\_res\_indicator}};}
\DoxyCodeLine{00036\ \};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{comment}{///\ \(\backslash\)brief\ Class\ that\ manages\ the\ cell\ allocation\ of\ PUCCH\ resources\ across\ UEs.}}
\DoxyCodeLine{00039\ \textcolor{comment}{///\ The\ correct\ functioning\ of\ pucch\_resource\_manager\ is\ based\ on\ the\ following\ assumptions:}}
\DoxyCodeLine{00040\ \textcolor{comment}{///\ (i)\ \ \ Each\ UE\ has\ max\ 8\ PUCCH\ F1\ and\ max\ 8\ PUCCH\ F2\ dedicated\ to\ HARQ-\/ACK\ reporting.}}
\DoxyCodeLine{00041\ \textcolor{comment}{///\ (ii)\ \ Each\ UE\ has\ max\ 1\ SR-\/dedicated\ PUCCH\ F1\ resource\ and\ max\ 1\ CSI-\/dedicated\ PUCCH\ F2\ resource.}}
\DoxyCodeLine{00042\ \textcolor{comment}{///\ (iii)\ The\ cell\ PUCCH\ resource\ list\ can\ have\ max\ 128\ PUCCH\ resource,\ including\ all\ formats;\ at\ cell\ level,\ there\ is}}
\DoxyCodeLine{00043\ \textcolor{comment}{///\ \ \ \ \ \ \ no\ constraint\ on\ how\ many\ resource\ must\ be\ F1,\ F2,\ or\ for\ SR\ or\ for\ CSI.}}
\DoxyCodeLine{00044\ \textcolor{comment}{///\ (vi)\ \ UEs\ can\ have\ different\ PUCCH\ resource\ lists;\ however\ the\ PUCCH\ resource\ ID\ is\ unique\ with\ the\ cell.\ This}}
\DoxyCodeLine{00045\ \textcolor{comment}{///\ \ \ \ \ \ \ implies\ that\ if\ two\ UEs\ have\ the\ same\ PUCCH\ resource\ within\ their\ lists,\ their\ PUCCH\ resource\ ID\ must\ be\ the}}
\DoxyCodeLine{00046\ \textcolor{comment}{///\ \ \ \ \ \ \ same.}}
\DoxyCodeLine{00047\ \textcolor{comment}{///\ (v)\ \ \ Indexing\ of\ the\ PUCCH\ F1\ and\ PUCCH\ F2\ resources\ for\ HARQ-\/ACK\ reporting\ must\ be\ contiguous\ within\ the\ F1\ group}}
\DoxyCodeLine{00048\ \textcolor{comment}{///\ \ \ \ \ \ \ and\ with\ F2\ group.\ However,\ the\ last\ PUCCH\ F1\ group\ resource's\ and\ the\ first\ PUCCH\ F2\ group\ resource's\ indices}}
\DoxyCodeLine{00049\ \textcolor{comment}{///\ \ \ \ \ \ \ need\ not\ be\ contiguous.\ E.g.,\ PUCCH\ F1\ indices\ (for\ HARQ-\/ACK\ reporting)\ =\ \{0,\ ...,\ 7\},\ and\ PUCCH\ F2\ indices}}
\DoxyCodeLine{00050\ \textcolor{comment}{///\ \ \ \ \ \ \ (for\ HARQ-\/ACK\ reporting)\ =\ \{10,\ ...,\ 17\}.}}
\DoxyCodeLine{00051\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{pucch\_resource\_manager}}}
\DoxyCodeLine{00052\ \{}
\DoxyCodeLine{00053\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00054\ \ \ pucch\_resource\_manager();}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{comment}{///\ Reset\ all\ resources\ to\ "{}unused"{}.}}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_a81a16bc8a6f73d1d6877b6ef2b973e25}{slot\_indication}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_tx);}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \textcolor{comment}{///\ Returns\ true\ if\ the\ common\ PUCCH\ resource\ indexed\ by\ r\_pucch\ is\ available\ at\ the\ given\ slot.}}
\DoxyCodeLine{00060\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_a12c33ef146bb86101981b4d644e3bf6d}{is\_common\_resource\_available}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ sl,\ size\_t\ r\_pucch);}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \textcolor{comment}{///\ Set\ the\ common\ PUCCH\ resource\ indexed\ by\ r\_pucch\ at\ the\ given\ slot\ as\ currently\ "{}not\ available"{}.}}
\DoxyCodeLine{00063\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_ae60b313b4eb6150af00a3302134a6567}{reserve\_common\_resource}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ sl,\ size\_t\ r\_pucch);}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Returns\ the\ next\ PUCCH\ resource\ available\ to\ be\ used\ for\ HARQ-\/ACK\ (format\ 1).}}
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ If\ any\ PUCCH\ resource\ available,\ it\ returns\ (i)\ the\ pointer\ to\ the\ configuration\ and\ (ii)\ the\ PUCCH}}
\DoxyCodeLine{00067\ \ \ \textcolor{comment}{///\ resource\ indicator\ corresponding\ to\ the\ PUCCH\ resource\ that\ will\ be\ used\ by\ the\ UE.\ If\ there\ are\ no\ PUCCH}}
\DoxyCodeLine{00068\ \ \ \textcolor{comment}{///\ resources\ available,\ the\ pointer\ passed\ will\ be\ \(\backslash\)c\ nullptr,\ whereas\ the\ PUCCH\ resource\ indicator\ is\ to\ be\ ignored.}}
\DoxyCodeLine{00069\ \ \ \mbox{\hyperlink{structsrsran_1_1pucch__harq__resource__alloc__record}{pucch\_harq\_resource\_alloc\_record}}}
\DoxyCodeLine{00070\ \ \ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_acc21904f68185add3248e3b223025cda}{reserve\_next\_f1\_harq\_res\_available}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_harq,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg);}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Returns\ the\ next\ PUCCH\ format\ 2\ resource\ available\ to\ be\ used\ for\ HARQ-\/ACK.}}
\DoxyCodeLine{00073\ \ \ \textcolor{comment}{///\ \(\backslash\)remark\ If\ SR\ and\ CSI\ multiplexing\ is\ enabled,\ this\ resource\ can\ be\ used\ for\ HARQ-\/ACK\ +\ SR\ and/or\ CSI.}}
\DoxyCodeLine{00074\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ If\ any\ PUCCH\ resource\ available,\ it\ returns\ (i)\ the\ pointer\ to\ the\ configuration\ and\ (ii)\ the\ PUCCH}}
\DoxyCodeLine{00075\ \ \ \textcolor{comment}{///\ resource\ indicator\ corresponding\ to\ the\ PUCCH\ resource\ that\ will\ be\ used\ by\ the\ UE.\ If\ there\ are\ no\ PUCCH}}
\DoxyCodeLine{00076\ \ \ \textcolor{comment}{///\ resources\ available,\ the\ pointer\ passed\ will\ be\ \(\backslash\)c\ nullptr,\ whereas\ the\ PUCCH\ resource\ indicator\ is\ to\ be\ ignored.}}
\DoxyCodeLine{00077\ \ \ \mbox{\hyperlink{structsrsran_1_1pucch__harq__resource__alloc__record}{pucch\_harq\_resource\_alloc\_record}}}
\DoxyCodeLine{00078\ \ \ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_af451820441803f58f45ec6d90b265f51}{reserve\_next\_f2\_harq\_res\_available}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_harq,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg);}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Returns\ a\ specific\ PUCCH\ format\ 2\ resource\ (identified\ by\ the\ res.\ indicator)\ to\ be\ used\ for\ HARQ-\/ACK.}}
\DoxyCodeLine{00081\ \ \ \textcolor{comment}{///\ \(\backslash\)remark\ If\ SR\ and\ CSI\ multiplexing\ is\ enabled,\ this\ resource\ can\ be\ used\ for\ HARQ-\/ACK\ +\ SR\ and/or\ CSI.}}
\DoxyCodeLine{00082\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ If\ the\ specific\ PUCCH\ resource\ is\ available,\ it\ returns\ the\ pointer\ to\ the\ configuration.\ Else,\ it\ returns}}
\DoxyCodeLine{00083\ \ \ \textcolor{comment}{///\ \(\backslash\)c\ nullptr.}}
\DoxyCodeLine{00084\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__resource}{pucch\_resource}}*\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_a516af5de56b8abb7e9a015fee28cf28a}{reserve\_specific\_format2\_res}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \ \ \ \ \ \ \ \ \ slot\_harq,}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ crnti,}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ res\_indicator,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg);}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Returns\ the\ specific\ PUCCH\ format\ 2\ resource\ config\ to\ be\ used\ for\ CSI,\ if\ available.}}
\DoxyCodeLine{00090\ \ \ \textcolor{comment}{///\ \(\backslash\)remark\ If\ SR\ multiplexing\ is\ enabled,\ this\ resource\ can\ be\ used\ for\ CSI\ +\ SR.}}
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ If\ the\ specific\ PUCCH\ resource\ is\ available,\ it\ returns\ (i)\ the\ pointer\ to\ the\ configuration\ and\ (ii)\ the}}
\DoxyCodeLine{00092\ \ \ \textcolor{comment}{///\ PUCCH\ resource\ indicator\ corresponding\ to\ the\ PUCCH\ resource\ that\ will\ be\ used\ by\ the\ UE.\ Else,\ the\ pointer\ passed}}
\DoxyCodeLine{00093\ \ \ \textcolor{comment}{///\ will\ be\ \(\backslash\)c\ nullptr,\ whereas\ the\ PUCCH\ resource\ indicator\ is\ to\ be\ ignored.}}
\DoxyCodeLine{00094\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__resource}{pucch\_resource}}*}
\DoxyCodeLine{00095\ \ \ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_ae44246e38b2ff1e41fa94c4546384f0c}{reserve\_csi\_resource}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_harq,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\_cell\_configuration}}\&\ ue\_cell\_cfg);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Returns\ the\ specific\ PUCCH\ format\ 1\ resource\ config\ to\ be\ used\ for\ SR,\ if\ available.}}
\DoxyCodeLine{00098\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ If\ the\ specific\ PUCCH\ resource\ is\ available,\ it\ returns\ (i)\ the\ pointer\ to\ the\ configuration\ and\ (ii)\ the}}
\DoxyCodeLine{00099\ \ \ \textcolor{comment}{///\ PUCCH\ resource\ indicator\ corresponding\ to\ the\ PUCCH\ resource\ that\ will\ be\ used\ by\ the\ UE.\ Else,\ the\ pointer\ passed}}
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{///\ will\ be\ \(\backslash\)c\ nullptr,\ whereas\ the\ PUCCH\ resource\ indicator\ is\ to\ be\ ignored.}}
\DoxyCodeLine{00101\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__resource}{pucch\_resource}}*\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_a59b1a37f315491278aa7aad2c290a8c5}{reserve\_sr\_res\_available}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_sr,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg);}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Release\ PUCCH\ (format\ 1)\ resource\ from\ being\ allocated\ to\ a\ given\ UE.}}
\DoxyCodeLine{00104\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ slot\_harq\ slot\ for\ which\ the\ PUCCH\ resource\ was\ scheduled.}}
\DoxyCodeLine{00105\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ crnti\ UE\ from\ which\ the\ resource\ needs\ to\ be\ released.}}
\DoxyCodeLine{00106\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ pucch\_cfg\ UE's\ PUCCH\ config.}}
\DoxyCodeLine{00107\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ True\ if\ the\ resource\ for\ the\ UE\ was\ found\ in\ the\ allocation\ records\ for\ the\ given\ slot.}}
\DoxyCodeLine{00108\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_acfcd84de6b5b859c51c68d219a8a4098}{release\_harq\_f1\_resource}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_harq,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg);}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Release\ PUCCH\ (format\ 2)\ resource\ from\ being\ allocated\ to\ a\ given\ UE.}}
\DoxyCodeLine{00111\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ slot\_harq\ slot\ for\ which\ the\ PUCCH\ resource\ was\ scheduled.}}
\DoxyCodeLine{00112\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ crnti\ UE\ from\ which\ the\ resource\ needs\ to\ be\ released.}}
\DoxyCodeLine{00113\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ pucch\_cfg\ UE's\ PUCCH\ config.}}
\DoxyCodeLine{00114\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ True\ if\ the\ resource\ for\ the\ UE\ was\ found\ in\ the\ allocation\ records\ for\ the\ given\ slot.}}
\DoxyCodeLine{00115\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_a9f4da9b7594802e4c1c66248f2bdd88a}{release\_harq\_f2\_resource}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_harq,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Release\ PUCCH\ (format\ 1)\ resource\ used\ for\ SR\ from\ being\ allocated\ to\ a\ given\ UE.}}
\DoxyCodeLine{00118\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ slot\_harq\ slot\ for\ which\ the\ PUCCH\ resource\ was\ scheduled.}}
\DoxyCodeLine{00119\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ crnti\ UE\ from\ which\ the\ resource\ needs\ to\ be\ released.}}
\DoxyCodeLine{00120\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ pucch\_cfg\ UE's\ PUCCH\ config.}}
\DoxyCodeLine{00121\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ True\ if\ the\ resource\ for\ the\ UE\ was\ found\ in\ the\ allocation\ records\ for\ the\ given\ slot.}}
\DoxyCodeLine{00122\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_a15b5a050479f5e214eba5caa2592b2c3}{release\_sr\_resource}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_sr,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg);}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Release\ PUCCH\ (format\ 2)\ resource\ used\ for\ CSI\ from\ being\ allocated\ to\ a\ given\ UE.}}
\DoxyCodeLine{00125\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ slot\_harq\ slot\ for\ which\ the\ PUCCH\ resource\ was\ scheduled.}}
\DoxyCodeLine{00126\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ crnti\ UE\ from\ which\ the\ resource\ needs\ to\ be\ released.}}
\DoxyCodeLine{00127\ \ \ \textcolor{comment}{///\ \(\backslash\)param[in]\ pucch\_cfg\ UE's\ PUCCH\ config.}}
\DoxyCodeLine{00128\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ True\ if\ the\ resource\ for\ the\ UE\ was\ found\ in\ the\ allocation\ records\ for\ the\ given\ slot.}}
\DoxyCodeLine{00129\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_abf167b75a5c55bf75860448daf6a4920}{release\_csi\_resource}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_sr,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\_cell\_configuration}}\&\ ue\_cell\_cfg);}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Returns\ the\ PUCCH\ resource\ indicator\ (format\ 1)\ of\ the\ resource\ used\ for\ a\ given\ RNTI\ at\ a\ given\ slot.}}
\DoxyCodeLine{00132\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ PUCCH\ resource\ indicator\ of\ the\ resource\ used\ allocated\ to\ the\ UE;\ if\ UE\ is\ not\ found,\ returns\ -\/1.}}
\DoxyCodeLine{00133\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_afeffc4fb86b8d3d528a23cd0aa202617}{fetch\_f1\_pucch\_res\_indic}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_tx,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg);}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Returns\ the\ PUCCH\ resource\ indicator\ (format\ 2)\ of\ the\ resource\ used\ for\ a\ given\ RNTI\ at\ a\ given\ slot.}}
\DoxyCodeLine{00136\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ PUCCH\ resource\ indicator\ of\ the\ resource\ used\ allocated\ to\ the\ UE;\ if\ UE\ is\ not\ found,\ returns\ -\/1.}}
\DoxyCodeLine{00137\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_ae4219490f4e5ceddf8bcd4389026fc63}{fetch\_f2\_pucch\_res\_indic}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_tx,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg);}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Fetches\ the\ configuration\ of\ the\ PUCCH\ Format\ 2\ resource\ used\ for\ HARQ\ previously\ allocated\ to\ a\ given\ RNTI}}
\DoxyCodeLine{00140\ \ \ \textcolor{comment}{///\ for\ a\ given\ slot.}}
\DoxyCodeLine{00141\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ If\ the\ resource\ is\ found,\ it\ returns\ (i)\ the\ pointer\ to\ the\ configuration\ and\ (ii)\ the\ PUCCH\ resource}}
\DoxyCodeLine{00142\ \ \ \textcolor{comment}{///\ indicator\ corresponding\ to\ the\ PUCCH\ resource\ that\ previously\ allocated\ to\ the\ UE.\ Else,\ the\ pointer\ passed\ will}}
\DoxyCodeLine{00143\ \ \ \textcolor{comment}{///\ be\ \(\backslash\)c\ nullptr,\ whereas\ the\ PUCCH\ resource\ indicator\ is\ to\ be\ ignored.}}
\DoxyCodeLine{00144\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__harq__resource__alloc__record}{pucch\_harq\_resource\_alloc\_record}}}
\DoxyCodeLine{00145\ \ \ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_a53136d8c1533a7be826aac73d5aa9ea4}{fetch\_allocated\_f2\_harq\_resource}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_harq,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg);}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \textcolor{comment}{///\ \(\backslash\)brief\ Returns\ the\ configuration\ of\ the\ PUCCH\ resource\ used\ for\ CSI\ (format\ 2)\ for\ a\ given\ RNTI\ at\ a\ given\ slot.}}
\DoxyCodeLine{00148\ \ \ \textcolor{comment}{///\ \(\backslash\)return\ Pointer\ to\ the\ resource\ configuration\ used\ allocated\ to\ the\ UE;\ if\ UE\ is\ not\ found,\ returns\ \(\backslash\)c\ nullptr.}}
\DoxyCodeLine{00149\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__resource}{pucch\_resource}}*}
\DoxyCodeLine{00150\ \ \ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager_a874091c3cadec6e8a2bafa444faf69cb}{fetch\_csi\_pucch\_res\_config}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_tx,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\_cell\_configuration}}\&\ ue\_cell\_cfg);}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00153\ \ \ \textcolor{comment}{///\ Size\ of\ the\ ring\ buffer\ of\ pucch\_resource\_manager.\ This\ size\ sets\ a\ limit\ on\ how\ far\ in\ advance\ a\ PUCCH\ can\ be}}
\DoxyCodeLine{00154\ \ \ \textcolor{comment}{///\ allocated.}}
\DoxyCodeLine{00155\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ size\_t\ RES\_MANAGER\_RING\_BUFFER\_SIZE\ =}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{get\_allocator\_ring\_size\_gt\_min}}(\mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{SCHEDULER\_MAX\_K0}}\ +\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{SCHEDULER\_MAX\_K1}}\ +\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{NTN\_CELL\_SPECIFIC\_KOFFSET\_MAX}});}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ PUCCH\_HARQ\_F1\_RES\_SET\_ID\ =\ 0;}
\DoxyCodeLine{00159\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ PUCCH\_HARQ\_F2\_RES\_SET\_ID\ =\ 1;}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \textcolor{comment}{//\ [Implementation-\/defined]\ We\ assume\ as\ the\ maximum\ number\ of\ PUCCH\ resources\ that\ can\ be\ handled\ by\ the\ resource}}
\DoxyCodeLine{00162\ \ \ \textcolor{comment}{//\ manager\ \(\backslash\)c\ maxNrofPUCCH-\/Resources,\ TS\ 38.331.}}
\DoxyCodeLine{00163\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ size\_t\ MAX\_PUCCH\_RESOURCES\{128\};}
\DoxyCodeLine{00164\ \ \ \textcolor{comment}{//\ As\ per\ Section\ 9.2.1,\ TS\ 38.213,\ this\ is\ given\ by\ the\ number\ of\ possible\ values\ of\ r\_PUCCH,\ which\ is\ 16.}}
\DoxyCodeLine{00165\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ size\_t\ MAX\_COMMON\_PUCCH\_RESOURCES\{16\};}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \textcolor{keyword}{enum}\ \textcolor{keyword}{class}\ pucch\_resource\_usage\ \{\ NOT\_USED\ =\ 0,\ HARQ\_F1,\ HARQ\_F2,\ SR,\ CSI\ \};}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \textcolor{comment}{//\ Tracks\ usage\ of\ PUCCH\ resources.}}
\DoxyCodeLine{00170\ \ \ \textcolor{keyword}{struct}\ resource\_tracker\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rnti;}
\DoxyCodeLine{00172\ \ \ \ \ pucch\_resource\_usage\ resource\_usage;}
\DoxyCodeLine{00173\ \ \ \};}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{pucch\_res\_record\_array}}\ \ =\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{std}}::\mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{array}}<\mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{resource\_tracker}},\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{MAX\_PUCCH\_RESOURCES}}>;}
\DoxyCodeLine{00176\ \ \ \textcolor{keyword}{using}\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{common\_res\_record\_array}}\ =\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{std}}::\mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{array}}<\textcolor{keywordtype}{bool},\ \mbox{\hyperlink{classsrsran_1_1pucch__resource__manager}{MAX\_COMMON\_PUCCH\_RESOURCES}}>;}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \textcolor{comment}{//\ Record\ for\ the\ RNTI\ and\ PUCCH\ resource\ indicator\ used\ for\ a\ given\ resource\ at\ a\ given\ slot.}}
\DoxyCodeLine{00179\ \ \ \textcolor{keyword}{struct}\ rnti\_pucch\_res\_id\_slot\_record\ \{}
\DoxyCodeLine{00180\ \ \ \ \ common\_res\_record\_array\ used\_common\_resources;}
\DoxyCodeLine{00181\ \ \ \ \ pucch\_res\_record\_array\ \ ues\_using\_pucch\_res;}
\DoxyCodeLine{00182\ \ \ \};}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \textcolor{comment}{//\ Returns\ the\ resource\ manager\ allocation\ record\ for\ a\ given\ slot.}}
\DoxyCodeLine{00185\ \ \ rnti\_pucch\_res\_id\_slot\_record\&\ get\_slot\_resource\_counter(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ sl);}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \textcolor{comment}{//\ Helper\ functions\ that\ implement\ the\ public\ interface\ methods.}}
\DoxyCodeLine{00188\ \ \ \mbox{\hyperlink{structsrsran_1_1pucch__harq__resource__alloc__record}{pucch\_harq\_resource\_alloc\_record}}\ reserve\_next\_harq\_res\_available(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \ \ \ \ \ \ \ \ \ slot\_harq,}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ crnti,}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg,}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a5232bd04aa13ea0365427c4d2baa31e3}{pucch\_format}}\ \ \ \ \ \ \ \ format);}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \textcolor{keywordtype}{bool}\ release\_harq\_resource(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_harq,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg,\ \mbox{\hyperlink{namespacesrsran_a5232bd04aa13ea0365427c4d2baa31e3}{pucch\_format}}\ format);}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \textcolor{keywordtype}{int}\ fetch\_pucch\_res\_indic(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ slot\_tx,\ \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\_t}}\ crnti,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1pucch__config}{pucch\_config}}\&\ pucch\_cfg,\ \mbox{\hyperlink{namespacesrsran_a5232bd04aa13ea0365427c4d2baa31e3}{pucch\_format}}\ format);}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \textcolor{comment}{//\ Ring\ buffer\ of\ rnti\_pucch\_res\_id\_slot\_record\ for\ PUCCH\ resources.}}
\DoxyCodeLine{00198\ \ \ std::array<rnti\_pucch\_res\_id\_slot\_record,\ RES\_MANAGER\_RING\_BUFFER\_SIZE>\ resource\_slots;}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \textcolor{comment}{//\ Keeps\ track\ of\ the\ last\ slot\_point\ used\ by\ the\ resource\ manager.}}
\DoxyCodeLine{00201\ \ \ \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ last\_sl\_ind;}
\DoxyCodeLine{00202\ \};}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \}\ \textcolor{comment}{//\ namespace\ srsran}}

\end{DoxyCode}
