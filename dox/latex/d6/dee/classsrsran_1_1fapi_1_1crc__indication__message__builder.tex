\doxysection{srsran\+::fapi\+::crc\+\_\+indication\+\_\+message\+\_\+builder Class Reference}
\hypertarget{classsrsran_1_1fapi_1_1crc__indication__message__builder}{}\label{classsrsran_1_1fapi_1_1crc__indication__message__builder}\index{srsran::fapi::crc\_indication\_message\_builder@{srsran::fapi::crc\_indication\_message\_builder}}


CRC.\+indication message builder that helps to fill in the parameters specified in SCF-\/222 v4.\+0 section 3.\+4.\+8.  




{\ttfamily \#include $<$message\+\_\+builders.\+h$>$}



Collaboration diagram for srsran\+::fapi\+::crc\+\_\+indication\+\_\+message\+\_\+builder\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=219pt]{d6/db2/classsrsran_1_1fapi_1_1crc__indication__message__builder__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1crc__indication__message__builder_a895d1b83a707f32907106ea34e089679}{crc\+\_\+indication\+\_\+message\+\_\+builder}} (\mbox{\hyperlink{structsrsran_1_1fapi_1_1crc__indication__message}{crc\+\_\+indication\+\_\+message}} \&\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\+\_\+}})
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1crc__indication__message__builder}{crc\+\_\+indication\+\_\+message\+\_\+builder}} \& \mbox{\hyperlink{classsrsran_1_1fapi_1_1crc__indication__message__builder_a62669b2b6f9a2773ff8aa9ebc553f67a}{set\+\_\+basic\+\_\+parameters}} (uint16\+\_\+t sfn, uint16\+\_\+t \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}})
\item 
\mbox{\hyperlink{classsrsran_1_1fapi_1_1crc__indication__message__builder}{crc\+\_\+indication\+\_\+message\+\_\+builder}} \& \mbox{\hyperlink{classsrsran_1_1fapi_1_1crc__indication__message__builder_ae5dd3cdb45c72ad052102857489f728d}{add\+\_\+pdu}} (\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}} handle, \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}} rnti, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ rapid, \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} harq\+\_\+id, \mbox{\hyperlink{classbool}{bool}} tb\+\_\+crc\+\_\+status\+\_\+ok, uint16\+\_\+t num\+\_\+cb, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$ cb\+\_\+crc\+\_\+status, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\+\_\+sinr\+\_\+dB}}, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classunsigned}{unsigned}} $>$ timing\+\_\+advance\+\_\+offset, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classint}{int}} $>$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{timing\+\_\+advance\+\_\+offset\+\_\+in\+\_\+ns}}, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$ rssi\+\_\+dB, \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$ rsrp, \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rsrp\+\_\+use\+\_\+d\+Bm}}=\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{true}})
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
CRC.\+indication message builder that helps to fill in the parameters specified in SCF-\/222 v4.\+0 section 3.\+4.\+8. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsrsran_1_1fapi_1_1crc__indication__message__builder_a895d1b83a707f32907106ea34e089679}\label{classsrsran_1_1fapi_1_1crc__indication__message__builder_a895d1b83a707f32907106ea34e089679} 
\index{srsran::fapi::crc\_indication\_message\_builder@{srsran::fapi::crc\_indication\_message\_builder}!crc\_indication\_message\_builder@{crc\_indication\_message\_builder}}
\index{crc\_indication\_message\_builder@{crc\_indication\_message\_builder}!srsran::fapi::crc\_indication\_message\_builder@{srsran::fapi::crc\_indication\_message\_builder}}
\doxysubsubsection{\texorpdfstring{crc\_indication\_message\_builder()}{crc\_indication\_message\_builder()}}
{\footnotesize\ttfamily srsran\+::fapi\+::crc\+\_\+indication\+\_\+message\+\_\+builder\+::crc\+\_\+indication\+\_\+message\+\_\+builder (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1fapi_1_1crc__indication__message}{crc\+\_\+indication\+\_\+message}} \&}]{msg\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{01198\ :\ msg(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{msg\_}})\ \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1fapi_1_1crc__indication__message__builder_ae5dd3cdb45c72ad052102857489f728d}\label{classsrsran_1_1fapi_1_1crc__indication__message__builder_ae5dd3cdb45c72ad052102857489f728d} 
\index{srsran::fapi::crc\_indication\_message\_builder@{srsran::fapi::crc\_indication\_message\_builder}!add\_pdu@{add\_pdu}}
\index{add\_pdu@{add\_pdu}!srsran::fapi::crc\_indication\_message\_builder@{srsran::fapi::crc\_indication\_message\_builder}}
\doxysubsubsection{\texorpdfstring{add\_pdu()}{add\_pdu()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1fapi_1_1crc__indication__message__builder}{crc\+\_\+indication\+\_\+message\+\_\+builder}} \& srsran\+::fapi\+::crc\+\_\+indication\+\_\+message\+\_\+builder\+::add\+\_\+pdu (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classuint32__t}{uint32\+\_\+t}}}]{handle,  }\item[{\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}}}]{rnti,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{rapid,  }\item[{\mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}}}]{harq\+\_\+id,  }\item[{\mbox{\hyperlink{classbool}{bool}}}]{tb\+\_\+crc\+\_\+status\+\_\+ok,  }\item[{uint16\+\_\+t}]{num\+\_\+cb,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{const}} \mbox{\hyperlink{classuint8__t}{uint8\+\_\+t}} $>$}]{cb\+\_\+crc\+\_\+status,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$}]{ul\+\_\+sinr\+\_\+dB,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classunsigned}{unsigned}} $>$}]{timing\+\_\+advance\+\_\+offset,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classint}{int}} $>$}]{timing\+\_\+advance\+\_\+offset\+\_\+in\+\_\+ns,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$}]{rssi\+\_\+dB,  }\item[{\mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{classfloat}{float}} $>$}]{rsrp,  }\item[{\mbox{\hyperlink{classbool}{bool}}}]{rsrp\+\_\+use\+\_\+d\+Bm = {\ttfamily \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{true}}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Adds a CRC.\+indication PDU to the message and returns a reference to the builder. \begin{DoxyNote}{Note}
These parameters are specified in SCF-\/222 v4.\+0 section 3.\+4.\+8 in table CRC.\+indication message body. 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{01225\ \ \ \{}
\DoxyCodeLine{01226\ \ \ \ \ \textcolor{keyword}{auto}\&\ pdu\ =\ msg.pdus.emplace\_back();}
\DoxyCodeLine{01227\ }
\DoxyCodeLine{01228\ \ \ \ \ pdu.handle\ \ \ \ \ \ \ \ \ \ \ =\ handle;}
\DoxyCodeLine{01229\ \ \ \ \ pdu.rnti\ \ \ \ \ \ \ \ \ \ \ \ \ =\ rnti;}
\DoxyCodeLine{01230\ \ \ \ \ pdu.rapid\ \ \ \ \ \ \ \ \ \ \ \ =\ (rapid)\ ?\ rapid.value()\ :\ 255U;}
\DoxyCodeLine{01231\ \ \ \ \ pdu.harq\_id\ \ \ \ \ \ \ \ \ \ =\ harq\_id;}
\DoxyCodeLine{01232\ \ \ \ \ pdu.tb\_crc\_status\_ok\ =\ tb\_crc\_status\_ok;}
\DoxyCodeLine{01233\ \ \ \ \ pdu.num\_cb\ \ \ \ \ \ \ \ \ \ \ =\ num\_cb;}
\DoxyCodeLine{01234\ \ \ \ \ pdu.cb\_crc\_status.assign(cb\_crc\_status.\mbox{\hyperlink{classsrsran_1_1span_a6202eea0b4569bf9ba5bf5b1574a03ae}{begin}}(),\ cb\_crc\_status.\mbox{\hyperlink{classsrsran_1_1span_ab0dddc814f190b4e022e9cbfbf1f2400}{end}}());}
\DoxyCodeLine{01235\ \ \ \ \ pdu.timing\_advance\_offset\ =}
\DoxyCodeLine{01236\ \ \ \ \ \ \ \ \ (timing\_advance\_offset)\ ?\ timing\_advance\_offset.value()\ :\ std::numeric\_limits<uint16\_t>::max();}
\DoxyCodeLine{01237\ \ \ \ \ pdu.timing\_advance\_offset\_ns\ =}
\DoxyCodeLine{01238\ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{timing\_advance\_offset\_in\_ns}})\ ?\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{timing\_advance\_offset\_in\_ns}}.value()\ :\ std::numeric\_limits<int16\_t>::min();}
\DoxyCodeLine{01239\ }
\DoxyCodeLine{01240\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ rssi\ =}
\DoxyCodeLine{01241\ \ \ \ \ \ \ \ \ (rssi\_dB)\ ?\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}((rssi\_dB.value()\ +\ 128.F)\ *\ 10.F)\ :\ std::\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{numeric\_limits}}<uint16\_t>::\mbox{\hyperlink{namespacesrsran_a2918c0347dde854fce1aaebb70a16c33}{max}}();}
\DoxyCodeLine{01242\ }
\DoxyCodeLine{01243\ \ \ \ \ srsran\_assert(rssi\ <=\ std::numeric\_limits<uint16\_t>::max(),}
\DoxyCodeLine{01244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}RSSI\ (\{\})\ exceeds\ the\ maximum\ (\{\})."{}},}
\DoxyCodeLine{01245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rssi,}
\DoxyCodeLine{01246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<uint16\_t>::max());}
\DoxyCodeLine{01247\ }
\DoxyCodeLine{01248\ \ \ \ \ pdu.rssi\ =\ \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(rssi);}
\DoxyCodeLine{01249\ }
\DoxyCodeLine{01250\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rsrp\_value}}\ =\ (rsrp)\ ?\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}((rsrp.value()\ +\ ((\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rsrp\_use\_dBm}})\ ?\ 140.F\ :\ 128.F))\ *\ 10.F)}
\DoxyCodeLine{01251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ std::\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{numeric\_limits}}<uint16\_t>::\mbox{\hyperlink{namespacesrsran_a2918c0347dde854fce1aaebb70a16c33}{max}}();}
\DoxyCodeLine{01252\ }
\DoxyCodeLine{01253\ \ \ \ \ srsran\_assert(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rsrp\_value}}\ <=\ std::numeric\_limits<uint16\_t>::max(),}
\DoxyCodeLine{01254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}RSRP\ (\{\})\ exceeds\ the\ maximum\ (\{\})."{}},}
\DoxyCodeLine{01255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rsrp\_value}},}
\DoxyCodeLine{01256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<uint16\_t>::max());}
\DoxyCodeLine{01257\ }
\DoxyCodeLine{01258\ \ \ \ \ pdu.rsrp\ =\ \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{rsrp\_value}});}
\DoxyCodeLine{01259\ }
\DoxyCodeLine{01260\ \ \ \ \ \textcolor{keywordtype}{int}\ ul\_sinr\ =\ (\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_sinr\_dB}})\ ?\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{ul\_sinr\_dB}}.value()\ *\ 500.F)\ :\ std::\mbox{\hyperlink{namespacesrsran_a58e7c9f2c51a9ad6a0899b46d5315723}{numeric\_limits}}<int16\_t>::\mbox{\hyperlink{namespacesrsran_a2a7e19abbadc531788e0849e634c23c6}{min}}();}
\DoxyCodeLine{01261\ }
\DoxyCodeLine{01262\ \ \ \ \ srsran\_assert(ul\_sinr\ <=\ std::numeric\_limits<int16\_t>::max(),}
\DoxyCodeLine{01263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}UL\ SINR\ metric\ (\{\})\ exceeds\ the\ maximum\ (\{\})."{}},}
\DoxyCodeLine{01264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ul\_sinr,}
\DoxyCodeLine{01265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<int16\_t>::max());}
\DoxyCodeLine{01266\ }
\DoxyCodeLine{01267\ \ \ \ \ srsran\_assert(ul\_sinr\ >=\ std::numeric\_limits<int16\_t>::min(),}
\DoxyCodeLine{01268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}UL\ SINR\ metric\ (\{\})\ is\ under\ the\ minimum\ (\{\})."{}},}
\DoxyCodeLine{01269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ul\_sinr,}
\DoxyCodeLine{01270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<int16\_t>::min());}
\DoxyCodeLine{01271\ }
\DoxyCodeLine{01272\ \ \ \ \ pdu.ul\_sinr\_metric\ =\ \textcolor{keyword}{static\_cast<}int16\_t\textcolor{keyword}{>}(ul\_sinr);}
\DoxyCodeLine{01273\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{01274\ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsrsran_1_1fapi_1_1crc__indication__message__builder_a62669b2b6f9a2773ff8aa9ebc553f67a}\label{classsrsran_1_1fapi_1_1crc__indication__message__builder_a62669b2b6f9a2773ff8aa9ebc553f67a} 
\index{srsran::fapi::crc\_indication\_message\_builder@{srsran::fapi::crc\_indication\_message\_builder}!set\_basic\_parameters@{set\_basic\_parameters}}
\index{set\_basic\_parameters@{set\_basic\_parameters}!srsran::fapi::crc\_indication\_message\_builder@{srsran::fapi::crc\_indication\_message\_builder}}
\doxysubsubsection{\texorpdfstring{set\_basic\_parameters()}{set\_basic\_parameters()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classsrsran_1_1fapi_1_1crc__indication__message__builder}{crc\+\_\+indication\+\_\+message\+\_\+builder}} \& srsran\+::fapi\+::crc\+\_\+indication\+\_\+message\+\_\+builder\+::set\+\_\+basic\+\_\+parameters (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{sfn,  }\item[{uint16\+\_\+t}]{slot }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the CRC.\+indication basic parameters and returns a reference to the builder. \begin{DoxyNote}{Note}
These parameters are specified in SCF-\/222 v4.\+0 section 3.\+4.\+8 in table CRC.\+indication message body. 
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{01203\ \ \ \{}
\DoxyCodeLine{01204\ \ \ \ \ msg.sfn\ \ =\ sfn;}
\DoxyCodeLine{01205\ \ \ \ \ msg.slot\ =\ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}};}
\DoxyCodeLine{01206\ }
\DoxyCodeLine{01207\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{01208\ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/srsran/fapi/message\+\_\+builders.\+h\end{DoxyCompactItemize}
