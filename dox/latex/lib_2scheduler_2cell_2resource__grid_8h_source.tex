\doxysection{resource\+\_\+grid.\+h}
\hypertarget{lib_2scheduler_2cell_2resource__grid_8h_source}{}\label{lib_2scheduler_2cell_2resource__grid_8h_source}\index{lib/scheduler/cell/resource\_grid.h@{lib/scheduler/cell/resource\_grid.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ 2021-\/2024\ Software\ Radio\ Systems\ Limited}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ srsRAN.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ srsRAN\ is\ free\ software:\ you\ can\ redistribute\ it\ and/or\ modify}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ it\ under\ the\ terms\ of\ the\ GNU\ Affero\ General\ Public\ License\ as}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ published\ by\ the\ Free\ Software\ Foundation,\ either\ version\ 3\ of}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ the\ License,\ or\ (at\ your\ option)\ any\ later\ version.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ srsRAN\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ See\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ GNU\ Affero\ General\ Public\ License\ for\ more\ details.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ A\ copy\ of\ the\ GNU\ Affero\ General\ Public\ License\ can\ be\ found\ in}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ the\ LICENSE\ file\ in\ the\ top-\/level\ directory\ of\ this\ distribution}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ and\ at\ http://www.gnu.org/licenses/.}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}../config/cell\_configuration.h"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}../support/bwp\_helpers.h"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}../support/rb\_helper.h"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}resource\_grid\_util.h"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{circular__array_8h}{srsran/adt/circular\_array.h}}"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}srsran/ran/slot\_point.h"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}srsran/scheduler/mac\_scheduler.h"{}}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesrsran}{srsran}}\ \{}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{using\ }\mbox{\hyperlink{classsrsran_1_1bounded__bitset}{crb\_bitmap}}\ =\ \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{bounded\_bitset<MAX\_NOF\_PRBS,\ true>}};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsrsran_1_1bwp__sch__grant__info}{bwp\_sch\_grant\_info}}\ \{}
\DoxyCodeLine{00040\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1bwp__configuration}{bwp\_configuration}}*\ bwp\_cfg;}
\DoxyCodeLine{00041\ \ \ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ \ \ \ \ \ \ \ symbols;}
\DoxyCodeLine{00043\ \ \ \mbox{\hyperlink{structsrsran_1_1prb__interval}{prb\_interval}}\ \mbox{\hyperlink{structsrsran_1_1bwp__sch__grant__info_af8d563967043ac5a84e77e68fc271c8a}{prbs}};}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \mbox{\hyperlink{structsrsran_1_1bwp__sch__grant__info}{bwp\_sch\_grant\_info}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1bwp__configuration}{bwp\_configuration}}\&\ bwp\_,\ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ symbols\_,\ \mbox{\hyperlink{structsrsran_1_1prb__interval}{prb\_interval}}\ prbs\_)\ :}
\DoxyCodeLine{00046\ \ \ \ \ bwp\_cfg(\&bwp\_),\ symbols(symbols\_),\ \mbox{\hyperlink{structsrsran_1_1bwp__sch__grant__info_af8d563967043ac5a84e77e68fc271c8a}{prbs}}(prbs\_)}
\DoxyCodeLine{00047\ \ \ \{}
\DoxyCodeLine{00048\ \ \ \ \ srsran\_sanity\_check(symbols.stop()\ <=\ \mbox{\hyperlink{namespacesrsran_aa1d2bd5d3008afda19c0949d241a73f7}{get\_nsymb\_per\_slot}}(bwp\_cfg-\/>cp),\ \textcolor{stringliteral}{"{}OFDM\ symbols\ do\ not\ fit\ slot"{}});}
\DoxyCodeLine{00049\ \ \ \ \ srsran\_sanity\_check(\mbox{\hyperlink{structsrsran_1_1bwp__sch__grant__info_af8d563967043ac5a84e77e68fc271c8a}{prbs}}.stop()\ <=\ bwp\_cfg-\/>\mbox{\hyperlink{structsrsran_1_1bwp__configuration_ad7e6a6961052ba5b05ecb93aa0b9510f}{crbs}}.\mbox{\hyperlink{classsrsran_1_1interval_ac47a815285449ead553a43a0b5f85f63}{length}}(),\ \textcolor{stringliteral}{"{}PRBs=\{\}\ do\ not\ fit\ BWP=\{\}"{}},\ \mbox{\hyperlink{structsrsran_1_1bwp__sch__grant__info_af8d563967043ac5a84e77e68fc271c8a}{prbs}},\ bwp\_cfg-\/>\mbox{\hyperlink{structsrsran_1_1bwp__configuration_ad7e6a6961052ba5b05ecb93aa0b9510f}{crbs}});}
\DoxyCodeLine{00050\ \ \ \}}
\DoxyCodeLine{00051\ \};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsrsran_1_1grant__info}{grant\_info}}\ \{}
\DoxyCodeLine{00055\ \ \ \mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs;}
\DoxyCodeLine{00056\ \ \ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ \ symbols;}
\DoxyCodeLine{00058\ \ \ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ \mbox{\hyperlink{structsrsran_1_1grant__info_a529d36dd1bacf210cdc00f826372f647}{crbs}};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \mbox{\hyperlink{structsrsran_1_1grant__info}{grant\_info}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00061\ \ \ \mbox{\hyperlink{structsrsran_1_1grant__info}{grant\_info}}(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs\_,\ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ symbols\_,\ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ crbs\_)\ :}
\DoxyCodeLine{00062\ \ \ \ \ scs(scs\_),\ symbols(symbols\_),\ \mbox{\hyperlink{structsrsran_1_1grant__info_a529d36dd1bacf210cdc00f826372f647}{crbs}}(crbs\_)}
\DoxyCodeLine{00063\ \ \ \{}
\DoxyCodeLine{00064\ \ \ \}}
\DoxyCodeLine{00065\ \ \ \mbox{\hyperlink{structsrsran_1_1grant__info}{grant\_info}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1bwp__sch__grant__info}{bwp\_sch\_grant\_info}}\&\ grant)\ :}
\DoxyCodeLine{00066\ \ \ \ \ scs(grant.bwp\_cfg-\/>scs),\ symbols(grant.symbols),\ \mbox{\hyperlink{structsrsran_1_1grant__info_a529d36dd1bacf210cdc00f826372f647}{crbs}}(\mbox{\hyperlink{namespacesrsran_a7a79603d00c739d6ecec3dbe77bd0f2f}{prb\_to\_crb}}(*grant.bwp\_cfg,\ grant.prbs))}
\DoxyCodeLine{00067\ \ \ \{}
\DoxyCodeLine{00068\ \ \ \}}
\DoxyCodeLine{00069\ \};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00072\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ \mbox{\hyperlink{namespacesrsran_a884045428e7f9e31e9363d2aadf2323e}{get\_carrier\_rb\_dims}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1scs__specific__carrier}{scs\_specific\_carrier}}\&\ carrier\_cfg)}
\DoxyCodeLine{00073\ \{}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\{carrier\_cfg.\mbox{\hyperlink{structsrsran_1_1scs__specific__carrier_a42894536e4eb345dc918f712541eab5a}{offset\_to\_carrier}},\ carrier\_cfg.\mbox{\hyperlink{structsrsran_1_1scs__specific__carrier_a42894536e4eb345dc918f712541eab5a}{offset\_to\_carrier}}\ +\ carrier\_cfg.\mbox{\hyperlink{structsrsran_1_1scs__specific__carrier_a916a5653e7f9213b2d41912da4143bda}{carrier\_bandwidth}}\};}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00079\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid}{carrier\_subslot\_resource\_grid}}}
\DoxyCodeLine{00080\ \{}
\DoxyCodeLine{00081\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00082\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid}{carrier\_subslot\_resource\_grid}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1scs__specific__carrier}{scs\_specific\_carrier}}\&\ carrier\_cfg);}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ carrier\_cfg.scs;\ \}}
\DoxyCodeLine{00085\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ nof\_rbs()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ carrier\_cfg.\mbox{\hyperlink{structsrsran_1_1scs__specific__carrier_a916a5653e7f9213b2d41912da4143bda}{carrier\_bandwidth}};\ \}}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ offset()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ carrier\_cfg.\mbox{\hyperlink{structsrsran_1_1scs__specific__carrier_a42894536e4eb345dc918f712541eab5a}{offset\_to\_carrier}};\ \}}
\DoxyCodeLine{00087\ \ \ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ \ \ \ \ \ \ rb\_dims()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesrsran_a884045428e7f9e31e9363d2aadf2323e}{get\_carrier\_rb\_dims}}(carrier\_cfg);\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00090\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a11e0edbed29b3a1f9fdd4791596023db}{clear}}();}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00095\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a27ccc216d3099e49700aa3a0f1362ed9}{fill}}(\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ symbols,\ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ crbs);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00100\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a27ccc216d3099e49700aa3a0f1362ed9}{fill}}(\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ symbols,\ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ uint16\_t>}}\ crb\_list);}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00106\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a9240696310f6958a03f53bd94b1fa412}{collides}}(\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ symbols,\ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ crbs)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00112\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a9240696310f6958a03f53bd94b1fa412}{collides}}(\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ symbols,\ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ uint16\_t>}}\ crb\_list)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00121\ \ \ \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{crb\_bitmap}}\ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a7c600702eaac7a1f49c0082dfe0f96df}{used\_crbs}}(\mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ bwp\_crb\_lims,\ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ symbols)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00127\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_aed60a3357ae8744b9fb69c6629a1fd95}{all\_set}}(\mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ symbols,\ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ crbs)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00133\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classsrsran_1_1bounded__bitset}{slot\_rb\_bitmap}}\ =\ \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{bounded\_bitset<NOF\_OFDM\_SYM\_PER\_SLOT\_NORMAL\_CP\ *\ MAX\_NOF\_PRBS,\ true>}};}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00136\ \ \ \mbox{\hyperlink{structsrsran_1_1scs__specific__carrier}{scs\_specific\_carrier}}\ carrier\_cfg;}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00139\ \ \ \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{slot\_rb\_bitmap}}\ slot\_rbs;}
\DoxyCodeLine{00140\ \};}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00144\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid}{cell\_slot\_resource\_grid}}}
\DoxyCodeLine{00145\ \{}
\DoxyCodeLine{00146\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00147\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid}{cell\_slot\_resource\_grid}}(\mbox{\hyperlink{classsrsran_1_1span}{span<const\ scs\_specific\_carrier>}}\ scs\_carriers);}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00150\ \ \ \mbox{\hyperlink{classsrsran_1_1static__vector}{static\_vector<subcarrier\_spacing,\ NOF\_NUMEROLOGIES>}}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_a680aec6279612e720b624fefed5f263d}{active\_scs}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00153\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_ada627c98ec8d97eb9f01df8993b56810}{clear}}();}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00158\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_abf35ef94e4fda289536095561faded14}{fill}}(\mbox{\hyperlink{structsrsran_1_1grant__info}{grant\_info}}\ grant);}
\DoxyCodeLine{00159\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_abf35ef94e4fda289536095561faded14}{fill}}(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs,\ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ ofdm\_symbols,\ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ uint16\_t>}}\ crbs);}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00164\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_aec6c47c9786e03e716338e9ab0d0cef8}{collides}}(\mbox{\hyperlink{structsrsran_1_1grant__info}{grant\_info}}\ grant)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00165\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_aec6c47c9786e03e716338e9ab0d0cef8}{collides}}(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs,\ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ ofdm\_symbols,\ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ crbs)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00166\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_aec6c47c9786e03e716338e9ab0d0cef8}{collides}}(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs,\ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ ofdm\_symbols,\ \mbox{\hyperlink{classsrsran_1_1span}{span<const\ uint16\_t>}}\ crbs)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00174\ \ \ \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{crb\_bitmap}}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_a5e2dacf79f13264dde4fe5c02c85ab25}{used\_crbs}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1bwp__configuration}{bwp\_configuration}}\&\ bwp\_cfg,\ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ symbols)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00183\ \ \ \mbox{\hyperlink{classsrsran_1_1bounded__bitset}{crb\_bitmap}}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_a5e2dacf79f13264dde4fe5c02c85ab25}{used\_crbs}}(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs,\ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ crb\_lims,\ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ symbols)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00188\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_a2dafbcb106a387c3def81723641fe1ec}{all\_set}}(\mbox{\hyperlink{structsrsran_1_1grant__info}{grant\_info}}\ grant)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00189\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_a2dafbcb106a387c3def81723641fe1ec}{all\_set}}(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs,\ \mbox{\hyperlink{structsrsran_1_1ofdm__symbol__range}{ofdm\_symbol\_range}}\ ofdm\_symbols,\ \mbox{\hyperlink{structsrsran_1_1crb__interval}{crb\_interval}}\ crbs)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid}{carrier\_subslot\_resource\_grid}}\&\ get\_carrier\_res\_grid(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00192\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_carrier(scs).subslot\_rbs;}
\DoxyCodeLine{00194\ \ \ \}}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00197\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator}{cell\_resource\_allocator}};}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \textcolor{keyword}{struct\ }carrier\_resource\_grid\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid}{carrier\_subslot\_resource\_grid}}\ subslot\_rbs;}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keyword}{explicit}\ carrier\_resource\_grid(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1scs__specific__carrier}{scs\_specific\_carrier}}\&\ carrier\_cfg);}
\DoxyCodeLine{00204\ \ \ \};}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ carrier\_resource\_grid\&\ \ \ \ \ \ \ get\_carrier(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs);}
\DoxyCodeLine{00207\ \ \ \textcolor{keyword}{const}\ carrier\_resource\_grid\&\ get\_carrier(\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{subcarrier\_spacing}}\ scs)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00210\ \ \ std::vector<carrier\_resource\_grid>\ \ \ \ \ carrier\_grids;}
\DoxyCodeLine{00211\ \ \ std::array<unsigned,\ NOF\_NUMEROLOGIES>\ numerology\_to\_grid\_idx;}
\DoxyCodeLine{00212\ \};}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00215\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\ \{}
\DoxyCodeLine{00216\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\_configuration}}\&\ cfg;}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00219\ \ \ \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator_a083f3cd2cbf56203a90287c69a7b4825}{slot}};}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00222\ \ \ \mbox{\hyperlink{structsrsran_1_1sched__result}{sched\_result}}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator_a70d301d0ce956abceb977075da25e166}{result}};}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00225\ \ \ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid}{cell\_slot\_resource\_grid}}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator_a22ad4a5661fe4bb888af0113b338700f}{dl\_res\_grid}};}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00228\ \ \ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid}{cell\_slot\_resource\_grid}}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator_a99f5e3bab492ad5e79fbaf468c3bce9e}{ul\_res\_grid}};}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\_configuration}}\&\ cfg\_);}
\DoxyCodeLine{00231\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\_configuration}}\&\ \ cfg\_,}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<scs\_specific\_carrier>}}\ dl\_scs\_carriers,}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1span}{span<scs\_specific\_carrier>}}\ ul\_scs\_carriers);}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00236\ \ \ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator_a8609982cc1e27483689ac2e8563022c8}{cell\_slot\_resource\_allocator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&)\ \ \ \ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00237\ \ \ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}(\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&\&)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00238\ \ \ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00239\ \ \ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&\ operator=(\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&\&)\ \ \ \ \ \ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00242\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator_a6f017f1bc917e2ed33c075fc7ecdba5d}{slot\_indication}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ sl);}
\DoxyCodeLine{00243\ \};}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00247\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator}{cell\_resource\_allocator}}\ \{}
\DoxyCodeLine{00251\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a40acefe0eb9a1c554528c93b918b2cfe}{RING\_MAX\_HISTORY\_SIZE}}\ =\ 8;}
\DoxyCodeLine{00253\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_adffdab4241fadee23e242a52bf498e9b}{RING\_ALLOCATOR\_SIZE}}\ =}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesrsran_a323833d342c4c58e3aabad5c5af05b08}{get\_allocator\_ring\_size\_gt\_min}}(\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a40acefe0eb9a1c554528c93b918b2cfe}{RING\_MAX\_HISTORY\_SIZE}}\ +\ \mbox{\hyperlink{namespacesrsran_ac83603de1e14db5c764c24bcfb2f5337}{SCHEDULER\_MAX\_K0}}\ +\ \mbox{\hyperlink{namespacesrsran_ab89d255a54f2f19864708c171ae14610}{NTN\_CELL\_SPECIFIC\_KOFFSET\_MAX}}\ +}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::max(\mbox{\hyperlink{namespacesrsran_a81a833c51571a69a53d4648e56b5702c}{SCHEDULER\_MAX\_K1}},\ \mbox{\hyperlink{namespacesrsran_ac80b8be5581653f0d3058e1027b7698b}{SCHEDULER\_MAX\_K2}}\ +\ \mbox{\hyperlink{namespacesrsran_a301eaa955cee78e4b30ff1cc82c684c4}{MAX\_MSG3\_DELTA}}));}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00258\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\_configuration}}\&\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}};}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00261\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_aed683391a2bae8e68dbdc7e30e4c44d2}{max\_dl\_slot\_alloc\_delay}};}
\DoxyCodeLine{00262\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ max\_ul\_slot\_alloc\_delay;}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator}{cell\_resource\_allocator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1cell__configuration}{cell\_configuration}}\&\ cfg\_);}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00267\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_aaabf70a4007c1e2983668e0351824d57}{slot\_indication}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ sl\_tx);}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00270\ \ \ \mbox{\hyperlink{namespacesrsran_a5b995a7b11715f3042e18281c21991ff}{du\_cell\_index\_t}}\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_addc74787adfe7cfbdda0c4950c6d30a5}{cell\_index}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a569167b4165a6dcd93b36bc5cee15105}{cfg}}.cell\_index;\ \}}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00273\ \ \ \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_aa52169b8647ed214277cbc027f52f4bc}{slot\_tx}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ last\_slot\_ind;\ \}}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00280\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22}{operator[]}}(\textcolor{keywordtype}{unsigned}\ slot\_delay)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00281\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00282\ \ \ \ \ assert\_valid\_sl(slot\_delay);}
\DoxyCodeLine{00283\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sl\_tx\ =\ last\_slot\_ind\ +\ slot\_delay;}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&\ r\ \ \ \ \ =\ *slots[sl\_tx.to\_uint()\ \%\ slots.size()];}
\DoxyCodeLine{00285\ \ \ \ \ srsran\_assert(r.\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator_a083f3cd2cbf56203a90287c69a7b4825}{slot}}\ ==\ sl\_tx,\ \textcolor{stringliteral}{"{}Bad\ access\ to\ uninitialized\ cell\_resource\_grid"{}});}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{00287\ \ \ \}}
\DoxyCodeLine{00288\ \ \ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22}{operator[]}}(\textcolor{keywordtype}{unsigned}\ slot\_delay)}
\DoxyCodeLine{00289\ \ \ \{}
\DoxyCodeLine{00290\ \ \ \ \ assert\_valid\_sl(slot\_delay);}
\DoxyCodeLine{00291\ \ \ \ \ \mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sl\_tx\ =\ last\_slot\_ind\ +\ slot\_delay;}
\DoxyCodeLine{00292\ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&\ r\ \ \ \ \ =\ *slots[sl\_tx.to\_uint()\ \%\ slots.size()];}
\DoxyCodeLine{00293\ \ \ \ \ srsran\_assert(r.\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator_a083f3cd2cbf56203a90287c69a7b4825}{slot}}\ ==\ sl\_tx,\ \textcolor{stringliteral}{"{}Bad\ access\ to\ uninitialized\ cell\_resource\_grid"{}});}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{00295\ \ \ \}}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ cell\_slot\_resource\_allocator\&\ \ \ \ \ \ \ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22}{operator[]}}(slot\_point\ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}})\ \{\ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22}{operator[]}}(slot\ -\/\ last\_slot\_ind);\ \}}
\DoxyCodeLine{00298\ \ \ \textcolor{keyword}{const}\ cell\_slot\_resource\_allocator\&\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22}{operator[]}}(slot\_point\ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}})\textcolor{keyword}{\ const}}
\DoxyCodeLine{00299\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_abd3b3d728ea54ea7a600c5c6183faa22}{operator[]}}(slot\ -\/\ last\_slot\_ind);}
\DoxyCodeLine{00301\ \ \ \}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00304\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}*\ \mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a434d6098dddce06653de45a28cc00395}{get\_history}}(\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\_point}}\ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}})\textcolor{keyword}{\ const}}
\DoxyCodeLine{00305\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keywordtype}{int}\ diff\ =\ last\_slot\_ind\ -\/\ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}};}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordflow}{if}\ (diff\ <\ 0\ or\ diff\ >=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator_a40acefe0eb9a1c554528c93b918b2cfe}{RING\_MAX\_HISTORY\_SIZE}}))\ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00309\ \ \ \ \ \}}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\_slot\_resource\_allocator}}\&\ r\ =\ *slots[\mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}}.to\_uint()\ \%\ slots.size()];}
\DoxyCodeLine{00311\ \ \ \ \ srsran\_assert(r.\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator_a083f3cd2cbf56203a90287c69a7b4825}{slot}}\ ==\ \mbox{\hyperlink{namespacesrsran_a457973e91fb03d0c262578c3bdf460f0a5e97994ed38a2b2f984f3b2b75012bf8}{slot}},\ \textcolor{stringliteral}{"{}Bad\ access\ to\ uninitialized\ cell\_resource\_grid"{}});}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordflow}{return}\ \&r;}
\DoxyCodeLine{00313\ \ \ \}}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00317\ \ \ \textcolor{keywordtype}{void}\ assert\_valid\_sl(\textcolor{keywordtype}{unsigned}\ slot\_delay)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00318\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00319\ \ \ \ \ srsran\_sanity\_check(slot\_delay\ <=\ max\_ul\_slot\_alloc\_delay,}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ cell\ resource\ pool\ is\ too\ small\ for\ accessing\ a\ slot\ with\ delay:\ \{\}"{}},}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ slot\_delay);}
\DoxyCodeLine{00322\ \ \ \}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00325\ \ \ slot\_point\ last\_slot\_ind;}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00328\ \ \ std::vector<std::unique\_ptr<cell\_slot\_resource\_allocator>>\ slots;}
\DoxyCodeLine{00329\ \};}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \}\ \textcolor{comment}{//\ namespace\ srsran}}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \textcolor{keyword}{namespace\ }fmt\ \{}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00336\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformatter}{formatter}}<\mbox{\hyperlink{namespacesrsran}{srsran}}::carrier\_subslot\_resource\_grid>\ \{}
\DoxyCodeLine{00337\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ParseContext>}
\DoxyCodeLine{00338\ \ \ \textcolor{keyword}{auto}\ parse(ParseContext\&\ ctx)}
\DoxyCodeLine{00339\ \ \ \{}
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{keywordflow}{return}\ ctx.begin();}
\DoxyCodeLine{00341\ \ \ \}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{00344\ \ \ \textcolor{keyword}{auto}\ format(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid}{srsran::carrier\_subslot\_resource\_grid}}\&\ grid,\ FormatContext\&\ ctx)}
\DoxyCodeLine{00345\ \ \ \{}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ !=\ \mbox{\hyperlink{namespacesrsran_a2ec632168c0292dc5fd78c9bd35f159b}{srsran::NOF\_OFDM\_SYM\_PER\_SLOT\_NORMAL\_CP}};\ ++i)\ \{}
\DoxyCodeLine{00347\ \ \ \ \ \ \ format\_to(ctx.out(),\ \textcolor{stringliteral}{"{}\(\backslash\)n\{\}"{}},\ grid.\mbox{\hyperlink{classsrsran_1_1carrier__subslot__resource__grid_a7c600702eaac7a1f49c0082dfe0f96df}{used\_crbs}}(\{0,\ grid.nof\_rbs()\},\ \{i,\ i\ +\ 1\}));}
\DoxyCodeLine{00348\ \ \ \ \ \}}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keywordflow}{return}\ ctx.out();}
\DoxyCodeLine{00350\ \ \ \}}
\DoxyCodeLine{00351\ \};}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00354\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structformatter}{formatter}}<\mbox{\hyperlink{namespacesrsran}{srsran}}::cell\_slot\_resource\_grid>\ \{}
\DoxyCodeLine{00355\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ParseContext>}
\DoxyCodeLine{00356\ \ \ \textcolor{keyword}{auto}\ parse(ParseContext\&\ ctx)}
\DoxyCodeLine{00357\ \ \ \{}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keywordflow}{return}\ ctx.begin();}
\DoxyCodeLine{00359\ \ \ \}}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{00362\ \ \ \textcolor{keyword}{auto}\ format(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid}{srsran::cell\_slot\_resource\_grid}}\&\ grid,\ FormatContext\&\ ctx)}
\DoxyCodeLine{00363\ \ \ \{}
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{keyword}{auto}\ scs\_list\ =\ grid.\mbox{\hyperlink{classsrsran_1_1cell__slot__resource__grid_a680aec6279612e720b624fefed5f263d}{active\_scs}}();}
\DoxyCodeLine{00365\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespacesrsran_aca64228c7486db8ce1f0a3118e8cedc8}{srsran::subcarrier\_spacing}}\ scs\ :\ scs\_list)\ \{}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ carrier\_grid\ =\ grid.get\_carrier\_res\_grid(scs);}
\DoxyCodeLine{00367\ \ \ \ \ \ \ format\_to(ctx.out(),\ \textcolor{stringliteral}{"{}\{\}kHz:\ \{\}\(\backslash\)n"{}},\ scs\_to\_khz(scs),\ carrier\_grid);}
\DoxyCodeLine{00368\ \ \ \ \ \}}
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{keywordflow}{return}\ ctx.out();}
\DoxyCodeLine{00370\ \ \ \}}
\DoxyCodeLine{00371\ \};}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \}\ \textcolor{comment}{//\ namespace\ fmt}}

\end{DoxyCode}
