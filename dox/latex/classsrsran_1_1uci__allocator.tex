\doxysection{srsran\+::uci\+\_\+allocator Class Reference}
\hypertarget{classsrsran_1_1uci__allocator}{}\label{classsrsran_1_1uci__allocator}\index{srsran::uci\_allocator@{srsran::uci\_allocator}}


UCI allocator interface. Depending on whether there is an existing PUSCH grant, it allocates the UCI either on the PUSCH or PUCCH.  




{\ttfamily \#include $<$uci\+\_\+allocator.\+h$>$}

Inheritance diagram for srsran\+::uci\+\_\+allocator\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classsrsran_1_1uci__allocator}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{classsrsran_1_1uci__allocator_afd4f1ff81475ddc02a6af42623a98e60}{slot\+\_\+indication}} (\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}} sl\+\_\+tx)=0
\begin{DoxyCompactList}\small\item\em Reset the internal counter of the allocated PDSCHs to be acknowledged per slot. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{structsrsran_1_1uci__allocation}{uci\+\_\+allocation}} $>$ \mbox{\hyperlink{classsrsran_1_1uci__allocator_a674277651ca609ca8e827986589305a3}{alloc\+\_\+uci\+\_\+harq\+\_\+ue}} (\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator}{cell\+\_\+resource\+\_\+allocator}} \&res\+\_\+alloc, \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}} crnti, const \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&ue\+\_\+cell\+\_\+cfg, unsigned k0, \mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ const uint8\+\_\+t $>$ k1\+\_\+list, const \mbox{\hyperlink{structsrsran_1_1pdcch__dl__information}{pdcch\+\_\+dl\+\_\+information}} \texorpdfstring{$\ast$}{*}fallback\+\_\+dci\+\_\+info=nullptr)=0
\item 
virtual void \mbox{\hyperlink{classsrsran_1_1uci__allocator_a7dc8ff45c9cfad1a418ce24f2c06d1ff}{multiplex\+\_\+uci\+\_\+on\+\_\+pusch}} (\mbox{\hyperlink{structsrsran_1_1ul__sched__info}{ul\+\_\+sched\+\_\+info}} \&pusch\+\_\+grant, \mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \&slot\+\_\+alloc, const \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&ue\+\_\+cell\+\_\+cfg, \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}} crnti)=0
\item 
virtual void \mbox{\hyperlink{classsrsran_1_1uci__allocator_a8988a7267faed735f86e43ddc04c70e8}{uci\+\_\+allocate\+\_\+sr\+\_\+opportunity}} (\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \&slot\+\_\+alloc, \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}} crnti, const \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&ue\+\_\+cell\+\_\+cfg)=0
\item 
virtual void \mbox{\hyperlink{classsrsran_1_1uci__allocator_a0f84d2218d19858514d4c0ae3617006f}{uci\+\_\+allocate\+\_\+csi\+\_\+opportunity}} (\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \&slot\+\_\+alloc, \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}} crnti, const \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&ue\+\_\+cell\+\_\+cfg)=0
\item 
virtual uint8\+\_\+t \mbox{\hyperlink{classsrsran_1_1uci__allocator_a9c7a7c379c79a8815d14d4a0daa17435}{get\+\_\+scheduled\+\_\+pdsch\+\_\+counter\+\_\+in\+\_\+ue\+\_\+uci}} (\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \&slot\+\_\+alloc, \mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}} crnti)=0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
UCI allocator interface. Depending on whether there is an existing PUSCH grant, it allocates the UCI either on the PUSCH or PUCCH. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classsrsran_1_1uci__allocator_a674277651ca609ca8e827986589305a3}\label{classsrsran_1_1uci__allocator_a674277651ca609ca8e827986589305a3} 
\index{srsran::uci\_allocator@{srsran::uci\_allocator}!alloc\_uci\_harq\_ue@{alloc\_uci\_harq\_ue}}
\index{alloc\_uci\_harq\_ue@{alloc\_uci\_harq\_ue}!srsran::uci\_allocator@{srsran::uci\_allocator}}
\doxysubsubsection{\texorpdfstring{alloc\_uci\_harq\_ue()}{alloc\_uci\_harq\_ue()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{classsrsran_1_1optional}{optional}}$<$ \mbox{\hyperlink{structsrsran_1_1uci__allocation}{uci\+\_\+allocation}} $>$ srsran\+::uci\+\_\+allocator\+::alloc\+\_\+uci\+\_\+harq\+\_\+ue (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1cell__resource__allocator}{cell\+\_\+resource\+\_\+allocator}} \&}]{res\+\_\+alloc,  }\item[{\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}}}]{crnti,  }\item[{const \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&}]{ue\+\_\+cell\+\_\+cfg,  }\item[{unsigned}]{k0,  }\item[{\mbox{\hyperlink{classsrsran_1_1span}{span}}$<$ const uint8\+\_\+t $>$}]{k1\+\_\+list,  }\item[{const \mbox{\hyperlink{structsrsran_1_1pdcch__dl__information}{pdcch\+\_\+dl\+\_\+information}} \texorpdfstring{$\ast$}{*}}]{fallback\+\_\+dci\+\_\+info = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Allocate the common PUCCH resource for HARQ-\/\+ACK for a given UE. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em res\+\_\+alloc} & struct with scheduling results. \\
\hline
\mbox{\texttt{ in}}  & {\em crnti} & RNTI of the UE. \\
\hline
\mbox{\texttt{ in}}  & {\em ue\+\_\+cell\+\_\+cfg} & user configuration. For the fallback mode case, this configuration is used to determine whether the slot coincides with a CSI report opportunity; in which case, the allocation of the UCI on common PUCCH resources will be skipped. \\
\hline
\mbox{\texttt{ in}}  & {\em k0} & k0 value, or delay (in slots) of PDSCH slot vs the corresponding PDCCH slot. \\
\hline
\mbox{\texttt{ in}}  & {\em k1\+\_\+list} & List of k1 candidates configured for UE. \\
\hline
\mbox{\texttt{ in}}  & {\em fallback\+\_\+dci\+\_\+info} & pointer to the information with DL DCI, used for scheduling the UCI on common PUCCH resources. If this is not {\ttfamily nullptr}, it triggers the UCI scheduling using common PUCCH resources; else, UCI will be scheduled either on dedicated PUCCH resources or on PUSCH. \\
\hline
\end{DoxyParams}


Implemented in \mbox{\hyperlink{classsrsran_1_1uci__allocator__impl_acd2cfbdf8a259b7a56d61acd258dabc2}{srsran\+::uci\+\_\+allocator\+\_\+impl}}, and \mbox{\hyperlink{classsrsran_1_1dummy__uci__allocator_a14376feac66b2c92905af6be5fbfcf78}{srsran\+::dummy\+\_\+uci\+\_\+allocator}}.

\Hypertarget{classsrsran_1_1uci__allocator_a9c7a7c379c79a8815d14d4a0daa17435}\label{classsrsran_1_1uci__allocator_a9c7a7c379c79a8815d14d4a0daa17435} 
\index{srsran::uci\_allocator@{srsran::uci\_allocator}!get\_scheduled\_pdsch\_counter\_in\_ue\_uci@{get\_scheduled\_pdsch\_counter\_in\_ue\_uci}}
\index{get\_scheduled\_pdsch\_counter\_in\_ue\_uci@{get\_scheduled\_pdsch\_counter\_in\_ue\_uci}!srsran::uci\_allocator@{srsran::uci\_allocator}}
\doxysubsubsection{\texorpdfstring{get\_scheduled\_pdsch\_counter\_in\_ue\_uci()}{get\_scheduled\_pdsch\_counter\_in\_ue\_uci()}}
{\footnotesize\ttfamily virtual uint8\+\_\+t srsran\+::uci\+\_\+allocator\+::get\+\_\+scheduled\+\_\+pdsch\+\_\+counter\+\_\+in\+\_\+ue\+\_\+uci (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \&}]{slot\+\_\+alloc,  }\item[{\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}}}]{crnti }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Get the number of PDSCHs currently scheduled for a given UE UCI. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em slot\+\_\+alloc} & struct with scheduling results. \\
\hline
\mbox{\texttt{ in}}  & {\em crnti} & C-\/\+RNTI of the UE. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns number of PDSCHs scheduled if UCI allocation if found, 0 otherwise. 
\end{DoxyReturn}


Implemented in \mbox{\hyperlink{classsrsran_1_1uci__allocator__impl_a16dcd0eedda8fe1a34f419b1bec7c2f6}{srsran\+::uci\+\_\+allocator\+\_\+impl}}, and \mbox{\hyperlink{classsrsran_1_1dummy__uci__allocator_a55d1dcdd8f004b375447c55050bbc5ea}{srsran\+::dummy\+\_\+uci\+\_\+allocator}}.

\Hypertarget{classsrsran_1_1uci__allocator_a7dc8ff45c9cfad1a418ce24f2c06d1ff}\label{classsrsran_1_1uci__allocator_a7dc8ff45c9cfad1a418ce24f2c06d1ff} 
\index{srsran::uci\_allocator@{srsran::uci\_allocator}!multiplex\_uci\_on\_pusch@{multiplex\_uci\_on\_pusch}}
\index{multiplex\_uci\_on\_pusch@{multiplex\_uci\_on\_pusch}!srsran::uci\_allocator@{srsran::uci\_allocator}}
\doxysubsubsection{\texorpdfstring{multiplex\_uci\_on\_pusch()}{multiplex\_uci\_on\_pusch()}}
{\footnotesize\ttfamily virtual void srsran\+::uci\+\_\+allocator\+::multiplex\+\_\+uci\+\_\+on\+\_\+pusch (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1ul__sched__info}{ul\+\_\+sched\+\_\+info}} \&}]{pusch\+\_\+grant,  }\item[{\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \&}]{slot\+\_\+alloc,  }\item[{const \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&}]{ue\+\_\+cell\+\_\+cfg,  }\item[{\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}}}]{crnti }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Multiplexes the UCI on PUSCH, by removing the UCI on the PUCCH (if present) and adding it to the PUSCH. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em pusch\+\_\+grant} & struct with PUSCH PDU where UCI need to be allocated. \\
\hline
\mbox{\texttt{ in,out}}  & {\em slot\+\_\+alloc} & struct with scheduling results. \\
\hline
\mbox{\texttt{ in}}  & {\em ue\+\_\+cell\+\_\+cfg} & user configuration. \\
\hline
\mbox{\texttt{ in}}  & {\em crnti} & C-\/\+RNTI of the UE. \\
\hline
\end{DoxyParams}


Implemented in \mbox{\hyperlink{classsrsran_1_1uci__allocator__impl_a4fddfb180ae008720176729b6d33e862}{srsran\+::uci\+\_\+allocator\+\_\+impl}}, and \mbox{\hyperlink{classsrsran_1_1dummy__uci__allocator_a6fbb403a883e6318a3d0760dd2dc972e}{srsran\+::dummy\+\_\+uci\+\_\+allocator}}.

\Hypertarget{classsrsran_1_1uci__allocator_afd4f1ff81475ddc02a6af42623a98e60}\label{classsrsran_1_1uci__allocator_afd4f1ff81475ddc02a6af42623a98e60} 
\index{srsran::uci\_allocator@{srsran::uci\_allocator}!slot\_indication@{slot\_indication}}
\index{slot\_indication@{slot\_indication}!srsran::uci\_allocator@{srsran::uci\_allocator}}
\doxysubsubsection{\texorpdfstring{slot\_indication()}{slot\_indication()}}
{\footnotesize\ttfamily virtual void srsran\+::uci\+\_\+allocator\+::slot\+\_\+indication (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsrsran_1_1slot__point}{slot\+\_\+point}}}]{sl\+\_\+tx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Reset the internal counter of the allocated PDSCHs to be acknowledged per slot. 



Implemented in \mbox{\hyperlink{classsrsran_1_1uci__allocator__impl_a84eb829ee60066ebf2e38f13386e45c8}{srsran\+::uci\+\_\+allocator\+\_\+impl}}, and \mbox{\hyperlink{classsrsran_1_1dummy__uci__allocator_a0f8596d75c08a788d7ec8b682d0d9d1d}{srsran\+::dummy\+\_\+uci\+\_\+allocator}}.

\Hypertarget{classsrsran_1_1uci__allocator_a0f84d2218d19858514d4c0ae3617006f}\label{classsrsran_1_1uci__allocator_a0f84d2218d19858514d4c0ae3617006f} 
\index{srsran::uci\_allocator@{srsran::uci\_allocator}!uci\_allocate\_csi\_opportunity@{uci\_allocate\_csi\_opportunity}}
\index{uci\_allocate\_csi\_opportunity@{uci\_allocate\_csi\_opportunity}!srsran::uci\_allocator@{srsran::uci\_allocator}}
\doxysubsubsection{\texorpdfstring{uci\_allocate\_csi\_opportunity()}{uci\_allocate\_csi\_opportunity()}}
{\footnotesize\ttfamily virtual void srsran\+::uci\+\_\+allocator\+::uci\+\_\+allocate\+\_\+csi\+\_\+opportunity (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \&}]{slot\+\_\+alloc,  }\item[{\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}}}]{crnti,  }\item[{const \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&}]{ue\+\_\+cell\+\_\+cfg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Allocates the CSI opportunities for a given UE. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em slot\+\_\+alloc} & struct with scheduling results. \\
\hline
\mbox{\texttt{ in}}  & {\em crnti} & C-\/\+RNTI of the UE. \\
\hline
\mbox{\texttt{ in}}  & {\em ue\+\_\+cell\+\_\+cfg} & user configuration. \\
\hline
\end{DoxyParams}


Implemented in \mbox{\hyperlink{classsrsran_1_1uci__allocator__impl_a8822e6aa48eadc564e20f040e34e21dd}{srsran\+::uci\+\_\+allocator\+\_\+impl}}, and \mbox{\hyperlink{classsrsran_1_1dummy__uci__allocator_aa834664913cb4fc1c183d7830e312334}{srsran\+::dummy\+\_\+uci\+\_\+allocator}}.

\Hypertarget{classsrsran_1_1uci__allocator_a8988a7267faed735f86e43ddc04c70e8}\label{classsrsran_1_1uci__allocator_a8988a7267faed735f86e43ddc04c70e8} 
\index{srsran::uci\_allocator@{srsran::uci\_allocator}!uci\_allocate\_sr\_opportunity@{uci\_allocate\_sr\_opportunity}}
\index{uci\_allocate\_sr\_opportunity@{uci\_allocate\_sr\_opportunity}!srsran::uci\_allocator@{srsran::uci\_allocator}}
\doxysubsubsection{\texorpdfstring{uci\_allocate\_sr\_opportunity()}{uci\_allocate\_sr\_opportunity()}}
{\footnotesize\ttfamily virtual void srsran\+::uci\+\_\+allocator\+::uci\+\_\+allocate\+\_\+sr\+\_\+opportunity (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsrsran_1_1cell__slot__resource__allocator}{cell\+\_\+slot\+\_\+resource\+\_\+allocator}} \&}]{slot\+\_\+alloc,  }\item[{\mbox{\hyperlink{namespacesrsran_a1d83bcd76f2b7c6251855be8472a46f5}{rnti\+\_\+t}}}]{crnti,  }\item[{const \mbox{\hyperlink{classsrsran_1_1ue__cell__configuration}{ue\+\_\+cell\+\_\+configuration}} \&}]{ue\+\_\+cell\+\_\+cfg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Allocates the SR opportunities for a given UE. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em slot\+\_\+alloc} & struct with scheduling results. \\
\hline
\mbox{\texttt{ in}}  & {\em crnti} & C-\/\+RNTI of the UE. \\
\hline
\mbox{\texttt{ in}}  & {\em ue\+\_\+cell\+\_\+cfg} & user configuration. \\
\hline
\end{DoxyParams}


Implemented in \mbox{\hyperlink{classsrsran_1_1uci__allocator__impl_adc49dd1f1e934b61b239929608850414}{srsran\+::uci\+\_\+allocator\+\_\+impl}}, and \mbox{\hyperlink{classsrsran_1_1dummy__uci__allocator_a0416761daacce1608a862e04c7e351b8}{srsran\+::dummy\+\_\+uci\+\_\+allocator}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lib/scheduler/uci\+\_\+scheduling/uci\+\_\+allocator.\+h\end{DoxyCompactItemize}
