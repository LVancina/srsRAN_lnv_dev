<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>srsRAN Docs: srsran::ofdm_prach_demodulator_impl Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">srsRAN Docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/def/namespacesrsran.html">srsran</a></li><li class="navelem"><a class="el" href="../../d0/d80/classsrsran_1_1ofdm__prach__demodulator__impl.html">ofdm_prach_demodulator_impl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../de/d04/classsrsran_1_1ofdm__prach__demodulator__impl-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">srsran::ofdm_prach_demodulator_impl Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Describes a generic OFDM PRACH demodulator.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d0/d63/ofdm__prach__demodulator__impl_8h_source.html">ofdm_prach_demodulator_impl.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for srsran::ofdm_prach_demodulator_impl:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/dcb/classsrsran_1_1ofdm__prach__demodulator__impl__inherit__graph.png" border="0" usemap="#asrsran_1_1ofdm__prach__demodulator__impl_inherit__map" alt="Inheritance graph"/></div>
<map name="asrsran_1_1ofdm__prach__demodulator__impl_inherit__map" id="asrsran_1_1ofdm__prach__demodulator__impl_inherit__map">
<area shape="rect" title="Describes a generic OFDM PRACH demodulator." alt="" coords="16,153,212,268"/>
<area shape="rect" href="../../d6/d7c/classsrsran_1_1ofdm__prach__demodulator.html" title="OFDM PRACH demodulator." alt="" coords="5,5,223,105"/>
<area shape="poly" title=" " alt="" coords="117,119,117,153,111,153,111,119"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for srsran::ofdm_prach_demodulator_impl:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dd6/classsrsran_1_1ofdm__prach__demodulator__impl__coll__graph.png" border="0" usemap="#asrsran_1_1ofdm__prach__demodulator__impl_coll__map" alt="Collaboration graph"/></div>
<map name="asrsran_1_1ofdm__prach__demodulator__impl_coll__map" id="asrsran_1_1ofdm__prach__demodulator__impl_coll__map">
<area shape="rect" title="Describes a generic OFDM PRACH demodulator." alt="" coords="16,153,212,268"/>
<area shape="rect" href="../../d6/d7c/classsrsran_1_1ofdm__prach__demodulator.html" title="OFDM PRACH demodulator." alt="" coords="5,5,223,105"/>
<area shape="poly" title=" " alt="" coords="117,119,117,153,111,153,111,119"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a20b8a2e97ffe9bf9d2b6687415dae3a2" id="r_a20b8a2e97ffe9bf9d2b6687415dae3a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">using</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20b8a2e97ffe9bf9d2b6687415dae3a2">dft_processors_table</a></td></tr>
<tr class="separator:a20b8a2e97ffe9bf9d2b6687415dae3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a164863267551f78d41f633d02c382a53" id="r_a164863267551f78d41f633d02c382a53"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a164863267551f78d41f633d02c382a53">ofdm_prach_demodulator_impl</a> (<a class="el" href="../../dd/df1/classsrsran_1_1sampling__rate.html">sampling_rate</a> <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">srate_</a>, <a class="el" href="../../d2/dbb/classsrsran_1_1slotted__id__table.html">dft_processors_table</a> <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dft_processors_</a>)</td></tr>
<tr class="memdesc:a164863267551f78d41f633d02c382a53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a PRACH OFDM demodulator.  <br /></td></tr>
<tr class="separator:a164863267551f78d41f633d02c382a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6c351530f5dc139e1f2971dbaeb9482" id="r_ad6c351530f5dc139e1f2971dbaeb9482"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6c351530f5dc139e1f2971dbaeb9482">demodulate</a> (<a class="el" href="../../d0/d93/classsrsran_1_1prach__buffer.html">prach_buffer</a> &amp;buffer, <a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d9/def/namespacesrsran.html#adb0c7723c7e69c78add18ca453dd1dbc">cf_t</a> &gt; input, <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d3/dcc/structsrsran_1_1ofdm__prach__demodulator_1_1configuration.html">configuration</a> &amp;config) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:ad6c351530f5dc139e1f2971dbaeb9482"><td class="mdescLeft">&#160;</td><td class="mdescRight">Demodulates a PRACH occasion as described in TS38.211 Section 5.3.2.  <br /></td></tr>
<tr class="separator:ad6c351530f5dc139e1f2971dbaeb9482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsrsran_1_1ofdm__prach__demodulator"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classsrsran_1_1ofdm__prach__demodulator')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d6/d7c/classsrsran_1_1ofdm__prach__demodulator.html">srsran::ofdm_prach_demodulator</a></td></tr>
<tr class="memitem:a1911c173370ee369f26df3c973a69b9f inherit pub_methods_classsrsran_1_1ofdm__prach__demodulator" id="r_a1911c173370ee369f26df3c973a69b9f"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">virtual</a>&#160;</td><td class="memItemRight" valign="bottom"><b>~ofdm_prach_demodulator</b> ()=<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">default</a></td></tr>
<tr class="memdesc:a1911c173370ee369f26df3c973a69b9f inherit pub_methods_classsrsran_1_1ofdm__prach__demodulator"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor. <br /></td></tr>
<tr class="separator:a1911c173370ee369f26df3c973a69b9f inherit pub_methods_classsrsran_1_1ofdm__prach__demodulator"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Describes a generic OFDM PRACH demodulator. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a20b8a2e97ffe9bf9d2b6687415dae3a2" name="a20b8a2e97ffe9bf9d2b6687415dae3a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20b8a2e97ffe9bf9d2b6687415dae3a2">&#9670;&#160;</a></span>dft_processors_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">using</a> <a class="el" href="../../d2/dbb/classsrsran_1_1slotted__id__table.html">srsran::ofdm_prach_demodulator_impl::dft_processors_table</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"> slotted_id_table&lt;<a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#a0c776fcbbe92d002557487b5ea9c6950">prach_subcarrier_spacing</a>,</div>
<div class="line">                                                std::unique_ptr&lt;dft_processor&gt;,</div>
<div class="line">                                                <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(prach_subcarrier_spacing::invalid)&gt;</div>
<div class="ttc" id="anamespacesrsran_html_a0c776fcbbe92d002557487b5ea9c6950"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a0c776fcbbe92d002557487b5ea9c6950">srsran::prach_subcarrier_spacing</a></div><div class="ttdeci">prach_subcarrier_spacing</div><div class="ttdoc">Random Access subcarrier spacing.</div><div class="ttdef"><b>Definition</b> prach_subcarrier_spacing.h:31</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a164863267551f78d41f633d02c382a53" name="a164863267551f78d41f633d02c382a53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a164863267551f78d41f633d02c382a53">&#9670;&#160;</a></span>ofdm_prach_demodulator_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">srsran::ofdm_prach_demodulator_impl::ofdm_prach_demodulator_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/df1/classsrsran_1_1sampling__rate.html">sampling_rate</a></td>          <td class="paramname"><span class="paramname"><em>srate_</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/dbb/classsrsran_1_1slotted__id__table.html">dft_processors_table</a></td>          <td class="paramname"><span class="paramname"><em>dft_processors_</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds a PRACH OFDM demodulator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">srate_</td><td>Sampling rate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dft_processors_</td><td>Table with one DFT processor for each of the possible RA subcarrier spacings. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>An assertion is triggered if <code>dft_processors_</code> do not contain a valid DFT processor for each of the possible random access subcarrier spacings. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   50</span>                                                                                          :</div>
<div class="line"><span class="lineno">   51</span>    srate(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">srate_</a>), dft_processors(std::move(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dft_processors_</a>))</div>
<div class="line"><span class="lineno">   52</span>  {</div>
<div class="line"><span class="lineno">   53</span>    <span class="keyword">using </span>int_type = std::underlying_type_t&lt;prach_subcarrier_spacing&gt;;</div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">for</span> (int_type <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_scs</a>     = <span class="keyword">static_cast&lt;</span>int_type<span class="keyword">&gt;</span>(prach_subcarrier_spacing::kHz15),</div>
<div class="line"><span class="lineno">   55</span>                  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_scs_end</a> = <span class="keyword">static_cast&lt;</span>int_type<span class="keyword">&gt;</span>(prach_subcarrier_spacing::invalid);</div>
<div class="line"><span class="lineno">   56</span>         <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_scs</a> != <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_scs_end</a>;</div>
<div class="line"><span class="lineno">   57</span>         ++<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_scs</a>) {</div>
<div class="line"><span class="lineno">   58</span>      prach_subcarrier_spacing ra_scs = <span class="keyword">static_cast&lt;</span>prach_subcarrier_spacing<span class="keyword">&gt;</span>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_scs</a>);</div>
<div class="line"><span class="lineno">   59</span>      srsran_assert(dft_processors.contains(ra_scs),</div>
<div class="line"><span class="lineno">   60</span>                    <span class="stringliteral">&quot;Table does not contain a DFT processor for {} subcarrier spacing.&quot;</span>,</div>
<div class="line"><span class="lineno">   61</span>                    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a5fa5b607b51bce906141a06d7ecdebbf">to_string</a>(ra_scs));</div>
<div class="line"><span class="lineno">   62</span>      srsran_assert(dft_processors[ra_scs], <span class="stringliteral">&quot;Invalid DFT processor for {} subcarrier spacing.&quot;</span>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a5fa5b607b51bce906141a06d7ecdebbf">to_string</a>(ra_scs));</div>
<div class="line"><span class="lineno">   63</span>      srsran_assert(dft_processors[ra_scs]-&gt;get_direction() == <a class="code hl_enumvalue" href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40a4c5d06b02c97731aaa976179c62dcf76">dft_processor::direction::DIRECT</a>,</div>
<div class="line"><span class="lineno">   64</span>                    <span class="stringliteral">&quot;Invalid DFT processor direction for {} subcarrier spacing.&quot;</span>,</div>
<div class="line"><span class="lineno">   65</span>                    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a5fa5b607b51bce906141a06d7ecdebbf">to_string</a>(ra_scs));</div>
<div class="line"><span class="lineno">   66</span>      srsran_assert(dft_processors[ra_scs]-&gt;get_size() == srate.<a class="code hl_function" href="../../dd/df1/classsrsran_1_1sampling__rate.html#a05c74a02ecc553999bf80a4819f4c7fa">get_dft_size</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a4172874a14aceea21d35086683d66f1b">ra_scs_to_Hz</a>(ra_scs)),</div>
<div class="line"><span class="lineno">   67</span>                    <span class="stringliteral">&quot;Invalid DFT processor size (i.e., {}) for {} subcarrier spacing.&quot;</span>,</div>
<div class="line"><span class="lineno">   68</span>                    dft_processors[ra_scs]-&gt;get_size(),</div>
<div class="line"><span class="lineno">   69</span>                    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a5fa5b607b51bce906141a06d7ecdebbf">to_string</a>(ra_scs));</div>
<div class="line"><span class="lineno">   70</span>    }</div>
<div class="line"><span class="lineno">   71</span>  }</div>
<div class="ttc" id="aclasssrsran_1_1dft__processor_html_ad6d2dd1eff168ecf482b422a7c363d40a4c5d06b02c97731aaa976179c62dcf76"><div class="ttname"><a href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40a4c5d06b02c97731aaa976179c62dcf76">srsran::dft_processor::direction::DIRECT</a></div><div class="ttdeci">@ DIRECT</div><div class="ttdoc">Converts a time domain signal into frequency domain.</div></div>
<div class="ttc" id="aclasssrsran_1_1sampling__rate_html_a05c74a02ecc553999bf80a4819f4c7fa"><div class="ttname"><a href="../../dd/df1/classsrsran_1_1sampling__rate.html#a05c74a02ecc553999bf80a4819f4c7fa">srsran::sampling_rate::get_dft_size</a></div><div class="ttdeci">constexpr unsigned get_dft_size(T scs_Hz) const</div><div class="ttdoc">Gets the DFT size corresponding to the sampling rate, for a given subcarrier spacing.</div><div class="ttdef"><b>Definition</b> sampling_rate.h:74</div></div>
<div class="ttc" id="anamespacesrsran_html_a4172874a14aceea21d35086683d66f1b"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a4172874a14aceea21d35086683d66f1b">srsran::ra_scs_to_Hz</a></div><div class="ttdeci">constexpr unsigned ra_scs_to_Hz(prach_subcarrier_spacing ra_scs)</div><div class="ttdoc">Converts SCS to its integer value in hertz.</div><div class="ttdef"><b>Definition</b> prach_subcarrier_spacing.h:82</div></div>
<div class="ttc" id="anamespacesrsran_html_a58e7c9f2c51a9ad6a0899b46d5315723"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">srsran::mask_msb_ones</a></div><div class="ttdeci">constexpr Integer mask_msb_ones(size_t N)</div><div class="ttdoc">Returns an unsigned integer with the N most significant bits (MSB) set to one, and the remaining bits...</div><div class="ttdef"><b>Definition</b> bounded_bitset.h:65</div></div>
<div class="ttc" id="anamespacesrsran_html_a5fa5b607b51bce906141a06d7ecdebbf"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a5fa5b607b51bce906141a06d7ecdebbf">srsran::to_string</a></div><div class="ttdeci">const char * to_string(subcarrier_spacing scs)</div><div class="ttdoc">Convert SCS to string.</div><div class="ttdef"><b>Definition</b> subcarrier_spacing.h:86</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad6c351530f5dc139e1f2971dbaeb9482" name="ad6c351530f5dc139e1f2971dbaeb9482"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6c351530f5dc139e1f2971dbaeb9482">&#9670;&#160;</a></span>demodulate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ofdm_prach_demodulator_impl::demodulate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d93/classsrsran_1_1prach__buffer.html">prach_buffer</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>buffer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d9/def/namespacesrsran.html#adb0c7723c7e69c78add18ca453dd1dbc">cf_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>input</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d3/dcc/structsrsran_1_1ofdm__prach__demodulator_1_1configuration.html">configuration</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>config</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Demodulates a PRACH occasion as described in TS38.211 Section 5.3.2. </p>
<p>For long preambles, the input shall contain the cyclic prefix of length <picture><source srcset="../../form_234_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$N_{CP,l}^{RA}$" src="../../form_234.png"/></picture>) and a time-domain sequence of length <picture><source srcset="../../form_81_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$N_u$" src="../../form_81.png"/></picture>. Also, the number of time-domain occasions must be one.</p>
<p>For short preamble formats, the input shall correspond to one slot at configuration::pusch_scs.</p>
<p>An assertion is triggered if:</p><ul>
<li>the input samples are not sufficient,</li>
<li>the buffer dimensions cannot contain the demodulated sequences, or</li>
<li>the port identifier exceeds the number of ports contained in the destination buffer.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>Frequency-domain signal corresponding to one PRACH receive occasion. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input</td><td>PRACH receive window baseband samples. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>PRACH demodulator configuration parameters. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d6/d7c/classsrsran_1_1ofdm__prach__demodulator.html#a8512816c304b2e662d199b68fa9bdf73">srsran::ofdm_prach_demodulator</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span>{</div>
<div class="line"><span class="lineno">   35</span>  <span class="comment">// Cyclic prefix extension for short preambles at 0 and 0.5 ms from the start of the subframe.</span></div>
<div class="line"><span class="lineno">   36</span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_class" href="../../d1/d59/classsrsran_1_1phy__time__unit.html">phy_time_unit</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sixteen_kappa</a> = <a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#aec95e7a791907476aea8a4fb4c7c1f2b">phy_time_unit::from_units_of_kappa</a>(16);</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>  <span class="comment">// PUSCH symbol duration.</span></div>
<div class="line"><span class="lineno">   39</span>  <a class="code hl_class" href="../../d1/d59/classsrsran_1_1phy__time__unit.html">phy_time_unit</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pusch_symbol_duration</a> =</div>
<div class="line"><span class="lineno">   40</span>      <a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#aec95e7a791907476aea8a4fb4c7c1f2b">phy_time_unit::from_units_of_kappa</a>((144U + 2048U) &gt;&gt; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a226e52de355262a1ad4e998b4cedefd7">to_numerology_value</a>(config.pusch_scs));</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>  <span class="comment">// Validate configuration.</span></div>
<div class="line"><span class="lineno">   43</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a7c2e3c58a56b57be024f8bfc3271186d">is_short_preamble</a>(config.format)) {</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_window_length</a> =</div>
<div class="line"><span class="lineno">   45</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#aae60fdd6dfc5e4aad04607ddbe5982b1">get_prach_window_duration</a>(config.format, config.pusch_scs, config.start_symbol, config.nof_td_occasions)</div>
<div class="line"><span class="lineno">   46</span>            .<a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a942e82e30afbcebbc43f1943738f9d19">to_samples</a>(srate.<a class="code hl_function" href="../../dd/df1/classsrsran_1_1sampling__rate.html#a3e20d54a0ea144abe33e32ac198b44e2">to_Hz</a>());</div>
<div class="line"><span class="lineno">   47</span>    srsran_assert(</div>
<div class="line"><span class="lineno">   48</span>        input.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#ad0e376d95ca916144eac76f27f0654ac">size</a>() &gt;= <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_window_length</a>,</div>
<div class="line"><span class="lineno">   49</span>        <span class="stringliteral">&quot;The number of input samples (i.e., {}) must be equal to or greater than the PRACH window (i.e., {}).&quot;</span>,</div>
<div class="line"><span class="lineno">   50</span>        input.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#ad0e376d95ca916144eac76f27f0654ac">size</a>(),</div>
<div class="line"><span class="lineno">   51</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_window_length</a>);</div>
<div class="line"><span class="lineno">   52</span>    srsran_assert(config.nof_td_occasions &gt; 0, <span class="stringliteral">&quot;The number of time-domain occasions must be greater than 0.&quot;</span>);</div>
<div class="line"><span class="lineno">   53</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   54</span>    srsran_assert(config.nof_td_occasions == 1, <span class="stringliteral">&quot;Long preambles only support one occasion.&quot;</span>);</div>
<div class="line"><span class="lineno">   55</span>  }</div>
<div class="line"><span class="lineno">   56</span>  srsran_assert(config.nof_td_occasions &lt;= buffer.<a class="code hl_function" href="../../d0/d93/classsrsran_1_1prach__buffer.html#aae53ad60dded01236f770064bb9e7633">get_max_nof_td_occasions</a>(),</div>
<div class="line"><span class="lineno">   57</span>                <span class="stringliteral">&quot;The number of time-domain occasions (i.e., {}) exceeds the buffer maximum number of &quot;</span></div>
<div class="line"><span class="lineno">   58</span>                <span class="stringliteral">&quot;time-domain occasions (i.e., {}).&quot;</span>,</div>
<div class="line"><span class="lineno">   59</span>                config.nof_td_occasions,</div>
<div class="line"><span class="lineno">   60</span>                buffer.<a class="code hl_function" href="../../d0/d93/classsrsran_1_1prach__buffer.html#aae53ad60dded01236f770064bb9e7633">get_max_nof_td_occasions</a>());</div>
<div class="line"><span class="lineno">   61</span>  srsran_assert(config.nof_fd_occasions &lt;= buffer.<a class="code hl_function" href="../../d0/d93/classsrsran_1_1prach__buffer.html#a98309a9f4aaac3f325d16693ef916f33">get_max_nof_fd_occasions</a>(),</div>
<div class="line"><span class="lineno">   62</span>                <span class="stringliteral">&quot;The number of frequency-domain occasions (i.e., {}) exceeds the buffer maximum number of &quot;</span></div>
<div class="line"><span class="lineno">   63</span>                <span class="stringliteral">&quot;frequency-domain occasions (i.e., {}).&quot;</span>,</div>
<div class="line"><span class="lineno">   64</span>                config.nof_fd_occasions,</div>
<div class="line"><span class="lineno">   65</span>                buffer.<a class="code hl_function" href="../../d0/d93/classsrsran_1_1prach__buffer.html#a98309a9f4aaac3f325d16693ef916f33">get_max_nof_fd_occasions</a>());</div>
<div class="line"><span class="lineno">   66</span>  srsran_assert(config.port &lt; buffer.<a class="code hl_function" href="../../d0/d93/classsrsran_1_1prach__buffer.html#a907028ab71829eacba8111ac864ed2da">get_max_nof_ports</a>(),</div>
<div class="line"><span class="lineno">   67</span>                <span class="stringliteral">&quot;The port identifier (i.e., {}) exceeds the maximum number of PRACH buffer ports (i.e., {}).&quot;</span>,</div>
<div class="line"><span class="lineno">   68</span>                config.port,</div>
<div class="line"><span class="lineno">   69</span>                buffer.<a class="code hl_function" href="../../d0/d93/classsrsran_1_1prach__buffer.html#a907028ab71829eacba8111ac864ed2da">get_max_nof_ports</a>());</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_td_occasion</a> = 0; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_td_occasion</a> != config.nof_td_occasions; ++<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_td_occasion</a>) {</div>
<div class="line"><span class="lineno">   72</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_last_occasion</a> = (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_td_occasion</a> == (config.nof_td_occasions - 1));</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>    <span class="comment">// Get preamble information for the time occasion.</span></div>
<div class="line"><span class="lineno">   75</span>    <a class="code hl_struct" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html">prach_preamble_information</a> preamble_info =</div>
<div class="line"><span class="lineno">   76</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#aaea6c484cd5f8113a5b11434d68e371b">is_long_preamble</a>(config.format) ? <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a41d072dc823c78c2627da83a877dcf5a">get_prach_preamble_long_info</a>(config.format)</div>
<div class="line"><span class="lineno">   77</span>                                        : <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a33cfd882b612da5eceff76a95662d0b3">get_prach_preamble_short_info</a>(config.format,</div>
<div class="line"><span class="lineno">   78</span>                                                                        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a0d5bec5128991413e4e3a59ca6e16426">to_ra_subcarrier_spacing</a>(config.pusch_scs),</div>
<div class="line"><span class="lineno">   79</span>                                                                        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_last_occasion</a>);</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pusch_scs_Hz</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a8c3848f1144990e3777cdc7e1ab27cf7">scs_to_khz</a>(config.pusch_scs) * 1000;</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    <span class="comment">// Calculate time-domain occasion symbol start.</span></div>
<div class="line"><span class="lineno">   84</span>    <span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start_symbol</a> = config.start_symbol + <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a7c4ecbbc13088764ba440e5bb5f62a35">get_preamble_duration</a>(config.format) * <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_td_occasion</a>;</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="comment">// Calculate time-domain occasion start time.</span></div>
<div class="line"><span class="lineno">   87</span>    <a class="code hl_class" href="../../d1/d59/classsrsran_1_1phy__time__unit.html">phy_time_unit</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pusch_symbol_duration</a> * <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start_symbol</a>;</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="comment">// Add sixteen kappa units if the symbol doesn&#39;t start at the beginning of the slot.</span></div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start</a> &gt; <a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a9759195d4f33e9afbf1c790ab103af94">phy_time_unit::from_seconds</a>(0.0)) {</div>
<div class="line"><span class="lineno">   91</span>      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start</a> += <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sixteen_kappa</a>;</div>
<div class="line"><span class="lineno">   92</span>    }</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    <span class="comment">// Add sixteen kappa units if the symbol starts more than 0.5 ms after the beginning of the slot.</span></div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start</a> &gt; <a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a9759195d4f33e9afbf1c790ab103af94">phy_time_unit::from_seconds</a>(0.5e-3)) {</div>
<div class="line"><span class="lineno">   96</span>      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start</a> += <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sixteen_kappa</a>;</div>
<div class="line"><span class="lineno">   97</span>    }</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    <span class="comment">// Calculate time-domain occasion end time.</span></div>
<div class="line"><span class="lineno">  100</span>    <a class="code hl_class" href="../../d1/d59/classsrsran_1_1phy__time__unit.html">phy_time_unit</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_end</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start</a> + preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a3b327e535ddff17fbba0e2f9b96169d3">cp_length</a> + preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#aef1493b57fbc2fdbc433976b4bdec7f4">symbol_length</a>;</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    <span class="comment">// Add sixteen kappa to the cyclic prefix length if ...</span></div>
<div class="line"><span class="lineno">  103</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a7c2e3c58a56b57be024f8bfc3271186d">is_short_preamble</a>(preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a1cf7f9574b0a8249a736a0b6f39b6f1e">scs</a>)) {</div>
<div class="line"><span class="lineno">  104</span>      <span class="comment">// The occasion overlaps with time zero.</span></div>
<div class="line"><span class="lineno">  105</span>      <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start</a> &lt;= <a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a9759195d4f33e9afbf1c790ab103af94">phy_time_unit::from_seconds</a>(0.0)) &amp;&amp;</div>
<div class="line"><span class="lineno">  106</span>          (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_end</a> &gt;= <a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a9759195d4f33e9afbf1c790ab103af94">phy_time_unit::from_seconds</a>(0.0))) {</div>
<div class="line"><span class="lineno">  107</span>        preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a3b327e535ddff17fbba0e2f9b96169d3">cp_length</a> += <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sixteen_kappa</a>;</div>
<div class="line"><span class="lineno">  108</span>      }</div>
<div class="line"><span class="lineno">  109</span>      <span class="comment">// The occasion overlaps with time 0.5ms from the beginning of the slot.</span></div>
<div class="line"><span class="lineno">  110</span>      <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start</a> &lt;= <a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a9759195d4f33e9afbf1c790ab103af94">phy_time_unit::from_seconds</a>(0.5e-3)) &amp;&amp;</div>
<div class="line"><span class="lineno">  111</span>          (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_end</a> &gt;= <a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a9759195d4f33e9afbf1c790ab103af94">phy_time_unit::from_seconds</a>(0.5e-3))) {</div>
<div class="line"><span class="lineno">  112</span>        preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a3b327e535ddff17fbba0e2f9b96169d3">cp_length</a> += <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sixteen_kappa</a>;</div>
<div class="line"><span class="lineno">  113</span>      }</div>
<div class="line"><span class="lineno">  114</span>    }</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>    <span class="comment">// Calculate occasion duration.</span></div>
<div class="line"><span class="lineno">  117</span>    <a class="code hl_class" href="../../d1/d59/classsrsran_1_1phy__time__unit.html">phy_time_unit</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">occasion_duration</a> = preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a3b327e535ddff17fbba0e2f9b96169d3">cp_length</a> + preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#aef1493b57fbc2fdbc433976b4bdec7f4">symbol_length</a>;</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>    <span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sample_offset</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">t_occasion_start</a>.<a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a942e82e30afbcebbc43f1943738f9d19">to_samples</a>(srate.<a class="code hl_function" href="../../dd/df1/classsrsran_1_1sampling__rate.html#a3e20d54a0ea144abe33e32ac198b44e2">to_Hz</a>());</div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordtype">unsigned</span> nof_samples   = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">occasion_duration</a>.to_samples(srate.<a class="code hl_function" href="../../dd/df1/classsrsran_1_1sampling__rate.html#a3e20d54a0ea144abe33e32ac198b44e2">to_Hz</a>());</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="comment">// Select view of the input samples for the occasion.</span></div>
<div class="line"><span class="lineno">  123</span>    <a class="code hl_class" href="../../de/d4c/classsrsran_1_1span.html">span&lt;const cf_t&gt;</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">input_occasion</a> = input.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#ac5f02596fcb6e8f430a3e11e47a6d7e8">subspan</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sample_offset</a>, nof_samples);</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>    <span class="comment">// Get frequency mapping information, common for all frequency-domain occasions.</span></div>
<div class="line"><span class="lineno">  126</span>    <a class="code hl_struct" href="../../db/d79/structsrsran_1_1prach__frequency__mapping__information.html">prach_frequency_mapping_information</a> freq_mapping_info =</div>
<div class="line"><span class="lineno">  127</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a4ec686128158cd9524f64b7df77762bd">prach_frequency_mapping_get</a>(preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a1cf7f9574b0a8249a736a0b6f39b6f1e">scs</a>, config.pusch_scs);</div>
<div class="line"><span class="lineno">  128</span>    srsran_assert(freq_mapping_info.<a class="code hl_variable" href="../../db/d79/structsrsran_1_1prach__frequency__mapping__information.html#a3b237981f4c93ec4f4521c0ba1d09f4d">nof_rb_ra</a> != PRACH_FREQUENCY_MAPPING_INFORMATION_RESERVED.nof_rb_ra,</div>
<div class="line"><span class="lineno">  129</span>                  <span class="stringliteral">&quot;The PRACH and PUSCH subcarrier spacing combination resulted in a reserved configuration.&quot;</span>);</div>
<div class="line"><span class="lineno">  130</span>    srsran_assert(freq_mapping_info.<a class="code hl_variable" href="../../db/d79/structsrsran_1_1prach__frequency__mapping__information.html#ae6530746f66c58e7963de2d1bc4960b0">k_bar</a> != PRACH_FREQUENCY_MAPPING_INFORMATION_RESERVED.k_bar,</div>
<div class="line"><span class="lineno">  131</span>                  <span class="stringliteral">&quot;The PRACH and PUSCH subcarrier spacing combination resulted in a reserved configuration.&quot;</span>);</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    <a class="code hl_class" href="../../dd/d92/classsrsran_1_1dft__processor.html">dft_processor</a>&amp; dft                  = *dft_processors[preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a1cf7f9574b0a8249a736a0b6f39b6f1e">scs</a>];</div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordtype">unsigned</span>       <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_scs_Hz</a>         = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a4172874a14aceea21d35086683d66f1b">ra_scs_to_Hz</a>(preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a1cf7f9574b0a8249a736a0b6f39b6f1e">scs</a>);</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordtype">unsigned</span>       <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ofdm_symbol_len</a>      = dft.<a class="code hl_function" href="../../dd/d92/classsrsran_1_1dft__processor.html#afcb93862572be80c25306a1a627b3d07">get_size</a>();</div>
<div class="line"><span class="lineno">  136</span>    <span class="keywordtype">unsigned</span>       <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cyclic_prefix_length</a> = preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a3b327e535ddff17fbba0e2f9b96169d3">cp_length</a>.<a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a942e82e30afbcebbc43f1943738f9d19">to_samples</a>(srate.<a class="code hl_function" href="../../dd/df1/classsrsran_1_1sampling__rate.html#a3e20d54a0ea144abe33e32ac198b44e2">to_Hz</a>());</div>
<div class="line"><span class="lineno">  137</span>    <span class="keywordtype">unsigned</span>       nof_symbols          = preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#aef1493b57fbc2fdbc433976b4bdec7f4">symbol_length</a>.<a class="code hl_function" href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a942e82e30afbcebbc43f1943738f9d19">to_samples</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a4172874a14aceea21d35086683d66f1b">ra_scs_to_Hz</a>(preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a1cf7f9574b0a8249a736a0b6f39b6f1e">scs</a>));</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    <span class="comment">// Make sure the number of occasions and symbols fit in the buffer.</span></div>
<div class="line"><span class="lineno">  140</span>    srsran_assert(nof_symbols &lt;= buffer.<a class="code hl_function" href="../../d0/d93/classsrsran_1_1prach__buffer.html#a1655528e85a5647d26138a6c3d7e0539">get_max_nof_symbols</a>(),</div>
<div class="line"><span class="lineno">  141</span>                  <span class="stringliteral">&quot;The number of symbols (i.e., {}) must be less than or equal to the maximum number of symbols of the &quot;</span></div>
<div class="line"><span class="lineno">  142</span>                  <span class="stringliteral">&quot;buffer (i.e., {}).&quot;</span>,</div>
<div class="line"><span class="lineno">  143</span>                  nof_symbols,</div>
<div class="line"><span class="lineno">  144</span>                  buffer.<a class="code hl_function" href="../../d0/d93/classsrsran_1_1prach__buffer.html#a1655528e85a5647d26138a6c3d7e0539">get_max_nof_symbols</a>());</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>    <span class="comment">// Prepare PRACH resource grid.</span></div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordtype">unsigned</span> K               = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pusch_scs_Hz</a> / <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_scs_Hz</a>;</div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_grid_size</a> = config.nof_prb_ul_grid * K * NRE;</div>
<div class="line"><span class="lineno">  149</span>    srsran_assert(</div>
<div class="line"><span class="lineno">  150</span>        dft.<a class="code hl_function" href="../../dd/d92/classsrsran_1_1dft__processor.html#afcb93862572be80c25306a1a627b3d07">get_size</a>() &gt; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_grid_size</a>,</div>
<div class="line"><span class="lineno">  151</span>        <span class="stringliteral">&quot;DFT size {} for PRACH SCS {} is not sufficient for K={}, N_RB={}. The minimum expected DFT size is {}.&quot;</span>,</div>
<div class="line"><span class="lineno">  152</span>        dft.<a class="code hl_function" href="../../dd/d92/classsrsran_1_1dft__processor.html#afcb93862572be80c25306a1a627b3d07">get_size</a>(),</div>
<div class="line"><span class="lineno">  153</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_scs_Hz</a>,</div>
<div class="line"><span class="lineno">  154</span>        K,</div>
<div class="line"><span class="lineno">  155</span>        config.nof_prb_ul_grid,</div>
<div class="line"><span class="lineno">  156</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_grid_size</a>);</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>    <span class="comment">// Process each PRACH symbol.</span></div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_symbol</a> = 0; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_symbol</a> != nof_symbols; ++<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_symbol</a>) {</div>
<div class="line"><span class="lineno">  160</span>      <span class="comment">// Load symbol time-domain in the DFT.</span></div>
<div class="line"><span class="lineno">  161</span>      srsvec::copy(dft.<a class="code hl_function" href="../../dd/d92/classsrsran_1_1dft__processor.html#aa07d386497c47ca798864f6300937cab">get_input</a>(),</div>
<div class="line"><span class="lineno">  162</span>                   <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">input_occasion</a>.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#ac5f02596fcb6e8f430a3e11e47a6d7e8">subspan</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cyclic_prefix_length</a> + <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ofdm_symbol_len</a> * <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_symbol</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ofdm_symbol_len</a>));</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>      <span class="comment">// Perform DFT.</span></div>
<div class="line"><span class="lineno">  165</span>      <a class="code hl_class" href="../../de/d4c/classsrsran_1_1span.html">span&lt;const cf_t&gt;</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dft_output</a> = dft.<a class="code hl_function" href="../../dd/d92/classsrsran_1_1dft__processor.html#a628d1ee463ea4107a2809eeb6cdac552">run</a>();</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>      <span class="comment">// For each frequency-domain occasion.</span></div>
<div class="line"><span class="lineno">  168</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_fd_occasion</a> = 0; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_fd_occasion</a> != config.nof_fd_occasions; ++<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_fd_occasion</a>) {</div>
<div class="line"><span class="lineno">  169</span>        <span class="comment">// Calculate initial subcarrier.</span></div>
<div class="line"><span class="lineno">  170</span>        <span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">k_start</a> =</div>
<div class="line"><span class="lineno">  171</span>            K * NRE * (config.rb_offset + freq_mapping_info.<a class="code hl_variable" href="../../db/d79/structsrsran_1_1prach__frequency__mapping__information.html#a3b237981f4c93ec4f4521c0ba1d09f4d">nof_rb_ra</a> * <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_fd_occasion</a>) + freq_mapping_info.<a class="code hl_variable" href="../../db/d79/structsrsran_1_1prach__frequency__mapping__information.html#ae6530746f66c58e7963de2d1bc4960b0">k_bar</a>;</div>
<div class="line"><span class="lineno">  172</span>        srsran_assert(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">k_start</a> + preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a6a616871a84db7e2b294d8d43da76f02">sequence_length</a> &lt; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_grid_size</a>,</div>
<div class="line"><span class="lineno">  173</span>                      <span class="stringliteral">&quot;Start subcarrier {} plus sequence length {} exceeds PRACH grid size {}.&quot;</span>,</div>
<div class="line"><span class="lineno">  174</span>                      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">k_start</a>,</div>
<div class="line"><span class="lineno">  175</span>                      preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a6a616871a84db7e2b294d8d43da76f02">sequence_length</a>,</div>
<div class="line"><span class="lineno">  176</span>                      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_grid_size</a>);</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>        <span class="comment">// Select destination PRACH symbol in the buffer.</span></div>
<div class="line"><span class="lineno">  179</span>        <a class="code hl_class" href="../../de/d4c/classsrsran_1_1span.html">span&lt;cf_t&gt;</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_symbol</a> = buffer.<a class="code hl_function" href="../../d0/d93/classsrsran_1_1prach__buffer.html#a9393f0ec690ad95fab986ae6d5d93fa3">get_symbol</a>(config.port, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_td_occasion</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_fd_occasion</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_symbol</a>);</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>        <span class="comment">// Create views of the lower and upper grid.</span></div>
<div class="line"><span class="lineno">  182</span>        <a class="code hl_class" href="../../de/d4c/classsrsran_1_1span.html">span&lt;const cf_t&gt;</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">lower_grid</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dft_output</a>.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#afa8aa6b2df95cc96ece6e86cf47068e2">last</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_grid_size</a> / 2);</div>
<div class="line"><span class="lineno">  183</span>        <a class="code hl_class" href="../../de/d4c/classsrsran_1_1span.html">span&lt;const cf_t&gt;</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">upper_grid</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dft_output</a>.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#aa4238c2e04ac8c60726db8cc0b687582">first</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_grid_size</a> / 2);</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>        <span class="comment">// If the sequence map starts at the lower half of the frequency band.</span></div>
<div class="line"><span class="lineno">  186</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">k_start</a> &lt; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_grid_size</a> / 2) {</div>
<div class="line"><span class="lineno">  187</span>          <span class="comment">// Number of subcarrier to fill in the lower half of the grid.</span></div>
<div class="line"><span class="lineno">  188</span>          <span class="keywordtype">unsigned</span> N = std::min(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_grid_size</a> / 2 - <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">k_start</a>, preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a6a616871a84db7e2b294d8d43da76f02">sequence_length</a>);</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>          <span class="comment">// Copy first N subcarriers of the sequence in the lower half grid.</span></div>
<div class="line"><span class="lineno">  191</span>          srsvec::copy(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_symbol</a>.first(N), <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">lower_grid</a>.subspan(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">k_start</a>, N));</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>          <span class="comment">// Copy the remainder of the sequence in the upper half grid.</span></div>
<div class="line"><span class="lineno">  194</span>          srsvec::copy(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_symbol</a>.last(preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a6a616871a84db7e2b294d8d43da76f02">sequence_length</a> - N),</div>
<div class="line"><span class="lineno">  195</span>                       <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">upper_grid</a>.first(preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a6a616871a84db7e2b294d8d43da76f02">sequence_length</a> - N));</div>
<div class="line"><span class="lineno">  196</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  197</span>          <span class="comment">// Copy the sequence in the upper half grid.</span></div>
<div class="line"><span class="lineno">  198</span>          srsvec::copy(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_symbol</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">upper_grid</a>.subspan(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">k_start</a> - <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prach_grid_size</a> / 2, preamble_info.<a class="code hl_variable" href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a6a616871a84db7e2b294d8d43da76f02">sequence_length</a>));</div>
<div class="line"><span class="lineno">  199</span>        }</div>
<div class="line"><span class="lineno">  200</span>      }</div>
<div class="line"><span class="lineno">  201</span>    }</div>
<div class="line"><span class="lineno">  202</span>  }</div>
<div class="line"><span class="lineno">  203</span>}</div>
<div class="ttc" id="aclasssrsran_1_1dft__processor_html"><div class="ttname"><a href="../../dd/d92/classsrsran_1_1dft__processor.html">srsran::dft_processor</a></div><div class="ttdoc">Describes a Discrete Fourier Transform (DFT) processor.</div><div class="ttdef"><b>Definition</b> dft_processor.h:35</div></div>
<div class="ttc" id="aclasssrsran_1_1dft__processor_html_a628d1ee463ea4107a2809eeb6cdac552"><div class="ttname"><a href="../../dd/d92/classsrsran_1_1dft__processor.html#a628d1ee463ea4107a2809eeb6cdac552">srsran::dft_processor::run</a></div><div class="ttdeci">virtual span&lt; const cf_t &gt; run()=0</div><div class="ttdoc">Executes the DFT from the internal input data.</div></div>
<div class="ttc" id="aclasssrsran_1_1dft__processor_html_aa07d386497c47ca798864f6300937cab"><div class="ttname"><a href="../../dd/d92/classsrsran_1_1dft__processor.html#aa07d386497c47ca798864f6300937cab">srsran::dft_processor::get_input</a></div><div class="ttdeci">virtual span&lt; cf_t &gt; get_input()=0</div><div class="ttdoc">Gets a view of the internal input DFT buffer.</div></div>
<div class="ttc" id="aclasssrsran_1_1dft__processor_html_afcb93862572be80c25306a1a627b3d07"><div class="ttname"><a href="../../dd/d92/classsrsran_1_1dft__processor.html#afcb93862572be80c25306a1a627b3d07">srsran::dft_processor::get_size</a></div><div class="ttdeci">virtual unsigned get_size() const =0</div><div class="ttdoc">Gets the DFT number of points.</div></div>
<div class="ttc" id="aclasssrsran_1_1phy__time__unit_html"><div class="ttname"><a href="../../d1/d59/classsrsran_1_1phy__time__unit.html">srsran::phy_time_unit</a></div><div class="ttdoc">Physical layer time unit.</div><div class="ttdef"><b>Definition</b> phy_time_unit.h:34</div></div>
<div class="ttc" id="aclasssrsran_1_1phy__time__unit_html_a942e82e30afbcebbc43f1943738f9d19"><div class="ttname"><a href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a942e82e30afbcebbc43f1943738f9d19">srsran::phy_time_unit::to_samples</a></div><div class="ttdeci">constexpr value_type to_samples(U sampling_rate_Hz_) const</div><div class="ttdoc">Gets the time expressed as a number of samples for the given sampling rate.</div><div class="ttdef"><b>Definition</b> phy_time_unit.h:101</div></div>
<div class="ttc" id="aclasssrsran_1_1phy__time__unit_html_a9759195d4f33e9afbf1c790ab103af94"><div class="ttname"><a href="../../d1/d59/classsrsran_1_1phy__time__unit.html#a9759195d4f33e9afbf1c790ab103af94">srsran::phy_time_unit::from_seconds</a></div><div class="ttdeci">static constexpr phy_time_unit from_seconds(double seconds)</div><div class="ttdoc">Creates a physical layer time from seconds.</div><div class="ttdef"><b>Definition</b> phy_time_unit.h:221</div></div>
<div class="ttc" id="aclasssrsran_1_1phy__time__unit_html_aec95e7a791907476aea8a4fb4c7c1f2b"><div class="ttname"><a href="../../d1/d59/classsrsran_1_1phy__time__unit.html#aec95e7a791907476aea8a4fb4c7c1f2b">srsran::phy_time_unit::from_units_of_kappa</a></div><div class="ttdeci">static constexpr phy_time_unit from_units_of_kappa(unsigned units_of_kappa)</div><div class="ttdoc">Creates a physical layer time from units of .</div><div class="ttdef"><b>Definition</b> phy_time_unit.h:203</div></div>
<div class="ttc" id="aclasssrsran_1_1prach__buffer_html_a1655528e85a5647d26138a6c3d7e0539"><div class="ttname"><a href="../../d0/d93/classsrsran_1_1prach__buffer.html#a1655528e85a5647d26138a6c3d7e0539">srsran::prach_buffer::get_max_nof_symbols</a></div><div class="ttdeci">virtual unsigned get_max_nof_symbols() const =0</div><div class="ttdoc">Gets the maximum number of symbols.</div></div>
<div class="ttc" id="aclasssrsran_1_1prach__buffer_html_a907028ab71829eacba8111ac864ed2da"><div class="ttname"><a href="../../d0/d93/classsrsran_1_1prach__buffer.html#a907028ab71829eacba8111ac864ed2da">srsran::prach_buffer::get_max_nof_ports</a></div><div class="ttdeci">virtual unsigned get_max_nof_ports() const =0</div><div class="ttdoc">Gets the maximum number of ports.</div></div>
<div class="ttc" id="aclasssrsran_1_1prach__buffer_html_a9393f0ec690ad95fab986ae6d5d93fa3"><div class="ttname"><a href="../../d0/d93/classsrsran_1_1prach__buffer.html#a9393f0ec690ad95fab986ae6d5d93fa3">srsran::prach_buffer::get_symbol</a></div><div class="ttdeci">virtual span&lt; cf_t &gt; get_symbol(unsigned i_port, unsigned i_td_occasion, unsigned i_fd_occasion, unsigned i_symbol)=0</div><div class="ttdoc">Gets a read-write PRACH symbol for a given port, occasion and symbol.</div></div>
<div class="ttc" id="aclasssrsran_1_1prach__buffer_html_a98309a9f4aaac3f325d16693ef916f33"><div class="ttname"><a href="../../d0/d93/classsrsran_1_1prach__buffer.html#a98309a9f4aaac3f325d16693ef916f33">srsran::prach_buffer::get_max_nof_fd_occasions</a></div><div class="ttdeci">virtual unsigned get_max_nof_fd_occasions() const =0</div><div class="ttdoc">Gets the maximum number of frequency domain occasions.</div></div>
<div class="ttc" id="aclasssrsran_1_1prach__buffer_html_aae53ad60dded01236f770064bb9e7633"><div class="ttname"><a href="../../d0/d93/classsrsran_1_1prach__buffer.html#aae53ad60dded01236f770064bb9e7633">srsran::prach_buffer::get_max_nof_td_occasions</a></div><div class="ttdeci">virtual unsigned get_max_nof_td_occasions() const =0</div><div class="ttdoc">Gets the maximum number of time domain occasions.</div></div>
<div class="ttc" id="aclasssrsran_1_1sampling__rate_html_a3e20d54a0ea144abe33e32ac198b44e2"><div class="ttname"><a href="../../dd/df1/classsrsran_1_1sampling__rate.html#a3e20d54a0ea144abe33e32ac198b44e2">srsran::sampling_rate::to_Hz</a></div><div class="ttdeci">constexpr T to_Hz() const</div><div class="ttdoc">Gets the sampling rate in hertz.</div><div class="ttdef"><b>Definition</b> sampling_rate.h:92</div></div>
<div class="ttc" id="aclasssrsran_1_1span_html"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html">srsran::span</a></div><div class="ttdef"><b>Definition</b> span.h:98</div></div>
<div class="ttc" id="aclasssrsran_1_1span_html_aa4238c2e04ac8c60726db8cc0b687582"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html#aa4238c2e04ac8c60726db8cc0b687582">srsran::span::first</a></div><div class="ttdeci">span&lt; element_type &gt; first(size_type count) const</div><div class="ttdef"><b>Definition</b> span.h:217</div></div>
<div class="ttc" id="aclasssrsran_1_1span_html_ac5f02596fcb6e8f430a3e11e47a6d7e8"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html#ac5f02596fcb6e8f430a3e11e47a6d7e8">srsran::span::subspan</a></div><div class="ttdeci">span&lt; element_type &gt; subspan(size_type offset, size_type count) const</div><div class="ttdoc">Obtains a span that is a view over the count elements of this span starting at offset offset.</div><div class="ttdef"><b>Definition</b> span.h:232</div></div>
<div class="ttc" id="aclasssrsran_1_1span_html_ad0e376d95ca916144eac76f27f0654ac"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html#ad0e376d95ca916144eac76f27f0654ac">srsran::span::size</a></div><div class="ttdeci">constexpr size_type size() const noexcept</div><div class="ttdoc">Returns the number of elements in the span.</div><div class="ttdef"><b>Definition</b> span.h:168</div></div>
<div class="ttc" id="aclasssrsran_1_1span_html_afa8aa6b2df95cc96ece6e86cf47068e2"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html#afa8aa6b2df95cc96ece6e86cf47068e2">srsran::span::last</a></div><div class="ttdeci">span&lt; element_type &gt; last(size_type count) const</div><div class="ttdef"><b>Definition</b> span.h:225</div></div>
<div class="ttc" id="anamespacesrsran_html_a0d5bec5128991413e4e3a59ca6e16426"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a0d5bec5128991413e4e3a59ca6e16426">srsran::to_ra_subcarrier_spacing</a></div><div class="ttdeci">constexpr prach_subcarrier_spacing to_ra_subcarrier_spacing(subcarrier_spacing scs)</div><div class="ttdoc">Adapts common resource grid subcarrier spacing to RA subcarrier spacing.</div><div class="ttdef"><b>Definition</b> prach_subcarrier_spacing.h:101</div></div>
<div class="ttc" id="anamespacesrsran_html_a226e52de355262a1ad4e998b4cedefd7"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a226e52de355262a1ad4e998b4cedefd7">srsran::to_numerology_value</a></div><div class="ttdeci">constexpr unsigned to_numerology_value(subcarrier_spacing scs)</div><div class="ttdoc">Convert SCS to numerology index ( ).</div><div class="ttdef"><b>Definition</b> subcarrier_spacing.h:50</div></div>
<div class="ttc" id="anamespacesrsran_html_a33cfd882b612da5eceff76a95662d0b3"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a33cfd882b612da5eceff76a95662d0b3">srsran::get_prach_preamble_short_info</a></div><div class="ttdeci">prach_preamble_information get_prach_preamble_short_info(prach_format_type format, prach_subcarrier_spacing ra_scs, bool last_occasion)</div><div class="ttdoc">Get short PRACH preamble information as per TS38.211 Table 6.3.3.1-2.</div><div class="ttdef"><b>Definition</b> prach_preamble_information.cpp:63</div></div>
<div class="ttc" id="anamespacesrsran_html_a41d072dc823c78c2627da83a877dcf5a"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a41d072dc823c78c2627da83a877dcf5a">srsran::get_prach_preamble_long_info</a></div><div class="ttdeci">prach_preamble_information get_prach_preamble_long_info(prach_format_type format)</div><div class="ttdoc">Get long PRACH preamble information as per TS38.211 Table 6.3.3.1-1.</div><div class="ttdef"><b>Definition</b> prach_preamble_information.cpp:30</div></div>
<div class="ttc" id="anamespacesrsran_html_a4ec686128158cd9524f64b7df77762bd"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a4ec686128158cd9524f64b7df77762bd">srsran::prach_frequency_mapping_get</a></div><div class="ttdeci">prach_frequency_mapping_information prach_frequency_mapping_get(prach_subcarrier_spacing prach_scs, subcarrier_spacing pusch_scs)</div><div class="ttdoc">Gets the PRACH frequency mapping information contained in TS38.211 Table 6.3.3.2-1.</div><div class="ttdef"><b>Definition</b> prach_frequency_mapping.cpp:27</div></div>
<div class="ttc" id="anamespacesrsran_html_a7c2e3c58a56b57be024f8bfc3271186d"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a7c2e3c58a56b57be024f8bfc3271186d">srsran::is_short_preamble</a></div><div class="ttdeci">constexpr bool is_short_preamble(prach_format_type type)</div><div class="ttdoc">Checks if the preamble format is short.</div><div class="ttdef"><b>Definition</b> prach_format_type.h:114</div></div>
<div class="ttc" id="anamespacesrsran_html_a7c4ecbbc13088764ba440e5bb5f62a35"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a7c4ecbbc13088764ba440e5bb5f62a35">srsran::get_preamble_duration</a></div><div class="ttdeci">unsigned get_preamble_duration(prach_format_type format)</div><div class="ttdoc">Gets the PRACH time-domain occasion duration in symbols relative to the RA subcarrier spacing.</div><div class="ttdef"><b>Definition</b> prach_format_type.h:126</div></div>
<div class="ttc" id="anamespacesrsran_html_a8c3848f1144990e3777cdc7e1ab27cf7"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a8c3848f1144990e3777cdc7e1ab27cf7">srsran::scs_to_khz</a></div><div class="ttdeci">constexpr unsigned scs_to_khz(subcarrier_spacing scs)</div><div class="ttdoc">Converts SCS into integer in kHz.</div><div class="ttdef"><b>Definition</b> subcarrier_spacing.h:56</div></div>
<div class="ttc" id="anamespacesrsran_html_aae60fdd6dfc5e4aad04607ddbe5982b1"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#aae60fdd6dfc5e4aad04607ddbe5982b1">srsran::get_prach_window_duration</a></div><div class="ttdeci">phy_time_unit get_prach_window_duration(prach_format_type format, subcarrier_spacing pusch_scs, unsigned start_symbol_index, unsigned nof_td_occasions)</div><div class="ttdoc">Gets the PRACH window duration.</div><div class="ttdef"><b>Definition</b> prach_preamble_information.cpp:138</div></div>
<div class="ttc" id="anamespacesrsran_html_aaea6c484cd5f8113a5b11434d68e371b"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#aaea6c484cd5f8113a5b11434d68e371b">srsran::is_long_preamble</a></div><div class="ttdeci">constexpr bool is_long_preamble(prach_format_type type)</div><div class="ttdoc">Checks if the preamble format is long.</div><div class="ttdef"><b>Definition</b> prach_format_type.h:106</div></div>
<div class="ttc" id="astructsrsran_1_1prach__frequency__mapping__information_html"><div class="ttname"><a href="../../db/d79/structsrsran_1_1prach__frequency__mapping__information.html">srsran::prach_frequency_mapping_information</a></div><div class="ttdoc">Collects PRACH frequency mapping information as per TS38.211 Section 5.3.2 and Section 6....</div><div class="ttdef"><b>Definition</b> prach_frequency_mapping.h:31</div></div>
<div class="ttc" id="astructsrsran_1_1prach__frequency__mapping__information_html_a3b237981f4c93ec4f4521c0ba1d09f4d"><div class="ttname"><a href="../../db/d79/structsrsran_1_1prach__frequency__mapping__information.html#a3b237981f4c93ec4f4521c0ba1d09f4d">srsran::prach_frequency_mapping_information::nof_rb_ra</a></div><div class="ttdeci">unsigned nof_rb_ra</div><div class="ttdef"><b>Definition</b> prach_frequency_mapping.h:34</div></div>
<div class="ttc" id="astructsrsran_1_1prach__frequency__mapping__information_html_ae6530746f66c58e7963de2d1bc4960b0"><div class="ttname"><a href="../../db/d79/structsrsran_1_1prach__frequency__mapping__information.html#ae6530746f66c58e7963de2d1bc4960b0">srsran::prach_frequency_mapping_information::k_bar</a></div><div class="ttdeci">unsigned k_bar</div><div class="ttdoc">Parameter .</div><div class="ttdef"><b>Definition</b> prach_frequency_mapping.h:36</div></div>
<div class="ttc" id="astructsrsran_1_1prach__preamble__information_html"><div class="ttname"><a href="../../d3/d17/structsrsran_1_1prach__preamble__information.html">srsran::prach_preamble_information</a></div><div class="ttdoc">Collects PRACH preamble information parameters.</div><div class="ttdef"><b>Definition</b> prach_preamble_information.h:36</div></div>
<div class="ttc" id="astructsrsran_1_1prach__preamble__information_html_a1cf7f9574b0a8249a736a0b6f39b6f1e"><div class="ttname"><a href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a1cf7f9574b0a8249a736a0b6f39b6f1e">srsran::prach_preamble_information::scs</a></div><div class="ttdeci">prach_subcarrier_spacing scs</div><div class="ttdoc">Parameter .</div><div class="ttdef"><b>Definition</b> prach_preamble_information.h:40</div></div>
<div class="ttc" id="astructsrsran_1_1prach__preamble__information_html_a3b327e535ddff17fbba0e2f9b96169d3"><div class="ttname"><a href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a3b327e535ddff17fbba0e2f9b96169d3">srsran::prach_preamble_information::cp_length</a></div><div class="ttdeci">phy_time_unit cp_length</div><div class="ttdoc">Parameter . Expressed in units of the reference symbol time .</div><div class="ttdef"><b>Definition</b> prach_preamble_information.h:44</div></div>
<div class="ttc" id="astructsrsran_1_1prach__preamble__information_html_a6a616871a84db7e2b294d8d43da76f02"><div class="ttname"><a href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#a6a616871a84db7e2b294d8d43da76f02">srsran::prach_preamble_information::sequence_length</a></div><div class="ttdeci">unsigned sequence_length</div><div class="ttdoc">Sequence length in frequency domain, parameter .</div><div class="ttdef"><b>Definition</b> prach_preamble_information.h:38</div></div>
<div class="ttc" id="astructsrsran_1_1prach__preamble__information_html_aef1493b57fbc2fdbc433976b4bdec7f4"><div class="ttname"><a href="../../d3/d17/structsrsran_1_1prach__preamble__information.html#aef1493b57fbc2fdbc433976b4bdec7f4">srsran::prach_preamble_information::symbol_length</a></div><div class="ttdeci">phy_time_unit symbol_length</div><div class="ttdoc">Parameter . Expressed in units of the reference symbol time .</div><div class="ttdef"><b>Definition</b> prach_preamble_information.h:42</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/phy/lower/modulation/<a class="el" href="../../d0/d63/ofdm__prach__demodulator__impl_8h_source.html">ofdm_prach_demodulator_impl.h</a></li>
<li>lib/phy/lower/modulation/<b>ofdm_prach_demodulator_impl.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
