<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>srsRAN Docs: srsran::ue_event_manager Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">srsRAN Docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/def/namespacesrsran.html">srsran</a></li><li class="navelem"><a class="el" href="../../d9/df8/classsrsran_1_1ue__event__manager.html">ue_event_manager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d1/dfb/classsrsran_1_1ue__event__manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">srsran::ue_event_manager Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Class used to manage events that arrive to the scheduler and are directed at UEs. This class acts as a facade for several of the <a class="el" href="../../d5/d6d/classsrsran_1_1ue__scheduler.html">ue_scheduler</a> subcomponents, managing the asynchronous configuration of the UEs and logging in a thread-safe manner.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../de/d34/ue__event__manager_8h_source.html">ue_event_manager.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for srsran::ue_event_manager:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d87/classsrsran_1_1ue__event__manager__inherit__graph.png" border="0" usemap="#asrsran_1_1ue__event__manager_inherit__map" alt="Inheritance graph"/></div>
<map name="asrsran_1_1ue__event__manager_inherit__map" id="asrsran_1_1ue__event__manager_inherit__map">
<area shape="rect" title="Class used to manage events that arrive to the scheduler and are directed at UEs. This class acts as ..." alt="" coords="245,248,474,588"/>
<area shape="rect" href="../../da/d58/classsrsran_1_1sched__ue__configuration__handler.html" title="Internal scheduler interface to create/update/delete UEs." alt="" coords="5,25,220,180"/>
<area shape="poly" title=" " alt="" coords="183,189,247,269,242,273,179,192"/>
<area shape="rect" href="../../d1/dbf/classsrsran_1_1scheduler__feedback__handler.html" title=" " alt="" coords="245,5,474,200"/>
<area shape="poly" title=" " alt="" coords="362,214,362,248,357,248,357,214"/>
<area shape="rect" href="../../dc/d71/classsrsran_1_1scheduler__dl__buffer__state__indication__handler.html" title="Scheduler interface to push DL buffer state updates for a given RLC bearer." alt="" coords="498,31,703,175"/>
<area shape="poly" title=" " alt="" coords="540,187,476,270,472,266,536,184"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for srsran::ue_event_manager:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d2a/classsrsran_1_1ue__event__manager__coll__graph.png" border="0" usemap="#asrsran_1_1ue__event__manager_coll__map" alt="Collaboration graph"/></div>
<map name="asrsran_1_1ue__event__manager_coll__map" id="asrsran_1_1ue__event__manager_coll__map">
<area shape="rect" title="Class used to manage events that arrive to the scheduler and are directed at UEs. This class acts as ..." alt="" coords="245,248,474,588"/>
<area shape="rect" href="../../da/d58/classsrsran_1_1sched__ue__configuration__handler.html" title="Internal scheduler interface to create/update/delete UEs." alt="" coords="5,25,220,180"/>
<area shape="poly" title=" " alt="" coords="183,189,247,269,242,273,179,192"/>
<area shape="rect" href="../../d1/dbf/classsrsran_1_1scheduler__feedback__handler.html" title=" " alt="" coords="245,5,474,200"/>
<area shape="poly" title=" " alt="" coords="362,214,362,248,357,248,357,214"/>
<area shape="rect" href="../../dc/d71/classsrsran_1_1scheduler__dl__buffer__state__indication__handler.html" title="Scheduler interface to push DL buffer state updates for a given RLC bearer." alt="" coords="498,31,703,175"/>
<area shape="poly" title=" " alt="" coords="540,187,476,270,472,266,536,184"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3a831a9ec49b7f0ed60bf644b9504055" id="r_a3a831a9ec49b7f0ed60bf644b9504055"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a831a9ec49b7f0ed60bf644b9504055">ue_event_manager</a> (<a class="el" href="../../dc/df2/classsrsran_1_1ue__repository.html">ue_repository</a> &amp;ue_db, <a class="el" href="../../df/dd1/classsrsran_1_1scheduler__metrics__handler.html">scheduler_metrics_handler</a> &amp;metrics_handler, <a class="el" href="../../df/db3/classsrsran_1_1scheduler__event__logger.html">scheduler_event_logger</a> &amp;ev_logger)</td></tr>
<tr class="separator:a3a831a9ec49b7f0ed60bf644b9504055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b3f5a9cadf9de9bbe4879f3e93c1628" id="r_a8b3f5a9cadf9de9bbe4879f3e93c1628"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b3f5a9cadf9de9bbe4879f3e93c1628">add_cell</a> (<a class="el" href="../../df/d56/structsrsran_1_1cell__resource__allocator.html">cell_resource_allocator</a> &amp;<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_res_grid</a>, <a class="el" href="../../d7/d67/classsrsran_1_1ue__srb0__scheduler.html">ue_srb0_scheduler</a> &amp;srb0_sched)</td></tr>
<tr class="separator:a8b3f5a9cadf9de9bbe4879f3e93c1628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae89da97b3f0697fa6285caeffe09157a" id="r_ae89da97b3f0697fa6285caeffe09157a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae89da97b3f0697fa6285caeffe09157a">handle_ue_creation</a> (<a class="el" href="../../db/d1e/classsrsran_1_1ue__config__update__event.html">ue_config_update_event</a> ev) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:ae89da97b3f0697fa6285caeffe09157a"><td class="mdescLeft">&#160;</td><td class="mdescRight">UE Add/Mod/Remove interface.  <br /></td></tr>
<tr class="separator:ae89da97b3f0697fa6285caeffe09157a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5181d7a5cb934986ddb726406727835" id="r_ab5181d7a5cb934986ddb726406727835"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5181d7a5cb934986ddb726406727835">handle_ue_reconfiguration</a> (<a class="el" href="../../db/d1e/classsrsran_1_1ue__config__update__event.html">ue_config_update_event</a> ev) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:ab5181d7a5cb934986ddb726406727835"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reconfigure an existing UE instance.  <br /></td></tr>
<tr class="separator:ab5181d7a5cb934986ddb726406727835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebbe4409e64400cc7cc061ba390e0fe3" id="r_aebbe4409e64400cc7cc061ba390e0fe3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aebbe4409e64400cc7cc061ba390e0fe3">handle_ue_deletion</a> (<a class="el" href="../../d9/d14/classsrsran_1_1ue__config__delete__event.html">ue_config_delete_event</a> ev) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:aebbe4409e64400cc7cc061ba390e0fe3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reconfigure an existing UE instance.  <br /></td></tr>
<tr class="separator:aebbe4409e64400cc7cc061ba390e0fe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f3c92f1cbf15119333841f98348144" id="r_a86f3c92f1cbf15119333841f98348144"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a86f3c92f1cbf15119333841f98348144">handle_ul_bsr_indication</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d5/d9b/structsrsran_1_1ul__bsr__indication__message.html">ul_bsr_indication_message</a> &amp;bsr) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a86f3c92f1cbf15119333841f98348144"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scheduler feedback handler interface.  <br /></td></tr>
<tr class="separator:a86f3c92f1cbf15119333841f98348144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409507544faf4190afdf74f87a8388c0" id="r_a409507544faf4190afdf74f87a8388c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a409507544faf4190afdf74f87a8388c0">handle_crc_indication</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d4/d49/structsrsran_1_1ul__crc__indication.html">ul_crc_indication</a> &amp;crc) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="separator:a409507544faf4190afdf74f87a8388c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a9704a636f666d27009c063ac49736" id="r_af1a9704a636f666d27009c063ac49736"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af1a9704a636f666d27009c063ac49736">handle_uci_indication</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d2/d81/structsrsran_1_1uci__indication.html">uci_indication</a> &amp;uci) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="separator:af1a9704a636f666d27009c063ac49736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b86cf20d7e6e51aaba037ff17ed52b5" id="r_a6b86cf20d7e6e51aaba037ff17ed52b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b86cf20d7e6e51aaba037ff17ed52b5">handle_dl_mac_ce_indication</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../df/d37/structsrsran_1_1dl__mac__ce__indication.html">dl_mac_ce_indication</a> &amp;ce) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a6b86cf20d7e6e51aaba037ff17ed52b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command scheduling of DL MAC CE for a given UE.  <br /></td></tr>
<tr class="separator:a6b86cf20d7e6e51aaba037ff17ed52b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab40ea6616a5a1c6526b61fb226a92338" id="r_ab40ea6616a5a1c6526b61fb226a92338"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab40ea6616a5a1c6526b61fb226a92338">handle_ul_phr_indication</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d5/dfb/structsrsran_1_1ul__phr__indication__message.html">ul_phr_indication_message</a> &amp;<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">phr_ind</a>) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:ab40ea6616a5a1c6526b61fb226a92338"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles PHR indication sent by MAC.  <br /></td></tr>
<tr class="separator:ab40ea6616a5a1c6526b61fb226a92338"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6c4bf62319cbd0eb07e8c3cc7392983" id="r_ac6c4bf62319cbd0eb07e8c3cc7392983"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac6c4bf62319cbd0eb07e8c3cc7392983">handle_dl_buffer_state_indication</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d8/d06/structsrsran_1_1dl__buffer__state__indication__message.html">dl_buffer_state_indication_message</a> &amp;bs) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:ac6c4bf62319cbd0eb07e8c3cc7392983"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scheduler DL buffer state indication handler interface.  <br /></td></tr>
<tr class="separator:ac6c4bf62319cbd0eb07e8c3cc7392983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56aeafb054f1e479e5d8b006992d455f" id="r_a56aeafb054f1e479e5d8b006992d455f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a56aeafb054f1e479e5d8b006992d455f">handle_error_indication</a> (<a class="el" href="../../df/d3c/classsrsran_1_1slot__point.html">slot_point</a> sl_tx, <a class="el" href="../../d9/def/namespacesrsran.html#a5b995a7b11715f3042e18281c21991ff">du_cell_index_t</a> cell_index, <a class="el" href="../../dc/dca/structsrsran_1_1scheduler__slot__handler_1_1error__outcome.html">scheduler_slot_handler::error_outcome</a> event)</td></tr>
<tr class="separator:a56aeafb054f1e479e5d8b006992d455f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8086d93a08ad2471d45d8f6e069a8988" id="r_a8086d93a08ad2471d45d8f6e069a8988"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8086d93a08ad2471d45d8f6e069a8988">run</a> (<a class="el" href="../../df/d3c/classsrsran_1_1slot__point.html">slot_point</a> <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sl</a>, <a class="el" href="../../d9/def/namespacesrsran.html#a5b995a7b11715f3042e18281c21991ff">du_cell_index_t</a> cell_index)</td></tr>
<tr class="memdesc:a8086d93a08ad2471d45d8f6e069a8988"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process events for a given slot and cell index.  <br /></td></tr>
<tr class="separator:a8086d93a08ad2471d45d8f6e069a8988"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class used to manage events that arrive to the scheduler and are directed at UEs. This class acts as a facade for several of the <a class="el" href="../../d5/d6d/classsrsran_1_1ue__scheduler.html">ue_scheduler</a> subcomponents, managing the asynchronous configuration of the UEs and logging in a thread-safe manner. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3a831a9ec49b7f0ed60bf644b9504055" name="a3a831a9ec49b7f0ed60bf644b9504055"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a831a9ec49b7f0ed60bf644b9504055">&#9670;&#160;</a></span>ue_event_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ue_event_manager::ue_event_manager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/df2/classsrsran_1_1ue__repository.html">ue_repository</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ue_db</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/dd1/classsrsran_1_1scheduler__metrics__handler.html">scheduler_metrics_handler</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>metrics_handler</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/db3/classsrsran_1_1scheduler__event__logger.html">scheduler_event_logger</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ev_logger</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  122</span>                                                                          :</div>
<div class="line"><span class="lineno">  123</span>  ue_db(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ue_db_</a>),</div>
<div class="line"><span class="lineno">  124</span>  metrics_handler(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">metrics_handler_</a>),</div>
<div class="line"><span class="lineno">  125</span>  ev_logger(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ev_logger_</a>),</div>
<div class="line"><span class="lineno">  126</span>  logger(srslog::fetch_basic_logger(<span class="stringliteral">&quot;SCHED&quot;</span>)),</div>
<div class="line"><span class="lineno">  127</span>  dl_bo_mng(std::make_unique&lt;ue_dl_buffer_occupancy_manager&gt;(*<span class="keyword">this</span>))</div>
<div class="line"><span class="lineno">  128</span>{</div>
<div class="line"><span class="lineno">  129</span>  common_events.reserve(INITIAL_COMMON_EVENT_LIST_SIZE);</div>
<div class="line"><span class="lineno">  130</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; cell : cell_specific_events) {</div>
<div class="line"><span class="lineno">  131</span>    cell.reserve(INITIAL_CELL_EVENT_LIST_SIZE);</div>
<div class="line"><span class="lineno">  132</span>  }</div>
<div class="line"><span class="lineno">  133</span>}</div>
<div class="ttc" id="anamespacesrsran_html_a58e7c9f2c51a9ad6a0899b46d5315723"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">srsran::mask_msb_ones</a></div><div class="ttdeci">constexpr Integer mask_msb_ones(size_t N)</div><div class="ttdoc">Returns an unsigned integer with the N most significant bits (MSB) set to one, and the remaining bits...</div><div class="ttdef"><b>Definition</b> bounded_bitset.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4992cc99f0ba135cc7e2a6f695bb6f73" name="a4992cc99f0ba135cc7e2a6f695bb6f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4992cc99f0ba135cc7e2a6f695bb6f73">&#9670;&#160;</a></span>~ue_event_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ue_event_manager::~ue_event_manager </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  135</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8b3f5a9cadf9de9bbe4879f3e93c1628" name="a8b3f5a9cadf9de9bbe4879f3e93c1628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b3f5a9cadf9de9bbe4879f3e93c1628">&#9670;&#160;</a></span>add_cell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::add_cell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d56/structsrsran_1_1cell__resource__allocator.html">cell_resource_allocator</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>cell_res_grid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d67/classsrsran_1_1ue__srb0__scheduler.html">ue_srb0_scheduler</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>srb0_sched</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  619</span>{</div>
<div class="line"><span class="lineno">  620</span>  <span class="keyword">const</span> <a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#a5b995a7b11715f3042e18281c21991ff">du_cell_index_t</a> cell_index = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_res_grid</a>.cell_index();</div>
<div class="line"><span class="lineno">  621</span>  srsran_assert(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> cell_exists(cell_index), <span class="stringliteral">&quot;Overwriting cell configurations not supported&quot;</span>);</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>  du_cells[cell_index].cfg        = &amp;<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_res_grid</a>.cfg;</div>
<div class="line"><span class="lineno">  624</span>  du_cells[cell_index].res_grid   = &amp;<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_res_grid</a>;</div>
<div class="line"><span class="lineno">  625</span>  du_cells[cell_index].srb0_sched = &amp;srb0_sched;</div>
<div class="line"><span class="lineno">  626</span>}</div>
<div class="ttc" id="anamespacesrsran_html_a5b995a7b11715f3042e18281c21991ff"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a5b995a7b11715f3042e18281c21991ff">srsran::du_cell_index_t</a></div><div class="ttdeci">du_cell_index_t</div><div class="ttdoc">Maximum number of cells supported by DU (implementation-defined).</div><div class="ttdef"><b>Definition</b> du_types.h:40</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a409507544faf4190afdf74f87a8388c0" name="a409507544faf4190afdf74f87a8388c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a409507544faf4190afdf74f87a8388c0">&#9670;&#160;</a></span>handle_crc_indication()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::handle_crc_indication </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d4/d49/structsrsran_1_1ul__crc__indication.html">ul_crc_indication</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>crc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/dbf/classsrsran_1_1scheduler__feedback__handler.html">srsran::scheduler_feedback_handler</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  259</span>{</div>
<div class="line"><span class="lineno">  260</span>  srsran_assert(cell_exists(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">crc_ind</a>.cell_index), <span class="stringliteral">&quot;Invalid cell index&quot;</span>);</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">crc_ind</a>.crcs.size(); ++i) {</div>
<div class="line"><span class="lineno">  263</span>    cell_specific_events[<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">crc_ind</a>.cell_index].emplace(</div>
<div class="line"><span class="lineno">  264</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">crc_ind</a>.crcs[i].ue_index,</div>
<div class="line"><span class="lineno">  265</span>        [<span class="keyword">this</span>, sl_rx = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">crc_ind</a>.sl_rx, crc = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">crc_ind</a>.crcs[i]](<a class="code hl_class" href="../../d9/d2d/classsrsran_1_1ue__cell.html">ue_cell</a>&amp; ue_cc) {</div>
<div class="line"><span class="lineno">  266</span>          const int tbs = ue_cc.handle_crc_pdu(sl_rx, crc);</div>
<div class="line"><span class="lineno">  267</span>          if (tbs &lt; 0) {</div>
<div class="line"><span class="lineno">  268</span>            return;</div>
<div class="line"><span class="lineno">  269</span>          }</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>          <span class="comment">// Log event.</span></div>
<div class="line"><span class="lineno">  272</span>          ev_logger.enqueue(<a class="code hl_struct" href="../../d9/d7f/structsrsran_1_1scheduler__event__logger_1_1crc__event.html">scheduler_event_logger::crc_event</a>{</div>
<div class="line"><span class="lineno">  273</span>              crc.ue_index, crc.rnti, ue_cc.cell_index, sl_rx, crc.harq_id, crc.tb_crc_success, crc.ul_sinr_metric});</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>          <span class="comment">// Notify metrics handler.</span></div>
<div class="line"><span class="lineno">  276</span>          metrics_handler.<a class="code hl_function" href="../../df/dd1/classsrsran_1_1scheduler__metrics__handler.html#a0755c662b8f2268fbdee06923b302459">handle_crc_indication</a>(crc, <a class="code hl_class" href="../../d0/d31/classsrsran_1_1units_1_1bytes.html">units::bytes</a>{(<a class="code hl_class" href="../../d0/d1d/classunsigned.html">unsigned</a>)tbs});</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>          <span class="comment">// Process Timing Advance Offset.</span></div>
<div class="line"><span class="lineno">  279</span>          <span class="keywordflow">if</span> (crc.tb_crc_success <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> crc.time_advance_offset.has_value() <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> crc.ul_sinr_metric.has_value()) {</div>
<div class="line"><span class="lineno">  280</span>            ue_db[ue_cc.ue_index].handle_ul_n_ta_update_indication(</div>
<div class="line"><span class="lineno">  281</span>                ue_cc.cell_index, crc.ul_sinr_metric.value(), crc.time_advance_offset.value());</div>
<div class="line"><span class="lineno">  282</span>          }</div>
<div class="line"><span class="lineno">  283</span>        },</div>
<div class="line"><span class="lineno">  284</span>        <span class="stringliteral">&quot;CRC&quot;</span>,</div>
<div class="line"><span class="lineno">  285</span>        <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  286</span>  }</div>
<div class="line"><span class="lineno">  287</span>}</div>
<div class="ttc" id="aclasssrsran_1_1scheduler__metrics__handler_html_a0755c662b8f2268fbdee06923b302459"><div class="ttname"><a href="../../df/dd1/classsrsran_1_1scheduler__metrics__handler.html#a0755c662b8f2268fbdee06923b302459">srsran::scheduler_metrics_handler::handle_crc_indication</a></div><div class="ttdeci">void handle_crc_indication(const ul_crc_pdu_indication &amp;crc_pdu, units::bytes tbs)</div><div class="ttdoc">Register CRC indication.</div><div class="ttdef"><b>Definition</b> scheduler_metric_handler.cpp:54</div></div>
<div class="ttc" id="aclasssrsran_1_1ue__cell_html"><div class="ttname"><a href="../../d9/d2d/classsrsran_1_1ue__cell.html">srsran::ue_cell</a></div><div class="ttdoc">Context respective to a UE serving cell.</div><div class="ttdef"><b>Definition</b> ue_cell.h:47</div></div>
<div class="ttc" id="aclasssrsran_1_1units_1_1bytes_html"><div class="ttname"><a href="../../d0/d31/classsrsran_1_1units_1_1bytes.html">srsran::units::bytes</a></div><div class="ttdoc">Abstraction of byte as a unit of digital information.</div><div class="ttdef"><b>Definition</b> units.h:89</div></div>
<div class="ttc" id="aclassunsigned_html"><div class="ttname"><a href="../../d0/d1d/classunsigned.html">unsigned</a></div></div>
<div class="ttc" id="astructsrsran_1_1scheduler__event__logger_1_1crc__event_html"><div class="ttname"><a href="../../d9/d7f/structsrsran_1_1scheduler__event__logger_1_1crc__event.html">srsran::scheduler_event_logger::crc_event</a></div><div class="ttdef"><b>Definition</b> scheduler_event_logger.h:51</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6c4bf62319cbd0eb07e8c3cc7392983" name="ac6c4bf62319cbd0eb07e8c3cc7392983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6c4bf62319cbd0eb07e8c3cc7392983">&#9670;&#160;</a></span>handle_dl_buffer_state_indication()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::handle_dl_buffer_state_indication </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d8/d06/structsrsran_1_1dl__buffer__state__indication__message.html">dl_buffer_state_indication_message</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bs</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scheduler DL buffer state indication handler interface. </p>

<p>Implements <a class="el" href="../../dc/d71/classsrsran_1_1scheduler__dl__buffer__state__indication__handler.html#ab33c261eb56963dd3e6dbe8e136a09ae">srsran::scheduler_dl_buffer_state_indication_handler</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  435</span>{</div>
<div class="line"><span class="lineno">  436</span>  dl_bo_mng-&gt;handle_dl_buffer_state_indication(bs);</div>
<div class="line"><span class="lineno">  437</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b86cf20d7e6e51aaba037ff17ed52b5" name="a6b86cf20d7e6e51aaba037ff17ed52b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b86cf20d7e6e51aaba037ff17ed52b5">&#9670;&#160;</a></span>handle_dl_mac_ce_indication()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::handle_dl_mac_ce_indication </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../df/d37/structsrsran_1_1dl__mac__ce__indication.html">dl_mac_ce_indication</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>mac_ce</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Command scheduling of DL MAC CE for a given UE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mac_ce</td><td>DL MAC CE to be scheduled. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d1/dbf/classsrsran_1_1scheduler__feedback__handler.html#a244c01bad813835fdd3c732f5d92d7be">srsran::scheduler_feedback_handler</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  421</span>{</div>
<div class="line"><span class="lineno">  422</span>  common_events.emplace(ce.ue_index, [<span class="keyword">this</span>, ce]() {</div>
<div class="line"><span class="lineno">  423</span>    if (not ue_db.contains(ce.ue_index)) {</div>
<div class="line"><span class="lineno">  424</span>      log_invalid_ue_index(ce.ue_index, <span class="stringliteral">&quot;DL MAC CE&quot;</span>);</div>
<div class="line"><span class="lineno">  425</span>      return;</div>
<div class="line"><span class="lineno">  426</span>    }</div>
<div class="line"><span class="lineno">  427</span>    ue_db[ce.ue_index].handle_dl_mac_ce_indication(ce);</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>    <span class="comment">// Log event.</span></div>
<div class="line"><span class="lineno">  430</span>    ev_logger.enqueue(ce);</div>
<div class="line"><span class="lineno">  431</span>  });</div>
<div class="line"><span class="lineno">  432</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a56aeafb054f1e479e5d8b006992d455f" name="a56aeafb054f1e479e5d8b006992d455f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56aeafb054f1e479e5d8b006992d455f">&#9670;&#160;</a></span>handle_error_indication()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::handle_error_indication </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d3c/classsrsran_1_1slot__point.html">slot_point</a></td>          <td class="paramname"><span class="paramname"><em>sl_tx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a5b995a7b11715f3042e18281c21991ff">du_cell_index_t</a></td>          <td class="paramname"><span class="paramname"><em>cell_index</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dca/structsrsran_1_1scheduler__slot__handler_1_1error__outcome.html">scheduler_slot_handler::error_outcome</a></td>          <td class="paramname"><span class="paramname"><em>event</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  504</span>{</div>
<div class="line"><span class="lineno">  505</span>  common_events.emplace(INVALID_DU_UE_INDEX, [<span class="keyword">this</span>, sl_tx, cell_index, event]() {</div>
<div class="line"><span class="lineno">  506</span>    <span class="comment">// Handle Error Indication.</span></div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>    <span class="keyword">const</span> <a class="code hl_struct" href="../../d5/db7/structsrsran_1_1cell__slot__resource__allocator.html">cell_slot_resource_allocator</a>* <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prev_slot_result</a> = du_cells[cell_index].res_grid-&gt;get_history(sl_tx);</div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">prev_slot_result</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  510</span>      logger.warning(<span class="stringliteral">&quot;cell={}, slot={}: Discarding error indication. Cause: Scheduler results associated with the slot &quot;</span></div>
<div class="line"><span class="lineno">  511</span>                     <span class="stringliteral">&quot;of the error indication have already been erased&quot;</span>,</div>
<div class="line"><span class="lineno">  512</span>                     cell_index,</div>
<div class="line"><span class="lineno">  513</span>                     sl_tx);</div>
<div class="line"><span class="lineno">  514</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  515</span>    }</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>    <span class="comment">// In case DL PDCCHs were skipped, there will be the following consequences:</span></div>
<div class="line"><span class="lineno">  518</span>    <span class="comment">// - The UE will not decode the PDSCH and will not send the respective UCI.</span></div>
<div class="line"><span class="lineno">  519</span>    <span class="comment">// - The UE won&#39;t update the HARQ NDI, if new HARQ TB.</span></div>
<div class="line"><span class="lineno">  520</span>    <span class="comment">// - The UCI indication coming later from the lower layers will likely contain a HARQ-ACK=DTX.</span></div>
<div class="line"><span class="lineno">  521</span>    <span class="comment">// In case UL PDCCHs were skipped, there will be the following consequences:</span></div>
<div class="line"><span class="lineno">  522</span>    <span class="comment">// - The UE will not decode the PUSCH.</span></div>
<div class="line"><span class="lineno">  523</span>    <span class="comment">// - The UE won&#39;t update the HARQ NDI, if new HARQ TB.</span></div>
<div class="line"><span class="lineno">  524</span>    <span class="comment">// - The CRC indication coming from the lower layers will likely be CRC=KO.</span></div>
<div class="line"><span class="lineno">  525</span>    <span class="comment">// - Any UCI in the respective PUSCH will be likely reported as HARQ-ACK=DTX.</span></div>
<div class="line"><span class="lineno">  526</span>    <span class="comment">// In neither of the cases, the HARQs will timeout, because we did not lose the UCI/CRC indications in the lower</span></div>
<div class="line"><span class="lineno">  527</span>    <span class="comment">// layers. We do not need to cancel associated PUSCH grant (in UL PDCCH case) because it is important that</span></div>
<div class="line"><span class="lineno">  528</span>    <span class="comment">// the PUSCH &quot;new_data&quot; flag reaches the lower layers, telling them whether the UL HARQ buffer needs to be reset or</span></div>
<div class="line"><span class="lineno">  529</span>    <span class="comment">// not. Cancelling HARQ retransmissions is dangerous as it increases the chances of NDI ambiguity.</span></div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>    <span class="comment">// In case of PDSCH grants being discarded, there will be the following consequences:</span></div>
<div class="line"><span class="lineno">  532</span>    <span class="comment">// - If the PDCCH was not discarded,the UE will fail to decode the PDSCH and will send an HARQ-ACK=NACK. The</span></div>
<div class="line"><span class="lineno">  533</span>    <span class="comment">// scheduler will retransmit the respective DL HARQ. No actions required.</span></div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>    <span class="comment">// In case of PUCCH and PUSCH grants being discarded.</span></div>
<div class="line"><span class="lineno">  536</span>    <span class="keywordflow">if</span> (event.pusch_and_pucch_discarded) {</div>
<div class="line"><span class="lineno">  537</span>      handle_discarded_pusch(*prev_slot_result, ue_db);</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>      handle_discarded_pucch(*prev_slot_result, ue_db);</div>
<div class="line"><span class="lineno">  540</span>    }</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>    <span class="comment">// Log event.</span></div>
<div class="line"><span class="lineno">  543</span>    ev_logger.enqueue(<a class="code hl_struct" href="../../de/daf/structsrsran_1_1scheduler__event__logger_1_1error__indication__event.html">scheduler_event_logger::error_indication_event</a>{sl_tx, event});</div>
<div class="line"><span class="lineno">  544</span>  });</div>
<div class="line"><span class="lineno">  545</span>}</div>
<div class="ttc" id="astructsrsran_1_1cell__slot__resource__allocator_html"><div class="ttname"><a href="../../d5/db7/structsrsran_1_1cell__slot__resource__allocator.html">srsran::cell_slot_resource_allocator</a></div><div class="ttdoc">Stores all the scheduled information relative to a {slot, cell}.</div><div class="ttdef"><b>Definition</b> resource_grid.h:215</div></div>
<div class="ttc" id="astructsrsran_1_1scheduler__event__logger_1_1error__indication__event_html"><div class="ttname"><a href="../../de/daf/structsrsran_1_1scheduler__event__logger_1_1error__indication__event.html">srsran::scheduler_event_logger::error_indication_event</a></div><div class="ttdef"><b>Definition</b> scheduler_event_logger.h:92</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1a9704a636f666d27009c063ac49736" name="af1a9704a636f666d27009c063ac49736"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1a9704a636f666d27009c063ac49736">&#9670;&#160;</a></span>handle_uci_indication()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::handle_uci_indication </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d2/d81/structsrsran_1_1uci__indication.html">uci_indication</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>uci</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/dbf/classsrsran_1_1scheduler__feedback__handler.html">srsran::scheduler_feedback_handler</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  327</span>{</div>
<div class="line"><span class="lineno">  328</span>  srsran_sanity_check(cell_exists(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ind</a>.cell_index), <span class="stringliteral">&quot;Invalid cell index&quot;</span>);</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ind</a>.ucis.size(); ++i) {</div>
<div class="line"><span class="lineno">  331</span>    <span class="keyword">const</span> <a class="code hl_struct" href="../../d4/daa/structsrsran_1_1uci__indication_1_1uci__pdu.html">uci_indication::uci_pdu</a>&amp; uci = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ind</a>.ucis[i];</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>    cell_specific_events[<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ind</a>.cell_index].emplace(</div>
<div class="line"><span class="lineno">  334</span>        uci.ue_index,</div>
<div class="line"><span class="lineno">  335</span>        [<span class="keyword">this</span>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">uci_sl</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ind</a>.slot_rx, uci_pdu = uci.pdu](<a class="code hl_class" href="../../d9/d2d/classsrsran_1_1ue__cell.html">ue_cell</a>&amp; ue_cc) {</div>
<div class="line"><span class="lineno">  336</span>          if (variant_holds_alternative&lt;uci_indication::uci_pdu::uci_pucch_f0_or_f1_pdu&gt;(uci_pdu)) {</div>
<div class="line"><span class="lineno">  337</span>            const auto&amp; pdu = variant_get&lt;uci_indication::uci_pdu::uci_pucch_f0_or_f1_pdu&gt;(uci_pdu);</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>            <span class="comment">// Process DL HARQ ACKs.</span></div>
<div class="line"><span class="lineno">  340</span>            if (not pdu.harqs.empty()) {</div>
<div class="line"><span class="lineno">  341</span>              handle_harq_ind(ue_cc, uci_sl, pdu.harqs, pdu.ul_sinr);</div>
<div class="line"><span class="lineno">  342</span>            }</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>            <span class="comment">// Process SRs.</span></div>
<div class="line"><span class="lineno">  345</span>            if (pdu.sr_detected) {</div>
<div class="line"><span class="lineno">  346</span>              <span class="comment">// Handle SR indication.</span></div>
<div class="line"><span class="lineno">  347</span>              ue_db[ue_cc.ue_index].handle_sr_indication();</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>              <span class="comment">// Log SR event.</span></div>
<div class="line"><span class="lineno">  350</span>              ev_logger.enqueue(scheduler_event_logger::sr_event{ue_cc.ue_index, ue_cc.rnti()});</div>
<div class="line"><span class="lineno">  351</span>            }</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>            <span class="comment">// Report the PUCCH SINR metric.</span></div>
<div class="line"><span class="lineno">  354</span>            metrics_handler.handle_pucch_sinr(ue_cc.ue_index, pdu.ul_sinr);</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>            const bool is_uci_valid = not pdu.harqs.empty() or pdu.sr_detected;</div>
<div class="line"><span class="lineno">  357</span>            <span class="comment">// Process Timing Advance Offset.</span></div>
<div class="line"><span class="lineno">  358</span>            if (is_uci_valid and pdu.time_advance_offset.has_value() and pdu.ul_sinr.has_value()) {</div>
<div class="line"><span class="lineno">  359</span>              ue_db[ue_cc.ue_index].handle_ul_n_ta_update_indication(</div>
<div class="line"><span class="lineno">  360</span>                  ue_cc.cell_index, pdu.ul_sinr.value(), pdu.time_advance_offset.value());</div>
<div class="line"><span class="lineno">  361</span>            }</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>          } <span class="keywordflow">else</span> if (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">variant_holds_alternative&lt;uci_indication::uci_pdu::uci_pusch_pdu&gt;</a>(uci_pdu)) {</div>
<div class="line"><span class="lineno">  364</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pdu = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">variant_get&lt;uci_indication::uci_pdu::uci_pusch_pdu&gt;</a>(uci_pdu);</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>            <span class="comment">// Process DL HARQ ACKs.</span></div>
<div class="line"><span class="lineno">  367</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> pdu.harqs.empty()) {</div>
<div class="line"><span class="lineno">  368</span>              handle_harq_ind(ue_cc, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">uci_sl</a>, pdu.harqs, <a class="code hl_variable" href="../../d9/def/namespacesrsran.html#a2e817fa4d4a8084eb1746ee8d1440679">nullopt</a>);</div>
<div class="line"><span class="lineno">  369</span>            }</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>            <span class="comment">// Process CSI.</span></div>
<div class="line"><span class="lineno">  372</span>            <span class="keywordflow">if</span> (pdu.csi.has_value()) {</div>
<div class="line"><span class="lineno">  373</span>              handle_csi(ue_cc, *pdu.csi);</div>
<div class="line"><span class="lineno">  374</span>            }</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">variant_holds_alternative&lt;uci_indication::uci_pdu::uci_pucch_f2_or_f3_or_f4_pdu&gt;</a>(uci_pdu)) {</div>
<div class="line"><span class="lineno">  377</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pdu = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">variant_get&lt;uci_indication::uci_pdu::uci_pucch_f2_or_f3_or_f4_pdu&gt;</a>(uci_pdu);</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>            <span class="comment">// Process DL HARQ ACKs.</span></div>
<div class="line"><span class="lineno">  380</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> pdu.harqs.empty()) {</div>
<div class="line"><span class="lineno">  381</span>              handle_harq_ind(ue_cc, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">uci_sl</a>, pdu.harqs, pdu.ul_sinr);</div>
<div class="line"><span class="lineno">  382</span>            }</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>            <span class="comment">// Process SRs.</span></div>
<div class="line"><span class="lineno">  385</span>            <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sr_bit_position_with_1_sr_bit</a> = 0;</div>
<div class="line"><span class="lineno">  386</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> pdu.sr_info.empty() <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> pdu.sr_info.test(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sr_bit_position_with_1_sr_bit</a>)) {</div>
<div class="line"><span class="lineno">  387</span>              <span class="comment">// Handle SR indication.</span></div>
<div class="line"><span class="lineno">  388</span>              ue_db[ue_cc.ue_index].handle_sr_indication();</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>              <span class="comment">// Log SR event.</span></div>
<div class="line"><span class="lineno">  391</span>              ev_logger.enqueue(<a class="code hl_struct" href="../../da/dc1/structsrsran_1_1scheduler__event__logger_1_1sr__event.html">scheduler_event_logger::sr_event</a>{ue_cc.ue_index, ue_cc.rnti()});</div>
<div class="line"><span class="lineno">  392</span>            }</div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>            <span class="comment">// Process CSI.</span></div>
<div class="line"><span class="lineno">  395</span>            <span class="keywordflow">if</span> (pdu.csi.has_value()) {</div>
<div class="line"><span class="lineno">  396</span>              handle_csi(ue_cc, *pdu.csi);</div>
<div class="line"><span class="lineno">  397</span>            }</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>            <span class="comment">// Report the PUCCH metric to the scheduler.</span></div>
<div class="line"><span class="lineno">  400</span>            metrics_handler.<a class="code hl_function" href="../../df/dd1/classsrsran_1_1scheduler__metrics__handler.html#a6e4f25d8ec9c5136211a605d524480ef">handle_pucch_sinr</a>(ue_cc.ue_index, pdu.ul_sinr);</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_uci_valid</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> pdu.harqs.empty() <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">or</a></div>
<div class="line"><span class="lineno">  403</span>                                      (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> pdu.sr_info.empty() <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> pdu.sr_info.test(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sr_bit_position_with_1_sr_bit</a>)) <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">or</a></div>
<div class="line"><span class="lineno">  404</span>                                      pdu.csi.has_value();</div>
<div class="line"><span class="lineno">  405</span>            <span class="comment">// Process Timing Advance Offset.</span></div>
<div class="line"><span class="lineno">  406</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_uci_valid</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> pdu.time_advance_offset.has_value() <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> pdu.ul_sinr.has_value()) {</div>
<div class="line"><span class="lineno">  407</span>              ue_db[ue_cc.ue_index].handle_ul_n_ta_update_indication(</div>
<div class="line"><span class="lineno">  408</span>                  ue_cc.cell_index, pdu.ul_sinr.value(), pdu.time_advance_offset.value());</div>
<div class="line"><span class="lineno">  409</span>            }</div>
<div class="line"><span class="lineno">  410</span>          }</div>
<div class="line"><span class="lineno">  411</span>        },</div>
<div class="line"><span class="lineno">  412</span>        <span class="stringliteral">&quot;UCI&quot;</span>,</div>
<div class="line"><span class="lineno">  413</span>        <span class="comment">// Note: We do not warn if the UE is not found, because there is this transient period when the UE</span></div>
<div class="line"><span class="lineno">  414</span>        <span class="comment">// is about to receive and process the RRC Release, but it is still sending CSI or SR in the PUCCH. If we stop</span></div>
<div class="line"><span class="lineno">  415</span>        <span class="comment">// the PUCCH scheduling for the UE about to be released, we could risk interference between UEs in the PUCCH.</span></div>
<div class="line"><span class="lineno">  416</span>        <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  417</span>  }</div>
<div class="line"><span class="lineno">  418</span>}</div>
<div class="ttc" id="aclasssrsran_1_1scheduler__metrics__handler_html_a6e4f25d8ec9c5136211a605d524480ef"><div class="ttname"><a href="../../df/dd1/classsrsran_1_1scheduler__metrics__handler.html#a6e4f25d8ec9c5136211a605d524480ef">srsran::scheduler_metrics_handler::handle_pucch_sinr</a></div><div class="ttdeci">void handle_pucch_sinr(du_ue_index_t ue_index, optional&lt; float &gt; pucch_sinr)</div><div class="ttdoc">Register PUCCH SINR.</div><div class="ttdef"><b>Definition</b> scheduler_metric_handler.cpp:107</div></div>
<div class="ttc" id="anamespacesrsran_html_a2e817fa4d4a8084eb1746ee8d1440679"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a2e817fa4d4a8084eb1746ee8d1440679">srsran::nullopt</a></div><div class="ttdeci">constexpr nullopt_t nullopt</div><div class="ttdoc">Initializer for empty optional objects.</div><div class="ttdef"><b>Definition</b> optional.h:39</div></div>
<div class="ttc" id="astructsrsran_1_1scheduler__event__logger_1_1sr__event_html"><div class="ttname"><a href="../../da/dc1/structsrsran_1_1scheduler__event__logger_1_1sr__event.html">srsran::scheduler_event_logger::sr_event</a></div><div class="ttdef"><b>Definition</b> scheduler_event_logger.h:69</div></div>
<div class="ttc" id="astructsrsran_1_1uci__indication_1_1uci__pdu_html"><div class="ttname"><a href="../../d4/daa/structsrsran_1_1uci__indication_1_1uci__pdu.html">srsran::uci_indication::uci_pdu</a></div><div class="ttdef"><b>Definition</b> scheduler_feedback_handler.h:81</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae89da97b3f0697fa6285caeffe09157a" name="ae89da97b3f0697fa6285caeffe09157a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae89da97b3f0697fa6285caeffe09157a">&#9670;&#160;</a></span>handle_ue_creation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::handle_ue_creation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d1e/classsrsran_1_1ue__config__update__event.html">ue_config_update_event</a></td>          <td class="paramname"><span class="paramname"><em>ev</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>UE Add/Mod/Remove interface. </p>

<p>Implements <a class="el" href="../../da/d58/classsrsran_1_1sched__ue__configuration__handler.html#a8791881c0f2df65f0cfa634c1746422a">srsran::sched_ue_configuration_handler</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  138</span>{</div>
<div class="line"><span class="lineno">  139</span>  <span class="comment">// Create UE object outside the scheduler slot indication handler to minimize latency.</span></div>
<div class="line"><span class="lineno">  140</span>  std::unique_ptr&lt;ue&gt; u = std::make_unique&lt;ue&gt;(<a class="code hl_struct" href="../../da/d1b/structsrsran_1_1ue__creation__command.html">ue_creation_command</a>{</div>
<div class="line"><span class="lineno">  141</span>      ev.next_config(), ev.get_fallback_command().<a class="code hl_function" href="../../d1/d57/classsrsran_1_1optional.html#a2f160539a76c3f4dd0b50b339b81202e">has_value</a>() <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> ev.get_fallback_command().value(), metrics_handler});</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>  <span class="comment">// Defer UE object addition to ue list to the slot indication handler.</span></div>
<div class="line"><span class="lineno">  144</span>  common_events.emplace(INVALID_DU_UE_INDEX, [<span class="keyword">this</span>, u = std::move(u), ev = std::move(ev)]() <span class="keyword">mutable</span> {</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">if</span> (ue_db.<a class="code hl_function" href="../../dc/df2/classsrsran_1_1ue__repository.html#a8d4b4805828ab1b0375fa323b73c3d6c">contains</a>(u-&gt;ue_index)) {</div>
<div class="line"><span class="lineno">  146</span>      logger.error(<span class="stringliteral">&quot;ue={} rnti={}: Discarding UE creation. Cause: A UE with the same index already exists&quot;</span>,</div>
<div class="line"><span class="lineno">  147</span>                   u-&gt;ue_index,</div>
<div class="line"><span class="lineno">  148</span>                   u-&gt;crnti);</div>
<div class="line"><span class="lineno">  149</span>      ev.abort();</div>
<div class="line"><span class="lineno">  150</span>      return;</div>
<div class="line"><span class="lineno">  151</span>    }</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>    <span class="comment">// Insert UE in UE repository.</span></div>
<div class="line"><span class="lineno">  154</span>    <a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#a511ed22603607d4a784c0f1807648b47">du_ue_index_t</a>   <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ueidx</a>       = u-&gt;ue_index;</div>
<div class="line"><span class="lineno">  155</span>    <a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#a1d83bcd76f2b7c6251855be8472a46f5">rnti_t</a>          rnti        = u-&gt;crnti;</div>
<div class="line"><span class="lineno">  156</span>    <a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#a5b995a7b11715f3042e18281c21991ff">du_cell_index_t</a> pcell_index = u-&gt;get_pcell().cell_index;</div>
<div class="line"><span class="lineno">  157</span>    ue_db.<a class="code hl_function" href="../../dc/df2/classsrsran_1_1ue__repository.html#ace9030f7d1957a751d741be57e325a74">add_ue</a>(std::move(u));</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>    <span class="comment">// Log Event.</span></div>
<div class="line"><span class="lineno">  160</span>    ev_logger.enqueue(<a class="code hl_struct" href="../../df/d12/structsrsran_1_1scheduler__event__logger_1_1ue__creation__event.html">scheduler_event_logger::ue_creation_event</a>{<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ueidx</a>, rnti, pcell_index});</div>
<div class="line"><span class="lineno">  161</span>  });</div>
<div class="line"><span class="lineno">  162</span>}</div>
<div class="ttc" id="aclasssrsran_1_1optional_html_a2f160539a76c3f4dd0b50b339b81202e"><div class="ttname"><a href="../../d1/d57/classsrsran_1_1optional.html#a2f160539a76c3f4dd0b50b339b81202e">srsran::optional::has_value</a></div><div class="ttdeci">constexpr bool has_value() const noexcept</div><div class="ttdef"><b>Definition</b> optional.h:298</div></div>
<div class="ttc" id="aclasssrsran_1_1ue__repository_html_a8d4b4805828ab1b0375fa323b73c3d6c"><div class="ttname"><a href="../../dc/df2/classsrsran_1_1ue__repository.html#a8d4b4805828ab1b0375fa323b73c3d6c">srsran::ue_repository::contains</a></div><div class="ttdeci">bool contains(du_ue_index_t ue_index) const</div><div class="ttdoc">Contains ue index.</div><div class="ttdef"><b>Definition</b> ue_repository.h:48</div></div>
<div class="ttc" id="aclasssrsran_1_1ue__repository_html_ace9030f7d1957a751d741be57e325a74"><div class="ttname"><a href="../../dc/df2/classsrsran_1_1ue__repository.html#ace9030f7d1957a751d741be57e325a74">srsran::ue_repository::add_ue</a></div><div class="ttdeci">void add_ue(std::unique_ptr&lt; ue &gt; u)</div><div class="ttdoc">Add new UE in the UE repository.</div><div class="ttdef"><b>Definition</b> ue_repository.cpp:115</div></div>
<div class="ttc" id="anamespacesrsran_html_a1d83bcd76f2b7c6251855be8472a46f5"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a1d83bcd76f2b7c6251855be8472a46f5">srsran::rnti_t</a></div><div class="ttdeci">rnti_t</div><div class="ttdef"><b>Definition</b> rnti.h:32</div></div>
<div class="ttc" id="anamespacesrsran_html_a511ed22603607d4a784c0f1807648b47"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a511ed22603607d4a784c0f1807648b47">srsran::du_ue_index_t</a></div><div class="ttdeci">du_ue_index_t</div><div class="ttdoc">Maximum number of UEs supported by DU (implementation-defined).</div><div class="ttdef"><b>Definition</b> du_types.h:32</div></div>
<div class="ttc" id="astructsrsran_1_1scheduler__event__logger_1_1ue__creation__event_html"><div class="ttname"><a href="../../df/d12/structsrsran_1_1scheduler__event__logger_1_1ue__creation__event.html">srsran::scheduler_event_logger::ue_creation_event</a></div><div class="ttdef"><b>Definition</b> scheduler_event_logger.h:42</div></div>
<div class="ttc" id="astructsrsran_1_1ue__creation__command_html"><div class="ttname"><a href="../../da/d1b/structsrsran_1_1ue__creation__command.html">srsran::ue_creation_command</a></div><div class="ttdoc">Parameters used to create a UE.</div><div class="ttdef"><b>Definition</b> ue.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aebbe4409e64400cc7cc061ba390e0fe3" name="aebbe4409e64400cc7cc061ba390e0fe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebbe4409e64400cc7cc061ba390e0fe3">&#9670;&#160;</a></span>handle_ue_deletion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::handle_ue_deletion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d14/classsrsran_1_1ue__config__delete__event.html">ue_config_delete_event</a></td>          <td class="paramname"><span class="paramname"><em>ev</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reconfigure an existing UE instance. </p>

<p>Implements <a class="el" href="../../da/d58/classsrsran_1_1sched__ue__configuration__handler.html#ae3e64d59ca2d1987180a4c407b712027">srsran::sched_ue_configuration_handler</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  184</span>{</div>
<div class="line"><span class="lineno">  185</span>  <span class="keyword">const</span> <a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#a511ed22603607d4a784c0f1807648b47">du_ue_index_t</a> ue_index = ev.ue_index();</div>
<div class="line"><span class="lineno">  186</span>  common_events.emplace(ue_index, [<span class="keyword">this</span>, ev = std::move(ev)]() <span class="keyword">mutable</span> {</div>
<div class="line"><span class="lineno">  187</span>    <span class="keyword">const</span> <a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#a511ed22603607d4a784c0f1807648b47">du_ue_index_t</a> ue_idx = ev.ue_index();</div>
<div class="line"><span class="lineno">  188</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> ue_db.<a class="code hl_function" href="../../dc/df2/classsrsran_1_1ue__repository.html#a8d4b4805828ab1b0375fa323b73c3d6c">contains</a>(ue_idx)) {</div>
<div class="line"><span class="lineno">  189</span>      logger.warning(<span class="stringliteral">&quot;Received request to delete ue={} that does not exist&quot;</span>, ue_idx);</div>
<div class="line"><span class="lineno">  190</span>      return;</div>
<div class="line"><span class="lineno">  191</span>    }</div>
<div class="line"><span class="lineno">  192</span>    <span class="keyword">const</span> <a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#a1d83bcd76f2b7c6251855be8472a46f5">rnti_t</a> rnti = ue_db[ue_idx].crnti;</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>    <span class="comment">// Scheduler UE removal from repository.</span></div>
<div class="line"><span class="lineno">  195</span>    ue_db.<a class="code hl_function" href="../../dc/df2/classsrsran_1_1ue__repository.html#a1597db37f0f883b1c604ce7acf2f9713">schedule_ue_rem</a>(std::move(ev));</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>    <span class="comment">// Log UE removal event.</span></div>
<div class="line"><span class="lineno">  198</span>    ev_logger.enqueue(<a class="code hl_struct" href="../../de/d9a/structsrsran_1_1sched__ue__delete__message.html">sched_ue_delete_message</a>{ue_idx, rnti});</div>
<div class="line"><span class="lineno">  199</span>  });</div>
<div class="line"><span class="lineno">  200</span>}</div>
<div class="ttc" id="aclasssrsran_1_1ue__repository_html_a1597db37f0f883b1c604ce7acf2f9713"><div class="ttname"><a href="../../dc/df2/classsrsran_1_1ue__repository.html#a1597db37f0f883b1c604ce7acf2f9713">srsran::ue_repository::schedule_ue_rem</a></div><div class="ttdeci">void schedule_ue_rem(ue_config_delete_event ev)</div><div class="ttdoc">Initiate removal of existing UE from the repository.</div><div class="ttdef"><b>Definition</b> ue_repository.cpp:127</div></div>
<div class="ttc" id="astructsrsran_1_1sched__ue__delete__message_html"><div class="ttname"><a href="../../de/d9a/structsrsran_1_1sched__ue__delete__message.html">srsran::sched_ue_delete_message</a></div><div class="ttdoc">UE Delete Request.</div><div class="ttdef"><b>Definition</b> scheduler_configurator.h:149</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5181d7a5cb934986ddb726406727835" name="ab5181d7a5cb934986ddb726406727835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5181d7a5cb934986ddb726406727835">&#9670;&#160;</a></span>handle_ue_reconfiguration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::handle_ue_reconfiguration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d1e/classsrsran_1_1ue__config__update__event.html">ue_config_update_event</a></td>          <td class="paramname"><span class="paramname"><em>ev</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reconfigure an existing UE instance. </p>

<p>Implements <a class="el" href="../../da/d58/classsrsran_1_1sched__ue__configuration__handler.html#a798fcde164362476cff04cf62b7c32d4">srsran::sched_ue_configuration_handler</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  165</span>{</div>
<div class="line"><span class="lineno">  166</span>  <a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#a511ed22603607d4a784c0f1807648b47">du_ue_index_t</a> ue_index = ev.get_ue_index();</div>
<div class="line"><span class="lineno">  167</span>  common_events.emplace(ue_index, [<span class="keyword">this</span>, ev = std::move(ev)]() <span class="keyword">mutable</span> {</div>
<div class="line"><span class="lineno">  168</span>    <span class="keyword">const</span> <a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#a511ed22603607d4a784c0f1807648b47">du_ue_index_t</a> ue_idx = ev.get_ue_index();</div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> ue_db.<a class="code hl_function" href="../../dc/df2/classsrsran_1_1ue__repository.html#a8d4b4805828ab1b0375fa323b73c3d6c">contains</a>(ue_idx)) {</div>
<div class="line"><span class="lineno">  170</span>      log_invalid_ue_index(ue_idx, <span class="stringliteral">&quot;UE Reconfig Request&quot;</span>);</div>
<div class="line"><span class="lineno">  171</span>      ev.abort();</div>
<div class="line"><span class="lineno">  172</span>      return;</div>
<div class="line"><span class="lineno">  173</span>    }</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>    <span class="comment">// Configure existing UE.</span></div>
<div class="line"><span class="lineno">  176</span>    ue_db[ue_idx].handle_reconfiguration_request(<a class="code hl_struct" href="../../d3/d96/structsrsran_1_1ue__reconf__command.html">ue_reconf_command</a>{ev.next_config()});</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>    <span class="comment">// Log event.</span></div>
<div class="line"><span class="lineno">  179</span>    ev_logger.enqueue(<a class="code hl_struct" href="../../d3/dd7/structsrsran_1_1scheduler__event__logger_1_1ue__reconf__event.html">scheduler_event_logger::ue_reconf_event</a>{ue_idx, ue_db[ue_idx].crnti});</div>
<div class="line"><span class="lineno">  180</span>  });</div>
<div class="line"><span class="lineno">  181</span>}</div>
<div class="ttc" id="astructsrsran_1_1scheduler__event__logger_1_1ue__reconf__event_html"><div class="ttname"><a href="../../d3/dd7/structsrsran_1_1scheduler__event__logger_1_1ue__reconf__event.html">srsran::scheduler_event_logger::ue_reconf_event</a></div><div class="ttdef"><b>Definition</b> scheduler_event_logger.h:47</div></div>
<div class="ttc" id="astructsrsran_1_1ue__reconf__command_html"><div class="ttname"><a href="../../d3/d96/structsrsran_1_1ue__reconf__command.html">srsran::ue_reconf_command</a></div><div class="ttdoc">Parameters used to reconfigure a UE.</div><div class="ttdef"><b>Definition</b> ue.h:42</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86f3c92f1cbf15119333841f98348144" name="a86f3c92f1cbf15119333841f98348144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f3c92f1cbf15119333841f98348144">&#9670;&#160;</a></span>handle_ul_bsr_indication()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::handle_ul_bsr_indication </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d5/d9b/structsrsran_1_1ul__bsr__indication__message.html">ul_bsr_indication_message</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scheduler feedback handler interface. </p>

<p>Implements <a class="el" href="../../d1/dbf/classsrsran_1_1scheduler__feedback__handler.html">srsran::scheduler_feedback_handler</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  203</span>{</div>
<div class="line"><span class="lineno">  204</span>  srsran_sanity_check(cell_exists(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bsr_ind</a>.cell_index), <span class="stringliteral">&quot;Invalid cell index&quot;</span>);</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>  common_events.emplace(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bsr_ind</a>.ue_index, [<span class="keyword">this</span>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bsr_ind</a>]() {</div>
<div class="line"><span class="lineno">  207</span>    if (not ue_db.contains(bsr_ind.ue_index)) {</div>
<div class="line"><span class="lineno">  208</span>      log_invalid_ue_index(bsr_ind.ue_index, <span class="stringliteral">&quot;BSR&quot;</span>);</div>
<div class="line"><span class="lineno">  209</span>      return;</div>
<div class="line"><span class="lineno">  210</span>    }</div>
<div class="line"><span class="lineno">  211</span>    <span class="keyword">auto</span>&amp; u = ue_db[<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bsr_ind</a>.ue_index];</div>
<div class="line"><span class="lineno">  212</span>    <span class="comment">// Handle event.</span></div>
<div class="line"><span class="lineno">  213</span>    u.handle_bsr_indication(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bsr_ind</a>);</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>    <span class="comment">// Log event.</span></div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">if</span> (ev_logger.enabled()) {</div>
<div class="line"><span class="lineno">  217</span>      <a class="code hl_struct" href="../../d5/d30/structsrsran_1_1scheduler__event__logger_1_1bsr__event.html">scheduler_event_logger::bsr_event</a> <span class="keyword">event</span>{};</div>
<div class="line"><span class="lineno">  218</span>      <span class="keyword">event</span>.ue_index             = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bsr_ind</a>.ue_index;</div>
<div class="line"><span class="lineno">  219</span>      <span class="keyword">event</span>.rnti                 = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bsr_ind</a>.crnti;</div>
<div class="line"><span class="lineno">  220</span>      <span class="keyword">event</span>.type                 = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bsr_ind</a>.type;</div>
<div class="line"><span class="lineno">  221</span>      <span class="keyword">event</span>.reported_lcgs        = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bsr_ind</a>.reported_lcgs;</div>
<div class="line"><span class="lineno">  222</span>      <span class="keyword">event</span>.tot_ul_pending_bytes = <a class="code hl_class" href="../../d0/d31/classsrsran_1_1units_1_1bytes.html">units::bytes</a>{u.pending_ul_newtx_bytes()};</div>
<div class="line"><span class="lineno">  223</span>      ev_logger.enqueue(event);</div>
<div class="line"><span class="lineno">  224</span>    }</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>    <span class="comment">// Notify metrics handler.</span></div>
<div class="line"><span class="lineno">  227</span>    metrics_handler.<a class="code hl_function" href="../../df/dd1/classsrsran_1_1scheduler__metrics__handler.html#ae145075dfaf3f5ea6f7f4d0988935ab6">handle_ul_bsr_indication</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bsr_ind</a>);</div>
<div class="line"><span class="lineno">  228</span>  });</div>
<div class="line"><span class="lineno">  229</span>}</div>
<div class="ttc" id="aclasssrsran_1_1scheduler__metrics__handler_html_ae145075dfaf3f5ea6f7f4d0988935ab6"><div class="ttname"><a href="../../df/dd1/classsrsran_1_1scheduler__metrics__handler.html#ae145075dfaf3f5ea6f7f4d0988935ab6">srsran::scheduler_metrics_handler::handle_ul_bsr_indication</a></div><div class="ttdeci">void handle_ul_bsr_indication(const ul_bsr_indication_message &amp;bsr)</div><div class="ttdoc">Handle UL BSR indication.</div><div class="ttdef"><b>Definition</b> scheduler_metric_handler.cpp:118</div></div>
<div class="ttc" id="astructsrsran_1_1scheduler__event__logger_1_1bsr__event_html"><div class="ttname"><a href="../../d5/d30/structsrsran_1_1scheduler__event__logger_1_1bsr__event.html">srsran::scheduler_event_logger::bsr_event</a></div><div class="ttdef"><b>Definition</b> scheduler_event_logger.h:78</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab40ea6616a5a1c6526b61fb226a92338" name="ab40ea6616a5a1c6526b61fb226a92338"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab40ea6616a5a1c6526b61fb226a92338">&#9670;&#160;</a></span>handle_ul_phr_indication()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::handle_ul_phr_indication </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d5/dfb/structsrsran_1_1ul__phr__indication__message.html">ul_phr_indication_message</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>phr_ind</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles PHR indication sent by MAC. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phr</td><td>PHR indication message sent by MAC. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d1/dbf/classsrsran_1_1scheduler__feedback__handler.html#ab8a975f69bce94dd82672ed40b7a590e">srsran::scheduler_feedback_handler</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  232</span>{</div>
<div class="line"><span class="lineno">  233</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_struct" href="../../df/d7f/structsrsran_1_1cell__ph__report.html">cell_ph_report</a>&amp; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_phr</a> : <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">phr_ind</a>.phr.get_phr()) {</div>
<div class="line"><span class="lineno">  234</span>    srsran_sanity_check(cell_exists(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_phr</a>.serv_cell_id), <span class="stringliteral">&quot;Invalid serving cell index={}&quot;</span>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_phr</a>.serv_cell_id);</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>    cell_specific_events[<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_phr</a>.serv_cell_id].emplace(</div>
<div class="line"><span class="lineno">  237</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">phr_ind</a>.ue_index,</div>
<div class="line"><span class="lineno">  238</span>        [<span class="keyword">this</span>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_phr</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">phr_ind</a>](<a class="code hl_class" href="../../d9/d2d/classsrsran_1_1ue__cell.html">ue_cell</a>&amp; ue_cc) {</div>
<div class="line"><span class="lineno">  239</span>          ue_cc.channel_state_manager().handle_phr(cell_phr);</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>          <span class="comment">// Log event.</span></div>
<div class="line"><span class="lineno">  242</span>          scheduler_event_logger::phr_event event{};</div>
<div class="line"><span class="lineno">  243</span>          <span class="keyword">event</span>.ue_index   = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">phr_ind</a>.ue_index;</div>
<div class="line"><span class="lineno">  244</span>          <span class="keyword">event</span>.rnti       = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">phr_ind</a>.rnti;</div>
<div class="line"><span class="lineno">  245</span>          <span class="keyword">event</span>.cell_index = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_phr</a>.serv_cell_id;</div>
<div class="line"><span class="lineno">  246</span>          <span class="keyword">event</span>.ph         = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_phr</a>.ph;</div>
<div class="line"><span class="lineno">  247</span>          <span class="keyword">event</span>.p_cmax     = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cell_phr</a>.p_cmax;</div>
<div class="line"><span class="lineno">  248</span>          ev_logger.enqueue(event);</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>          <span class="comment">// Notify metrics handler.</span></div>
<div class="line"><span class="lineno">  251</span>          metrics_handler.<a class="code hl_function" href="../../df/dd1/classsrsran_1_1scheduler__metrics__handler.html#a775ca5759c1bbed03fbf9fb47d725733">handle_ul_phr_indication</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">phr_ind</a>);</div>
<div class="line"><span class="lineno">  252</span>        },</div>
<div class="line"><span class="lineno">  253</span>        <span class="stringliteral">&quot;UL PHR&quot;</span>,</div>
<div class="line"><span class="lineno">  254</span>        <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  255</span>  }</div>
<div class="line"><span class="lineno">  256</span>}</div>
<div class="ttc" id="aclasssrsran_1_1scheduler__metrics__handler_html_a775ca5759c1bbed03fbf9fb47d725733"><div class="ttname"><a href="../../df/dd1/classsrsran_1_1scheduler__metrics__handler.html#a775ca5759c1bbed03fbf9fb47d725733">srsran::scheduler_metrics_handler::handle_ul_phr_indication</a></div><div class="ttdeci">void handle_ul_phr_indication(const ul_phr_indication_message &amp;phr_ind)</div><div class="ttdoc">Handle UL PHR indication.</div><div class="ttdef"><b>Definition</b> scheduler_metric_handler.cpp:132</div></div>
<div class="ttc" id="astructsrsran_1_1cell__ph__report_html"><div class="ttname"><a href="../../df/d7f/structsrsran_1_1cell__ph__report.html">srsran::cell_ph_report</a></div><div class="ttdoc">UL Power Headroom Report (PHR) of a cell.</div><div class="ttdef"><b>Definition</b> phr_report.h:46</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8086d93a08ad2471d45d8f6e069a8988" name="a8086d93a08ad2471d45d8f6e069a8988"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8086d93a08ad2471d45d8f6e069a8988">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> ue_event_manager::run </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d3c/classsrsran_1_1slot__point.html">slot_point</a></td>          <td class="paramname"><span class="paramname"><em>sl</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a5b995a7b11715f3042e18281c21991ff">du_cell_index_t</a></td>          <td class="paramname"><span class="paramname"><em>cell_index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process events for a given slot and cell index. </p>
<div class="fragment"><div class="line"><span class="lineno">  608</span>{</div>
<div class="line"><span class="lineno">  609</span>  srsran_sanity_check(cell_exists(cell_index), <span class="stringliteral">&quot;Invalid cell index {}&quot;</span>, cell_index);</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>  <span class="comment">// Process common events.</span></div>
<div class="line"><span class="lineno">  612</span>  process_common(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">sl</a>, cell_index);</div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>  <span class="comment">// Process carrier specific events.</span></div>
<div class="line"><span class="lineno">  615</span>  process_cell_specific(cell_index);</div>
<div class="line"><span class="lineno">  616</span>}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/scheduler/ue_scheduling/<a class="el" href="../../de/d34/ue__event__manager_8h_source.html">ue_event_manager.h</a></li>
<li>lib/scheduler/ue_scheduling/<b>ue_event_manager.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
