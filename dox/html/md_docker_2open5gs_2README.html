<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>srsRAN Docs: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">srsRAN Docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">README</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a all-in-one Docker container for Open5GS. At build, the container will use the specified version of the open5gs repository (default v2.6.1 ). To run the latest tag of the open5gs repository (<a href="https://github.com/open5gs/open5gs/tags">https://github.com/open5gs/open5gs/tags</a>), line 51 and 52 in .Dockerfile </p><div class="fragment"><div class="line"># get latest open5gs tag (must be stored in a file, because docker does not allow to use the return value directly)</div>
<div class="line"># RUN git ls-remote --tags https://github.com/open5gs/open5gs | sort -t &#39;/&#39; -k 3 -V | awk -F/ &#39;{ print $3 }&#39; | awk &#39;!/\^\{\}/&#39; | tail -n 1 &gt; ./open5gsversion</div>
</div><!-- fragment --><p> must be uncommented.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Container Parameters</h1>
<p>In <a href="open5gs.env">open5gs.env</a> the following parameters can be set:</p>
<ul>
<li>MONGODB_IP (default: 127.0.0.1): This is the IP of the mongodb to use. 127.0.0.1 is the mongodb that runs inside this container.</li>
<li>SUBSCRIBER_DB (default: "001010123456780,00112233445566778899aabbccddeeff,opc,63bfa50ee6523365ff14c1f45f88737d,8000,10.45.1.2"): This adds subscriber data for a single or multiple users to the Open5GS mongodb. It contains either:<ul>
<li>Comma separated string with information to define a subscriber</li>
<li><code>subscriber_db.csv</code>. This is a csv file that contains entries to add to open5gs mongodb. Each entry will represent a subscriber. It must be stored in <code>srsgnb/docker/open5gs/</code></li>
</ul>
</li>
<li>OPEN5GS_IP: This must be set to the IP of the container (here: 10.53.1.2).</li>
<li>UE_IP_BASE: Defines the IP base used for connected UEs (here: 10.45.0).</li>
<li>DEBUG (default: false): This can be set to true to run Open5GS in debug mode.</li>
</ul>
<div class="fragment"><div class="line"># Kept in the following format: &quot;Name,IMSI,Key,OP_Type,OP/OPc,AMF,QCI,IP_alloc&quot;</div>
<div class="line">#</div>
<div class="line"># Name:     Human readable name to help distinguish UE&#39;s. Ignored by the HSS</div>
<div class="line"># IMSI:     UE&#39;s IMSI value</div>
<div class="line"># Key:      UE&#39;s key, where other keys are derived from. Stored in hexadecimal</div>
<div class="line"># OP_Type:  Operator&#39;s code type, either OP or OPc</div>
<div class="line"># OP/OPc:   Operator Code/Cyphered Operator Code, stored in hexadecimal</div>
<div class="line"># AMF:      Authentication management field, stored in hexadecimal</div>
<div class="line"># QCI:      QoS Class Identifier for the UE&#39;s default bearer.</div>
<div class="line"># IP_alloc: IP allocation stratagy for the SPGW.</div>
<div class="line">#           With &#39;dynamic&#39; the SPGW will automatically allocate IPs</div>
<div class="line">#           With a valid IPv4 (e.g. &#39;10.45.0.2&#39;) the UE will have a statically assigned IP.</div>
<div class="line">#</div>
<div class="line"># Note: Lines starting by &#39;#&#39; are ignored and will be overwritten</div>
<div class="line"># List of UEs with IMSI, and key increasing by one for each new UE. Useful for testing with AmariUE simulator and ue_count option</div>
<div class="line">ue01,001010123456789,00112233445566778899aabbccddeeff,opc,63bfa50ee6523365ff14c1f45f88737d,9001,9,10.45.1.2</div>
<div class="line">ue02,001010123456790,00112233445566778899aabbccddef00,opc,63bfa50ee6523365ff14c1f45f88737d,9001,9,10.45.2.2</div>
<div class="line">ue03,001010123456791,00112233445566778899aabbccddef01,opc,63bfa50ee6523365ff14c1f45f88737d,9001,9,10.45.3.2</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
Open5GS Parameters</h1>
<p>Open5GS can be setup using <a href="open5gs-5gc.yml">open5gs-5gc.yml</a>.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Usage</h1>
<p>Create a Docker network to assign a specified IP to the Open5GS conainer (here: 10.53.1.2):</p>
<p><code>docker network create --subnet=10.53.1.0/16 open5gsnet</code></p>
<p>Build the Docker container using:</p>
<p><code>docker build --target open5gs -t open5gs-docker .</code></p>
<p>You can overwrite open5gs version by adding <code>--build-arg OPEN5GS_VERSION=v2.6.1</code></p>
<p>Then run the docker container with:</p>
<p><code>docker run --net open5gsnet --ip 10.53.1.2 --env-file open5gs.env --privileged --publish 3000:3000 open5gs-docker ./build/tests/app/5gc -c open5gs-5gc.yml</code></p>
<p>To use this container with srsgnb, the <code>addr</code> option under <code>amf</code> section in gnb configuration must be set OPEN5GS_IP (here: 10.53.1.2). It could also be required to modify <code>bind_addr</code> option under <code>amf</code> section in gnb configuration to the local ethernet/wifi IP address for the host or container where gnb is running, not a localhost IP.</p>
<p>To ping a connected UE setup the necessary route to the UE_IP_BASE + ".0/24" (here: 10.45.0) via the OPEN5GS_IP (here: 10.53.1.2) using:</p>
<p><code>sudo ip ro add 10.45.0.0/16 via 10.53.1.2</code></p>
<h2><a class="anchor" id="autotoc_md9"></a>
Note</h2>
<p>The Open5GS WebUI to manually add/change UEs to the mongodb can be accessed at [localhost:3000](localhost:3000). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
