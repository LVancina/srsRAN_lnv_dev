<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>srsRAN Docs: srsran::dft_processor_fftw_impl Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">srsRAN Docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/def/namespacesrsran.html">srsran</a></li><li class="navelem"><a class="el" href="../../d8/d50/classsrsran_1_1dft__processor__fftw__impl.html">dft_processor_fftw_impl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../db/dfd/classsrsran_1_1dft__processor__fftw__impl-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">srsran::dft_processor_fftw_impl Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Describes a DFT processor class configuration based on the FFTW library.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../de/dbd/dft__processor__fftw__impl_8h_source.html">dft_processor_fftw_impl.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for srsran::dft_processor_fftw_impl:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/df3/classsrsran_1_1dft__processor__fftw__impl__inherit__graph.png" border="0" usemap="#asrsran_1_1dft__processor__fftw__impl_inherit__map" alt="Inheritance graph"/></div>
<map name="asrsran_1_1dft__processor__fftw__impl_inherit__map" id="asrsran_1_1dft__processor__fftw__impl_inherit__map">
<area shape="rect" title="Describes a DFT processor class configuration based on the FFTW library." alt="" coords="6,219,165,428"/>
<area shape="rect" href="../../dd/d92/classsrsran_1_1dft__processor.html" title="Describes a Discrete Fourier Transform (DFT) processor." alt="" coords="5,5,165,171"/>
<area shape="poly" title=" " alt="" coords="88,184,88,219,83,219,83,184"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for srsran::dft_processor_fftw_impl:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/db0/classsrsran_1_1dft__processor__fftw__impl__coll__graph.png" border="0" usemap="#asrsran_1_1dft__processor__fftw__impl_coll__map" alt="Collaboration graph"/></div>
<map name="asrsran_1_1dft__processor__fftw__impl_coll__map" id="asrsran_1_1dft__processor__fftw__impl_coll__map">
<area shape="rect" title="Describes a DFT processor class configuration based on the FFTW library." alt="" coords="6,219,165,428"/>
<area shape="rect" href="../../dd/d92/classsrsran_1_1dft__processor.html" title="Describes a Discrete Fourier Transform (DFT) processor." alt="" coords="5,5,165,171"/>
<area shape="poly" title=" " alt="" coords="88,184,88,219,83,219,83,184"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac20cf8ef7569a264c9673861e219791c" id="r_ac20cf8ef7569a264c9673861e219791c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac20cf8ef7569a264c9673861e219791c">dft_processor_fftw_impl</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d1/dea/structsrsran_1_1dft__processor__fftw__configuration.html">dft_processor_fftw_configuration</a> &amp;<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_config</a>, <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d8/d34/structsrsran_1_1dft__processor_1_1configuration.html">configuration</a> &amp;<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dft_config</a>)</td></tr>
<tr class="memdesc:ac20cf8ef7569a264c9673861e219791c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a DFT processor based on the FFTW library.  <br /></td></tr>
<tr class="separator:ac20cf8ef7569a264c9673861e219791c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad83c7f0d17bb4d292db084683df1999a" id="r_ad83c7f0d17bb4d292db084683df1999a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad83c7f0d17bb4d292db084683df1999a">~dft_processor_fftw_impl</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="separator:ad83c7f0d17bb4d292db084683df1999a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5f076ffacbbdf877bd0c985e957101" id="r_a1e5f076ffacbbdf877bd0c985e957101"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40">direction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e5f076ffacbbdf877bd0c985e957101">get_direction</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a1e5f076ffacbbdf877bd0c985e957101"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the DFT direction.  <br /></td></tr>
<tr class="separator:a1e5f076ffacbbdf877bd0c985e957101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac92455a926f7dfe5b7c06ebc45176db2" id="r_ac92455a926f7dfe5b7c06ebc45176db2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a> <a class="el" href="../../d1/da0/classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac92455a926f7dfe5b7c06ebc45176db2">get_size</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:ac92455a926f7dfe5b7c06ebc45176db2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the DFT number of points.  <br /></td></tr>
<tr class="separator:ac92455a926f7dfe5b7c06ebc45176db2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b470cf9adf33188fe78273e2aa67c14" id="r_a1b470cf9adf33188fe78273e2aa67c14"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d9/def/namespacesrsran.html#adb0c7723c7e69c78add18ca453dd1dbc">cf_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b470cf9adf33188fe78273e2aa67c14">get_input</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a1b470cf9adf33188fe78273e2aa67c14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a view of the internal input DFT buffer.  <br /></td></tr>
<tr class="separator:a1b470cf9adf33188fe78273e2aa67c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada651ca0253e33c5bf0e1909ebffbbf2" id="r_ada651ca0253e33c5bf0e1909ebffbbf2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d9/def/namespacesrsran.html#adb0c7723c7e69c78add18ca453dd1dbc">cf_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada651ca0253e33c5bf0e1909ebffbbf2">run</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:ada651ca0253e33c5bf0e1909ebffbbf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the DFT from the internal input data.  <br /></td></tr>
<tr class="separator:ada651ca0253e33c5bf0e1909ebffbbf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsrsran_1_1dft__processor"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classsrsran_1_1dft__processor')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html">srsran::dft_processor</a></td></tr>
<tr class="memitem:a13ac524d356a440765652c54a7c85d17 inherit pub_methods_classsrsran_1_1dft__processor" id="r_a13ac524d356a440765652c54a7c85d17"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">virtual</a>&#160;</td><td class="memItemRight" valign="bottom"><b>~dft_processor</b> ()=<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">default</a></td></tr>
<tr class="memdesc:a13ac524d356a440765652c54a7c85d17 inherit pub_methods_classsrsran_1_1dft__processor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor. <br /></td></tr>
<tr class="separator:a13ac524d356a440765652c54a7c85d17 inherit pub_methods_classsrsran_1_1dft__processor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classsrsran_1_1dft__processor"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_types_classsrsran_1_1dft__processor')"><img src="../../closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html">srsran::dft_processor</a></td></tr>
<tr class="memitem:ad6d2dd1eff168ecf482b422a7c363d40 inherit pub_types_classsrsran_1_1dft__processor" id="r_ad6d2dd1eff168ecf482b422a7c363d40"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40">direction</a> { <a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40a4c5d06b02c97731aaa976179c62dcf76">DIRECT</a> = 0
, <a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40a1955bdc302911f376074eb9b02e56639">INVERSE</a>
 }</td></tr>
<tr class="memdesc:ad6d2dd1eff168ecf482b422a7c363d40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates the DFT direction.  <a href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40">More...</a><br /></td></tr>
<tr class="separator:ad6d2dd1eff168ecf482b422a7c363d40 inherit pub_types_classsrsran_1_1dft__processor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_classsrsran_1_1dft__processor"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_static_methods_classsrsran_1_1dft__processor')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html">srsran::dft_processor</a></td></tr>
<tr class="memitem:adf16cec292860b269f0826f29e4f0de3 inherit pub_static_methods_classsrsran_1_1dft__processor" id="r_adf16cec292860b269f0826f29e4f0de3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">static</a> std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#adf16cec292860b269f0826f29e4f0de3">direction_to_string</a> (<a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40">direction</a> dir)</td></tr>
<tr class="memdesc:adf16cec292860b269f0826f29e4f0de3 inherit pub_static_methods_classsrsran_1_1dft__processor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a DFT direction to string.  <br /></td></tr>
<tr class="separator:adf16cec292860b269f0826f29e4f0de3 inherit pub_static_methods_classsrsran_1_1dft__processor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Describes a DFT processor class configuration based on the FFTW library. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac20cf8ef7569a264c9673861e219791c" name="ac20cf8ef7569a264c9673861e219791c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac20cf8ef7569a264c9673861e219791c">&#9670;&#160;</a></span>dft_processor_fftw_impl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dft_processor_fftw_impl::dft_processor_fftw_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d1/dea/structsrsran_1_1dft__processor__fftw__configuration.html">dft_processor_fftw_configuration</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>fftw_config</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d8/d34/structsrsran_1_1dft__processor_1_1configuration.html">configuration</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>dft_config</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a DFT processor based on the FFTW library. </p>
<dl class="section remark"><dt>Remarks</dt><dd>The FFTW wisdom is loaded with the first instance. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fftw_config</td><td>Provides the FFTW specific parameters. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dft_config</td><td>Provides the generic DFT processor parameters. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  123</span>                                                                                                     :</div>
<div class="line"><span class="lineno">  124</span>  dir(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dft_config</a>.dir), input(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dft_config</a>.size), output(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dft_config</a>.size)</div>
<div class="line"><span class="lineno">  125</span>{</div>
<div class="line"><span class="lineno">  126</span>  <span class="comment">// Avoid that two or more plan creations are called at same time.</span></div>
<div class="line"><span class="lineno">  127</span>  std::lock_guard&lt;std::mutex&gt; lock(mutex_init);</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>  <span class="comment">// Load FFT wisdom if it is not marked to avoid.</span></div>
<div class="line"><span class="lineno">  130</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_config</a>.avoid_wisdom) {</div>
<div class="line"><span class="lineno">  131</span>    <span class="comment">// Use file name given in the configuration by default.</span></div>
<div class="line"><span class="lineno">  132</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_config</a>.wisdom_filename.empty()) {</div>
<div class="line"><span class="lineno">  133</span>      wisdom_filename = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_config</a>.wisdom_filename;</div>
<div class="line"><span class="lineno">  134</span>    }</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>    <span class="comment">// If no file name is given, get default.</span></div>
<div class="line"><span class="lineno">  137</span>    <span class="keywordflow">if</span> (wisdom_filename.empty()) {</div>
<div class="line"><span class="lineno">  138</span>      wisdom_filename = fftw_wisdom_filename();</div>
<div class="line"><span class="lineno">  139</span>    }</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>    <span class="comment">// Load FFTW wisdom from file name if it is available.</span></div>
<div class="line"><span class="lineno">  142</span>    <span class="keywordflow">if</span> (!wisdom_filename.empty()) {</div>
<div class="line"><span class="lineno">  143</span>      dft_processor_fftw_import_wisdom(wisdom_filename.get());</div>
<div class="line"><span class="lineno">  144</span>    }</div>
<div class="line"><span class="lineno">  145</span>  }</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>  <span class="comment">// Prepare FFTW plan creation arguments.</span></div>
<div class="line"><span class="lineno">  148</span>  <span class="keywordtype">int</span>            <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_size</a>   = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dft_config</a>.size);</div>
<div class="line"><span class="lineno">  149</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftwf_complex</a>* <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_input</a>  = (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftwf_complex</a>*)input.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#a451a209648781b54503ae671408e16b8">data</a>();</div>
<div class="line"><span class="lineno">  150</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftwf_complex</a>* <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_output</a> = (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftwf_complex</a>*)output.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#a451a209648781b54503ae671408e16b8">data</a>();</div>
<div class="line"><span class="lineno">  151</span>  <span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_flags</a> = <span class="keyword">static_cast&lt;</span>std::underlying_type_t&lt;fftw_plan_optimization&gt;<span class="keyword">&gt;</span>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_config</a>.optimization_flag);</div>
<div class="line"><span class="lineno">  152</span>  <span class="keywordtype">int</span>      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_sign</a>  = (dir == <a class="code hl_enumvalue" href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40a4c5d06b02c97731aaa976179c62dcf76">direction::DIRECT</a>) ? <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">FFTW_FORWARD</a> : <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">FFTW_BACKWARD</a>;</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>  <span class="comment">// Set FFTW plan creation duration limit.</span></div>
<div class="line"><span class="lineno">  155</span>  <span class="keywordflow">if</span> (std::isnormal(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_config</a>.plan_creation_timeout_s) &amp;&amp; (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_config</a>.plan_creation_timeout_s &gt; 0)) {</div>
<div class="line"><span class="lineno">  156</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftwf_set_timelimit</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_config</a>.plan_creation_timeout_s);</div>
<div class="line"><span class="lineno">  157</span>  }</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>  <span class="comment">// Create plan.</span></div>
<div class="line"><span class="lineno">  160</span>  plan = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftwf_plan_dft_1d</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_size</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_input</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_output</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_sign</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_flags</a>);</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>  <span class="comment">// Make sure plan is valid.</span></div>
<div class="line"><span class="lineno">  163</span>  srsran_assert(plan != <span class="keyword">nullptr</span>,</div>
<div class="line"><span class="lineno">  164</span>                <span class="stringliteral">&quot;FFTW Plan creation for size={} dir={} failed.&quot;</span>,</div>
<div class="line"><span class="lineno">  165</span>                <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftw_size</a>,</div>
<div class="line"><span class="lineno">  166</span>                <a class="code hl_function" href="../../dd/d92/classsrsran_1_1dft__processor.html#adf16cec292860b269f0826f29e4f0de3">dft_processor::direction_to_string</a>(dir).c_str());</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>  <span class="comment">// Count as another successful instance.</span></div>
<div class="line"><span class="lineno">  169</span>  ++fftw_count;</div>
<div class="line"><span class="lineno">  170</span>}</div>
<div class="ttc" id="aclasssrsran_1_1dft__processor_html_ad6d2dd1eff168ecf482b422a7c363d40a4c5d06b02c97731aaa976179c62dcf76"><div class="ttname"><a href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40a4c5d06b02c97731aaa976179c62dcf76">srsran::dft_processor::direction::DIRECT</a></div><div class="ttdeci">@ DIRECT</div><div class="ttdoc">Converts a time domain signal into frequency domain.</div></div>
<div class="ttc" id="aclasssrsran_1_1dft__processor_html_adf16cec292860b269f0826f29e4f0de3"><div class="ttname"><a href="../../dd/d92/classsrsran_1_1dft__processor.html#adf16cec292860b269f0826f29e4f0de3">srsran::dft_processor::direction_to_string</a></div><div class="ttdeci">static std::string direction_to_string(direction dir)</div><div class="ttdoc">Converts a DFT direction to string.</div><div class="ttdef"><b>Definition</b> dft_processor.h:56</div></div>
<div class="ttc" id="aclasssrsran_1_1span_html_a451a209648781b54503ae671408e16b8"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html#a451a209648781b54503ae671408e16b8">srsran::span::data</a></div><div class="ttdeci">constexpr pointer data() const noexcept</div><div class="ttdoc">Returns a pointer to the beginning of the sequence.</div><div class="ttdef"><b>Definition</b> span.h:201</div></div>
<div class="ttc" id="anamespacesrsran_html_a58e7c9f2c51a9ad6a0899b46d5315723"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">srsran::mask_msb_ones</a></div><div class="ttdeci">constexpr Integer mask_msb_ones(size_t N)</div><div class="ttdoc">Returns an unsigned integer with the N most significant bits (MSB) set to one, and the remaining bits...</div><div class="ttdef"><b>Definition</b> bounded_bitset.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad83c7f0d17bb4d292db084683df1999a" name="ad83c7f0d17bb4d292db084683df1999a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad83c7f0d17bb4d292db084683df1999a">&#9670;&#160;</a></span>~dft_processor_fftw_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dft_processor_fftw_impl::~dft_processor_fftw_impl </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Frees the input and output buffers, destroys the FFTW plan, saves the wisdom if it is the first instance to be destroyed and cleans up the FFTW context if it is the last instance to be destroyed. </p>
<div class="fragment"><div class="line"><span class="lineno">  173</span>{</div>
<div class="line"><span class="lineno">  174</span>  <span class="comment">// Avoid that two or more plan creations are called at same time.</span></div>
<div class="line"><span class="lineno">  175</span>  std::lock_guard&lt;std::mutex&gt; lock(mutex_init);</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>  <span class="comment">// Save wisdom if it was loaded.</span></div>
<div class="line"><span class="lineno">  178</span>  <span class="keywordflow">if</span> (!wisdom_filename.empty()) {</div>
<div class="line"><span class="lineno">  179</span>    <span class="comment">// Save the FFT wisdom file with the same name it was loaded.</span></div>
<div class="line"><span class="lineno">  180</span>    dft_processor_fftw_export_wisdom(wisdom_filename.get());</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>    <span class="comment">// Make sure other instances do not save the FFTW wisdom file.</span></div>
<div class="line"><span class="lineno">  183</span>    wisdom_filename.clear();</div>
<div class="line"><span class="lineno">  184</span>  }</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>  <span class="comment">// Destroy FFTW plan.</span></div>
<div class="line"><span class="lineno">  187</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftwf_destroy_plan</a>(plan);</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>  <span class="comment">// Decrease FFTW instance counter.</span></div>
<div class="line"><span class="lineno">  190</span>  --fftw_count;</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>  <span class="comment">// Clean up if this is the last destroyed instance.</span></div>
<div class="line"><span class="lineno">  193</span>  <span class="keywordflow">if</span> (fftw_count == 0) {</div>
<div class="line"><span class="lineno">  194</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftwf_cleanup</a>();</div>
<div class="line"><span class="lineno">  195</span>  }</div>
<div class="line"><span class="lineno">  196</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1e5f076ffacbbdf877bd0c985e957101" name="a1e5f076ffacbbdf877bd0c985e957101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e5f076ffacbbdf877bd0c985e957101">&#9670;&#160;</a></span>get_direction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#ad6d2dd1eff168ecf482b422a7c363d40">direction</a> srsran::dft_processor_fftw_impl::get_direction </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the DFT direction. </p>

<p>Implements <a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#acbc192fd5ef9ad55dd0611b199b01845">srsran::dft_processor</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  122</span>{ <span class="keywordflow">return</span> dir; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b470cf9adf33188fe78273e2aa67c14" name="a1b470cf9adf33188fe78273e2aa67c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b470cf9adf33188fe78273e2aa67c14">&#9670;&#160;</a></span>get_input()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d9/def/namespacesrsran.html#adb0c7723c7e69c78add18ca453dd1dbc">cf_t</a> &gt; srsran::dft_processor_fftw_impl::get_input </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a view of the internal input DFT buffer. </p>

<p>Implements <a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#aa07d386497c47ca798864f6300937cab">srsran::dft_processor</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  128</span>{ <span class="keywordflow">return</span> input; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac92455a926f7dfe5b7c06ebc45176db2" name="ac92455a926f7dfe5b7c06ebc45176db2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac92455a926f7dfe5b7c06ebc45176db2">&#9670;&#160;</a></span>get_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a> <a class="el" href="../../d1/da0/classint.html">int</a> srsran::dft_processor_fftw_impl::get_size </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the DFT number of points. </p>

<p>Implements <a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#afcb93862572be80c25306a1a627b3d07">srsran::dft_processor</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  125</span>{ <span class="keywordflow">return</span> input.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#ad0e376d95ca916144eac76f27f0654ac">size</a>(); }</div>
<div class="ttc" id="aclasssrsran_1_1span_html_ad0e376d95ca916144eac76f27f0654ac"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html#ad0e376d95ca916144eac76f27f0654ac">srsran::span::size</a></div><div class="ttdeci">constexpr size_type size() const noexcept</div><div class="ttdoc">Returns the number of elements in the span.</div><div class="ttdef"><b>Definition</b> span.h:168</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada651ca0253e33c5bf0e1909ebffbbf2" name="ada651ca0253e33c5bf0e1909ebffbbf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada651ca0253e33c5bf0e1909ebffbbf2">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d9/def/namespacesrsran.html#adb0c7723c7e69c78add18ca453dd1dbc">cf_t</a> &gt; dft_processor_fftw_impl::run </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes the DFT from the internal input data. </p>
<dl class="section return"><dt>Returns</dt><dd>A view of the internal output DFT buffer. </dd></dl>

<p>Implements <a class="el" href="../../dd/d92/classsrsran_1_1dft__processor.html#a628d1ee463ea4107a2809eeb6cdac552">srsran::dft_processor</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  199</span>{</div>
<div class="line"><span class="lineno">  200</span>  <span class="comment">// Execute FFTW plan.</span></div>
<div class="line"><span class="lineno">  201</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fftwf_execute</a>(plan);</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>  <span class="comment">// Return the view of the output data.</span></div>
<div class="line"><span class="lineno">  204</span>  <span class="keywordflow">return</span> output;</div>
<div class="line"><span class="lineno">  205</span>}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/phy/generic_functions/<a class="el" href="../../de/dbd/dft__processor__fftw__impl_8h_source.html">dft_processor_fftw_impl.h</a></li>
<li>lib/phy/generic_functions/<b>dft_processor_fftw_impl.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
