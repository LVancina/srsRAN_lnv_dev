<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>srsRAN Docs: lib/ofh/compression/avx512_helpers.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">srsRAN Docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_d760f2ccf13f25eca8b78b31880d9d65.html">ofh</a></li><li class="navelem"><a class="el" href="dir_41fc22ec7441721c2ba1196fd9081e7a.html">compression</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">avx512_helpers.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>AVX512 support for OFH Compression algorithms.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;immintrin.h&gt;</code><br />
</div>
<p><a href="avx512__helpers_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacesrsran" id="r_namespacesrsran"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesrsran.html">srsran</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab96281e7fbdbcab932b9fe0173e0d7f3" id="r_ab96281e7fbdbcab932b9fe0173e0d7f3"><td class="memItemLeft" align="right" valign="top"><a id="ab96281e7fbdbcab932b9fe0173e0d7f3" name="ab96281e7fbdbcab932b9fe0173e0d7f3"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>srsran::ofh::mm512::_mm512_comparator</b> = __m512i (*)(__m512i a, __m512i b)</td></tr>
<tr class="memdesc:ab96281e7fbdbcab932b9fe0173e0d7f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of AVX512 intrinsic calculating min or max values between two vectors. <br /></td></tr>
<tr class="separator:ab96281e7fbdbcab932b9fe0173e0d7f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad2eabcd25afaafd26760fe2e28623797" id="r_ad2eabcd25afaafd26760fe2e28623797"><td class="memTemplParams" colspan="2">template&lt;<a class="el" href="#ab96281e7fbdbcab932b9fe0173e0d7f3">_mm512_comparator</a> COMPARE&gt; </td></tr>
<tr class="memitem:ad2eabcd25afaafd26760fe2e28623797"><td class="memTemplItemLeft" align="right" valign="top">__m512i&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#ad2eabcd25afaafd26760fe2e28623797">srsran::ofh::mm512::find_abs_min_max_values</a> (__m512i v0_epi16, __m512i v1_epi16, __m512i v2_epi16)</td></tr>
<tr class="memdesc:ad2eabcd25afaafd26760fe2e28623797"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the maximum (or minimum) 16bit sample in each of the four input resource blocks, returns its absolute value.  <br /></td></tr>
<tr class="separator:ad2eabcd25afaafd26760fe2e28623797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a896eb6546ff9996a6289e1ac7bf46171" id="r_a896eb6546ff9996a6289e1ac7bf46171"><td class="memItemLeft" align="right" valign="top">__m512i&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a896eb6546ff9996a6289e1ac7bf46171">srsran::ofh::mm512::calculate_max_abs</a> (__m512i r0_epi16, __m512i r1_epi16, __m512i r2_epi16)</td></tr>
<tr class="memdesc:a896eb6546ff9996a6289e1ac7bf46171"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds maximum absolute value across 16bit IQ samples in each of the four input resource blocks passed in three AVX512 registers.  <br /></td></tr>
<tr class="separator:a896eb6546ff9996a6289e1ac7bf46171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43ee7ca16282ba3bc2a32e8513b397b3" id="r_a43ee7ca16282ba3bc2a32e8513b397b3"><td class="memItemLeft" align="right" valign="top">__m512i&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a43ee7ca16282ba3bc2a32e8513b397b3">srsran::ofh::mm512::determine_bfp_exponent</a> (__m512i r0_epi16, __m512i r1_epi16, __m512i r2_epi16, unsigned data_width)</td></tr>
<tr class="memdesc:a43ee7ca16282ba3bc2a32e8513b397b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines BFP exponent for each of the four input RBs passed in three AVX512 registers.  <br /></td></tr>
<tr class="separator:a43ee7ca16282ba3bc2a32e8513b397b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>AVX512 support for OFH Compression algorithms. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a896eb6546ff9996a6289e1ac7bf46171" name="a896eb6546ff9996a6289e1ac7bf46171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a896eb6546ff9996a6289e1ac7bf46171">&#9670;&#160;</a></span>calculate_max_abs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__m512i srsran::ofh::mm512::calculate_max_abs </td>
          <td>(</td>
          <td class="paramtype">__m512i</td>          <td class="paramname"><span class="paramname"><em>r0_epi16</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__m512i</td>          <td class="paramname"><span class="paramname"><em>r1_epi16</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__m512i</td>          <td class="paramname"><span class="paramname"><em>r2_epi16</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds maximum absolute value across 16bit IQ samples in each of the four input resource blocks passed in three AVX512 registers. </p>
<p>The content of the three input AVX512 registers is represented in the table below. Here RBx stands for one unique RE (pair of IQ samples, 32 bits long) pertaining to a respective RB: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>r0_epi16:</code>   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB1 RB1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>r1_epi16:</code>   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB2 RB2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>r2_epi16:</code>   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB3 RB3   </td><td class="markdownTableBodyNone">RB3 RB3   </td><td class="markdownTableBodyNone">RB3 RB3   </td><td class="markdownTableBodyNone">RB3 RB3   </td><td class="markdownTableBodyNone">RB3 RB3   </td><td class="markdownTableBodyNone">RB3 RB3   </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">r0_epi16</td><td>AVX512 register storing 16bit IQ pairs of the first and second RBs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">r1_epi16</td><td>AVX512 register storing 16bit IQ pairs of the second and third RBs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">r2_epi16</td><td>AVX512 register storing 16bit IQ pairs of the third and fourth RBs. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An AVX512 register storing the result for each of the four RBs in every 128bit lane. </dd></dl>

</div>
</div>
<a id="a43ee7ca16282ba3bc2a32e8513b397b3" name="a43ee7ca16282ba3bc2a32e8513b397b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43ee7ca16282ba3bc2a32e8513b397b3">&#9670;&#160;</a></span>determine_bfp_exponent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__m512i srsran::ofh::mm512::determine_bfp_exponent </td>
          <td>(</td>
          <td class="paramtype">__m512i</td>          <td class="paramname"><span class="paramname"><em>r0_epi16</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__m512i</td>          <td class="paramname"><span class="paramname"><em>r1_epi16</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__m512i</td>          <td class="paramname"><span class="paramname"><em>r2_epi16</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned</td>          <td class="paramname"><span class="paramname"><em>data_width</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines BFP exponent for each of the four input RBs passed in three AVX512 registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">r0_epi16</td><td>AVX512 register storing 16bit IQ pairs of the first and second RBs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">r1_epi16</td><td>AVX512 register storing 16bit IQ pairs of the second and third RBs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">r2_epi16</td><td>AVX512 register storing 16bit IQ pairs of the third and fourth RBs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_width</td><td>Compressed samples bit width.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Four exponents in the LSB bits of every 128bit lane. </dd></dl>

</div>
</div>
<a id="ad2eabcd25afaafd26760fe2e28623797" name="ad2eabcd25afaafd26760fe2e28623797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2eabcd25afaafd26760fe2e28623797">&#9670;&#160;</a></span>find_abs_min_max_values()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;_mm512_comparator COMPARE&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__m512i srsran::ofh::mm512::find_abs_min_max_values </td>
          <td>(</td>
          <td class="paramtype">__m512i</td>          <td class="paramname"><span class="paramname"><em>v0_epi16</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__m512i</td>          <td class="paramname"><span class="paramname"><em>v1_epi16</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__m512i</td>          <td class="paramname"><span class="paramname"><em>v2_epi16</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds the maximum (or minimum) 16bit sample in each of the four input resource blocks, returns its absolute value. </p>
<p>Finds absolute maximum (or minimum, depending on the comparator passed as the template argument) values for each of the four RBs passed in three AVX512 registers.</p>
<p>AVX512 register bits are evenly divided between four RBs so that IQ samples of each RB occupy one 128bit lane. The following diagram shows the input format. Here RBx stands for one unique RE (a pair of IQ samples, 32 bits long) pertaining to a respective RB: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>v0_epi16:</code>   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB3 RB3   </td><td class="markdownTableBodyNone">RB3 RB3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>v1_epi16:</code>   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB3 RB3   </td><td class="markdownTableBodyNone">RB3 RB3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>v2_epi16:</code>   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB0 RB0   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB1 RB1   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB2 RB2   </td><td class="markdownTableBodyNone">RB3 RB3   </td><td class="markdownTableBodyNone">RB3 RB3   </td></tr>
</table>
<p>The function first performs vertical min/max search across the three registers (comparing 16bit samples), then horizontal min/max across elements in each 128bit lane of the resulting vector. Finally, the function takes the absolute value of the four 16bit samples computed thus far.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">COMPARE</td><td>AVX512 intrinsic used for comparison, either <code>_mm512_min_epi16</code> or <code>_mm512_max_epi16</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">v0_epi16</td><td>AVX512 register storing first four IQ pairs of each of the four RB. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v1_epi16</td><td>AVX512 register storing second four IQ pairs of each of the four RB. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v2_epi16</td><td>AVX512 register storing last four IQ pairs of each of the four RB.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An AVX512 register storing the result for each of the four RBs in every 128bit lane. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
