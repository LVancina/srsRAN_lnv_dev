<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>srsRAN Docs: srsran::ssb_freq_position_generator Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">srsRAN Docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/def/namespacesrsran.html">srsran</a></li><li class="navelem"><a class="el" href="../../de/d49/classsrsran_1_1ssb__freq__position__generator.html">ssb_freq_position_generator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../da/d8d/classsrsran_1_1ssb__freq__position__generator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">srsran::ssb_freq_position_generator Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class that implements utilities that compute the SSB position within the band.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d6/d3b/ssb__freq__position__generator_8h_source.html">ssb_freq_position_generator.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for srsran::ssb_freq_position_generator:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/dd4/classsrsran_1_1ssb__freq__position__generator__coll__graph.png" border="0" usemap="#asrsran_1_1ssb__freq__position__generator_coll__map" alt="Collaboration graph"/></div>
<map name="asrsran_1_1ssb__freq__position__generator_coll__map" id="asrsran_1_1ssb__freq__position__generator_coll__map">
<area shape="rect" title="Class that implements utilities that compute the SSB position within the band." alt="" coords="5,5,228,145"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9a75a814c0d9c331c1ec54f03b2b45a0" id="r_a9a75a814c0d9c331c1ec54f03b2b45a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a75a814c0d9c331c1ec54f03b2b45a0">ssb_freq_position_generator</a> (<a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a> dl_arfcn, <a class="el" href="../../d9/def/namespacesrsran.html#a9e91de4bdf4fc6af2e4fba60dde4d0c5">nr_band</a> <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">nr_band_</a>, <a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a> <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">n_rbs_</a>, <a class="el" href="../../d9/def/namespacesrsran.html#aca64228c7486db8ce1f0a3118e8cedc8">subcarrier_spacing</a> scs_common, <a class="el" href="../../d9/def/namespacesrsran.html#aca64228c7486db8ce1f0a3118e8cedc8">subcarrier_spacing</a> scs_ssb)</td></tr>
<tr class="separator:a9a75a814c0d9c331c1ec54f03b2b45a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dbb01e4b3fba247beb7c44a8471053f" id="r_a1dbb01e4b3fba247beb7c44a8471053f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d91/structsrsran_1_1ssb__freq__location.html">ssb_freq_location</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1dbb01e4b3fba247beb7c44a8471053f">get_next_ssb_location</a> ()</td></tr>
<tr class="separator:a1dbb01e4b3fba247beb7c44a8471053f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aefde68f3576c6381c678d92dfd06b0" id="r_a8aefde68f3576c6381c678d92dfd06b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8aefde68f3576c6381c678d92dfd06b0">get_ssb_first_symbol</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a></td></tr>
<tr class="separator:a8aefde68f3576c6381c678d92dfd06b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8210ecad51d1c9e44d2451a159670ddd" id="r_a8210ecad51d1c9e44d2451a159670ddd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8210ecad51d1c9e44d2451a159670ddd">get_max_ss0_idx</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a></td></tr>
<tr class="separator:a8210ecad51d1c9e44d2451a159670ddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class that implements utilities that compute the SSB position within the band. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9a75a814c0d9c331c1ec54f03b2b45a0" name="a9a75a814c0d9c331c1ec54f03b2b45a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a75a814c0d9c331c1ec54f03b2b45a0">&#9670;&#160;</a></span>ssb_freq_position_generator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssb_freq_position_generator::ssb_freq_position_generator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a></td>          <td class="paramname"><span class="paramname"><em>dl_arfcn</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a9e91de4bdf4fc6af2e4fba60dde4d0c5">nr_band</a></td>          <td class="paramname"><span class="paramname"><em>nr_band_</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a></td>          <td class="paramname"><span class="paramname"><em>n_rbs_</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#aca64228c7486db8ce1f0a3118e8cedc8">subcarrier_spacing</a></td>          <td class="paramname"><span class="paramname"><em>scs_common</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#aca64228c7486db8ce1f0a3118e8cedc8">subcarrier_spacing</a></td>          <td class="paramname"><span class="paramname"><em>scs_ssb</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   79</span>                                                                                      :</div>
<div class="line"><span class="lineno">   80</span>  dl_arfcn{<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">dl_arfcn_</a>},</div>
<div class="line"><span class="lineno">   81</span>  band(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">nr_band_</a>),</div>
<div class="line"><span class="lineno">   82</span>  n_rbs(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">n_rbs_</a>),</div>
<div class="line"><span class="lineno">   83</span>  scs_common{<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">scs_common_</a>},</div>
<div class="line"><span class="lineno">   84</span>  scs_ssb{<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">scs_ssb_</a>},</div>
<div class="line"><span class="lineno">   85</span>  ssb_case{band_helper::get_ssb_pattern(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">nr_band_</a>, scs_ssb)},</div>
<div class="line"><span class="lineno">   86</span>  N_raster{0},</div>
<div class="line"><span class="lineno">   87</span>  M_raster{0},</div>
<div class="line"><span class="lineno">   88</span>  gscn_raster_idx{0}</div>
<div class="line"><span class="lineno">   89</span>{</div>
<div class="line"><span class="lineno">   90</span>  <span class="comment">// Compute the RF reference frequency, pointA and upper-bound of the band.</span></div>
<div class="line"><span class="lineno">   91</span>  f_ref_hz   = band_helper::nr_arfcn_to_freq(dl_arfcn);</div>
<div class="line"><span class="lineno">   92</span>  point_A_hz = band_helper::get_abs_freq_point_a_from_f_ref(f_ref_hz, n_rbs, scs_common);</div>
<div class="line"><span class="lineno">   93</span>  <span class="comment">// Frequency (in Hz) corresponding to the last subcarrier of the Channel Band, or upper-bound (ub).</span></div>
<div class="line"><span class="lineno">   94</span>  <span class="comment">// NOTE: The difference between bw_ub_hz and point_A_hz is 1 SCS smaller than n_rbs * NOF_SUBCARRIERS_PER_RB *</span></div>
<div class="line"><span class="lineno">   95</span>  <span class="comment">// SCS_common. This is because the distance between the first and last subcarrier (in numbers of subcarriers)  is</span></div>
<div class="line"><span class="lineno">   96</span>  <span class="comment">// NOF_SUBCARRIERS_PER_RB - 1.</span></div>
<div class="line"><span class="lineno">   97</span>  bw_ub_hz = point_A_hz +</div>
<div class="line"><span class="lineno">   98</span>             <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(n_rbs * <a class="code hl_variable" href="../../d9/def/namespacesrsran.html#a1d73f866251b700d7747204655a84500">NOF_SUBCARRIERS_PER_RB</a> * <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a8c3848f1144990e3777cdc7e1ab27cf7">scs_to_khz</a>(scs_common) * band_helper::KHZ_TO_HZ - 1);</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>  <span class="comment">// Lower-bound for the SSB central frequency, or SS_ref, as a function of pointA.</span></div>
<div class="line"><span class="lineno">  101</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ss_ref_l_bound_hz</a> =</div>
<div class="line"><span class="lineno">  102</span>      point_A_hz + <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a8c3848f1144990e3777cdc7e1ab27cf7">scs_to_khz</a>(scs_ssb) * band_helper::KHZ_TO_HZ * <a class="code hl_variable" href="../../d9/def/namespacesrsran.html#a0b2b4b6efd51c69501b718054dd03007">NOF_SSB_SUBCARRIERS</a> / 2);</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>  <span class="comment">// Get the starting point of parameter N for the sync-raster. This allows us to avoid the generation of all possible</span></div>
<div class="line"><span class="lineno">  105</span>  <span class="comment">// SSB positions in the raster.</span></div>
<div class="line"><span class="lineno">  106</span>  <span class="keywordflow">if</span> (dl_arfcn &lt; band_helper::MIN_ARFCN_3_GHZ_24_5_GHZ) {</div>
<div class="line"><span class="lineno">  107</span>    N_raster = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(std::floor(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ss_ref_l_bound_hz</a> / band_helper::N_SIZE_SYNC_RASTER_1_HZ));</div>
<div class="line"><span class="lineno">  108</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dl_arfcn &gt;= band_helper::MIN_ARFCN_3_GHZ_24_5_GHZ &amp;&amp; dl_arfcn &lt; band_helper::MIN_ARFCN_24_5_GHZ_100_GHZ) {</div>
<div class="line"><span class="lineno">  109</span>    <span class="comment">// For BW &gt;= 40MHz, Band n79 has a different sync raster step size and need to be handled separately.</span></div>
<div class="line"><span class="lineno">  110</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_band_40mhz_or_above</a> = (scs_common == subcarrier_spacing::kHz15 <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> n_rbs &gt;= 216U) <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">or</a></div>
<div class="line"><span class="lineno">  111</span>                                        (scs_common == subcarrier_spacing::kHz30 <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> n_rbs &gt;= 106U) <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">or</a></div>
<div class="line"><span class="lineno">  112</span>                                        (scs_common == subcarrier_spacing::kHz60 <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> n_rbs &gt;= 51U);</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <span class="comment">// For bands n79 and n104, the sync raster has a specific step and need to be handled separately, as per</span></div>
<div class="line"><span class="lineno">  115</span>    <span class="comment">// Table 5.4.3.3-1, TS 38.104, ver. 17.8.0. In the following, we compute the starting point of parameter N for the</span></div>
<div class="line"><span class="lineno">  116</span>    <span class="comment">// sync-raster, so that the resulting GSCN (i) is compatible with the raster step and starting point and (ii) the</span></div>
<div class="line"><span class="lineno">  117</span>    <span class="comment">// SSB lowest subcarrier is greater than pointA.</span></div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">if</span> (band == nr_band::n79 <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_band_40mhz_or_above</a>) {</div>
<div class="line"><span class="lineno">  119</span>      N_raster = band_helper::GSCN_LB_N_79_BW_40_MHZ - band_helper::GSCN_LB_SYNC_RASTER_2;</div>
<div class="line"><span class="lineno">  120</span>      <span class="keywordflow">while</span> (get_ss_ref_hz(N_raster, 0) &lt; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ss_ref_l_bound_hz</a>) {</div>
<div class="line"><span class="lineno">  121</span>        increase_N_raster();</div>
<div class="line"><span class="lineno">  122</span>      }</div>
<div class="line"><span class="lineno">  123</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (band == nr_band::n104) {</div>
<div class="line"><span class="lineno">  124</span>      N_raster = band_helper::GSCN_LB_N_104 - band_helper::GSCN_LB_SYNC_RASTER_2;</div>
<div class="line"><span class="lineno">  125</span>      <span class="keywordflow">while</span> (get_ss_ref_hz(N_raster, 0) &lt; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ss_ref_l_bound_hz</a>) {</div>
<div class="line"><span class="lineno">  126</span>        increase_N_raster();</div>
<div class="line"><span class="lineno">  127</span>      }</div>
<div class="line"><span class="lineno">  128</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  129</span>      N_raster = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(std::floor((<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ss_ref_l_bound_hz</a> - band_helper::N_REF_OFFSET_3_GHZ_24_5_GHZ) /</div>
<div class="line"><span class="lineno">  130</span>                                                  band_helper::N_SIZE_SYNC_RASTER_2_HZ));</div>
<div class="line"><span class="lineno">  131</span>    }</div>
<div class="line"><span class="lineno">  132</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  133</span>    srsran_assert(dl_arfcn &lt; band_helper::MIN_ARFCN_24_5_GHZ_100_GHZ, <span class="stringliteral">&quot;FR2 frequencies not supported&quot;</span>);</div>
<div class="line"><span class="lineno">  134</span>  }</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>  <span class="comment">// This constraint comes from the scheduler, which cannot allocate PDCCH starting at symbols different from 0;</span></div>
<div class="line"><span class="lineno">  137</span>  <span class="comment">// therefore, as per Table 13-11, TS 38.213, only the searchSpaceZero indices with starting symbol 0 are those with</span></div>
<div class="line"><span class="lineno">  138</span>  <span class="comment">// index &lt;= 9.</span></div>
<div class="line"><span class="lineno">  139</span>  max_ss0_idx = 9;</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>  <span class="comment">// As per TS38.213, Section 4.1.</span></div>
<div class="line"><span class="lineno">  142</span>  ssb_first_symbol = ssb_case == <a class="code hl_enumvalue" href="../../d9/def/namespacesrsran.html#a4b8eb97251264b1aee7123a8765e1d3ea9d5ed678fe57bcca610140957afab571">ssb_pattern_case::B</a> ? 4 : 2;</div>
<div class="line"><span class="lineno">  143</span>}</div>
<div class="ttc" id="anamespacesrsran_html_a0b2b4b6efd51c69501b718054dd03007"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a0b2b4b6efd51c69501b718054dd03007">srsran::NOF_SSB_SUBCARRIERS</a></div><div class="ttdeci">const unsigned NOF_SSB_SUBCARRIERS</div><div class="ttdoc">Number of subcarriers within a SSB block, as per TS 38.211, Section 7.4.3.1.</div><div class="ttdef"><b>Definition</b> ssb_freq_position_generator.h:32</div></div>
<div class="ttc" id="anamespacesrsran_html_a1d73f866251b700d7747204655a84500"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a1d73f866251b700d7747204655a84500">srsran::NOF_SUBCARRIERS_PER_RB</a></div><div class="ttdeci">constexpr std::size_t NOF_SUBCARRIERS_PER_RB</div><div class="ttdoc">See TS 38.211, 4.4.4.1 - Resource Blocks, General.</div><div class="ttdef"><b>Definition</b> resource_block.h:35</div></div>
<div class="ttc" id="anamespacesrsran_html_a4b8eb97251264b1aee7123a8765e1d3ea9d5ed678fe57bcca610140957afab571"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a4b8eb97251264b1aee7123a8765e1d3ea9d5ed678fe57bcca610140957afab571">srsran::ssb_pattern_case::B</a></div><div class="ttdeci">@ B</div><div class="ttdoc">Case B - 30 kHz SCS, FR1: index pattern .</div></div>
<div class="ttc" id="anamespacesrsran_html_a58e7c9f2c51a9ad6a0899b46d5315723"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">srsran::mask_msb_ones</a></div><div class="ttdeci">constexpr Integer mask_msb_ones(size_t N)</div><div class="ttdoc">Returns an unsigned integer with the N most significant bits (MSB) set to one, and the remaining bits...</div><div class="ttdef"><b>Definition</b> bounded_bitset.h:65</div></div>
<div class="ttc" id="anamespacesrsran_html_a8c3848f1144990e3777cdc7e1ab27cf7"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a8c3848f1144990e3777cdc7e1ab27cf7">srsran::scs_to_khz</a></div><div class="ttdeci">constexpr unsigned scs_to_khz(subcarrier_spacing scs)</div><div class="ttdoc">Converts SCS into integer in kHz.</div><div class="ttdef"><b>Definition</b> subcarrier_spacing.h:56</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8210ecad51d1c9e44d2451a159670ddd" name="a8210ecad51d1c9e44d2451a159670ddd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8210ecad51d1c9e44d2451a159670ddd">&#9670;&#160;</a></span>get_max_ss0_idx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a> srsran::ssb_freq_position_generator::get_max_ss0_idx </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   60</span>{ <span class="keywordflow">return</span> max_ss0_idx; };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1dbb01e4b3fba247beb7c44a8471053f" name="a1dbb01e4b3fba247beb7c44a8471053f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dbb01e4b3fba247beb7c44a8471053f">&#9670;&#160;</a></span>get_next_ssb_location()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d91/structsrsran_1_1ssb__freq__location.html">ssb_freq_location</a> ssb_freq_position_generator::get_next_ssb_location </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the next viable position of the SSB on the raster, so that the SSB falls within the band CRBs and the SSB subcarriers are aligned with those of the CRBs. </p>
<div class="fragment"><div class="line"><span class="lineno">  216</span>{</div>
<div class="line"><span class="lineno">  217</span>  <span class="comment">// Handle bands with special raster separately.</span></div>
<div class="line"><span class="lineno">  218</span>  <span class="keywordflow">if</span> (band == nr_band::n46 <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">or</a> band == nr_band::n96 <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">or</a> band == nr_band::n102 <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">or</a></div>
<div class="line"><span class="lineno">  219</span>      (ssb_case == <a class="code hl_enumvalue" href="../../d9/def/namespacesrsran.html#a4b8eb97251264b1aee7123a8765e1d3ea7fc56270e7a70fa81a5935b72eacbe29">ssb_pattern_case::A</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">and</a> (band == nr_band::n34 <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">or</a> band == nr_band::n38 <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">or</a> band == nr_band::n39))) {</div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">return</span> get_next_ssb_location_special_raster();</div>
<div class="line"><span class="lineno">  221</span>  }</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>  <a class="code hl_struct" href="../../da/d91/structsrsran_1_1ssb__freq__location.html">ssb_freq_location</a> ssb{.is_valid = <span class="keyword">false</span>};</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">N_raster_max</a> = dl_arfcn &lt; band_helper::MIN_ARFCN_3_GHZ_24_5_GHZ</div>
<div class="line"><span class="lineno">  226</span>                                           ? band_helper::N_UB_SYNC_RASTER_1</div>
<div class="line"><span class="lineno">  227</span>                                           : band_helper::N_UB_SYNC_RASTER_2;</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>  <span class="keywordflow">while</span> (N_raster &lt; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">N_raster_max</a>) {</div>
<div class="line"><span class="lineno">  230</span>    <span class="comment">// If M_raster &gt; 0, no need  to find the same value again.</span></div>
<div class="line"><span class="lineno">  231</span>    <span class="comment">// NOTE: (i) Once the value of M is found, all the possible SSB positions within the raster that are viable will be</span></div>
<div class="line"><span class="lineno">  232</span>    <span class="comment">// obtained for the same value of M, by varying N.</span></div>
<div class="line"><span class="lineno">  233</span>    <span class="comment">//      (ii) For NR-bands above 3GHz, M is not used.</span></div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordflow">if</span> (M_raster == 0) {</div>
<div class="line"><span class="lineno">  235</span>      M_raster = find_M_raster();</div>
<div class="line"><span class="lineno">  236</span>    }</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_N_M_hz</a> = get_ss_ref_hz(N_raster, M_raster);</div>
<div class="line"><span class="lineno">  239</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_0_hz</a>   = get_f_ssb_0_hz(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_N_M_hz</a>, scs_ssb);</div>
<div class="line"><span class="lineno">  240</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_ub_hz</a>  = get_f_ssb_ub_hz(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_N_M_hz</a>, scs_ssb);</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>    <span class="comment">// An SSB centre frequency SS_ref is satisfactory if (i) if the SSB falls within the band and (ii) SS_ref falls into</span></div>
<div class="line"><span class="lineno">  243</span>    <span class="comment">// the subcarrier grid of CRBs; or, equivalently, if the distance of the first SSB&#39;s subcarrier from pointA can be</span></div>
<div class="line"><span class="lineno">  244</span>    <span class="comment">// expressed as a multiple of SCS.</span></div>
<div class="line"><span class="lineno">  245</span>    <span class="comment">// NOTES:</span></div>
<div class="line"><span class="lineno">  246</span>    <span class="comment">// 1) As the TS reports no explicit definition of how to determine the condition &quot;SSB falls within the band&quot;, this</span></div>
<div class="line"><span class="lineno">  247</span>    <span class="comment">// is determined based on the position of the first SSB&#39;s subcarrier and first Channel Band subcarrier, for the</span></div>
<div class="line"><span class="lineno">  248</span>    <span class="comment">// lower bound; and based on the position of the last SSB&#39;s subcarrier and last Channel Band subcarrier, for the</span></div>
<div class="line"><span class="lineno">  249</span>    <span class="comment">// upper bound.</span></div>
<div class="line"><span class="lineno">  250</span>    <span class="comment">// 2) Condition &quot;SS_ref falls into the subcarrier grid of CRBs&quot; is implementation defined and comes from PHY</span></div>
<div class="line"><span class="lineno">  251</span>    <span class="comment">// constraints.</span></div>
<div class="line"><span class="lineno">  252</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_ssb_inside_band</a> = (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_0_hz</a> &gt;= point_A_hz) &amp;&amp; (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_ub_hz</a> &lt;= bw_ub_hz);</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_ssb_inside_band</a>) {</div>
<div class="line"><span class="lineno">  255</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_scs_30khz_spacing</a> = scs_common == subcarrier_spacing::kHz30 &amp;&amp; scs_ssb == subcarrier_spacing::kHz30;</div>
<div class="line"><span class="lineno">  256</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_multiple_of_scs</a> =</div>
<div class="line"><span class="lineno">  257</span>          <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_scs_30khz_spacing</a></div>
<div class="line"><span class="lineno">  258</span>              ? <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fmod</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_0_hz</a> - point_A_hz,</div>
<div class="line"><span class="lineno">  259</span>                     <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a8c3848f1144990e3777cdc7e1ab27cf7">scs_to_khz</a>(subcarrier_spacing::kHz30) * band_helper::KHZ_TO_HZ)) == 0.0</div>
<div class="line"><span class="lineno">  260</span>              : <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fmod</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_0_hz</a> - point_A_hz, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a8c3848f1144990e3777cdc7e1ab27cf7">scs_to_khz</a>(subcarrier_spacing::kHz15) * band_helper::KHZ_TO_HZ) == 0.0;</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">is_multiple_of_scs</a>) {</div>
<div class="line"><span class="lineno">  263</span>        ssb.offset_to_point_A = compute_offset_to_pointA(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_0_hz</a>, point_A_hz, scs_common);</div>
<div class="line"><span class="lineno">  264</span>        ssb.k_ssb             = compute_k_ssb(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_0_hz</a>, point_A_hz, ssb.offset_to_point_A);</div>
<div class="line"><span class="lineno">  265</span>        ssb.is_valid          = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  266</span>        ssb.ss_ref            = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f_ssb_N_M_hz</a>;</div>
<div class="line"><span class="lineno">  267</span>        <span class="comment">// Increment N_raster according to the band.</span></div>
<div class="line"><span class="lineno">  268</span>        increase_N_raster();</div>
<div class="line"><span class="lineno">  269</span>        <span class="keywordflow">return</span> ssb;</div>
<div class="line"><span class="lineno">  270</span>      }</div>
<div class="line"><span class="lineno">  271</span>    }</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>    <span class="comment">// Increment N_raster.</span></div>
<div class="line"><span class="lineno">  274</span>    increase_N_raster();</div>
<div class="line"><span class="lineno">  275</span>  }</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>  <span class="keywordflow">return</span> ssb;</div>
<div class="line"><span class="lineno">  278</span>}</div>
<div class="ttc" id="anamespacesrsran_html_a4b8eb97251264b1aee7123a8765e1d3ea7fc56270e7a70fa81a5935b72eacbe29"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a4b8eb97251264b1aee7123a8765e1d3ea7fc56270e7a70fa81a5935b72eacbe29">srsran::ssb_pattern_case::A</a></div><div class="ttdeci">@ A</div><div class="ttdoc">Case A - 15 kHz SCS, FR1: index pattern .</div></div>
<div class="ttc" id="astructsrsran_1_1ssb__freq__location_html"><div class="ttname"><a href="../../da/d91/structsrsran_1_1ssb__freq__location.html">srsran::ssb_freq_location</a></div><div class="ttdoc">Contains the parameters defining the SSB position within the band; returned by the DU config generato...</div><div class="ttdef"><b>Definition</b> ssb_freq_position_generator.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8aefde68f3576c6381c678d92dfd06b0" name="a8aefde68f3576c6381c678d92dfd06b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aefde68f3576c6381c678d92dfd06b0">&#9670;&#160;</a></span>get_ssb_first_symbol()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a> srsran::ssb_freq_position_generator::get_ssb_first_symbol </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   59</span>{ <span class="keywordflow">return</span> ssb_first_symbol; };</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/ran/<a class="el" href="../../d6/d3b/ssb__freq__position__generator_8h_source.html">ssb_freq_position_generator.h</a></li>
<li>lib/ran/<b>ssb_freq_position_generator.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
