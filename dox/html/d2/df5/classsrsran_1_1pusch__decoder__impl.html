<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>srsRAN Docs: srsran::pusch_decoder_impl Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">srsRAN Docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/def/namespacesrsran.html">srsran</a></li><li class="navelem"><a class="el" href="../../d2/df5/classsrsran_1_1pusch__decoder__impl.html">pusch_decoder_impl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d5/d02/classsrsran_1_1pusch__decoder__impl-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">srsran::pusch_decoder_impl Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the PUSCH decoder.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d9/dd7/pusch__decoder__impl_8h_source.html">pusch_decoder_impl.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for srsran::pusch_decoder_impl:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d42/classsrsran_1_1pusch__decoder__impl__inherit__graph.png" border="0" usemap="#asrsran_1_1pusch__decoder__impl_inherit__map" alt="Inheritance graph"/></div>
<map name="asrsran_1_1pusch__decoder__impl_inherit__map" id="asrsran_1_1pusch__decoder__impl_inherit__map">
<area shape="rect" title="Implementation of the PUSCH decoder." alt="" coords="87,193,282,299"/>
<area shape="rect" href="../../d0/da0/classsrsran_1_1pusch__decoder.html" title="PUSCH decoder interface." alt="" coords="5,23,164,128"/>
<area shape="poly" title=" " alt="" coords="125,139,156,191,151,194,120,142"/>
<area shape="rect" href="../../d7/d01/classsrsran_1_1pusch__decoder__buffer.html" title="PUSCH decoder buffer interface." alt="" coords="189,5,381,145"/>
<area shape="poly" title=" " alt="" coords="239,159,218,195,213,192,234,156"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for srsran::pusch_decoder_impl:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/dbf/classsrsran_1_1pusch__decoder__impl__coll__graph.png" border="0" usemap="#asrsran_1_1pusch__decoder__impl_coll__map" alt="Collaboration graph"/></div>
<map name="asrsran_1_1pusch__decoder__impl_coll__map" id="asrsran_1_1pusch__decoder__impl_coll__map">
<area shape="rect" title="Implementation of the PUSCH decoder." alt="" coords="87,193,282,299"/>
<area shape="rect" href="../../d0/da0/classsrsran_1_1pusch__decoder.html" title="PUSCH decoder interface." alt="" coords="5,23,164,128"/>
<area shape="poly" title=" " alt="" coords="125,139,156,191,151,194,120,142"/>
<area shape="rect" href="../../d7/d01/classsrsran_1_1pusch__decoder__buffer.html" title="PUSCH decoder buffer interface." alt="" coords="189,5,381,145"/>
<area shape="poly" title=" " alt="" coords="239,159,218,195,213,192,234,156"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html">sch_crc</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">CRC calculators used in shared channels.  <a href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a49964c823505bba10a52a0f082e35b07" id="r_a49964c823505bba10a52a0f082e35b07"><td class="memItemLeft" align="right" valign="top"><a id="a49964c823505bba10a52a0f082e35b07" name="a49964c823505bba10a52a0f082e35b07"></a>
<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">using</a>&#160;</td><td class="memItemRight" valign="bottom"><b>codeblock_decoder_pool</b> = <a class="el" href="../../de/db1/classsrsran_1_1concurrent__thread__local__object__pool.html">concurrent_thread_local_object_pool</a>&lt;<a class="el" href="../../d6/ddf/classsrsran_1_1pusch__codeblock__decoder.html">pusch_codeblock_decoder</a>&gt;</td></tr>
<tr class="memdesc:a49964c823505bba10a52a0f082e35b07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Code block decoder pool type. <br /></td></tr>
<tr class="separator:a49964c823505bba10a52a0f082e35b07"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2ad2e17a9690223032353c6c9d1676c4" id="r_a2ad2e17a9690223032353c6c9d1676c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ad2e17a9690223032353c6c9d1676c4">pusch_decoder_impl</a> (std::unique_ptr&lt; <a class="el" href="../../d2/d1e/classsrsran_1_1ldpc__segmenter__rx.html">ldpc_segmenter_rx</a> &gt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">segmenter_</a>, std::shared_ptr&lt; <a class="el" href="#a49964c823505bba10a52a0f082e35b07">codeblock_decoder_pool</a> &gt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">decoder_pool_</a>, <a class="el" href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html">sch_crc</a> <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">crc_set_</a>, <a class="el" href="../../df/dc3/classsrsran_1_1task__executor.html">task_executor</a> *<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">executor_</a>, <a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a> nof_prb, <a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a> nof_layers)</td></tr>
<tr class="memdesc:a2ad2e17a9690223032353c6c9d1676c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">PUSCH decoder constructor.  <br /></td></tr>
<tr class="separator:a2ad2e17a9690223032353c6c9d1676c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48af33ffe61ad0b9e6226e8914ce0b2a" id="r_a48af33ffe61ad0b9e6226e8914ce0b2a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d01/classsrsran_1_1pusch__decoder__buffer.html">pusch_decoder_buffer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48af33ffe61ad0b9e6226e8914ce0b2a">new_data</a> (<a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d4/dff/classuint8__t.html">uint8_t</a> &gt; transport_block, <a class="el" href="../../d1/d17/classsrsran_1_1unique__rx__buffer.html">unique_rx_buffer</a> rm_buffer, <a class="el" href="../../d8/d23/classsrsran_1_1pusch__decoder__notifier.html">pusch_decoder_notifier</a> &amp;notifier, <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html">configuration</a> &amp;cfg) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a48af33ffe61ad0b9e6226e8914ce0b2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes a PUSCH codeword.  <br /></td></tr>
<tr class="separator:a48af33ffe61ad0b9e6226e8914ce0b2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6329d2e71e4e9354f3862c6eb5655fd" id="r_aa6329d2e71e4e9354f3862c6eb5655fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6329d2e71e4e9354f3862c6eb5655fd">set_nof_softbits</a> (<a class="el" href="../../d6/d45/classsrsran_1_1units_1_1bits.html">units::bits</a> nof_softbits) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:aa6329d2e71e4e9354f3862c6eb5655fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the number of UL-SCH codeword softbits expected by the PUSCH decoder.  <br /></td></tr>
<tr class="separator:aa6329d2e71e4e9354f3862c6eb5655fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsrsran_1_1pusch__decoder"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classsrsran_1_1pusch__decoder')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d0/da0/classsrsran_1_1pusch__decoder.html">srsran::pusch_decoder</a></td></tr>
<tr class="memitem:ad0b126e9b7f3c910983fec6a388cd773 inherit pub_methods_classsrsran_1_1pusch__decoder" id="r_ad0b126e9b7f3c910983fec6a388cd773"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">virtual</a>&#160;</td><td class="memItemRight" valign="bottom"><b>~pusch_decoder</b> ()=<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">default</a></td></tr>
<tr class="memdesc:ad0b126e9b7f3c910983fec6a388cd773 inherit pub_methods_classsrsran_1_1pusch__decoder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor. <br /></td></tr>
<tr class="separator:ad0b126e9b7f3c910983fec6a388cd773 inherit pub_methods_classsrsran_1_1pusch__decoder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the PUSCH decoder. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2ad2e17a9690223032353c6c9d1676c4" name="a2ad2e17a9690223032353c6c9d1676c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ad2e17a9690223032353c6c9d1676c4">&#9670;&#160;</a></span>pusch_decoder_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">srsran::pusch_decoder_impl::pusch_decoder_impl </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="../../d2/d1e/classsrsran_1_1ldpc__segmenter__rx.html">ldpc_segmenter_rx</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>segmenter_</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="#a49964c823505bba10a52a0f082e35b07">codeblock_decoder_pool</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>decoder_pool_</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html">sch_crc</a></td>          <td class="paramname"><span class="paramname"><em>crc_set_</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/dc3/classsrsran_1_1task__executor.html">task_executor</a> *</td>          <td class="paramname"><span class="paramname"><em>executor_</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a></td>          <td class="paramname"><span class="paramname"><em>nof_prb</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d1d/classunsigned.html">unsigned</a></td>          <td class="paramname"><span class="paramname"><em>nof_layers</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PUSCH decoder constructor. </p>
<p>Sets up the internal components, namely LDPC segmenter, LDPC rate dematcher, LDPC decoder and all the CRC calculators.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">segmenter_</td><td>LDPC segmenter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">decoder_pool_</td><td>Codeblock decoder. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">crc_set_</td><td>Structure with pointers to three CRC calculator objects, with generator polynomials of type <code>CRC16</code>, <code>CRC24A</code> and <code>CRC24B</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">executor_</td><td>Task executor for asynchronous PUSCH code block decoding. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nof_prb</td><td>Number of PRBs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nof_layers</td><td>Number of layers. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   77</span>                                                                         :</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    segmenter(std::move(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">segmenter_</a>)),</div>
<div class="line"><span class="lineno">   80</span>    decoder_pool(std::move(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">decoder_pool_</a>)),</div>
<div class="line"><span class="lineno">   81</span>    crc_set(std::move(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">crc_set_</a>)),</div>
<div class="line"><span class="lineno">   82</span>    executor(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">executor_</a>),</div>
<div class="line"><span class="lineno">   83</span>    softbits_buffer(pusch_constants::get_max_codeword_size(nof_prb, nof_layers).value()),</div>
<div class="line"><span class="lineno">   84</span>    cb_stats(MAX_NOF_SEGMENTS)</div>
<div class="line"><span class="lineno">   85</span>  {</div>
<div class="line"><span class="lineno">   86</span>    srsran_assert(segmenter, <span class="stringliteral">&quot;Invalid segmenter.&quot;</span>);</div>
<div class="line"><span class="lineno">   87</span>    srsran_assert(decoder_pool, <span class="stringliteral">&quot;Invalid codeblock decoder pool.&quot;</span>);</div>
<div class="line"><span class="lineno">   88</span>    srsran_assert(crc_set.<a class="code hl_variable" href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html#a531e4c55746ccd4de6edbe5c83c0e2ed">crc16</a>, <span class="stringliteral">&quot;Invalid CRC16 calculator.&quot;</span>);</div>
<div class="line"><span class="lineno">   89</span>    srsran_assert(crc_set.<a class="code hl_variable" href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html#a0e8b886185f418f5340f4bf6c3317ed4">crc24A</a>, <span class="stringliteral">&quot;Invalid CRC24A calculator.&quot;</span>);</div>
<div class="line"><span class="lineno">   90</span>    srsran_assert(crc_set.<a class="code hl_variable" href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html#ad00bcd2c2c6e705725f40b628901b512">crc24B</a>, <span class="stringliteral">&quot;Invalid CRC24B calculator.&quot;</span>);</div>
<div class="line"><span class="lineno">   91</span>    srsran_assert(crc_set.<a class="code hl_variable" href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html#a531e4c55746ccd4de6edbe5c83c0e2ed">crc16</a>-&gt;get_generator_poly() == crc_generator_poly::CRC16, <span class="stringliteral">&quot;Wrong TB CRC calculator.&quot;</span>);</div>
<div class="line"><span class="lineno">   92</span>    srsran_assert(crc_set.<a class="code hl_variable" href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html#a0e8b886185f418f5340f4bf6c3317ed4">crc24A</a>-&gt;get_generator_poly() == crc_generator_poly::CRC24A, <span class="stringliteral">&quot;Wrong TB CRC calculator.&quot;</span>);</div>
<div class="line"><span class="lineno">   93</span>    srsran_assert(crc_set.<a class="code hl_variable" href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html#ad00bcd2c2c6e705725f40b628901b512">crc24B</a>-&gt;get_generator_poly() == crc_generator_poly::CRC24B, <span class="stringliteral">&quot;Wrong TB CRC calculator.&quot;</span>);</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">if</span> (executor != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">   95</span>      srsran_assert(decoder_pool-&gt;capacity() &gt; 1,</div>
<div class="line"><span class="lineno">   96</span>                    <span class="stringliteral">&quot;The number of PUSCH code block decoder in the pool (i.e., {}) must be greater than one.&quot;</span>,</div>
<div class="line"><span class="lineno">   97</span>                    decoder_pool-&gt;capacity());</div>
<div class="line"><span class="lineno">   98</span>    }</div>
<div class="line"><span class="lineno">   99</span>  };</div>
<div class="ttc" id="anamespacesrsran_html_a58e7c9f2c51a9ad6a0899b46d5315723"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">srsran::mask_msb_ones</a></div><div class="ttdeci">constexpr Integer mask_msb_ones(size_t N)</div><div class="ttdoc">Returns an unsigned integer with the N most significant bits (MSB) set to one, and the remaining bits...</div><div class="ttdef"><b>Definition</b> bounded_bitset.h:65</div></div>
<div class="ttc" id="astructsrsran_1_1pusch__decoder__impl_1_1sch__crc_html_a0e8b886185f418f5340f4bf6c3317ed4"><div class="ttname"><a href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html#a0e8b886185f418f5340f4bf6c3317ed4">srsran::pusch_decoder_impl::sch_crc::crc24A</a></div><div class="ttdeci">std::unique_ptr&lt; crc_calculator &gt; crc24A</div><div class="ttdoc">For long TB checksums.</div><div class="ttdef"><b>Definition</b> pusch_decoder_impl.h:54</div></div>
<div class="ttc" id="astructsrsran_1_1pusch__decoder__impl_1_1sch__crc_html_a531e4c55746ccd4de6edbe5c83c0e2ed"><div class="ttname"><a href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html#a531e4c55746ccd4de6edbe5c83c0e2ed">srsran::pusch_decoder_impl::sch_crc::crc16</a></div><div class="ttdeci">std::unique_ptr&lt; crc_calculator &gt; crc16</div><div class="ttdoc">For short TB checksums.</div><div class="ttdef"><b>Definition</b> pusch_decoder_impl.h:52</div></div>
<div class="ttc" id="astructsrsran_1_1pusch__decoder__impl_1_1sch__crc_html_ad00bcd2c2c6e705725f40b628901b512"><div class="ttname"><a href="../../d5/d02/structsrsran_1_1pusch__decoder__impl_1_1sch__crc.html#ad00bcd2c2c6e705725f40b628901b512">srsran::pusch_decoder_impl::sch_crc::crc24B</a></div><div class="ttdeci">std::unique_ptr&lt; crc_calculator &gt; crc24B</div><div class="ttdoc">For segment-specific checksums.</div><div class="ttdef"><b>Definition</b> pusch_decoder_impl.h:56</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a48af33ffe61ad0b9e6226e8914ce0b2a" name="a48af33ffe61ad0b9e6226e8914ce0b2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48af33ffe61ad0b9e6226e8914ce0b2a">&#9670;&#160;</a></span>new_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d01/classsrsran_1_1pusch__decoder__buffer.html">pusch_decoder_buffer</a> &amp; pusch_decoder_impl::new_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d4/dff/classuint8__t.html">uint8_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>transport_block</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d17/classsrsran_1_1unique__rx__buffer.html">unique_rx_buffer</a></td>          <td class="paramname"><span class="paramname"><em>rm_buffer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d23/classsrsran_1_1pusch__decoder__notifier.html">pusch_decoder_notifier</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>notifier</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html">configuration</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>cfg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decodes a PUSCH codeword. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">transport_block</td><td>The decoded transport block, with packed (8 bits per entry) representation. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">rm_buffer</td><td>A buffer for combining log-likelihood ratios from different retransmissions. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">notifier</td><td>Interface for notifying the completion of the TB processing. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cfg</td><td>Decoder configuration parameters. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="../../d7/d01/classsrsran_1_1pusch__decoder__buffer.html">pusch_decoder_buffer</a>, used to write softbits into the decoder. </dd></dl>

<p>Implements <a class="el" href="../../d0/da0/classsrsran_1_1pusch__decoder.html#abfc3c42e784ff24d28827bb5973782c3">srsran::pusch_decoder</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   93</span>{</div>
<div class="line"><span class="lineno">   94</span>  transport_block  = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">transport_block_</a>;</div>
<div class="line"><span class="lineno">   95</span>  unique_rm_buffer = std::move(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">unique_rm_buffer_</a>);</div>
<div class="line"><span class="lineno">   96</span>  result_notifier  = &amp;notifier;</div>
<div class="line"><span class="lineno">   97</span>  current_config   = cfg;</div>
<div class="line"><span class="lineno">   98</span>  softbits_count   = 0;</div>
<div class="line"><span class="lineno">   99</span>  codeblock_llrs.clear();</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>  <span class="comment">// Unset the expected number of UL-SCH softbits.</span></div>
<div class="line"><span class="lineno">  102</span>  nof_ulsch_softbits.reset();</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>  <span class="comment">// Compute segmentation configuration.</span></div>
<div class="line"><span class="lineno">  105</span>  segmentation_config.<a class="code hl_variable" href="../../d2/d94/structsrsran_1_1segmenter__config.html#a07cb0f854c348847ba94e20f2a55063e">base_graph</a> = current_config.<a class="code hl_variable" href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a18a774c3f10110a7d2cf89b8bcb008b8">base_graph</a>;</div>
<div class="line"><span class="lineno">  106</span>  segmentation_config.<a class="code hl_variable" href="../../d2/d94/structsrsran_1_1segmenter__config.html#adbd7166842b20a68684d78ab05f4750d">rv</a>         = current_config.<a class="code hl_variable" href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a271f2978f990a6ad33ac89406d411490">rv</a>;</div>
<div class="line"><span class="lineno">  107</span>  segmentation_config.<a class="code hl_variable" href="../../d2/d94/structsrsran_1_1segmenter__config.html#a368bfda32bf9a15edfbfb1445c13bcdf">mod</a>        = current_config.<a class="code hl_variable" href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a32f27180cf4f71f158766e17617923c8">mod</a>;</div>
<div class="line"><span class="lineno">  108</span>  segmentation_config.<a class="code hl_variable" href="../../d2/d94/structsrsran_1_1segmenter__config.html#aa9e1f2dd515806ba4400666a66081e2d">Nref</a>       = current_config.<a class="code hl_variable" href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a5ca6455d1610b04412d1ca70b3005006">Nref</a>;</div>
<div class="line"><span class="lineno">  109</span>  segmentation_config.<a class="code hl_variable" href="../../d2/d94/structsrsran_1_1segmenter__config.html#abee99babfc1bda958ddfd12ae646cb03">nof_layers</a> = current_config.<a class="code hl_variable" href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a441fa8661be8c41b5e44335a62a59fd1">nof_layers</a>;</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>  <span class="comment">// Set the CB counters.</span></div>
<div class="line"><span class="lineno">  112</span>  <span class="keywordtype">unsigned</span> tb_size     = transport_block.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#ad0e376d95ca916144eac76f27f0654ac">size</a>() * BITS_PER_BYTE;</div>
<div class="line"><span class="lineno">  113</span>  nof_codeblocks       = <a class="code hl_function" href="../../d0/d30/namespacesrsran_1_1ldpc.html#a23acad74746ca49586fe02e3033bd392">ldpc::compute_nof_codeblocks</a>(<a class="code hl_class" href="../../d6/d45/classsrsran_1_1units_1_1bits.html">units::bits</a>(tb_size), segmentation_config.<a class="code hl_variable" href="../../d2/d94/structsrsran_1_1segmenter__config.html#a07cb0f854c348847ba94e20f2a55063e">base_graph</a>);</div>
<div class="line"><span class="lineno">  114</span>  cb_task_counter      = nof_codeblocks;</div>
<div class="line"><span class="lineno">  115</span>  available_cb_counter = 0;</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>  srsran_assert(nof_codeblocks == unique_rm_buffer-&gt;<a class="code hl_function" href="../../d0/d57/classsrsran_1_1rx__buffer.html#a7f1402c4786078edc9172fb7a7d654eb">get_nof_codeblocks</a>(),</div>
<div class="line"><span class="lineno">  118</span>                <span class="stringliteral">&quot;Wrong number of codeblocks {} (expected {}).&quot;</span>,</div>
<div class="line"><span class="lineno">  119</span>                unique_rm_buffer-&gt;<a class="code hl_function" href="../../d0/d57/classsrsran_1_1rx__buffer.html#a7f1402c4786078edc9172fb7a7d654eb">get_nof_codeblocks</a>(),</div>
<div class="line"><span class="lineno">  120</span>                nof_codeblocks);</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>  <span class="comment">// Select CRC calculator for inner codeblock checks.</span></div>
<div class="line"><span class="lineno">  123</span>  block_crc = select_crc(crc_set, tb_size, nof_codeblocks);</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>  <span class="comment">// Reset CRCs if new data is flagged.</span></div>
<div class="line"><span class="lineno">  126</span>  <a class="code hl_class" href="../../de/d4c/classsrsran_1_1span.html">span&lt;bool&gt;</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cb_crcs</a> = unique_rm_buffer-&gt;<a class="code hl_function" href="../../d0/d57/classsrsran_1_1rx__buffer.html#afb0db9dc38222f4b50ea7f24d8baaa8f">get_codeblocks_crc</a>();</div>
<div class="line"><span class="lineno">  127</span>  <span class="keywordflow">if</span> (current_config.<a class="code hl_variable" href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a14ac9b624cde5e22b3fb5f1b4226f540">new_data</a>) {</div>
<div class="line"><span class="lineno">  128</span>    srsvec::zero(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cb_crcs</a>);</div>
<div class="line"><span class="lineno">  129</span>  }</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><span class="lineno">  132</span>}</div>
<div class="ttc" id="aclasssrsran_1_1rx__buffer_html_a7f1402c4786078edc9172fb7a7d654eb"><div class="ttname"><a href="../../d0/d57/classsrsran_1_1rx__buffer.html#a7f1402c4786078edc9172fb7a7d654eb">srsran::rx_buffer::get_nof_codeblocks</a></div><div class="ttdeci">virtual unsigned get_nof_codeblocks() const =0</div><div class="ttdoc">Gets the number of codeblocks.</div></div>
<div class="ttc" id="aclasssrsran_1_1rx__buffer_html_afb0db9dc38222f4b50ea7f24d8baaa8f"><div class="ttname"><a href="../../d0/d57/classsrsran_1_1rx__buffer.html#afb0db9dc38222f4b50ea7f24d8baaa8f">srsran::rx_buffer::get_codeblocks_crc</a></div><div class="ttdeci">virtual span&lt; bool &gt; get_codeblocks_crc()=0</div><div class="ttdoc">Gets all codeblocks CRCs.</div></div>
<div class="ttc" id="aclasssrsran_1_1span_html"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html">srsran::span</a></div><div class="ttdef"><b>Definition</b> span.h:98</div></div>
<div class="ttc" id="aclasssrsran_1_1span_html_ad0e376d95ca916144eac76f27f0654ac"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html#ad0e376d95ca916144eac76f27f0654ac">srsran::span::size</a></div><div class="ttdeci">constexpr size_type size() const noexcept</div><div class="ttdoc">Returns the number of elements in the span.</div><div class="ttdef"><b>Definition</b> span.h:168</div></div>
<div class="ttc" id="aclasssrsran_1_1units_1_1bits_html"><div class="ttname"><a href="../../d6/d45/classsrsran_1_1units_1_1bits.html">srsran::units::bits</a></div><div class="ttdoc">Abstraction of bit as a unit of digital information.</div><div class="ttdef"><b>Definition</b> units.h:57</div></div>
<div class="ttc" id="anamespacesrsran_1_1ldpc_html_a23acad74746ca49586fe02e3033bd392"><div class="ttname"><a href="../../d0/d30/namespacesrsran_1_1ldpc.html#a23acad74746ca49586fe02e3033bd392">srsran::ldpc::compute_nof_codeblocks</a></div><div class="ttdeci">constexpr unsigned compute_nof_codeblocks(units::bits tbs, ldpc_base_graph_type bg)</div><div class="ttdoc">Computes the number of codeblocks from a transport block size.</div><div class="ttdef"><b>Definition</b> ldpc.h:140</div></div>
<div class="ttc" id="astructsrsran_1_1pusch__decoder_1_1configuration_html_a14ac9b624cde5e22b3fb5f1b4226f540"><div class="ttname"><a href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a14ac9b624cde5e22b3fb5f1b4226f540">srsran::pusch_decoder::configuration::new_data</a></div><div class="ttdeci">bool new_data</div><div class="ttdoc">Flag to denote new data (first HARQ transmission).</div><div class="ttdef"><b>Definition</b> pusch_decoder.h:75</div></div>
<div class="ttc" id="astructsrsran_1_1pusch__decoder_1_1configuration_html_a18a774c3f10110a7d2cf89b8bcb008b8"><div class="ttname"><a href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a18a774c3f10110a7d2cf89b8bcb008b8">srsran::pusch_decoder::configuration::base_graph</a></div><div class="ttdeci">ldpc_base_graph_type base_graph</div><div class="ttdoc">Code base graph.</div><div class="ttdef"><b>Definition</b> pusch_decoder.h:60</div></div>
<div class="ttc" id="astructsrsran_1_1pusch__decoder_1_1configuration_html_a271f2978f990a6ad33ac89406d411490"><div class="ttname"><a href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a271f2978f990a6ad33ac89406d411490">srsran::pusch_decoder::configuration::rv</a></div><div class="ttdeci">unsigned rv</div><div class="ttdoc">Redundancy version, values in {0, 1, 2, 3}.</div><div class="ttdef"><b>Definition</b> pusch_decoder.h:62</div></div>
<div class="ttc" id="astructsrsran_1_1pusch__decoder_1_1configuration_html_a32f27180cf4f71f158766e17617923c8"><div class="ttname"><a href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a32f27180cf4f71f158766e17617923c8">srsran::pusch_decoder::configuration::mod</a></div><div class="ttdeci">modulation_scheme mod</div><div class="ttdoc">Modulation scheme.</div><div class="ttdef"><b>Definition</b> pusch_decoder.h:64</div></div>
<div class="ttc" id="astructsrsran_1_1pusch__decoder_1_1configuration_html_a441fa8661be8c41b5e44335a62a59fd1"><div class="ttname"><a href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a441fa8661be8c41b5e44335a62a59fd1">srsran::pusch_decoder::configuration::nof_layers</a></div><div class="ttdeci">unsigned nof_layers</div><div class="ttdoc">Number of transmission layers the transport block is mapped onto.</div><div class="ttdef"><b>Definition</b> pusch_decoder.h:69</div></div>
<div class="ttc" id="astructsrsran_1_1pusch__decoder_1_1configuration_html_a5ca6455d1610b04412d1ca70b3005006"><div class="ttname"><a href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a5ca6455d1610b04412d1ca70b3005006">srsran::pusch_decoder::configuration::Nref</a></div><div class="ttdeci">unsigned Nref</div><div class="ttdoc">Limited buffer rate matching length in bits, as per TS38.212 Section 5.4.2.</div><div class="ttdef"><b>Definition</b> pusch_decoder.h:67</div></div>
<div class="ttc" id="astructsrsran_1_1segmenter__config_html_a07cb0f854c348847ba94e20f2a55063e"><div class="ttname"><a href="../../d2/d94/structsrsran_1_1segmenter__config.html#a07cb0f854c348847ba94e20f2a55063e">srsran::segmenter_config::base_graph</a></div><div class="ttdeci">ldpc_base_graph_type base_graph</div><div class="ttdoc">Code base graph.</div><div class="ttdef"><b>Definition</b> codeblock_metadata.h:148</div></div>
<div class="ttc" id="astructsrsran_1_1segmenter__config_html_a368bfda32bf9a15edfbfb1445c13bcdf"><div class="ttname"><a href="../../d2/d94/structsrsran_1_1segmenter__config.html#a368bfda32bf9a15edfbfb1445c13bcdf">srsran::segmenter_config::mod</a></div><div class="ttdeci">modulation_scheme mod</div><div class="ttdoc">Modulation scheme.</div><div class="ttdef"><b>Definition</b> codeblock_metadata.h:152</div></div>
<div class="ttc" id="astructsrsran_1_1segmenter__config_html_aa9e1f2dd515806ba4400666a66081e2d"><div class="ttname"><a href="../../d2/d94/structsrsran_1_1segmenter__config.html#aa9e1f2dd515806ba4400666a66081e2d">srsran::segmenter_config::Nref</a></div><div class="ttdeci">unsigned Nref</div><div class="ttdoc">Limited buffer rate matching length in bits, as per TS38.212 Section 5.4.2.</div><div class="ttdef"><b>Definition</b> codeblock_metadata.h:155</div></div>
<div class="ttc" id="astructsrsran_1_1segmenter__config_html_abee99babfc1bda958ddfd12ae646cb03"><div class="ttname"><a href="../../d2/d94/structsrsran_1_1segmenter__config.html#abee99babfc1bda958ddfd12ae646cb03">srsran::segmenter_config::nof_layers</a></div><div class="ttdeci">unsigned nof_layers</div><div class="ttdoc">Number of transmission layers the transport block is mapped onto.</div><div class="ttdef"><b>Definition</b> codeblock_metadata.h:157</div></div>
<div class="ttc" id="astructsrsran_1_1segmenter__config_html_adbd7166842b20a68684d78ab05f4750d"><div class="ttname"><a href="../../d2/d94/structsrsran_1_1segmenter__config.html#adbd7166842b20a68684d78ab05f4750d">srsran::segmenter_config::rv</a></div><div class="ttdeci">unsigned rv</div><div class="ttdoc">Redundancy version, values in {0, 1, 2, 3}.</div><div class="ttdef"><b>Definition</b> codeblock_metadata.h:150</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6329d2e71e4e9354f3862c6eb5655fd" name="aa6329d2e71e4e9354f3862c6eb5655fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6329d2e71e4e9354f3862c6eb5655fd">&#9670;&#160;</a></span>set_nof_softbits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> pusch_decoder_impl::set_nof_softbits </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d45/classsrsran_1_1units_1_1bits.html">units::bits</a></td>          <td class="paramname"><span class="paramname"><em>nof_softbits</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the number of UL-SCH codeword softbits expected by the PUSCH decoder. </p>
<p>It allows the decoder to start decoding codeblocks before receiving the entire codeword. If it is called before <a class="el" href="#a48af33ffe61ad0b9e6226e8914ce0b2a">new_data</a> or after decoding has started, it has no effect.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nof_softbits</td><td>Number of codeword softbits, parameter <picture><source srcset="../../form_273_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$G^\textup{UL-SCH}$" src="../../form_273.png"/></picture> in TS38.212 Section 6.2.7. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d0/da0/classsrsran_1_1pusch__decoder.html#a06627763d4c15a248b389602dc818a45">srsran::pusch_decoder</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  148</span>{</div>
<div class="line"><span class="lineno">  149</span>  nof_ulsch_softbits.emplace(nof_softbits);</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>  <span class="keywordtype">unsigned</span> modulation_order = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#af78ee928d6d8a3d8ff6bbc753f50c44e">get_bits_per_symbol</a>(current_config.<a class="code hl_variable" href="../../d9/df1/structsrsran_1_1pusch__decoder_1_1configuration.html#a32f27180cf4f71f158766e17617923c8">mod</a>);</div>
<div class="line"><span class="lineno">  152</span>  srsran_assert(nof_ulsch_softbits-&gt;value() % modulation_order == 0,</div>
<div class="line"><span class="lineno">  153</span>                <span class="stringliteral">&quot;The number of soft bits (i.e., {}) must be multiple of the modulation order (i.e., {}).&quot;</span>,</div>
<div class="line"><span class="lineno">  154</span>                nof_ulsch_softbits-&gt;value(),</div>
<div class="line"><span class="lineno">  155</span>                modulation_order);</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>  <span class="comment">// Set derived parameters.</span></div>
<div class="line"><span class="lineno">  158</span>  segmentation_config.<a class="code hl_variable" href="../../d2/d94/structsrsran_1_1segmenter__config.html#a8c5b77d22a4b2d17e2977ffad868b20b">nof_ch_symbols</a> = nof_ulsch_softbits-&gt;value() / modulation_order;</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>  <span class="comment">// Select view of LLRs.</span></div>
<div class="line"><span class="lineno">  161</span>  <a class="code hl_class" href="../../de/d4c/classsrsran_1_1span.html">span&lt;const log_likelihood_ratio&gt;</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">llrs</a> =</div>
<div class="line"><span class="lineno">  162</span>      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">span&lt;const log_likelihood_ratio&gt;</a>(softbits_buffer).<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#aa4238c2e04ac8c60726db8cc0b687582">first</a>(nof_ulsch_softbits-&gt;value());</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>  <span class="comment">// Recall that the TB is in packed format.</span></div>
<div class="line"><span class="lineno">  165</span>  <span class="keywordtype">unsigned</span> tb_size = transport_block.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#ad0e376d95ca916144eac76f27f0654ac">size</a>() * BITS_PER_BYTE;</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>  <span class="comment">// Generate segmentation information and CB views.</span></div>
<div class="line"><span class="lineno">  168</span>  segmenter-&gt;segment(codeblock_llrs, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">llrs</a>, tb_size, segmentation_config);</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>  <span class="comment">// All information about the CW segments should be available.</span></div>
<div class="line"><span class="lineno">  171</span>  srsran_assert(</div>
<div class="line"><span class="lineno">  172</span>      nof_codeblocks == codeblock_llrs.size(),</div>
<div class="line"><span class="lineno">  173</span>      <span class="stringliteral">&quot;The number of described CW segments, i.e., {}, does not match the expected number of codeblocks, i.e., {}.&quot;</span>,</div>
<div class="line"><span class="lineno">  174</span>      codeblock_llrs.size(),</div>
<div class="line"><span class="lineno">  175</span>      nof_codeblocks);</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>  <span class="comment">// Compute the number of currently available codeblocks.</span></div>
<div class="line"><span class="lineno">  178</span>  available_cb_counter = get_nof_available_codeblocks(codeblock_llrs, softbits_count);</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>  <span class="comment">// If there are available codeblocks, start as many decoding tasks as possible.</span></div>
<div class="line"><span class="lineno">  181</span>  <span class="keywordflow">if</span> (available_cb_counter &gt; 0) {</div>
<div class="line"><span class="lineno">  182</span>    <span class="comment">// Fork tasks for new codeblocks.</span></div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_cb</a> = 0; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_cb</a> != available_cb_counter; ++<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_cb</a>) {</div>
<div class="line"><span class="lineno">  184</span>      fork_codeblock_task(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">i_cb</a>);</div>
<div class="line"><span class="lineno">  185</span>    }</div>
<div class="line"><span class="lineno">  186</span>  }</div>
<div class="line"><span class="lineno">  187</span>}</div>
<div class="ttc" id="aclasssrsran_1_1span_html_aa4238c2e04ac8c60726db8cc0b687582"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html#aa4238c2e04ac8c60726db8cc0b687582">srsran::span::first</a></div><div class="ttdeci">span&lt; element_type &gt; first(size_type count) const</div><div class="ttdef"><b>Definition</b> span.h:217</div></div>
<div class="ttc" id="anamespacesrsran_html_af78ee928d6d8a3d8ff6bbc753f50c44e"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#af78ee928d6d8a3d8ff6bbc753f50c44e">srsran::get_bits_per_symbol</a></div><div class="ttdeci">constexpr unsigned get_bits_per_symbol(modulation_scheme mod)</div><div class="ttdoc">Bits per symbol for a given modulation scheme.</div><div class="ttdef"><b>Definition</b> modulation_scheme.h:100</div></div>
<div class="ttc" id="astructsrsran_1_1segmenter__config_html_a8c5b77d22a4b2d17e2977ffad868b20b"><div class="ttname"><a href="../../d2/d94/structsrsran_1_1segmenter__config.html#a8c5b77d22a4b2d17e2977ffad868b20b">srsran::segmenter_config::nof_ch_symbols</a></div><div class="ttdeci">unsigned nof_ch_symbols</div><div class="ttdoc">Number of channel symbols (i.e., REs) the transport block is mapped to.</div><div class="ttdef"><b>Definition</b> codeblock_metadata.h:159</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/phy/upper/channel_processors/pusch/<a class="el" href="../../d9/dd7/pusch__decoder__impl_8h_source.html">pusch_decoder_impl.h</a></li>
<li>lib/phy/upper/channel_processors/pusch/<b>pusch_decoder_impl.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
