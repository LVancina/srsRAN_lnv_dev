<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>srsRAN Docs: lib/hal/dpdk/bbdev/ldpc/bbdev_ldpc_encoder.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">srsRAN Docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_e870e4dac26de7990352b1cb7547818f.html">hal</a></li><li class="navelem"><a class="el" href="../../dir_8120b562c6b9bccdc107230b1c713e30.html">dpdk</a></li><li class="navelem"><a class="el" href="../../dir_27835250433c5900bfa9b11b7da3c628.html">bbdev</a></li><li class="navelem"><a class="el" href="../../dir_05252c713e91671fd0c215ba54ec85d4.html">ldpc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">bbdev_ldpc_encoder.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Definition of the specific functions used by the bbdeb-based hardware-accelerated LDPC encoder implementations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;srsran/adt/static_vector.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d31/hw__accelerator__pdsch__enc_8h_source.html">srsran/hal/phy/upper/channel_processors/hw_accelerator_pdsch_enc.h</a>&quot;</code><br />
<code>#include &lt;rte_bbdev_op.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bbdev_ldpc_encoder.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d2b/bbdev__ldpc__encoder_8h__incl.png" border="0" usemap="#alib_2hal_2dpdk_2bbdev_2ldpc_2bbdev__ldpc__encoder_8h" alt=""/></div>
<map name="alib_2hal_2dpdk_2bbdev_2ldpc_2bbdev__ldpc__encoder_8h" id="alib_2hal_2dpdk_2bbdev_2ldpc_2bbdev__ldpc__encoder_8h">
<area shape="rect" title="Definition of the specific functions used by the bbdeb&#45;based hardware&#45;accelerated LDPC encoder implem..." alt="" coords="255,5,457,45"/>
<area shape="rect" href="../../d9/dee/static__vector_8h_source.html" title=" " alt="" coords="5,350,192,375"/>
<area shape="poly" title=" " alt="" coords="317,48,283,68,251,95,202,158,161,226,130,289,110,338,105,336,125,287,156,223,197,155,247,91,280,64,315,43"/>
<area shape="rect" href="../../df/d31/hw__accelerator__pdsch__enc_8h.html" title="Hardware accelerated PDSCH encoder functions declaration." alt="" coords="261,93,451,148"/>
<area shape="poly" title=" " alt="" coords="359,45,359,80,353,80,353,45"/>
<area shape="rect" title=" " alt="" coords="475,108,597,133"/>
<area shape="poly" title=" " alt="" coords="394,43,503,99,501,104,391,48"/>
<area shape="rect" href="../../d8/dc4/srsran__assert_8h_source.html" title=" " alt="" coords="1059,431,1218,471"/>
<area shape="poly" title=" " alt="" coords="193,369,1046,439,1045,444,192,374"/>
<area shape="rect" title=" " alt="" coords="403,1091,480,1116"/>
<area shape="poly" title=" " alt="" coords="111,374,131,400,154,437,173,482,181,530,181,760,181,846,189,915,198,945,212,976,234,1007,263,1041,291,1063,324,1078,357,1089,389,1095,388,1100,356,1094,322,1083,288,1067,259,1045,230,1011,208,979,193,947,183,916,176,846,176,760,176,530,168,483,149,440,127,403,107,377"/>
<area shape="rect" title=" " alt="" coords="143,1091,214,1116"/>
<area shape="poly" title=" " alt="" coords="105,375,121,440,128,485,131,530,131,936,135,975,144,1014,169,1077,164,1079,139,1016,129,976,125,936,125,530,122,485,115,441,100,376"/>
<area shape="rect" href="../../dd/dda/srslog_8h_source.html" title=" " alt="" coords="1059,519,1219,544"/>
<area shape="poly" title=" " alt="" coords="1141,471,1141,505,1136,505,1136,471"/>
<area shape="rect" title=" " alt="" coords="1747,1091,1808,1116"/>
<area shape="poly" title=" " alt="" coords="1218,451,1451,464,1595,478,1741,498,1876,527,1935,545,1988,565,2031,588,2064,614,2086,644,2093,676,2093,848,2091,873,2085,897,2063,941,2030,979,1990,1011,1946,1039,1901,1061,1822,1092,1821,1087,1899,1056,1943,1034,1987,1007,2026,975,2059,938,2080,896,2086,873,2088,848,2088,677,2081,646,2061,618,2028,593,1985,570,1934,550,1874,532,1740,504,1594,483,1451,469,1218,456"/>
<area shape="rect" href="../../d4/dd1/compiler_8h.html" title="Defines generic compiler macros that get translated into compiler specific directives simplifying por..." alt="" coords="2048,519,2235,544"/>
<area shape="poly" title=" " alt="" coords="1219,455,1571,479,2030,516,2035,516,2034,522,2029,521,1570,485,1218,460"/>
<area shape="rect" href="../../d3/dc4/srslog_2detail_2support_2any_8h_source.html" title=" " alt="" coords="368,1003,515,1043"/>
<area shape="poly" title=" " alt="" coords="1091,547,961,586,877,617,787,657,695,707,607,766,527,836,491,875,460,916,451,933,445,952,442,989,436,989,440,951,446,931,455,913,487,871,523,832,604,762,693,702,785,653,875,612,959,581,1090,541"/>
<area shape="rect" href="../../d1/d8c/logger_8h_source.html" title=" " alt="" coords="1058,592,1219,617"/>
<area shape="poly" title=" " alt="" coords="1141,544,1141,578,1136,578,1136,544"/>
<area shape="rect" href="../../d5/d29/shared__types_8h_source.html" title=" " alt="" coords="1637,1003,1790,1043"/>
<area shape="poly" title=" " alt="" coords="1219,534,1441,550,1713,578,1839,597,1943,619,1984,632,2015,645,2035,660,2043,676,2043,848,2036,886,2019,918,1992,945,1959,967,1922,984,1882,998,1804,1015,1803,1009,1881,992,1920,979,1957,962,1989,941,2015,915,2031,884,2037,848,2037,677,2031,663,2012,650,1982,637,1942,624,1838,602,1712,583,1440,556,1219,540"/>
<area shape="poly" title=" " alt="" coords="444,1043,444,1077,439,1077,439,1043"/>
<area shape="rect" title=" " alt="" coords="671,1091,763,1116"/>
<area shape="poly" title=" " alt="" coords="508,1040,664,1084,663,1089,507,1045"/>
<area shape="rect" href="../../dd/ddb/log__channel_8h_source.html" title=" " alt="" coords="1039,665,1238,691"/>
<area shape="poly" title=" " alt="" coords="1141,618,1141,652,1136,652,1136,618"/>
<area shape="rect" href="../../df/d32/log__backend_8h_source.html" title=" " alt="" coords="997,915,1144,955"/>
<area shape="poly" title=" " alt="" coords="1110,693,1070,713,1030,741,990,779,978,799,967,827,961,847,966,865,985,888,1009,906,1006,910,981,892,962,868,956,847,961,826,973,797,986,776,1026,737,1067,708,1108,688"/>
<area shape="rect" href="../../d4/d0b/log__entry_8h_source.html" title=" " alt="" coords="1131,739,1277,779"/>
<area shape="poly" title=" " alt="" coords="1150,689,1182,726,1177,730,1146,693"/>
<area shape="rect" href="../../d6/d21/sink_8h_source.html" title=" " alt="" coords="1431,746,1579,771"/>
<area shape="poly" title=" " alt="" coords="1193,688,1439,741,1438,746,1191,693"/>
<area shape="rect" title=" " alt="" coords="1040,746,1107,771"/>
<area shape="poly" title=" " alt="" coords="1131,693,1094,737,1090,733,1127,689"/>
<area shape="poly" title=" " alt="" coords="1145,950,1156,952,1279,969,1375,978,1472,986,1595,1000,1623,1004,1622,1009,1594,1005,1471,991,1375,983,1279,975,1156,957,1144,955"/>
<area shape="rect" href="../../d5/dc4/core_8h_source.html" title=" " alt="" coords="1169,1010,1258,1035"/>
<area shape="poly" title=" " alt="" coords="1103,952,1184,1001,1181,1005,1101,957"/>
<area shape="rect" title=" " alt="" coords="1365,1091,1451,1116"/>
<area shape="poly" title=" " alt="" coords="1641,1045,1466,1090,1464,1085,1640,1040"/>
<area shape="rect" title=" " alt="" coords="1893,1091,1952,1116"/>
<area shape="poly" title=" " alt="" coords="1764,1040,1881,1084,1879,1089,1763,1045"/>
<area shape="poly" title=" " alt="" coords="1183,1038,1157,1045,1058,1062,973,1071,828,1075,681,1076,595,1082,494,1093,493,1088,594,1076,681,1071,828,1069,973,1065,1057,1056,1155,1040,1182,1033"/>
<area shape="poly" title=" " alt="" coords="1182,1038,1157,1045,1053,1066,949,1081,778,1100,777,1095,948,1076,1052,1060,1155,1040,1181,1033"/>
<area shape="poly" title=" " alt="" coords="1243,1033,1368,1083,1366,1088,1241,1038"/>
<area shape="poly" title=" " alt="" coords="1259,1030,1322,1040,1461,1057,1571,1067,1820,1088,1880,1094,1879,1100,1820,1093,1570,1072,1461,1062,1321,1045,1258,1035"/>
<area shape="rect" title=" " alt="" coords="504,1091,560,1116"/>
<area shape="poly" title=" " alt="" coords="1183,1038,1157,1045,1070,1060,995,1068,867,1072,738,1074,662,1081,574,1094,573,1088,662,1075,738,1069,867,1066,995,1063,1069,1055,1155,1040,1182,1033"/>
<area shape="poly" title=" " alt="" coords="1259,1030,1322,1040,1553,1072,1733,1094,1732,1099,1552,1077,1321,1045,1258,1035"/>
<area shape="rect" title=" " alt="" coords="1180,1091,1247,1116"/>
<area shape="poly" title=" " alt="" coords="1216,1036,1216,1077,1211,1077,1211,1036"/>
<area shape="poly" title=" " alt="" coords="1184,1038,1156,1045,1019,1056,747,1073,228,1102,228,1097,747,1068,1018,1051,1156,1040,1183,1033"/>
<area shape="rect" title=" " alt="" coords="585,1091,647,1116"/>
<area shape="poly" title=" " alt="" coords="1183,1038,1157,1045,1083,1059,1020,1066,911,1072,801,1076,737,1082,661,1093,660,1088,736,1077,800,1071,910,1066,1019,1061,1082,1053,1155,1040,1181,1033"/>
<area shape="rect" href="../../d9/d1e/log__entry__metadata_8h_source.html" title=" " alt="" coords="977,827,1146,867"/>
<area shape="poly" title=" " alt="" coords="1174,781,1106,822,1103,817,1171,776"/>
<area shape="rect" href="../../db/d85/thread__utils_8h_source.html" title=" " alt="" coords="1171,827,1339,867"/>
<area shape="poly" title=" " alt="" coords="1218,778,1239,813,1234,816,1213,780"/>
<area shape="rect" href="../../d0/d0a/format_8h_source.html" title=" " alt="" coords="817,922,922,947"/>
<area shape="poly" title=" " alt="" coords="1020,869,908,919,906,914,1018,864"/>
<area shape="rect" title=" " alt="" coords="1168,922,1235,947"/>
<area shape="poly" title=" " alt="" coords="1093,864,1172,912,1169,917,1091,869"/>
<area shape="poly" title=" " alt="" coords="857,950,739,1045,674,1069,621,1078,565,1083,494,1093,493,1088,564,1078,620,1073,673,1064,736,1040,853,946"/>
<area shape="poly" title=" " alt="" coords="913,945,942,952,1050,975,1157,1000,1168,1003,1167,1008,1155,1005,1048,980,941,957,912,950"/>
<area shape="rect" title=" " alt="" coords="640,1010,725,1035"/>
<area shape="poly" title=" " alt="" coords="845,950,721,1007,719,1002,843,945"/>
<area shape="rect" title=" " alt="" coords="911,1010,974,1035"/>
<area shape="poly" title=" " alt="" coords="881,946,926,997,921,1001,877,949"/>
<area shape="rect" title=" " alt="" coords="998,1010,1061,1035"/>
<area shape="poly" title=" " alt="" coords="892,945,997,1001,994,1006,890,950"/>
<area shape="rect" title=" " alt="" coords="1272,1091,1339,1116"/>
<area shape="poly" title=" " alt="" coords="911,945,942,952,1015,959,1111,964,1205,975,1243,985,1271,1001,1286,1017,1296,1037,1306,1077,1301,1078,1291,1039,1281,1020,1268,1005,1241,990,1204,980,1111,969,1015,964,941,957,909,950"/>
<area shape="rect" title=" " alt="" coords="1085,1010,1144,1035"/>
<area shape="poly" title=" " alt="" coords="908,945,1073,1000,1078,1002,1076,1007,1071,1005,907,950"/>
<area shape="rect" title=" " alt="" coords="801,1010,887,1035"/>
<area shape="poly" title=" " alt="" coords="868,948,854,997,849,996,863,947"/>
<area shape="rect" title=" " alt="" coords="1259,922,1343,947"/>
<area shape="poly" title=" " alt="" coords="1267,866,1291,909,1286,911,1263,868"/>
<area shape="rect" href="../../d7/da6/error__string_8h_source.html" title=" " alt="" coords="1835,827,2002,867"/>
<area shape="poly" title=" " alt="" coords="1561,769,1822,823,1821,828,1560,774"/>
<area shape="rect" href="../../d9/d32/memory__buffer_8h_source.html" title=" " alt="" coords="1621,827,1811,867"/>
<area shape="poly" title=" " alt="" coords="1535,769,1658,819,1656,824,1533,774"/>
<area shape="rect" href="../../de/d52/formatter_8h_source.html" title=" " alt="" coords="1414,834,1597,859"/>
<area shape="poly" title=" " alt="" coords="1508,772,1508,820,1503,820,1503,772"/>
<area shape="rect" title=" " alt="" coords="1333,1010,1403,1035"/>
<area shape="poly" title=" " alt="" coords="1476,774,1437,795,1419,810,1404,828,1383,871,1373,917,1369,960,1369,996,1363,996,1363,960,1367,916,1378,869,1399,825,1415,806,1434,791,1473,769"/>
<area shape="poly" title=" " alt="" coords="1960,865,1988,885,2010,913,2025,948,2030,979,2025,1009,2010,1044,1990,1069,1965,1086,1962,1082,1987,1065,2006,1041,2020,1008,2025,979,2020,950,2006,916,1985,889,1957,869"/>
<area shape="poly" title=" " alt="" coords="1735,865,1851,1001,1908,1077,1904,1080,1847,1004,1731,869"/>
<area shape="poly" title=" " alt="" coords="1414,862,986,917,936,925,935,920,985,912,1414,857"/>
<area shape="rect" href="../../dc/d1e/context_8h_source.html" title=" " alt="" coords="1420,922,1591,947"/>
<area shape="poly" title=" " alt="" coords="1508,860,1508,908,1503,908,1503,860"/>
<area shape="poly" title=" " alt="" coords="1592,942,1695,962,1750,979,1803,1000,1832,1018,1860,1038,1904,1078,1901,1082,1857,1042,1829,1022,1800,1005,1748,984,1694,967,1591,947"/>
<area shape="rect" href="../../d2/d4f/tmpl__utils_8h_source.html" title=" " alt="" coords="1427,1003,1583,1043"/>
<area shape="poly" title=" " alt="" coords="1508,948,1508,989,1503,989,1503,948"/>
<area shape="poly" title=" " alt="" coords="1488,950,1400,1005,1397,1000,1485,945"/>
<area shape="poly" title=" " alt="" coords="1428,1043,1415,1045,1233,1068,1054,1084,777,1102,777,1097,1053,1079,1233,1062,1414,1040,1427,1038"/>
<area shape="poly" title=" " alt="" coords="1458,1045,1348,1088,1346,1083,1456,1040"/>
<area shape="rect" title=" " alt="" coords="1554,1091,1625,1116"/>
<area shape="poly" title=" " alt="" coords="1527,1041,1569,1079,1565,1083,1524,1045"/>
<area shape="rect" title=" " alt="" coords="1475,1091,1530,1116"/>
<area shape="poly" title=" " alt="" coords="1507,1043,1506,1077,1501,1077,1502,1043"/>
<area shape="poly" title=" " alt="" coords="312,150,246,198,120,341,116,337,242,194,309,146"/>
<area shape="rect" href="../../d7/d70/hw__accelerator_8h.html" title="Definition of an abstract interface to a hardware accelerator." alt="" coords="256,196,456,221"/>
<area shape="poly" title=" " alt="" coords="359,148,359,182,353,182,353,148"/>
<area shape="rect" href="../../d3/d00/ldpc__base__graph_8h_source.html" title=" " alt="" coords="824,343,968,383"/>
<area shape="poly" title=" " alt="" coords="416,146,842,335,840,340,414,151"/>
<area shape="rect" href="../../db/d1d/modulation__scheme_8h.html" title="Modulation schemes and orders." alt="" coords="1043,343,1234,383"/>
<area shape="poly" title=" " alt="" coords="442,146,1065,336,1064,341,440,151"/>
<area shape="rect" href="../../d4/d7a/span_8h_source.html" title=" " alt="" coords="289,269,423,295"/>
<area shape="poly" title=" " alt="" coords="359,222,359,256,353,256,353,222"/>
<area shape="poly" title=" " alt="" coords="319,297,150,348,149,343,318,292"/>
<area shape="poly" title=" " alt="" coords="362,294,375,360,381,404,384,449,384,848,390,883,406,906,459,953,526,998,595,1040,680,1083,677,1087,592,1045,523,1002,456,957,402,910,385,885,379,848,379,449,376,405,370,361,356,295"/>
<area shape="poly" title=" " alt="" coords="348,296,331,318,314,344,290,395,285,418,283,449,283,936,283,969,285,994,294,1017,314,1041,334,1057,353,1068,392,1077,436,1080,491,1088,490,1093,436,1085,391,1083,351,1073,331,1062,310,1045,290,1020,280,996,277,969,277,936,277,449,279,418,285,393,310,341,326,315,344,293"/>
<area shape="poly" title=" " alt="" coords="340,297,308,321,273,356,244,400,235,424,232,449,232,760,227,852,215,943,188,1078,182,1077,210,942,222,852,227,760,227,449,230,423,239,397,269,353,305,317,337,293"/>
<area shape="poly" title=" " alt="" coords="356,295,342,361,336,405,333,449,333,936,333,994,340,1017,358,1041,382,1061,405,1073,428,1079,452,1082,505,1082,571,1088,570,1093,505,1087,451,1087,427,1084,403,1078,379,1065,354,1045,335,1020,328,995,328,936,328,449,331,404,337,360,350,294"/>
<area shape="poly" title=" " alt="" coords="424,282,471,287,522,297,573,315,620,340,650,363,671,386,684,413,688,449,688,606,691,643,700,673,713,698,730,720,771,765,793,792,814,825,859,908,854,911,810,828,789,795,767,768,726,723,709,701,695,675,686,644,683,606,683,449,679,414,667,389,647,367,617,345,571,319,520,302,470,292,424,287"/>
<area shape="poly" title=" " alt="" coords="411,292,471,312,533,343,561,363,583,388,597,416,603,449,603,760,608,814,628,865,636,879,645,889,655,899,664,914,677,956,683,996,678,997,672,958,659,916,651,902,642,892,632,883,623,868,602,816,597,760,597,450,592,418,578,391,557,367,531,347,469,316,409,297"/>
<area shape="poly" title=" " alt="" coords="424,284,477,290,538,300,602,317,662,340,710,360,750,378,766,390,779,405,787,424,789,449,789,533,791,605,797,668,808,724,826,774,852,820,886,864,931,907,987,952,1027,977,1064,991,1099,997,1134,997,1209,992,1253,993,1302,1000,1321,1005,1319,1010,1301,1005,1252,998,1209,997,1134,1002,1099,1002,1063,996,1025,982,984,957,927,911,882,867,847,823,821,776,803,725,792,669,786,605,784,533,784,449,781,426,774,408,763,394,747,383,708,365,660,345,600,322,537,305,476,295,423,289"/>
<area shape="poly" title=" " alt="" coords="950,380,1074,424,1072,429,948,385"/>
<area shape="rect" href="../../d3/dfa/units_8h_source.html" title=" " alt="" coords="637,834,800,859"/>
<area shape="poly" title=" " alt="" coords="859,385,820,409,781,442,764,461,751,482,742,505,739,530,739,679,734,757,726,821,720,820,729,756,733,679,733,530,737,504,746,480,760,458,777,438,817,405,856,380"/>
<area shape="poly" title=" " alt="" coords="740,857,838,913,836,917,738,862"/>
<area shape="rect" href="../../d3/dee/strong__type_8h_source.html" title=" " alt="" coords="470,922,650,947"/>
<area shape="poly" title=" " alt="" coords="699,862,595,918,592,913,696,857"/>
<area shape="rect" title=" " alt="" coords="725,922,792,947"/>
<area shape="poly" title=" " alt="" coords="726,858,750,908,745,910,722,861"/>
<area shape="poly" title=" " alt="" coords="568,946,592,990,609,1016,630,1041,657,1063,685,1082,682,1086,653,1068,626,1045,605,1020,587,993,563,949"/>
<area shape="poly" title=" " alt="" coords="1141,383,1141,417,1136,417,1136,383"/>
<area shape="poly" title=" " alt="" coords="1234,365,1512,381,1683,395,1856,412,2016,434,2149,460,2201,475,2240,491,2265,509,2272,519,2275,530,2275,936,2272,960,2265,982,2254,1002,2239,1020,2201,1048,2155,1069,2104,1085,2054,1095,1966,1104,1966,1098,2053,1089,2103,1079,2153,1064,2198,1044,2235,1016,2250,999,2260,980,2267,959,2269,936,2269,530,2267,521,2261,513,2237,496,2199,480,2148,465,2015,439,1855,417,1682,400,1512,387,1234,371"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dea/bbdev__ldpc__encoder_8h__dep__incl.png" border="0" usemap="#alib_2hal_2dpdk_2bbdev_2ldpc_2bbdev__ldpc__encoder_8hdep" alt=""/></div>
<map name="alib_2hal_2dpdk_2bbdev_2ldpc_2bbdev__ldpc__encoder_8hdep" id="alib_2hal_2dpdk_2bbdev_2ldpc_2bbdev__ldpc__encoder_8hdep">
<area shape="rect" title="Definition of the specific functions used by the bbdeb&#45;based hardware&#45;accelerated LDPC encoder implem..." alt="" coords="131,5,333,45"/>
<area shape="rect" title=" " alt="" coords="5,101,221,141"/>
<area shape="poly" title=" " alt="" coords="199,56,139,103,136,99,196,52"/>
<area shape="rect" title=" " alt="" coords="245,93,459,148"/>
<area shape="poly" title=" " alt="" coords="269,52,320,91,317,95,265,56"/>
</map>
</div>
</div>
<p><a href="../../d5/d35/bbdev__ldpc__encoder_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:d9/def/namespacesrsran" id="r_d9/def/namespacesrsran"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/def/namespacesrsran.html">srsran</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1a9c8e038963f0e8f36d3d679f025ed2" id="r_a1a9c8e038963f0e8f36d3d679f025ed2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a9c8e038963f0e8f36d3d679f025ed2">srsran::dpdk::set_ldpc_enc_bbdev_config</a> (::rte_bbdev_enc_op &amp;op, <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html">srsran::hal::hw_pdsch_encoder_configuration</a> &amp;cfg)</td></tr>
<tr class="separator:a1a9c8e038963f0e8f36d3d679f025ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac61358b8a703b6629b3a493a047fcb95" id="r_ac61358b8a703b6629b3a493a047fcb95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac61358b8a703b6629b3a493a047fcb95">srsran::dpdk::set_ldpc_enc_bbdev_data</a> (::rte_bbdev_enc_op &amp;op, <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_mempool</a> &amp;in_mbuf_pool, <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_mempool</a> &amp;out_mbuf_pool, <a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d4/dff/classuint8__t.html">uint8_t</a> &gt; data, <a class="el" href="../../db/d1e/classsrslog_1_1detail_1_1logger__impl.html">srslog::basic_logger</a> &amp;logger, <a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d4/dff/classuint8__t.html">uint8_t</a> &gt; tb_crc={})</td></tr>
<tr class="separator:ac61358b8a703b6629b3a493a047fcb95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab16206ba56ea956376ee6344f908a308" id="r_ab16206ba56ea956376ee6344f908a308"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab16206ba56ea956376ee6344f908a308">srsran::dpdk::enqueue_ldpc_enc_operation</a> (::rte_bbdev_enc_op &amp;<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_ops</a>, uint16_t <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ldpc_enc_ops</a>, uint16_t id, uint16_t <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_queue_id</a>, <a class="el" href="../../db/d1e/classsrslog_1_1detail_1_1logger__impl.html">srslog::basic_logger</a> &amp;logger)</td></tr>
<tr class="separator:ab16206ba56ea956376ee6344f908a308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad31425ce9d52f65b6114428a5b59749d" id="r_ad31425ce9d52f65b6114428a5b59749d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad31425ce9d52f65b6114428a5b59749d">srsran::dpdk::dequeue_ldpc_enc_operation</a> (::rte_bbdev_enc_op &amp;<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_ops</a>, uint16_t <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ldpc_enc_ops</a>, uint16_t id, uint16_t <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_queue_id</a>, <a class="el" href="../../db/d1e/classsrslog_1_1detail_1_1logger__impl.html">srslog::basic_logger</a> &amp;logger)</td></tr>
<tr class="separator:ad31425ce9d52f65b6114428a5b59749d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a214bea6828bd64573f8ce154bc6d5c85" id="r_a214bea6828bd64573f8ce154bc6d5c85"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a214bea6828bd64573f8ce154bc6d5c85">srsran::dpdk::read_ldpc_enc_bbdev_data</a> (::rte_bbdev_enc_op &amp;op, <a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d4/dff/classuint8__t.html">uint8_t</a> &gt; data, <a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d4/dff/classuint8__t.html">uint8_t</a> &gt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">packed_data</a>, <a class="el" href="../../d9/db9/classbool.html">bool</a> cb_mode=<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">true</a>)</td></tr>
<tr class="separator:a214bea6828bd64573f8ce154bc6d5c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Definition of the specific functions used by the bbdeb-based hardware-accelerated LDPC encoder implementations. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad31425ce9d52f65b6114428a5b59749d" name="ad31425ce9d52f65b6114428a5b59749d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad31425ce9d52f65b6114428a5b59749d">&#9670;&#160;</a></span>dequeue_ldpc_enc_operation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> srsran::dpdk::dequeue_ldpc_enc_operation </td>
          <td>(</td>
          <td class="paramtype">::rte_bbdev_enc_op &amp;</td>          <td class="paramname"><span class="paramname"><em>enc_ops</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>ldpc_enc_ops</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>id</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>enc_queue_id</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d1e/classsrslog_1_1detail_1_1logger__impl.html">srslog::basic_logger</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>logger</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dequeues processed operations from the hardware-accelerated LDPC encoder. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">enc_ops</td><td>Array of encoder operation configuration structures. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_enc_ops</td><td>Number of encoder operations (to be dequeued - to the array). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>bbdev ID of the hardware-accelerator. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">enc_queue_id</td><td>bbdev ID of the queue used by the hardrware-accelerator. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">logger</td><td>SRS logger. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  174</span>{</div>
<div class="line"><span class="lineno">  175</span>  <span class="comment">// Dequeue processed operations from the hardware-accelerator LDPC encoder.</span></div>
<div class="line"><span class="lineno">  176</span>  ::rte_bbdev_enc_op* <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ops</a>             = &amp;<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_ops</a>;</div>
<div class="line"><span class="lineno">  177</span>  uint16_t            <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">num_deq_enc_ops</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_bbdev_dequeue_ldpc_enc_ops</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bbdev_id</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_queue_id</a>, &amp;<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ops</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">num_enc_ops</a>);</div>
<div class="line"><span class="lineno">  178</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">num_deq_enc_ops</a> &lt;= 0) {</div>
<div class="line"><span class="lineno">  179</span>    <span class="comment">// logger.error(&quot;[bbdev] Couldn&#39;t dequeue new operations from the ldpc encoder.&quot;);</span></div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  181</span>  }</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  184</span>}</div>
<div class="ttc" id="anamespacesrsran_html_a58e7c9f2c51a9ad6a0899b46d5315723"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">srsran::mask_msb_ones</a></div><div class="ttdeci">constexpr Integer mask_msb_ones(size_t N)</div><div class="ttdoc">Returns an unsigned integer with the N most significant bits (MSB) set to one, and the remaining bits...</div><div class="ttdef"><b>Definition</b> bounded_bitset.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab16206ba56ea956376ee6344f908a308" name="ab16206ba56ea956376ee6344f908a308"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab16206ba56ea956376ee6344f908a308">&#9670;&#160;</a></span>enqueue_ldpc_enc_operation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> srsran::dpdk::enqueue_ldpc_enc_operation </td>
          <td>(</td>
          <td class="paramtype">::rte_bbdev_enc_op &amp;</td>          <td class="paramname"><span class="paramname"><em>enc_ops</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>ldpc_enc_ops</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>id</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>enc_queue_id</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d1e/classsrslog_1_1detail_1_1logger__impl.html">srslog::basic_logger</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>logger</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enqueues new operations in the hardware-accelerated LDPC encoder. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">enc_ops</td><td>Array of encoder operation configuration structures. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_enc_ops</td><td>Number of encoder operations (to be enqueued - from the array). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>bbdev ID of the hardware-accelerator. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">enc_queue_id</td><td>bbdev ID of the queue used by the hardrware-accelerator. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">logger</td><td>SRS logger. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  152</span>{</div>
<div class="line"><span class="lineno">  153</span>  <span class="comment">// Enqueue new operations on the hardware-accelerator LDPC encoder.</span></div>
<div class="line"><span class="lineno">  154</span>  ::rte_bbdev_enc_op* <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ops</a>             = &amp;<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_ops</a>;</div>
<div class="line"><span class="lineno">  155</span>  uint16_t            <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">num_enq_enc_ops</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_bbdev_enqueue_ldpc_enc_ops</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bbdev_id</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_queue_id</a>, &amp;<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ops</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">num_enc_ops</a>);</div>
<div class="line"><span class="lineno">  156</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">num_enq_enc_ops</a> &lt;= 0) {</div>
<div class="line"><span class="lineno">  157</span>    <span class="comment">// Free the input and output mbuf back to its original mbuf pools.</span></div>
<div class="line"><span class="lineno">  158</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_pktmbuf_free</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_ops</a>.ldpc_enc.input.data);</div>
<div class="line"><span class="lineno">  159</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_pktmbuf_free</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_ops</a>.ldpc_enc.output.data);</div>
<div class="line"><span class="lineno">  160</span>    logger.error(</div>
<div class="line"><span class="lineno">  161</span>        <span class="stringliteral">&quot;[bbdev] Couldn&#39;t enqueue new operations in the ldpc encoder. The operation will be dropped: acc [queue={}].&quot;</span>,</div>
<div class="line"><span class="lineno">  162</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_queue_id</a>);</div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  164</span>  }</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  167</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a214bea6828bd64573f8ce154bc6d5c85" name="a214bea6828bd64573f8ce154bc6d5c85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a214bea6828bd64573f8ce154bc6d5c85">&#9670;&#160;</a></span>read_ldpc_enc_bbdev_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srsran::dpdk::read_ldpc_enc_bbdev_data </td>
          <td>(</td>
          <td class="paramtype">::rte_bbdev_enc_op &amp;</td>          <td class="paramname"><span class="paramname"><em>op</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d4/dff/classuint8__t.html">uint8_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>data</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d4/dff/classuint8__t.html">uint8_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>packed_data</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/db9/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>cb_mode</em><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">true</a></span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the contents of the bbdev output mbuffer structures from the hardware-accelerated LPDC encoder operations. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">op</td><td>bbdev encoder operation configuration structure. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>The output data from the hardware-accelerated LDPC encoder operations. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">packed_data</td><td>Temporary storage for the packed outputs from the hardware-accelerator. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_mode</td><td>Optional. Indicates if the encoder operates in CB mode (true) or TB mode (false). </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  190</span>{</div>
<div class="line"><span class="lineno">  191</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_mbuf</a>* <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_out</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.output.data;</div>
<div class="line"><span class="lineno">  192</span>  uint16_t    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_len</a>    = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">rte_pktmbuf_data_len</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_out</a>);</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>  <span class="comment">// Read the TB/CB data. Note that a single read operation is performed per TB/CB. The read assumes that the output</span></div>
<div class="line"><span class="lineno">  195</span>  <span class="comment">// data size is below the requested mbuf size (by default set to the maximum supported value</span></div>
<div class="line"><span class="lineno">  196</span>  <span class="comment">// RTE_BBDEV_LDPC_E_MAX_MBUF).</span></div>
<div class="line"><span class="lineno">  197</span>  uint16_t offset   = 0;</div>
<div class="line"><span class="lineno">  198</span>  <a class="code hl_class" href="../../d4/dff/classuint8__t.html">uint8_t</a>* <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_data</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">rte_pktmbuf_mtod_offset</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_out</a>, <a class="code hl_class" href="../../d4/dff/classuint8__t.html">uint8_t</a>*, offset);</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>  <span class="comment">// Recover the encoded data.</span></div>
<div class="line"><span class="lineno">  201</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_memcpy</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">packed_data</a>.data(), <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_data</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_len</a>);</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>  <span class="comment">// Unpack the accelerator outputs, while avoiding (byte-alignment) padding bits.</span></div>
<div class="line"><span class="lineno">  204</span>  <a class="code hl_class" href="../../d3/d87/classuint32__t.html">uint32_t</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_length</a>         = 0;</div>
<div class="line"><span class="lineno">  205</span>  <a class="code hl_class" href="../../d3/d87/classuint32__t.html">uint32_t</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_offset</a>         = 0;</div>
<div class="line"><span class="lineno">  206</span>  <a class="code hl_class" href="../../d3/d87/classuint32__t.html">uint32_t</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_byte_offset</a>    = 0;</div>
<div class="line"><span class="lineno">  207</span>  <a class="code hl_class" href="../../d4/dff/classuint8__t.html">uint8_t</a>  nof_segments       = 1;</div>
<div class="line"><span class="lineno">  208</span>  <a class="code hl_class" href="../../d4/dff/classuint8__t.html">uint8_t</a>  nof_short_segments = 0;</div>
<div class="line"><span class="lineno">  209</span>  <span class="comment">// Check if CB mode is used. No data offset in this case (a dedicated mbuf is used).</span></div>
<div class="line"><span class="lineno">  210</span>  <span class="keywordflow">if</span> (cb_mode) {</div>
<div class="line"><span class="lineno">  211</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_length</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.cb_params.e;</div>
<div class="line"><span class="lineno">  212</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  213</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_length</a>         = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.tb_params.ea;</div>
<div class="line"><span class="lineno">  214</span>    nof_short_segments = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.tb_params.cab;</div>
<div class="line"><span class="lineno">  215</span>    nof_segments       = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.tb_params.c;</div>
<div class="line"><span class="lineno">  216</span>  }</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>  <span class="keywordflow">for</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">uint</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_idx</a> = 0, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">end_idx</a> = nof_segments; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_idx</a> &lt; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">end_idx</a>; ++<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_idx</a>) {</div>
<div class="line"><span class="lineno">  219</span>    <a class="code hl_class" href="../../d3/d87/classuint32__t.html">uint32_t</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_byte_length</a>             = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d3/d87/classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ceil</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_length</a>) / 8.0));</div>
<div class="line"><span class="lineno">  220</span>    <a class="code hl_class" href="../../d3/d87/classuint32__t.html">uint32_t</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_bit_length_with_padding</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_byte_length</a> * 8;</div>
<div class="line"><span class="lineno">  221</span>    srsvec::bit_unpack(<a class="code hl_class" href="../../de/d4c/classsrsran_1_1span.html">span&lt;uint8_t&gt;</a>(data.subspan(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_offset</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_bit_length_with_padding</a>)),</div>
<div class="line"><span class="lineno">  222</span>                       <a class="code hl_function" href="../../df/dfc/classsrsran_1_1bit__buffer.html#a69017e63cce99f1c0c6aaa79a4439a89">::bit_buffer::from_bytes</a>(<a class="code hl_class" href="../../de/d4c/classsrsran_1_1span.html">span&lt;uint8_t&gt;</a>(&amp;<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">packed_data</a>[<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_byte_offset</a>], <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_byte_length</a>)));</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    <span class="comment">// In TB mode the segment offset needs to be udpated.</span></div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordflow">if</span> (!cb_mode) {</div>
<div class="line"><span class="lineno">  226</span>      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_offset</a> += <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_length</a>;</div>
<div class="line"><span class="lineno">  227</span>      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_byte_offset</a> += <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_byte_length</a>;</div>
<div class="line"><span class="lineno">  228</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_idx</a> + 1 &lt; nof_short_segments) {</div>
<div class="line"><span class="lineno">  229</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_length</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.tb_params.ea;</div>
<div class="line"><span class="lineno">  230</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  231</span>        <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">seg_length</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.tb_params.eb;</div>
<div class="line"><span class="lineno">  232</span>      }</div>
<div class="line"><span class="lineno">  233</span>    }</div>
<div class="line"><span class="lineno">  234</span>  }</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>  <span class="comment">// Free the input and output mbuf back to its original mbuf pools.</span></div>
<div class="line"><span class="lineno">  237</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_pktmbuf_free</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.input.data);</div>
<div class="line"><span class="lineno">  238</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_pktmbuf_free</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.output.data);</div>
<div class="line"><span class="lineno">  239</span>}</div>
<div class="ttc" id="aclasssrsran_1_1bit__buffer_html_a69017e63cce99f1c0c6aaa79a4439a89"><div class="ttname"><a href="../../df/dfc/classsrsran_1_1bit__buffer.html#a69017e63cce99f1c0c6aaa79a4439a89">srsran::bit_buffer::from_bytes</a></div><div class="ttdeci">static bit_buffer from_bytes(span&lt; word_t &gt; bytes)</div><div class="ttdoc">Creates a bit buffer from a view of bytes.</div><div class="ttdef"><b>Definition</b> bit_buffer.h:69</div></div>
<div class="ttc" id="aclasssrsran_1_1span_html"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html">srsran::span</a></div><div class="ttdef"><b>Definition</b> span.h:98</div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="../../d3/d87/classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassuint8__t_html"><div class="ttname"><a href="../../d4/dff/classuint8__t.html">uint8_t</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a9c8e038963f0e8f36d3d679f025ed2" name="a1a9c8e038963f0e8f36d3d679f025ed2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a9c8e038963f0e8f36d3d679f025ed2">&#9670;&#160;</a></span>set_ldpc_enc_bbdev_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srsran::dpdk::set_ldpc_enc_bbdev_config </td>
          <td>(</td>
          <td class="paramtype">::rte_bbdev_enc_op &amp;</td>          <td class="paramname"><span class="paramname"><em>op</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html">srsran::hal::hw_pdsch_encoder_configuration</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>cfg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the contents of the bbdev configuration structure for the hardware-accelerated LPDC encoder operations. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">op</td><td>bbdev encoder operation configuration structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cfg</td><td>PDSCH encoder configuration parameter-structure. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   32</span>{</div>
<div class="line"><span class="lineno">   33</span>  <span class="comment">// Base graph.</span></div>
<div class="line"><span class="lineno">   34</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.basegraph = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d4/dff/classuint8__t.html">uint8_t</a><span class="keyword">&gt;</span>(cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#ab92871361c091803282f99ce1db60e38">base_graph_index</a>);</div>
<div class="line"><span class="lineno">   35</span>  <span class="comment">// Modulation.</span></div>
<div class="line"><span class="lineno">   36</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.q_m = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d4/dff/classuint8__t.html">uint8_t</a><span class="keyword">&gt;</span>(cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a255de834049c0aa2925e5ed076a525a3">modulation</a>);</div>
<div class="line"><span class="lineno">   37</span>  <span class="comment">// RV index.</span></div>
<div class="line"><span class="lineno">   38</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.rv_index = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d4/dff/classuint8__t.html">uint8_t</a><span class="keyword">&gt;</span>(cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#afbc7c6fdfc9eeb5965191ab1ef2c5007">rv</a>);</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>  <span class="comment">// Check if CB mode or TB mode is to be used.</span></div>
<div class="line"><span class="lineno">   41</span>  <span class="keywordflow">if</span> (cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a05de4e373b50a547844c523e91277047">cb_mode</a>) {</div>
<div class="line"><span class="lineno">   42</span>    <span class="comment">// CB mode is currently used. CB size is in bytes.</span></div>
<div class="line"><span class="lineno">   43</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.code_block_mode = 1;</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>    <span class="comment">// Set the CB-specific parameters.</span></div>
<div class="line"><span class="lineno">   46</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.cb_params.e = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d3/d87/classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a1771b23b3af03255270cccfee5d2fa05">rm_length</a>);</div>
<div class="line"><span class="lineno">   47</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   48</span>    <span class="comment">// TB mode is currently used. TB size is in bytes.</span></div>
<div class="line"><span class="lineno">   49</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.code_block_mode = 0;</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>    <span class="comment">// Set the TB-specific parameters.</span></div>
<div class="line"><span class="lineno">   52</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.tb_params.c   = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d4/dff/classuint8__t.html">uint8_t</a><span class="keyword">&gt;</span>(cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#ae195af969a87e89fec882e2443279c45">nof_segments</a>);</div>
<div class="line"><span class="lineno">   53</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.tb_params.cab = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d4/dff/classuint8__t.html">uint8_t</a><span class="keyword">&gt;</span>(cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a07640605061fb34ada25620c2ea5258d">nof_short_segments</a>);</div>
<div class="line"><span class="lineno">   54</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.tb_params.ea  = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d3/d87/classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a3faacc820d25247d36c23d047b50fac7">cw_length_a</a>);</div>
<div class="line"><span class="lineno">   55</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.tb_params.eb  = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d3/d87/classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a3381ffaf0821975ecf1ef4a4aa4bd083">cw_length_b</a>);</div>
<div class="line"><span class="lineno">   56</span>    <span class="comment">// The offset to first CB in inbound mbuf data is assumed to be 0.</span></div>
<div class="line"><span class="lineno">   57</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.tb_params.r = 0;</div>
<div class="line"><span class="lineno">   58</span>  }</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>  <span class="comment">// Lifting size.</span></div>
<div class="line"><span class="lineno">   61</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.z_c = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#aecc533a6b8ad6469c7bf64e8cb3dd01d">lifting_size</a>);</div>
<div class="line"><span class="lineno">   62</span>  <span class="keywordtype">unsigned</span> K          = 0;</div>
<div class="line"><span class="lineno">   63</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.basegraph == 1) {</div>
<div class="line"><span class="lineno">   64</span>    K = 22 * <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.z_c;</div>
<div class="line"><span class="lineno">   65</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   66</span>    K = 10 * <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.z_c;</div>
<div class="line"><span class="lineno">   67</span>  }</div>
<div class="line"><span class="lineno">   68</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.n_filler = cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a7872a58cb8174accb342082f44d44c9c">nof_filler_bits</a>;</div>
<div class="line"><span class="lineno">   69</span>  <span class="comment">// Filler bits.</span></div>
<div class="line"><span class="lineno">   70</span>  <span class="comment">// Note that providing a byte-aligned &#39;K - n_filler&#39; value is a requirement.</span></div>
<div class="line"><span class="lineno">   71</span>  <span class="comment">// Roundig up of &#39;n_filler&#39; to the nearest value is done if needed.</span></div>
<div class="line"><span class="lineno">   72</span>  <span class="keywordflow">if</span> ((K - <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.n_filler) % 8 != 0) {</div>
<div class="line"><span class="lineno">   73</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.n_filler = (cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a7872a58cb8174accb342082f44d44c9c">nof_filler_bits</a> + 8 - 1) &amp; -8;</div>
<div class="line"><span class="lineno">   74</span>  }</div>
<div class="line"><span class="lineno">   75</span>  <span class="comment">// Length of the circular buffer in bits, as described in TS38.212 Section 5.4.2.1.</span></div>
<div class="line"><span class="lineno">   76</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.n_cb = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a5aad33a7f73895772a97c0c567f26dca">Ncb</a>);</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>  <span class="comment">// Define the PDSCH encoder operation flags.</span></div>
<div class="line"><span class="lineno">   79</span>  <a class="code hl_class" href="../../d3/d87/classuint32__t.html">uint32_t</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bitmask</a> = 0;</div>
<div class="line"><span class="lineno">   80</span>  <span class="comment">// Bit-level interleaver is always implemented by the accelerator (clear the bit).</span></div>
<div class="line"><span class="lineno">   81</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bitmask</a> &amp;= <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">~RTE_BBDEV_LDPC_INTERLEAVER_BYPASS</a>;</div>
<div class="line"><span class="lineno">   82</span>  <span class="comment">// Rate matching is always implemented by the accelerator (set the bit).</span></div>
<div class="line"><span class="lineno">   83</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bitmask</a> |= <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">RTE_BBDEV_LDPC_RATE_MATCH</a>;</div>
<div class="line"><span class="lineno">   84</span>  <span class="comment">// In CB mode, both TB anc CB CRC attachment is implemented by the segmenter (and, thus, is disabled in the</span></div>
<div class="line"><span class="lineno">   85</span>  <span class="comment">// accelerator). In TB mode, TB CRC attachment is not supported by the accelerator, but the CB one is for segmented</span></div>
<div class="line"><span class="lineno">   86</span>  <span class="comment">// TBs.</span></div>
<div class="line"><span class="lineno">   87</span>  <span class="keywordflow">if</span> (!cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a05de4e373b50a547844c523e91277047">cb_mode</a> &amp;&amp; cfg.<a class="code hl_variable" href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#ae195af969a87e89fec882e2443279c45">nof_segments</a> &gt; 1) {</div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bitmask</a> |= <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">RTE_BBDEV_LDPC_CRC_24B_ATTACH</a>;</div>
<div class="line"><span class="lineno">   89</span>  }</div>
<div class="line"><span class="lineno">   90</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.op_flags = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">bitmask</a>;</div>
<div class="line"><span class="lineno">   91</span>}</div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_a05de4e373b50a547844c523e91277047"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a05de4e373b50a547844c523e91277047">srsran::hal::hw_pdsch_encoder_configuration::cb_mode</a></div><div class="ttdeci">bool cb_mode</div><div class="ttdoc">Operation mode of the PDSCH encoder (CB = true, TB = false [default]).</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:71</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_a07640605061fb34ada25620c2ea5258d"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a07640605061fb34ada25620c2ea5258d">srsran::hal::hw_pdsch_encoder_configuration::nof_short_segments</a></div><div class="ttdeci">unsigned nof_short_segments</div><div class="ttdoc">Number of segments that will have a short rate-matched length.</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:49</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_a1771b23b3af03255270cccfee5d2fa05"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a1771b23b3af03255270cccfee5d2fa05">srsran::hal::hw_pdsch_encoder_configuration::rm_length</a></div><div class="ttdeci">unsigned rm_length</div><div class="ttdoc">Total codeword length after rate-matching in bits (E).</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:67</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_a255de834049c0aa2925e5ed076a525a3"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a255de834049c0aa2925e5ed076a525a3">srsran::hal::hw_pdsch_encoder_configuration::modulation</a></div><div class="ttdeci">modulation_scheme modulation</div><div class="ttdoc">Modulation scheme.</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:45</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_a3381ffaf0821975ecf1ef4a4aa4bd083"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a3381ffaf0821975ecf1ef4a4aa4bd083">srsran::hal::hw_pdsch_encoder_configuration::cw_length_b</a></div><div class="ttdeci">unsigned cw_length_b</div><div class="ttdoc">Total codeword length for large rate-matched segments in bits (Eb).</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:55</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_a3faacc820d25247d36c23d047b50fac7"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a3faacc820d25247d36c23d047b50fac7">srsran::hal::hw_pdsch_encoder_configuration::cw_length_a</a></div><div class="ttdeci">unsigned cw_length_a</div><div class="ttdoc">Total codeword length for short rate-matched segments in bits (Ea).</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:53</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_a5aad33a7f73895772a97c0c567f26dca"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a5aad33a7f73895772a97c0c567f26dca">srsran::hal::hw_pdsch_encoder_configuration::Ncb</a></div><div class="ttdeci">unsigned Ncb</div><div class="ttdoc">Length of the circular buffer in bits.</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:59</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_a7872a58cb8174accb342082f44d44c9c"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#a7872a58cb8174accb342082f44d44c9c">srsran::hal::hw_pdsch_encoder_configuration::nof_filler_bits</a></div><div class="ttdeci">unsigned nof_filler_bits</div><div class="ttdoc">Number of Filler bits (n_filler = K – K’, as per TS38.212 Section 5.2.2.</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:65</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_ab92871361c091803282f99ce1db60e38"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#ab92871361c091803282f99ce1db60e38">srsran::hal::hw_pdsch_encoder_configuration::base_graph_index</a></div><div class="ttdeci">ldpc_base_graph_type base_graph_index</div><div class="ttdoc">Base graph used for encoding/decoding the current transport block.</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:43</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_ae195af969a87e89fec882e2443279c45"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#ae195af969a87e89fec882e2443279c45">srsran::hal::hw_pdsch_encoder_configuration::nof_segments</a></div><div class="ttdeci">unsigned nof_segments</div><div class="ttdoc">Number of segments in the transport block.</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:47</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_aecc533a6b8ad6469c7bf64e8cb3dd01d"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#aecc533a6b8ad6469c7bf64e8cb3dd01d">srsran::hal::hw_pdsch_encoder_configuration::lifting_size</a></div><div class="ttdeci">unsigned lifting_size</div><div class="ttdoc">LDPC lifting size (z_c), as per TS38.212, Section 5.2.2.</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:57</div></div>
<div class="ttc" id="astructsrsran_1_1hal_1_1hw__pdsch__encoder__configuration_html_afbc7c6fdfc9eeb5965191ab1ef2c5007"><div class="ttname"><a href="../../d3/d1e/structsrsran_1_1hal_1_1hw__pdsch__encoder__configuration.html#afbc7c6fdfc9eeb5965191ab1ef2c5007">srsran::hal::hw_pdsch_encoder_configuration::rv</a></div><div class="ttdeci">unsigned rv</div><div class="ttdoc">Redundancy version, values in {0, 1, 2, 3}.</div><div class="ttdef"><b>Definition</b> hw_accelerator_pdsch_enc.h:51</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac61358b8a703b6629b3a493a047fcb95" name="ac61358b8a703b6629b3a493a047fcb95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac61358b8a703b6629b3a493a047fcb95">&#9670;&#160;</a></span>set_ldpc_enc_bbdev_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> srsran::dpdk::set_ldpc_enc_bbdev_data </td>
          <td>(</td>
          <td class="paramtype">::rte_bbdev_enc_op &amp;</td>          <td class="paramname"><span class="paramname"><em>op</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_mempool</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>in_mbuf_pool</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_mempool</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>out_mbuf_pool</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d4/dff/classuint8__t.html">uint8_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>data</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d1e/classsrslog_1_1detail_1_1logger__impl.html">srslog::basic_logger</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>logger</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d4c/classsrsran_1_1span.html">span</a>&lt; <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d4/dff/classuint8__t.html">uint8_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>tb_crc</em><span class="paramdefsep"> = </span><span class="paramdefval">{}</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the contents of the bbdev input mbuffer structures for the hardware-accelerated LPDC encoder operations. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">op</td><td>bbdev encoder operation configuration structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in_mbuf_pool</td><td>Input data mbuf pool for the hardware-accelerated LDPC encoder operations. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out_mbuf_pool</td><td>Output data mbuf pool for the hardware-accelerated LDPC encoder operations. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>The input data to the hardware-accelerated LDPC encoder operations. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">logger</td><td>SRS logger. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tb_crc</td><td>Optional. The TB CRC computed from 'data'. Only required in TB mode. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   99</span>{</div>
<div class="line"><span class="lineno">  100</span>  <span class="comment">// Allocate an mbuf for the input data from the received mempool.</span></div>
<div class="line"><span class="lineno">  101</span>  <span class="keywordtype">char</span>*       <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">input_data</a>;</div>
<div class="line"><span class="lineno">  102</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_mbuf</a>* <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_in</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_pktmbuf_alloc</a>(&amp;in_mbuf_pool);</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_in</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  104</span>    logger.error(<span class="stringliteral">&quot;[bbdev] Not enough mbufs in the input ldpc encoder mbuf pool.&quot;</span>);</div>
<div class="line"><span class="lineno">  105</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  106</span>  }</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>  <span class="comment">// Set the memory pointers for the input data.</span></div>
<div class="line"><span class="lineno">  109</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.input.data   = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_in</a>;</div>
<div class="line"><span class="lineno">  110</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.input.offset = 0; <span class="comment">// Note that a dedicated mbuf is used per operation.</span></div>
<div class="line"><span class="lineno">  111</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.input.length = 0;</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>  <span class="comment">// Allocate the required bytes in the mbuf and update the memory pointers.</span></div>
<div class="line"><span class="lineno">  114</span>  uint16_t <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">data_len</a>   = data.size();</div>
<div class="line"><span class="lineno">  115</span>  uint16_t <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">tb_crc_len</a> = tb_crc.<a class="code hl_function" href="../../de/d4c/classsrsran_1_1span.html#ad0e376d95ca916144eac76f27f0654ac">size</a>();</div>
<div class="line"><span class="lineno">  116</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">input_data</a>          = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_pktmbuf_append</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_in</a>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">data_len</a> + <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">tb_crc_len</a>);</div>
<div class="line"><span class="lineno">  117</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">input_data</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  118</span>    <span class="comment">// Free the input mbuf back to its original mbuf pools.</span></div>
<div class="line"><span class="lineno">  119</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_pktmbuf_free</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_in</a>);</div>
<div class="line"><span class="lineno">  120</span>    logger.error(<span class="stringliteral">&quot;[bbdev] Couldn&#39;t append {} bytes to the ldpc encoder input mbuf.&quot;</span>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">data_len</a> + <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">tb_crc_len</a>);</div>
<div class="line"><span class="lineno">  121</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  122</span>  }</div>
<div class="line"><span class="lineno">  123</span>  <span class="comment">// Copy the TB/CB data. Note that a single copy operation is performed per TB/CB. The copy assumes that the input data</span></div>
<div class="line"><span class="lineno">  124</span>  <span class="comment">// size is below the requested mbuf size (by default set to the maximum supported value RTE_BBDEV_LDPC_E_MAX_MBUF).</span></div>
<div class="line"><span class="lineno">  125</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_memcpy</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">input_data</a>, data.begin(), <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">data_len</a>);</div>
<div class="line"><span class="lineno">  126</span>  <span class="comment">// If required, copy the TB-CRC.</span></div>
<div class="line"><span class="lineno">  127</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_memcpy</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">input_data</a> + <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">data_len</a>, &amp;tb_crc[0], <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">tb_crc_len</a>);</div>
<div class="line"><span class="lineno">  128</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.input.length += <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">data_len</a> + <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">tb_crc_len</a>;</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>  <span class="comment">// Allocate an mbuf for the output data from the received mempool.</span></div>
<div class="line"><span class="lineno">  131</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_mbuf</a>* <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_out</a> = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_pktmbuf_alloc</a>(&amp;out_mbuf_pool);</div>
<div class="line"><span class="lineno">  132</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_out</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  133</span>    <span class="comment">// Free the input mbuf back to its original mbuf pools.</span></div>
<div class="line"><span class="lineno">  134</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">::rte_pktmbuf_free</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_in</a>);</div>
<div class="line"><span class="lineno">  135</span>    logger.error(<span class="stringliteral">&quot;[bbdev] Not enough mbufs in the output ldpc encoder mbuf pool.&quot;</span>);</div>
<div class="line"><span class="lineno">  136</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  137</span>  }</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>  <span class="comment">// Set the memory pointers for the output data.</span></div>
<div class="line"><span class="lineno">  140</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.output.data   = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">m_head_out</a>;</div>
<div class="line"><span class="lineno">  141</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.output.offset = 0; <span class="comment">// Note that a dedicated mbuf is used per operation.</span></div>
<div class="line"><span class="lineno">  142</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">enc_op</a>.ldpc_enc.output.length = 0;</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  145</span>}</div>
<div class="ttc" id="aclasssrsran_1_1span_html_ad0e376d95ca916144eac76f27f0654ac"><div class="ttname"><a href="../../de/d4c/classsrsran_1_1span.html#ad0e376d95ca916144eac76f27f0654ac">srsran::span::size</a></div><div class="ttdeci">constexpr size_type size() const noexcept</div><div class="ttdoc">Returns the number of elements in the span.</div><div class="ttdef"><b>Definition</b> span.h:168</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
