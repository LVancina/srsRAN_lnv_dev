<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>srsRAN Docs: srsran::srs_cu_up::cu_up Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">srsRAN Docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/def/namespacesrsran.html">srsran</a></li><li class="navelem"><b>srs_cu_up</b></li><li class="navelem"><a class="el" href="../../dc/d4f/classsrsran_1_1srs__cu__up_1_1cu__up.html">cu_up</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../db/d76/classsrsran_1_1srs__cu__up_1_1cu__up-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">srsran::srs_cu_up::cu_up Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for srsran::srs_cu_up::cu_up:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/db4/classsrsran_1_1srs__cu__up_1_1cu__up__inherit__graph.png" border="0" usemap="#asrsran_1_1srs__cu__up_1_1cu__up_inherit__map" alt="Inheritance graph"/></div>
<map name="asrsran_1_1srs__cu__up_1_1cu__up_inherit__map" id="asrsran_1_1srs__cu__up_1_1cu__up_inherit__map">
<area shape="rect" title=" " alt="" coords="224,465,445,859"/>
<area shape="rect" href="../../d1/d63/classsrsran_1_1srs__cu__up_1_1cu__up__interface.html" title=" " alt="" coords="258,277,411,417"/>
<area shape="poly" title=" " alt="" coords="337,431,337,465,332,465,332,431"/>
<area shape="rect" href="../../d8/d5f/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__connection__notifier.html" title="Interface to notify about E1AP connections (from the CU&#45;CP) to the CU&#45;UP." alt="" coords="5,28,200,207"/>
<area shape="poly" title=" " alt="" coords="201,215,214,227,264,275,260,279,210,231,197,219"/>
<area shape="rect" href="../../dd/dd2/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__interface.html" title=" " alt="" coords="224,5,445,229"/>
<area shape="poly" title=" " alt="" coords="337,243,337,277,332,277,332,243"/>
<area shape="rect" href="../../d7/d4d/classsrsran_1_1srs__cu__up_1_1cu__up__ngu__interface.html" title="Interface to notify about GTP&#45;U packets (from the NGU) to the CU&#45;UP." alt="" coords="469,67,653,167"/>
<area shape="poly" title=" " alt="" coords="509,179,459,231,410,279,407,275,455,227,505,176"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for srsran::srs_cu_up::cu_up:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d3c/classsrsran_1_1srs__cu__up_1_1cu__up__coll__graph.png" border="0" usemap="#asrsran_1_1srs__cu__up_1_1cu__up_coll__map" alt="Collaboration graph"/></div>
<map name="asrsran_1_1srs__cu__up_1_1cu__up_coll__map" id="asrsran_1_1srs__cu__up_1_1cu__up_coll__map">
<area shape="rect" title=" " alt="" coords="224,465,445,859"/>
<area shape="rect" href="../../d1/d63/classsrsran_1_1srs__cu__up_1_1cu__up__interface.html" title=" " alt="" coords="258,277,411,417"/>
<area shape="poly" title=" " alt="" coords="337,431,337,465,332,465,332,431"/>
<area shape="rect" href="../../d8/d5f/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__connection__notifier.html" title="Interface to notify about E1AP connections (from the CU&#45;CP) to the CU&#45;UP." alt="" coords="5,28,200,207"/>
<area shape="poly" title=" " alt="" coords="201,215,214,227,264,275,260,279,210,231,197,219"/>
<area shape="rect" href="../../dd/dd2/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__interface.html" title=" " alt="" coords="224,5,445,229"/>
<area shape="poly" title=" " alt="" coords="337,243,337,277,332,277,332,243"/>
<area shape="rect" href="../../d7/d4d/classsrsran_1_1srs__cu__up_1_1cu__up__ngu__interface.html" title="Interface to notify about GTP&#45;U packets (from the NGU) to the CU&#45;UP." alt="" coords="469,67,653,167"/>
<area shape="poly" title=" " alt="" coords="509,179,459,231,410,279,407,275,455,227,505,176"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a94283f5d65ad73d71c95e0efbce9d803" id="r_a94283f5d65ad73d71c95e0efbce9d803"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a94283f5d65ad73d71c95e0efbce9d803">cu_up</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html">cu_up_configuration</a> &amp;<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">cfg_</a>)</td></tr>
<tr class="separator:a94283f5d65ad73d71c95e0efbce9d803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add8be552c371a7798186306378403106" id="r_add8be552c371a7798186306378403106"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add8be552c371a7798186306378403106">start</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="separator:add8be552c371a7798186306378403106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c8bc9f0897168db36b7bdc83acaf767" id="r_a6c8bc9f0897168db36b7bdc83acaf767"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c8bc9f0897168db36b7bdc83acaf767">stop</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a6c8bc9f0897168db36b7bdc83acaf767"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the CU-UP. This call is blocking and only returns once all tasks in the CU-UP are completed.  <br /></td></tr>
<tr class="separator:a6c8bc9f0897168db36b7bdc83acaf767"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438d4df84c677d97e537f72abab429c1" id="r_a438d4df84c677d97e537f72abab429c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d57/classsrsran_1_1optional.html">optional</a>&lt; uint16_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a438d4df84c677d97e537f72abab429c1">get_n3_bind_port</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a438d4df84c677d97e537f72abab429c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the N3 bind port.  <br /></td></tr>
<tr class="separator:a438d4df84c677d97e537f72abab429c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a710a273f49fa296c1bb2799e5e7bb2b5" id="r_a710a273f49fa296c1bb2799e5e7bb2b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d65/classsrsran_1_1e1ap__message__handler.html">e1ap_message_handler</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a710a273f49fa296c1bb2799e5e7bb2b5">get_e1ap_message_handler</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a710a273f49fa296c1bb2799e5e7bb2b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the E1AP message handler interface.  <br /></td></tr>
<tr class="separator:a710a273f49fa296c1bb2799e5e7bb2b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa91bb78cd9d8ae82db1500e7d7e3b254" id="r_aa91bb78cd9d8ae82db1500e7d7e3b254"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d65/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__setup__response.html">e1ap_bearer_context_setup_response</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa91bb78cd9d8ae82db1500e7d7e3b254">handle_bearer_context_setup_request</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../db/d21/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__setup__request.html">e1ap_bearer_context_setup_request</a> &amp;msg) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:aa91bb78cd9d8ae82db1500e7d7e3b254"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new UE context and handle bearer setup request.  <br /></td></tr>
<tr class="separator:aa91bb78cd9d8ae82db1500e7d7e3b254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1362c97b6d2cb83314f074f0a20afd91" id="r_a1362c97b6d2cb83314f074f0a20afd91"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d48/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__modification__response.html">e1ap_bearer_context_modification_response</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1362c97b6d2cb83314f074f0a20afd91">handle_bearer_context_modification_request</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d3/d2b/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__modification__request.html">e1ap_bearer_context_modification_request</a> &amp;msg) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a1362c97b6d2cb83314f074f0a20afd91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new UE context and handle bearer modification request.  <br /></td></tr>
<tr class="separator:a1362c97b6d2cb83314f074f0a20afd91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fc5743a0a0016ff9f7040b89ecf24e0" id="r_a2fc5743a0a0016ff9f7040b89ecf24e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2fc5743a0a0016ff9f7040b89ecf24e0">handle_bearer_context_release_command</a> (<a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d0/d62/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__release__command.html">e1ap_bearer_context_release_command</a> &amp;msg) <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a2fc5743a0a0016ff9f7040b89ecf24e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle bearer release command and remove the associated UE context.  <br /></td></tr>
<tr class="separator:a2fc5743a0a0016ff9f7040b89ecf24e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae010f6bfb6d8e06af6cef11f12e9d5f0" id="r_ae010f6bfb6d8e06af6cef11f12e9d5f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae010f6bfb6d8e06af6cef11f12e9d5f0">on_e1ap_connection_establish</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:ae010f6bfb6d8e06af6cef11f12e9d5f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifies the CU-UP about a successful E1AP connection.  <br /></td></tr>
<tr class="separator:ae010f6bfb6d8e06af6cef11f12e9d5f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5dcc0bdaa3f96308a8c8c5de7a1682" id="r_a1e5dcc0bdaa3f96308a8c8c5de7a1682"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e5dcc0bdaa3f96308a8c8c5de7a1682">on_e1ap_connection_drop</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a1e5dcc0bdaa3f96308a8c8c5de7a1682"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifies the CU-CP about a dropped E1AP connection.  <br /></td></tr>
<tr class="separator:a1e5dcc0bdaa3f96308a8c8c5de7a1682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a168c8502e4f5421170c8bfb0821dd55c" id="r_a168c8502e4f5421170c8bfb0821dd55c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a168c8502e4f5421170c8bfb0821dd55c">e1ap_is_connected</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a168c8502e4f5421170c8bfb0821dd55c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the state of the E1AP connection.  <br /></td></tr>
<tr class="separator:a168c8502e4f5421170c8bfb0821dd55c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14a03ee10785cb4cf6c16a8c084e78a4" id="r_a14a03ee10785cb4cf6c16a8c084e78a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/dc8/classsrsran_1_1gtpu__demux__rx__upper__layer__interface.html">gtpu_demux_rx_upper_layer_interface</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a14a03ee10785cb4cf6c16a8c084e78a4">get_ngu_pdu_handler</a> () <a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">override</a></td></tr>
<tr class="memdesc:a14a03ee10785cb4cf6c16a8c084e78a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the NGu PDU handler interface.  <br /></td></tr>
<tr class="separator:a14a03ee10785cb4cf6c16a8c084e78a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a94283f5d65ad73d71c95e0efbce9d803" name="a94283f5d65ad73d71c95e0efbce9d803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94283f5d65ad73d71c95e0efbce9d803">&#9670;&#160;</a></span>cu_up()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cu_up::cu_up </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html">cu_up_configuration</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>cfg_</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<blockquote class="doxtable">
<p>&zwj;Create and connect upper layers </p>
</blockquote>
<blockquote class="doxtable">
<p>&zwj;Create e1ap </p>
</blockquote>
<blockquote class="doxtable">
<p>&zwj;Create UE manager </p>
</blockquote>
<div class="fragment"><div class="line"><span class="lineno">   51</span>                                               : cfg(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">config_</a>), main_ctrl_loop(128)</div>
<div class="line"><span class="lineno">   52</span>{</div>
<div class="line"><span class="lineno">   53</span>  assert_cu_up_configuration_valid(cfg);</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>  <span class="comment">// Create NG-U gateway, bind/open later (after GTP-U demux is connected)</span></div>
<div class="line"><span class="lineno">   58</span>  <a class="code hl_struct" href="../../d0/dd7/structsrsran_1_1udp__network__gateway__config.html">udp_network_gateway_config</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_gw_config</a> = {};</div>
<div class="line"><span class="lineno">   59</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_gw_config</a>.bind_address               = cfg.net_cfg.<a class="code hl_variable" href="../../d0/d27/structsrsran_1_1srs__cu__up_1_1network__interface__config.html#ad265e95392f83decf5bb4a1faa485cba">n3_bind_addr</a>;</div>
<div class="line"><span class="lineno">   60</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_gw_config</a>.bind_port                  = cfg.net_cfg.<a class="code hl_variable" href="../../d0/d27/structsrsran_1_1srs__cu__up_1_1network__interface__config.html#a29aa65fd19d144e7a6112873f0f907d4">n3_bind_port</a>;</div>
<div class="line"><span class="lineno">   61</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_gw_config</a>.rx_max_mmsg                = cfg.net_cfg.<a class="code hl_variable" href="../../d0/d27/structsrsran_1_1srs__cu__up_1_1network__interface__config.html#a19ce76aaf4f9dcfd394d20ed08de021a">n3_rx_max_mmsg</a>;</div>
<div class="line"><span class="lineno">   62</span>  <span class="comment">// other params</span></div>
<div class="line"><span class="lineno">   63</span>  <a class="code hl_struct" href="../../df/d15/structsrsran_1_1udp__network__gateway__creation__message.html">udp_network_gateway_creation_message</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_gw_msg</a> = {<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_gw_config</a>, gw_data_gtpu_demux_adapter, *cfg.<a class="code hl_variable" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#a461dd4774adb59857a0c5c8d276fdcdc">io_ul_executor</a>};</div>
<div class="line"><span class="lineno">   64</span>  ngu_gw                                          = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a02eec07ee9fc9748e71668a36d096cee">create_udp_network_gateway</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_gw_msg</a>);</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>  <span class="comment">// Create GTP-U demux</span></div>
<div class="line"><span class="lineno">   67</span>  <a class="code hl_struct" href="../../d8/d43/structsrsran_1_1gtpu__demux__creation__request.html">gtpu_demux_creation_request</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">demux_msg</a> = {};</div>
<div class="line"><span class="lineno">   68</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">demux_msg</a>.cfg.warn_on_drop            = cfg.n3_cfg.warn_on_drop;</div>
<div class="line"><span class="lineno">   69</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">demux_msg</a>.cu_up_exec                  = cfg.<a class="code hl_variable" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#a398c4f4a552908c709ca735fb62ccf29">dl_executor</a>;</div>
<div class="line"><span class="lineno">   70</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">demux_msg</a>.gtpu_pcap                   = cfg.gtpu_pcap;</div>
<div class="line"><span class="lineno">   71</span>  ngu_demux                             = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#ac5904a2a271471b6fad7f437cf44052d">create_gtpu_demux</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">demux_msg</a>);</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>  <span class="comment">// Create GTP-U echo and register it at demux</span></div>
<div class="line"><span class="lineno">   74</span>  <a class="code hl_struct" href="../../d1/d58/structsrsran_1_1gtpu__echo__creation__message.html">gtpu_echo_creation_message</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_echo_msg</a> = {};</div>
<div class="line"><span class="lineno">   75</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_echo_msg</a>.gtpu_pcap                  = cfg.gtpu_pcap;</div>
<div class="line"><span class="lineno">   76</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_echo_msg</a>.tx_upper                   = &amp;gtpu_gw_adapter;</div>
<div class="line"><span class="lineno">   77</span>  ngu_echo                                = <a class="code hl_function" href="../../d9/def/namespacesrsran.html#ac1ef83968cbf244e63f93e302be8bbd5">create_gtpu_echo</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">ngu_echo_msg</a>);</div>
<div class="line"><span class="lineno">   78</span>  ngu_demux-&gt;add_tunnel(<a class="code hl_variable" href="../../d9/def/namespacesrsran.html#ae66ebdfbccf6edcfe04b5d33772b58a7">GTPU_PATH_MANAGEMENT_TEID</a>, ngu_echo-&gt;get_rx_upper_layer_interface());</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>  <span class="comment">// Connect layers</span></div>
<div class="line"><span class="lineno">   81</span>  gw_data_gtpu_demux_adapter.connect_gtpu_demux(*ngu_demux);</div>
<div class="line"><span class="lineno">   82</span>  gtpu_gw_adapter.connect_network_gateway(*ngu_gw);</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>  <span class="comment">// Bind/open the gateway, start handling of incoming traffic from UPF, e.g. echo</span></div>
<div class="line"><span class="lineno">   85</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> ngu_gw-&gt;create_and_bind()) {</div>
<div class="line"><span class="lineno">   86</span>    logger.error(<span class="stringliteral">&quot;Failed to create and connect N3 gateway&quot;</span>);</div>
<div class="line"><span class="lineno">   87</span>  }</div>
<div class="line"><span class="lineno">   88</span>  <span class="keywordtype">bool</span> success = cfg.<a class="code hl_variable" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#ac052008ef957490250e3db69af1b5dbf">epoll_broker</a>-&gt;<a class="code hl_function" href="../../db/d9d/classsrsran_1_1io__broker.html#a6c24c2e4dd6318cd267f68739356e9bb">register_fd</a>(ngu_gw-&gt;get_socket_fd(), [<span class="keyword">this</span>](<span class="keywordtype">int</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fd</a>) { ngu_gw-&gt;receive(); });</div>
<div class="line"><span class="lineno">   89</span>  <span class="keywordflow">if</span> (!success) {</div>
<div class="line"><span class="lineno">   90</span>    logger.error(<span class="stringliteral">&quot;Failed to register N3 (GTP-U) network gateway at IO broker. socket_fd={}&quot;</span>, ngu_gw-&gt;get_socket_fd());</div>
<div class="line"><span class="lineno">   91</span>  }</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>  <span class="comment">// Create TEID allocator</span></div>
<div class="line"><span class="lineno">   94</span>  <a class="code hl_struct" href="../../d7/d24/structsrsran_1_1gtpu__allocator__creation__request.html">gtpu_allocator_creation_request</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f1u_alloc_msg</a> = {};</div>
<div class="line"><span class="lineno">   95</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f1u_alloc_msg</a>.max_nof_teids                   = MAX_NOF_UES * MAX_NOF_PDU_SESSIONS;</div>
<div class="line"><span class="lineno">   96</span>  f1u_teid_allocator                            = create_gtpu_allocator(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">f1u_alloc_msg</a>);</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   99</span>  e1ap = create_e1ap(*cfg.e1ap.e1ap_conn_client, e1ap_cu_up_ev_notifier, *cfg.timers, *cfg.<a class="code hl_variable" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#a5e394382adf623b95a2546ccff3e58f2">ctrl_executor</a>);</div>
<div class="line"><span class="lineno">  100</span>  e1ap_cu_up_ev_notifier.connect_cu_up(*<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>  cfg.e1ap.e1ap_conn_mng = e1ap.get();</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  105</span>  ue_mng = std::make_unique&lt;ue_manager&gt;(cfg.net_cfg,</div>
<div class="line"><span class="lineno">  106</span>                                        cfg.n3_cfg,</div>
<div class="line"><span class="lineno">  107</span>                                        *e1ap,</div>
<div class="line"><span class="lineno">  108</span>                                        *cfg.timers,</div>
<div class="line"><span class="lineno">  109</span>                                        *cfg.f1u_gateway,</div>
<div class="line"><span class="lineno">  110</span>                                        gtpu_gw_adapter,</div>
<div class="line"><span class="lineno">  111</span>                                        *ngu_demux,</div>
<div class="line"><span class="lineno">  112</span>                                        *f1u_teid_allocator,</div>
<div class="line"><span class="lineno">  113</span>                                        *cfg.gtpu_pcap,</div>
<div class="line"><span class="lineno">  114</span>                                        *cfg.<a class="code hl_variable" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#a5e394382adf623b95a2546ccff3e58f2">ctrl_executor</a>,</div>
<div class="line"><span class="lineno">  115</span>                                        logger);</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>  <span class="comment">// Start statistics report timer</span></div>
<div class="line"><span class="lineno">  118</span>  <span class="keywordflow">if</span> (cfg.statistics_report_period.count() &gt; 0) {</div>
<div class="line"><span class="lineno">  119</span>    statistics_report_timer = cfg.timers-&gt;<a class="code hl_function" href="../../d9/d9d/classsrsran_1_1timer__manager.html#ae7969b02b1e0306e319b93505212f36c">create_unique_timer</a>(*cfg.<a class="code hl_variable" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#a5e394382adf623b95a2546ccff3e58f2">ctrl_executor</a>);</div>
<div class="line"><span class="lineno">  120</span>    statistics_report_timer.<a class="code hl_function" href="../../d5/d6f/classsrsran_1_1unique__timer.html#a79c9d6ec6c5942aa869ea4ba273536c5">set</a>(cfg.statistics_report_period,</div>
<div class="line"><span class="lineno">  121</span>                                [<span class="keyword">this</span>](<a class="code hl_enumeration" href="../../d9/def/namespacesrsran.html#aa72283f3567ebd1eb77b7dd882d6de33">timer_id_t</a> <span class="comment">/*tid*/</span>) { on_statistics_report_timer_expired(); });</div>
<div class="line"><span class="lineno">  122</span>    statistics_report_timer.<a class="code hl_function" href="../../d5/d6f/classsrsran_1_1unique__timer.html#af3fa2fce72a8058698b971e498e0c262">run</a>();</div>
<div class="line"><span class="lineno">  123</span>  }</div>
<div class="line"><span class="lineno">  124</span>}</div>
<div class="ttc" id="aclasssrsran_1_1io__broker_html_a6c24c2e4dd6318cd267f68739356e9bb"><div class="ttname"><a href="../../db/d9d/classsrsran_1_1io__broker.html#a6c24c2e4dd6318cd267f68739356e9bb">srsran::io_broker::register_fd</a></div><div class="ttdeci">virtual SRSRAN_NODISCARD bool register_fd(int fd, recv_callback_t handler)=0</div><div class="ttdoc">Register a file descriptor to be handled by the IO interface.</div></div>
<div class="ttc" id="aclasssrsran_1_1timer__manager_html_ae7969b02b1e0306e319b93505212f36c"><div class="ttname"><a href="../../d9/d9d/classsrsran_1_1timer__manager.html#ae7969b02b1e0306e319b93505212f36c">srsran::timer_manager::create_unique_timer</a></div><div class="ttdeci">unique_timer create_unique_timer(task_executor &amp;exec)</div><div class="ttdoc">Creates a new instance of a unique timer.</div><div class="ttdef"><b>Definition</b> timers.cpp:311</div></div>
<div class="ttc" id="aclasssrsran_1_1unique__timer_html_a79c9d6ec6c5942aa869ea4ba273536c5"><div class="ttname"><a href="../../d5/d6f/classsrsran_1_1unique__timer.html#a79c9d6ec6c5942aa869ea4ba273536c5">srsran::unique_timer::set</a></div><div class="ttdeci">void set(timer_duration duration, unique_function&lt; void(timer_id_t)&gt; callback)</div><div class="ttdoc">Configures the duration of the timer calling the provided callback upon timer expiration.</div><div class="ttdef"><b>Definition</b> timers.h:269</div></div>
<div class="ttc" id="aclasssrsran_1_1unique__timer_html_af3fa2fce72a8058698b971e498e0c262"><div class="ttname"><a href="../../d5/d6f/classsrsran_1_1unique__timer.html#af3fa2fce72a8058698b971e498e0c262">srsran::unique_timer::run</a></div><div class="ttdeci">void run()</div><div class="ttdoc">Activates the timer to start ticking.</div><div class="ttdef"><b>Definition</b> timers.h:283</div></div>
<div class="ttc" id="anamespacesrsran_html_a02eec07ee9fc9748e71668a36d096cee"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a02eec07ee9fc9748e71668a36d096cee">srsran::create_udp_network_gateway</a></div><div class="ttdeci">std::unique_ptr&lt; udp_network_gateway &gt; create_udp_network_gateway(udp_network_gateway_creation_message msg)</div><div class="ttdoc">Creates an instance of an network gateway.</div><div class="ttdef"><b>Definition</b> udp_network_gateway_factory.cpp:28</div></div>
<div class="ttc" id="anamespacesrsran_html_a58e7c9f2c51a9ad6a0899b46d5315723"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">srsran::mask_msb_ones</a></div><div class="ttdeci">constexpr Integer mask_msb_ones(size_t N)</div><div class="ttdoc">Returns an unsigned integer with the N most significant bits (MSB) set to one, and the remaining bits...</div><div class="ttdef"><b>Definition</b> bounded_bitset.h:65</div></div>
<div class="ttc" id="anamespacesrsran_html_aa72283f3567ebd1eb77b7dd882d6de33"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#aa72283f3567ebd1eb77b7dd882d6de33">srsran::timer_id_t</a></div><div class="ttdeci">timer_id_t</div><div class="ttdoc">Type used to represent a unique timer identifier.</div><div class="ttdef"><b>Definition</b> timers.h:37</div></div>
<div class="ttc" id="anamespacesrsran_html_ac1ef83968cbf244e63f93e302be8bbd5"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#ac1ef83968cbf244e63f93e302be8bbd5">srsran::create_gtpu_echo</a></div><div class="ttdeci">std::unique_ptr&lt; gtpu_echo &gt; create_gtpu_echo(gtpu_echo_creation_message &amp;msg)</div><div class="ttdoc">Creates an instance of a GTP-U entity.</div><div class="ttdef"><b>Definition</b> gtpu_echo_factory.cpp:30</div></div>
<div class="ttc" id="anamespacesrsran_html_ac5904a2a271471b6fad7f437cf44052d"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#ac5904a2a271471b6fad7f437cf44052d">srsran::create_gtpu_demux</a></div><div class="ttdeci">std::unique_ptr&lt; gtpu_demux &gt; create_gtpu_demux(const gtpu_demux_creation_request &amp;msg)</div><div class="ttdoc">Creates an instance of an GTP-U demux object.</div><div class="ttdef"><b>Definition</b> gtpu_demux_factory.cpp:28</div></div>
<div class="ttc" id="anamespacesrsran_html_ae66ebdfbccf6edcfe04b5d33772b58a7"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#ae66ebdfbccf6edcfe04b5d33772b58a7">srsran::GTPU_PATH_MANAGEMENT_TEID</a></div><div class="ttdeci">constexpr gtpu_teid_t GTPU_PATH_MANAGEMENT_TEID</div><div class="ttdoc">TEID for path management messages via GTP-U, e.g. echo request, echo response,...</div><div class="ttdef"><b>Definition</b> gtpu_teid.h:53</div></div>
<div class="ttc" id="astructsrsran_1_1gtpu__allocator__creation__request_html"><div class="ttname"><a href="../../d7/d24/structsrsran_1_1gtpu__allocator__creation__request.html">srsran::gtpu_allocator_creation_request</a></div><div class="ttdef"><b>Definition</b> gtpu_teid_pool_factory.h:29</div></div>
<div class="ttc" id="astructsrsran_1_1gtpu__demux__creation__request_html"><div class="ttname"><a href="../../d8/d43/structsrsran_1_1gtpu__demux__creation__request.html">srsran::gtpu_demux_creation_request</a></div><div class="ttdef"><b>Definition</b> gtpu_demux_factory.h:32</div></div>
<div class="ttc" id="astructsrsran_1_1gtpu__echo__creation__message_html"><div class="ttname"><a href="../../d1/d58/structsrsran_1_1gtpu__echo__creation__message.html">srsran::gtpu_echo_creation_message</a></div><div class="ttdef"><b>Definition</b> gtpu_echo_factory.h:34</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1cu__up__configuration_html_a398c4f4a552908c709ca735fb62ccf29"><div class="ttname"><a href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#a398c4f4a552908c709ca735fb62ccf29">srsran::srs_cu_up::cu_up_configuration::dl_executor</a></div><div class="ttdeci">task_executor * dl_executor</div><div class="ttdoc">CU-UP executor for DL data flow.</div><div class="ttdef"><b>Definition</b> cu_up_configuration.h:74</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1cu__up__configuration_html_a461dd4774adb59857a0c5c8d276fdcdc"><div class="ttname"><a href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#a461dd4774adb59857a0c5c8d276fdcdc">srsran::srs_cu_up::cu_up_configuration::io_ul_executor</a></div><div class="ttdeci">task_executor * io_ul_executor</div><div class="ttdoc">CU-UP executor for UL data IO.</div><div class="ttdef"><b>Definition</b> cu_up_configuration.h:76</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1cu__up__configuration_html_a5e394382adf623b95a2546ccff3e58f2"><div class="ttname"><a href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#a5e394382adf623b95a2546ccff3e58f2">srsran::srs_cu_up::cu_up_configuration::ctrl_executor</a></div><div class="ttdeci">task_executor * ctrl_executor</div><div class="ttdoc">CU-UP executor for control.</div><div class="ttdef"><b>Definition</b> cu_up_configuration.h:73</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1cu__up__configuration_html_ac052008ef957490250e3db69af1b5dbf"><div class="ttname"><a href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#ac052008ef957490250e3db69af1b5dbf">srsran::srs_cu_up::cu_up_configuration::epoll_broker</a></div><div class="ttdeci">io_broker * epoll_broker</div><div class="ttdoc">IO broker to receive messages from a network gateway.</div><div class="ttdef"><b>Definition</b> cu_up_configuration.h:80</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1network__interface__config_html_a19ce76aaf4f9dcfd394d20ed08de021a"><div class="ttname"><a href="../../d0/d27/structsrsran_1_1srs__cu__up_1_1network__interface__config.html#a19ce76aaf4f9dcfd394d20ed08de021a">srsran::srs_cu_up::network_interface_config::n3_rx_max_mmsg</a></div><div class="ttdeci">int n3_rx_max_mmsg</div><div class="ttdoc">Maximum amount of packets received in a single syscall.</div><div class="ttdef"><b>Definition</b> cu_up_configuration.h:52</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1network__interface__config_html_a29aa65fd19d144e7a6112873f0f907d4"><div class="ttname"><a href="../../d0/d27/structsrsran_1_1srs__cu__up_1_1network__interface__config.html#a29aa65fd19d144e7a6112873f0f907d4">srsran::srs_cu_up::network_interface_config::n3_bind_port</a></div><div class="ttdeci">int n3_bind_port</div><div class="ttdoc">Local port to bind for connection from UPF to receive downlink user-plane traffic (N3 interface).</div><div class="ttdef"><b>Definition</b> cu_up_configuration.h:49</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1network__interface__config_html_ad265e95392f83decf5bb4a1faa485cba"><div class="ttname"><a href="../../d0/d27/structsrsran_1_1srs__cu__up_1_1network__interface__config.html#ad265e95392f83decf5bb4a1faa485cba">srsran::srs_cu_up::network_interface_config::n3_bind_addr</a></div><div class="ttdeci">std::string n3_bind_addr</div><div class="ttdoc">Local IP address to bind for connection from UPF to receive downlink user-plane traffic (N3 interface...</div><div class="ttdef"><b>Definition</b> cu_up_configuration.h:46</div></div>
<div class="ttc" id="astructsrsran_1_1udp__network__gateway__config_html"><div class="ttname"><a href="../../d0/dd7/structsrsran_1_1udp__network__gateway__config.html">srsran::udp_network_gateway_config</a></div><div class="ttdef"><b>Definition</b> udp_network_gateway.h:34</div></div>
<div class="ttc" id="astructsrsran_1_1udp__network__gateway__creation__message_html"><div class="ttname"><a href="../../df/d15/structsrsran_1_1udp__network__gateway__creation__message.html">srsran::udp_network_gateway_creation_message</a></div><div class="ttdef"><b>Definition</b> udp_network_gateway_factory.h:32</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa59f27f84795e201dcd7b22a5025487f" name="aa59f27f84795e201dcd7b22a5025487f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa59f27f84795e201dcd7b22a5025487f">&#9670;&#160;</a></span>~cu_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cu_up::~cu_up </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  206</span>{</div>
<div class="line"><span class="lineno">  207</span>  <a class="code hl_function" href="#a6c8bc9f0897168db36b7bdc83acaf767">stop</a>();</div>
<div class="line"><span class="lineno">  208</span>}</div>
<div class="ttc" id="aclasssrsran_1_1srs__cu__up_1_1cu__up_html_a6c8bc9f0897168db36b7bdc83acaf767"><div class="ttname"><a href="#a6c8bc9f0897168db36b7bdc83acaf767">srsran::srs_cu_up::cu_up::stop</a></div><div class="ttdeci">void stop() override</div><div class="ttdoc">Stop the CU-UP. This call is blocking and only returns once all tasks in the CU-UP are completed.</div><div class="ttdef"><b>Definition</b> cu_up_impl.cpp:161</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a168c8502e4f5421170c8bfb0821dd55c" name="a168c8502e4f5421170c8bfb0821dd55c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a168c8502e4f5421170c8bfb0821dd55c">&#9670;&#160;</a></span>e1ap_is_connected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> srsran::srs_cu_up::cu_up::e1ap_is_connected </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the state of the E1AP connection. </p>
<dl class="section return"><dt>Returns</dt><dd>True if E1AP is connected, false otherwise. </dd></dl>

<p>Implements <a class="el" href="../../dd/dd2/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__interface.html#a089e6d407377ca7c350a581fb4dd5f97">srsran::srs_cu_up::cu_up_e1ap_interface</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>{ <span class="keywordflow">return</span> e1ap_connected; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a710a273f49fa296c1bb2799e5e7bb2b5" name="a710a273f49fa296c1bb2799e5e7bb2b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a710a273f49fa296c1bb2799e5e7bb2b5">&#9670;&#160;</a></span>get_e1ap_message_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d65/classsrsran_1_1e1ap__message__handler.html">e1ap_message_handler</a> &amp; srsran::srs_cu_up::cu_up::get_e1ap_message_handler </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the E1AP message handler interface. </p>

<p>Implements <a class="el" href="../../dd/dd2/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__interface.html#af84bc7484d7fe48145bf7d56507167e9">srsran::srs_cu_up::cu_up_e1ap_interface</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>{ <span class="keywordflow">return</span> *e1ap; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a438d4df84c677d97e537f72abab429c1" name="a438d4df84c677d97e537f72abab429c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a438d4df84c677d97e537f72abab429c1">&#9670;&#160;</a></span>get_n3_bind_port()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d57/classsrsran_1_1optional.html">optional</a>&lt; uint16_t &gt; srsran::srs_cu_up::cu_up::get_n3_bind_port </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the N3 bind port. </p>

<p>Implements <a class="el" href="../../d1/d63/classsrsran_1_1srs__cu__up_1_1cu__up__interface.html#a0e6e16aec51f3422fdb81518611c9662">srsran::srs_cu_up::cu_up_interface</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>{ <span class="keywordflow">return</span> ngu_gw-&gt;get_bind_port(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a14a03ee10785cb4cf6c16a8c084e78a4" name="a14a03ee10785cb4cf6c16a8c084e78a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14a03ee10785cb4cf6c16a8c084e78a4">&#9670;&#160;</a></span>get_ngu_pdu_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/dc8/classsrsran_1_1gtpu__demux__rx__upper__layer__interface.html">gtpu_demux_rx_upper_layer_interface</a> &amp; srsran::srs_cu_up::cu_up::get_ngu_pdu_handler </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the NGu PDU handler interface. </p>
<dl class="section return"><dt>Returns</dt><dd>The NGu PDU handler interface. </dd></dl>

<p>Implements <a class="el" href="../../d7/d4d/classsrsran_1_1srs__cu__up_1_1cu__up__ngu__interface.html#a92f66d240ac61d05143e2b794b8f1976">srsran::srs_cu_up::cu_up_ngu_interface</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   72</span>{ <span class="keywordflow">return</span> *ngu_demux; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1362c97b6d2cb83314f074f0a20afd91" name="a1362c97b6d2cb83314f074f0a20afd91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1362c97b6d2cb83314f074f0a20afd91">&#9670;&#160;</a></span>handle_bearer_context_modification_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d48/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__modification__response.html">e1ap_bearer_context_modification_response</a> cu_up::handle_bearer_context_modification_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d3/d2b/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__modification__request.html">e1ap_bearer_context_modification_request</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new UE context and handle bearer modification request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The original bearer modification request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns message containing the index of the created UE and all response/failure message. </dd></dl>

<p>Implements <a class="el" href="../../dd/dd2/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__interface.html#ab19705ae49c7b18b898025f9c93f0e31">srsran::srs_cu_up::cu_up_e1ap_interface</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  362</span>{</div>
<div class="line"><span class="lineno">  363</span>  <a class="code hl_class" href="../../d1/d92/classsrsran_1_1srs__cu__up_1_1ue__context.html">ue_context</a>* ue_ctxt = ue_mng-&gt;find_ue(msg.ue_index);</div>
<div class="line"><span class="lineno">  364</span>  <span class="keywordflow">if</span> (ue_ctxt == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  365</span>    logger.error(<span class="stringliteral">&quot;Could not find UE context&quot;</span>);</div>
<div class="line"><span class="lineno">  366</span>    <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  367</span>  }</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>  ue_ctxt-&gt;get_logger().log_debug(<span class="stringliteral">&quot;Handling BearerContextModificationRequest&quot;</span>);</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>  <a class="code hl_struct" href="../../d3/d48/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__modification__response.html">e1ap_bearer_context_modification_response</a> response = {};</div>
<div class="line"><span class="lineno">  372</span>  response.ue_index                                  = ue_ctxt-&gt;get_index();</div>
<div class="line"><span class="lineno">  373</span>  response.success                                   = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>  <span class="keywordtype">bool</span> new_ul_tnl_info_required = msg.new_ul_tnl_info_required == std::string(<span class="stringliteral">&quot;required&quot;</span>);</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>  <span class="keywordflow">if</span> (msg.ng_ran_bearer_context_mod_request.has_value()) {</div>
<div class="line"><span class="lineno">  378</span>    <span class="comment">// Traverse list of PDU sessions to be setup/modified</span></div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pdu_session_item</a> :</div>
<div class="line"><span class="lineno">  380</span>         msg.ng_ran_bearer_context_mod_request.value().pdu_session_res_to_setup_mod_list) {</div>
<div class="line"><span class="lineno">  381</span>      ue_ctxt-&gt;get_logger().log_debug(<span class="stringliteral">&quot;Setup/Modification of {}&quot;</span>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pdu_session_item</a>.pdu_session_id);</div>
<div class="line"><span class="lineno">  382</span>      <a class="code hl_struct" href="../../dc/d23/structsrsran_1_1srs__cu__up_1_1pdu__session__setup__result.html">pdu_session_setup_result</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">session_result</a> = ue_ctxt-&gt;setup_pdu_session(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pdu_session_item</a>);</div>
<div class="line"><span class="lineno">  383</span>      process_successful_pdu_resource_setup_mod_outcome(response.pdu_session_resource_setup_list, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">session_result</a>);</div>
<div class="line"><span class="lineno">  384</span>      response.success &amp;= <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">session_result</a>.success; <span class="comment">// Update final result.</span></div>
<div class="line"><span class="lineno">  385</span>    }</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>    <span class="comment">// Traverse list of PDU sessions to be modified.</span></div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pdu_session_item</a> : msg.ng_ran_bearer_context_mod_request.value().pdu_session_res_to_modify_list) {</div>
<div class="line"><span class="lineno">  389</span>      ue_ctxt-&gt;get_logger().log_debug(<span class="stringliteral">&quot;Modifying {}&quot;</span>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pdu_session_item</a>.pdu_session_id);</div>
<div class="line"><span class="lineno">  390</span>      <a class="code hl_struct" href="../../d3/d79/structsrsran_1_1srs__cu__up_1_1pdu__session__modification__result.html">pdu_session_modification_result</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">session_result</a> =</div>
<div class="line"><span class="lineno">  391</span>          ue_ctxt-&gt;modify_pdu_session(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pdu_session_item</a>, new_ul_tnl_info_required);</div>
<div class="line"><span class="lineno">  392</span>      process_successful_pdu_resource_modification_outcome(response.pdu_session_resource_modified_list,</div>
<div class="line"><span class="lineno">  393</span>                                                           response.pdu_session_resource_failed_to_modify_list,</div>
<div class="line"><span class="lineno">  394</span>                                                           <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">session_result</a>,</div>
<div class="line"><span class="lineno">  395</span>                                                           logger);</div>
<div class="line"><span class="lineno">  396</span>      ue_ctxt-&gt;get_logger().log_debug(<span class="stringliteral">&quot;Modification {}&quot;</span>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">session_result</a>.success ? <span class="stringliteral">&quot;successful&quot;</span> : <span class="stringliteral">&quot;failed&quot;</span>);</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>      response.success &amp;= <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">session_result</a>.success; <span class="comment">// Update final result.</span></div>
<div class="line"><span class="lineno">  399</span>    }</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>    <span class="comment">// Traverse list of PDU sessions to be removed.</span></div>
<div class="line"><span class="lineno">  402</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pdu_session_item</a> : msg.ng_ran_bearer_context_mod_request.value().pdu_session_res_to_rem_list) {</div>
<div class="line"><span class="lineno">  403</span>      ue_ctxt-&gt;get_logger().log_info(<span class="stringliteral">&quot;Removing {}&quot;</span>, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pdu_session_item</a>);</div>
<div class="line"><span class="lineno">  404</span>      ue_ctxt-&gt;remove_pdu_session(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">pdu_session_item</a>);</div>
<div class="line"><span class="lineno">  405</span>      <span class="comment">// There is no IE to confirm successful removal.</span></div>
<div class="line"><span class="lineno">  406</span>    }</div>
<div class="line"><span class="lineno">  407</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  408</span>    ue_ctxt-&gt;get_logger().log_warning(<span class="stringliteral">&quot;Ignoring empty Bearer Context Modification Request&quot;</span>);</div>
<div class="line"><span class="lineno">  409</span>  }</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>  <span class="comment">// 3. Create response</span></div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>  response.success = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>  <span class="keywordflow">return</span> response;</div>
<div class="line"><span class="lineno">  416</span>}</div>
<div class="ttc" id="aclasssrsran_1_1srs__cu__up_1_1ue__context_html"><div class="ttname"><a href="../../d1/d92/classsrsran_1_1srs__cu__up_1_1ue__context.html">srsran::srs_cu_up::ue_context</a></div><div class="ttdoc">Context for a UE within the CU-UP with storage for all active PDU sessions.</div><div class="ttdef"><b>Definition</b> ue_context.h:47</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__modification__response_html"><div class="ttname"><a href="../../d3/d48/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__modification__response.html">srsran::srs_cu_up::e1ap_bearer_context_modification_response</a></div><div class="ttdoc">Response to a bearer context modification request including UE index for E1AP map.</div><div class="ttdef"><b>Definition</b> e1ap_cu_up_bearer_context_update.h:78</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1pdu__session__modification__result_html"><div class="ttname"><a href="../../d3/d79/structsrsran_1_1srs__cu__up_1_1pdu__session__modification__result.html">srsran::srs_cu_up::pdu_session_modification_result</a></div><div class="ttdef"><b>Definition</b> pdu_session_manager.h:61</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1pdu__session__setup__result_html"><div class="ttname"><a href="../../dc/d23/structsrsran_1_1srs__cu__up_1_1pdu__session__setup__result.html">srsran::srs_cu_up::pdu_session_setup_result</a></div><div class="ttdef"><b>Definition</b> pdu_session_manager.h:51</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2fc5743a0a0016ff9f7040b89ecf24e0" name="a2fc5743a0a0016ff9f7040b89ecf24e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fc5743a0a0016ff9f7040b89ecf24e0">&#9670;&#160;</a></span>handle_bearer_context_release_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> cu_up::handle_bearer_context_release_command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../d0/d62/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__release__command.html">e1ap_bearer_context_release_command</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle bearer release command and remove the associated UE context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The original bearer release command. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../dd/dd2/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__interface.html#ae930fdd3a0bd3b629938a6065024ba0c">srsran::srs_cu_up::cu_up_e1ap_interface</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  419</span>{</div>
<div class="line"><span class="lineno">  420</span>  <a class="code hl_class" href="../../d1/d92/classsrsran_1_1srs__cu__up_1_1ue__context.html">ue_context</a>* ue_ctxt = ue_mng-&gt;find_ue(msg.ue_index);</div>
<div class="line"><span class="lineno">  421</span>  <span class="keywordflow">if</span> (ue_ctxt == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  422</span>    logger.error(<span class="stringliteral">&quot;ue={}: Discarding E1 Bearer Context Release Command. UE context not found&quot;</span>, msg.ue_index);</div>
<div class="line"><span class="lineno">  423</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  424</span>  }</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>  ue_ctxt-&gt;get_logger().log_debug(<span class="stringliteral">&quot;Received E1 Bearer Context Release Command&quot;</span>);</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>  ue_mng-&gt;remove_ue(msg.ue_index);</div>
<div class="line"><span class="lineno">  429</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa91bb78cd9d8ae82db1500e7d7e3b254" name="aa91bb78cd9d8ae82db1500e7d7e3b254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa91bb78cd9d8ae82db1500e7d7e3b254">&#9670;&#160;</a></span>handle_bearer_context_setup_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d65/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__setup__response.html">e1ap_bearer_context_setup_response</a> cu_up::handle_bearer_context_setup_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">const</a> <a class="el" href="../../db/d21/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__setup__request.html">e1ap_bearer_context_setup_request</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new UE context and handle bearer setup request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The original bearer setup request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns message containing the index of the created UE and all response/failure message. </dd></dl>

<p>Implements <a class="el" href="../../dd/dd2/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__interface.html#ae37f9f5e9f1b9caaadfdeb332d3de36f">srsran::srs_cu_up::cu_up_e1ap_interface</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  319</span>{</div>
<div class="line"><span class="lineno">  320</span>  <a class="code hl_struct" href="../../da/d65/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__setup__response.html">e1ap_bearer_context_setup_response</a> response = {};</div>
<div class="line"><span class="lineno">  321</span>  response.ue_index                           = INVALID_UE_INDEX;</div>
<div class="line"><span class="lineno">  322</span>  response.success                            = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>  <span class="comment">// 1. Create new UE context</span></div>
<div class="line"><span class="lineno">  325</span>  <a class="code hl_struct" href="../../d1/d17/structsrsran_1_1srs__cu__up_1_1ue__context__cfg.html">ue_context_cfg</a> ue_cfg = {};</div>
<div class="line"><span class="lineno">  326</span>  fill_sec_as_config(ue_cfg.security_info, msg.security_info);</div>
<div class="line"><span class="lineno">  327</span>  ue_cfg.activity_level        = msg.activity_notif_level;</div>
<div class="line"><span class="lineno">  328</span>  ue_cfg.ue_inactivity_timeout = msg.ue_inactivity_timer;</div>
<div class="line"><span class="lineno">  329</span>  ue_cfg.qos                   = cfg.qos;</div>
<div class="line"><span class="lineno">  330</span>  <a class="code hl_class" href="../../d1/d92/classsrsran_1_1srs__cu__up_1_1ue__context.html">ue_context</a>* ue_ctxt          = ue_mng-&gt;add_ue(ue_cfg);</div>
<div class="line"><span class="lineno">  331</span>  <span class="keywordflow">if</span> (ue_ctxt == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  332</span>    logger.error(<span class="stringliteral">&quot;Could not create UE context&quot;</span>);</div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordflow">return</span> response;</div>
<div class="line"><span class="lineno">  334</span>  }</div>
<div class="line"><span class="lineno">  335</span>  ue_ctxt-&gt;get_logger().log_info(<span class="stringliteral">&quot;UE created&quot;</span>);</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>  <span class="comment">// 2. Handle bearer context setup request</span></div>
<div class="line"><span class="lineno">  338</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_struct" href="../../db/d3d/structsrsran_1_1srs__cu__up_1_1pdu__session.html">pdu_session</a> : msg.pdu_session_res_to_setup_list) {</div>
<div class="line"><span class="lineno">  339</span>    <a class="code hl_struct" href="../../dc/d23/structsrsran_1_1srs__cu__up_1_1pdu__session__setup__result.html">pdu_session_setup_result</a> result = ue_ctxt-&gt;setup_pdu_session(<a class="code hl_struct" href="../../db/d3d/structsrsran_1_1srs__cu__up_1_1pdu__session.html">pdu_session</a>);</div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordflow">if</span> (result.success) {</div>
<div class="line"><span class="lineno">  341</span>      process_successful_pdu_resource_setup_mod_outcome(response.pdu_session_resource_setup_list, result);</div>
<div class="line"><span class="lineno">  342</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  343</span>      <a class="code hl_struct" href="../../d7/db5/structsrsran_1_1e1ap__pdu__session__resource__failed__item.html">e1ap_pdu_session_resource_failed_item</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">res_failed_item</a>;</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">res_failed_item</a>.pdu_session_id = result.pdu_session_id;</div>
<div class="line"><span class="lineno">  346</span>      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">res_failed_item</a>.cause          = result.cause;</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>      response.pdu_session_resource_failed_list.emplace(result.pdu_session_id, <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">res_failed_item</a>);</div>
<div class="line"><span class="lineno">  349</span>    }</div>
<div class="line"><span class="lineno">  350</span>  }</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>  <span class="comment">// 3. Create response</span></div>
<div class="line"><span class="lineno">  353</span>  response.ue_index = ue_ctxt-&gt;get_index();</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>  response.success = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>  <span class="keywordflow">return</span> response;</div>
<div class="line"><span class="lineno">  358</span>}</div>
<div class="ttc" id="astructsrsran_1_1e1ap__pdu__session__resource__failed__item_html"><div class="ttname"><a href="../../d7/db5/structsrsran_1_1e1ap__pdu__session__resource__failed__item.html">srsran::e1ap_pdu_session_resource_failed_item</a></div><div class="ttdef"><b>Definition</b> e1ap_types.h:250</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__setup__response_html"><div class="ttname"><a href="../../da/d65/structsrsran_1_1srs__cu__up_1_1e1ap__bearer__context__setup__response.html">srsran::srs_cu_up::e1ap_bearer_context_setup_response</a></div><div class="ttdoc">Response to a bearer context setup request including UE index for E1AP map.</div><div class="ttdef"><b>Definition</b> e1ap_cu_up_bearer_context_update.h:46</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1pdu__session_html"><div class="ttname"><a href="../../db/d3d/structsrsran_1_1srs__cu__up_1_1pdu__session.html">srsran::srs_cu_up::pdu_session</a></div><div class="ttdoc">Context for PDU session with session-wide parameters and all contained DRBs.</div><div class="ttdef"><b>Definition</b> pdu_session.h:38</div></div>
<div class="ttc" id="astructsrsran_1_1srs__cu__up_1_1ue__context__cfg_html"><div class="ttname"><a href="../../d1/d17/structsrsran_1_1srs__cu__up_1_1ue__context__cfg.html">srsran::srs_cu_up::ue_context_cfg</a></div><div class="ttdoc">UE context setup configuration.</div><div class="ttdef"><b>Definition</b> ue_context.h:38</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e5dcc0bdaa3f96308a8c8c5de7a1682" name="a1e5dcc0bdaa3f96308a8c8c5de7a1682"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e5dcc0bdaa3f96308a8c8c5de7a1682">&#9670;&#160;</a></span>on_e1ap_connection_drop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> cu_up::on_e1ap_connection_drop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notifies the CU-CP about a dropped E1AP connection. </p>

<p>Implements <a class="el" href="../../d8/d5f/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__connection__notifier.html#ab70824ed3458bbaa2a5bc679c2883e46">srsran::srs_cu_up::cu_up_e1ap_connection_notifier</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  453</span>{</div>
<div class="line"><span class="lineno">  454</span>  e1ap_connected = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  455</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae010f6bfb6d8e06af6cef11f12e9d5f0" name="ae010f6bfb6d8e06af6cef11f12e9d5f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae010f6bfb6d8e06af6cef11f12e9d5f0">&#9670;&#160;</a></span>on_e1ap_connection_establish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> cu_up::on_e1ap_connection_establish </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notifies the CU-UP about a successful E1AP connection. </p>

<p>Implements <a class="el" href="../../d8/d5f/classsrsran_1_1srs__cu__up_1_1cu__up__e1ap__connection__notifier.html#a29bdf582b231daf2d0c59fc6e095fc34">srsran::srs_cu_up::cu_up_e1ap_connection_notifier</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  448</span>{</div>
<div class="line"><span class="lineno">  449</span>  e1ap_connected = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  450</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="add8be552c371a7798186306378403106" name="add8be552c371a7798186306378403106"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add8be552c371a7798186306378403106">&#9670;&#160;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> cu_up::start </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d1/d63/classsrsran_1_1srs__cu__up_1_1cu__up__interface.html">srsran::srs_cu_up::cu_up_interface</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  127</span>{</div>
<div class="line"><span class="lineno">  128</span>  logger.info(<span class="stringliteral">&quot;CU-UP starting...&quot;</span>);</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>  std::unique_lock&lt;std::mutex&gt; lock(mutex);</div>
<div class="line"><span class="lineno">  131</span>  <span class="keywordflow">if</span> (std::exchange(running, <span class="keyword">true</span>)) {</div>
<div class="line"><span class="lineno">  132</span>    logger.warning(<span class="stringliteral">&quot;CU-UP already started. Ignoring start request&quot;</span>);</div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  134</span>  }</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>  std::promise&lt;void&gt; p;</div>
<div class="line"><span class="lineno">  137</span>  std::future&lt;void&gt;  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fut</a> = p.get_future();</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> cfg.<a class="code hl_variable" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#a5e394382adf623b95a2546ccff3e58f2">ctrl_executor</a>-&gt;<a class="code hl_function" href="../../df/dc3/classsrsran_1_1task__executor.html#a7ce182401ef2d2b419bfbed5b5e488f7">execute</a>([<span class="keyword">this</span>, &amp;p]() {</div>
<div class="line"><span class="lineno">  140</span>        main_ctrl_loop.schedule([this, &amp;p](coro_context&lt;async_task&lt;void&gt;&gt;&amp; ctx) {</div>
<div class="line"><span class="lineno">  141</span>          CORO_BEGIN(ctx);</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>          <span class="comment">// Connect to CU-CP and send E1 Setup Request and await for E1 setup response.</span></div>
<div class="line"><span class="lineno">  144</span>          CORO_AWAIT(launch_async&lt;initial_cu_up_setup_routine&gt;(cfg));</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>          <span class="comment">// Signal start() caller thread that the operation is complete.</span></div>
<div class="line"><span class="lineno">  147</span>          p.set_value();</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>          CORO_RETURN();</div>
<div class="line"><span class="lineno">  150</span>        });</div>
<div class="line"><span class="lineno">  151</span>      })) {</div>
<div class="line"><span class="lineno">  152</span>    <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a630688b51219f81c5a47ec5650326afc">report_fatal_error</a>(<span class="stringliteral">&quot;Unable to initiate CU-UP setup routine&quot;</span>);</div>
<div class="line"><span class="lineno">  153</span>  }</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>  <span class="comment">// Block waiting for CU-UP setup to complete.</span></div>
<div class="line"><span class="lineno">  156</span>  <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">fut</a>.wait();</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>  logger.info(<span class="stringliteral">&quot;CU-UP started successfully&quot;</span>);</div>
<div class="line"><span class="lineno">  159</span>}</div>
<div class="ttc" id="aclasssrsran_1_1task__executor_html_a7ce182401ef2d2b419bfbed5b5e488f7"><div class="ttname"><a href="../../df/dc3/classsrsran_1_1task__executor.html#a7ce182401ef2d2b419bfbed5b5e488f7">srsran::task_executor::execute</a></div><div class="ttdeci">virtual SRSRAN_NODISCARD bool execute(unique_task task)=0</div></div>
<div class="ttc" id="anamespacesrsran_html_a630688b51219f81c5a47ec5650326afc"><div class="ttname"><a href="../../d9/def/namespacesrsran.html#a630688b51219f81c5a47ec5650326afc">srsran::report_fatal_error</a></div><div class="ttdeci">void report_fatal_error(const char *reason_fmt, Args &amp;&amp;... args) noexcept</div><div class="ttdoc">Reports a fatal error and handles the application shutdown. This function is intended to be used for ...</div><div class="ttdef"><b>Definition</b> error_handling.h:57</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c8bc9f0897168db36b7bdc83acaf767" name="a6c8bc9f0897168db36b7bdc83acaf767"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c8bc9f0897168db36b7bdc83acaf767">&#9670;&#160;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">void</a> cu_up::stop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stop the CU-UP. This call is blocking and only returns once all tasks in the CU-UP are completed. </p>

<p>Implements <a class="el" href="../../d1/d63/classsrsran_1_1srs__cu__up_1_1cu__up__interface.html#a132844fe416411b47910fa4309f07381">srsran::srs_cu_up::cu_up_interface</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  162</span>{</div>
<div class="line"><span class="lineno">  163</span>  std::unique_lock&lt;std::mutex&gt; lock(mutex);</div>
<div class="line"><span class="lineno">  164</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> std::exchange(running, <span class="keyword">false</span>)) {</div>
<div class="line"><span class="lineno">  165</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  166</span>  }</div>
<div class="line"><span class="lineno">  167</span>  logger.debug(<span class="stringliteral">&quot;CU-UP stopping...&quot;</span>);</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>  <span class="comment">// CU-UP stops listening to new GTPU Rx PDUs.</span></div>
<div class="line"><span class="lineno">  170</span>  <span class="keywordflow">if</span> (ngu_gw) {</div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> cfg.<a class="code hl_variable" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#ac052008ef957490250e3db69af1b5dbf">epoll_broker</a>-&gt;<a class="code hl_function" href="../../db/d9d/classsrsran_1_1io__broker.html#af6d46fbb345d9dbb3ea299748d7ce28f">unregister_fd</a>(ngu_gw-&gt;get_socket_fd())) {</div>
<div class="line"><span class="lineno">  172</span>      logger.warning(<span class="stringliteral">&quot;Failed to stop NG-U gateway socket&quot;</span>);</div>
<div class="line"><span class="lineno">  173</span>    }</div>
<div class="line"><span class="lineno">  174</span>  }</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>  <a class="code hl_class" href="../../d0/dfd/classsrsran_1_1eager__async__task.html">eager_async_task&lt;void&gt;</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">main_loop</a>;</div>
<div class="line"><span class="lineno">  177</span>  std::atomic&lt;bool&gt;      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">main_loop_stopped</a>{<span class="keyword">false</span>};</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>  <span class="keyword">auto</span> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">stop_cu_up_main_loop</a> = [<span class="keyword">this</span>, &amp;<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">main_loop</a>, &amp;<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">main_loop_stopped</a>]() <span class="keyword">mutable</span> {</div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">main_loop</a>.empty()) {</div>
<div class="line"><span class="lineno">  181</span>      <span class="comment">// First call. Initiate shutdown operations.</span></div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>      <span class="comment">// Stop main control loop and communicate back with the caller thread.</span></div>
<div class="line"><span class="lineno">  184</span>      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">main_loop</a> = main_ctrl_loop.request_stop();</div>
<div class="line"><span class="lineno">  185</span>    }</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">main_loop</a>.ready()) {</div>
<div class="line"><span class="lineno">  188</span>      <span class="comment">// If the main loop finished, return back to the caller.</span></div>
<div class="line"><span class="lineno">  189</span>      <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">main_loop_stopped</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  190</span>    }</div>
<div class="line"><span class="lineno">  191</span>  };</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>  <span class="comment">// Wait until the all tasks of the main loop are completed and main loop has stopped.</span></div>
<div class="line"><span class="lineno">  194</span>  <span class="keywordflow">while</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> <a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">main_loop_stopped</a>) {</div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">not</a> cfg.<a class="code hl_variable" href="../../d2/d07/structsrsran_1_1srs__cu__up_1_1cu__up__configuration.html#a5e394382adf623b95a2546ccff3e58f2">ctrl_executor</a>-&gt;<a class="code hl_function" href="../../df/dc3/classsrsran_1_1task__executor.html#a7ce182401ef2d2b419bfbed5b5e488f7">execute</a>(<a class="code hl_function" href="../../d9/def/namespacesrsran.html#a58e7c9f2c51a9ad6a0899b46d5315723">stop_cu_up_main_loop</a>)) {</div>
<div class="line"><span class="lineno">  196</span>      logger.error(<span class="stringliteral">&quot;Unable to stop CU-UP&quot;</span>);</div>
<div class="line"><span class="lineno">  197</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  198</span>    }</div>
<div class="line"><span class="lineno">  199</span>    std::this_thread::sleep_for(std::chrono::milliseconds(10));</div>
<div class="line"><span class="lineno">  200</span>  }</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>  logger.info(<span class="stringliteral">&quot;CU-UP stopped successfully&quot;</span>);</div>
<div class="line"><span class="lineno">  203</span>}</div>
<div class="ttc" id="aclasssrsran_1_1eager__async__task_html"><div class="ttname"><a href="../../d0/dfd/classsrsran_1_1eager__async__task.html">srsran::eager_async_task</a></div><div class="ttdef"><b>Definition</b> eager_async_task.h:34</div></div>
<div class="ttc" id="aclasssrsran_1_1io__broker_html_af6d46fbb345d9dbb3ea299748d7ce28f"><div class="ttname"><a href="../../db/d9d/classsrsran_1_1io__broker.html#af6d46fbb345d9dbb3ea299748d7ce28f">srsran::io_broker::unregister_fd</a></div><div class="ttdeci">virtual SRSRAN_NODISCARD bool unregister_fd(int fd)=0</div><div class="ttdoc">Unregister a file descriptor from the IO interface.</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/cu_up/<a class="el" href="../../d1/d06/cu__up__impl_8h_source.html">cu_up_impl.h</a></li>
<li>lib/cu_up/<b>cu_up_impl.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
